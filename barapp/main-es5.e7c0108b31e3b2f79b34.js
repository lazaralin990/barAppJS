function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=_unsupportedIterableToArray(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _construct(t,e,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_superPropBase(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"1XSQ":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("SVse"),o=n("3N8a"),a=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?_get(_getPrototypeOf(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(o.a),s=n("IjjT"),u=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(s.a))(a),l=n("D0XW"),c=n("HDdC"),h=n("vkgz"),f=1,d={},p=function(t){var e=f++;return d[e]=t,Promise.resolve().then((function(){return function(t){var e=d[t];e&&e()}(e)})),e},v=function(t){delete d[t]},y=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _createClass(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=p(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return _get(_getPrototypeOf(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(v(e),t.scheduled=void 0)}}]),n}(o.a),g=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(s.a))(y),m=n("DH7j"),_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return _classCallCheck(this,n),(r=e.call(this)).source=t,r.delayTime=o,r.scheduler=a,i=o,(Object(m.a)(i)||!(i-parseFloat(i)+1>=0)||o<0)&&(r.delayTime=0),a&&"function"==typeof a.schedule||(r.scheduler=g),r}return _createClass(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(c.a),b=function(){function t(e,n){_classCallCheck(this,t),this.scheduler=e,this.delay=n}return _createClass(t,[{key:"call",value:function(t,e){return new _(e,this.delay,this.scheduler).subscribe(t)}}]),t}(),w=n("pxpQ");n.d(e,"b",(function(){return C})),n.d(e,"a",(function(){return k})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return A}));var C=new r.o("angularfire2.realtimeDatabaseURL"),k=C;function E(){}var S=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;_classCallCheck(this,t),this.zone=e,this.delegate=n}return _createClass(t,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(t,e,n){var r=this.zone;return this.delegate.schedule((function(e){var n=this;r.runGuarded((function(){t.apply(n,[e])}))}),e,n)}}]),t}(),T=function(){function t(e){_classCallCheck(this,t),this.zone=e,this.task=null}return _createClass(t,[{key:"call",value:function(t,e){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run((function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",E,{},E,E)})),e.pipe(Object(h.a)(n,n,n)).subscribe(t).add(n)}},{key:"unscheduleTask",value:function(){null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)}}]),t}(),I=function t(e){_classCallCheck(this,t),this.ngZone=e,this.outsideAngular=e.runOutsideAngular((function(){return new S(Zone.current)})),this.insideAngular=e.run((function(){return new S(Zone.current,l.a)}))};function A(t,e){return function(n){return Object(i.t)(e)&&(n=n.lift(new T(t.ngZone))),n.pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new b(t,e))}}(t.outsideAngular),Object(w.a)(t.insideAngular))}}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){return _classCallCheck(this,n),e.call(this)}return _createClass(n,[{key:"schedule",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),n}(n("quSY").a);n.d(e,"a",(function(){return i}));var i=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(r)},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),a=n("lJxs"),s=n("Cfvw");function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(r){return r.pipe(u((function(n,r){return Object(s.a)(t(n,r)).pipe(Object(a.a)((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new l(t,n))})}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,t),this.project=e,this.concurrent=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}]),t}(),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var i=new o.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,t,e,n,i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyComplete",value:function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(i.a)},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return _createClass(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(n("7o/Q").a)},6233:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n("O0a9"))},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,a=n("q/0M"),s=n("zVF4"),u=n("S+S0"),l=n("x7I3"),c=o.SDK_VERSION,h=function(){function t(t){this.uid=t}return t.prototype.t=function(){return null!=this.uid},t.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();h.UNAUTHENTICATED=new h(null),h.i=new h("google-credentials-uid"),h.h=new h("first-party-uid");var f={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i.__extends(e,t),e}(Error),p=function(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t},v=function(){function t(){this.u=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype._=function(){},t.prototype.l=function(t){this.u=t,t(h.UNAUTHENTICATED)},t.prototype.T=function(){this.u=null},t}(),y=function(){function t(t){var e=this;this.I=null,this.currentUser=h.UNAUTHENTICATED,this.R=!1,this.A=0,this.u=null,this.forceRefresh=!1,this.I=function(){e.A++,e.currentUser=e.m(),e.R=!0,e.u&&e.u(e.currentUser)},this.A=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.I):(this.I(null),t.get().then((function(t){e.auth=t,e.I&&e.auth.addAuthTokenListener(e.I)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.A,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.A!==e)throw new d(f.ABORTED,"getToken aborted due to token change.");return n?(Ee("string"==typeof n.accessToken),new p(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype._=function(){this.forceRefresh=!0},t.prototype.l=function(t){this.u=t,this.R&&t(this.currentUser)},t.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.I),this.I=null,this.u=null},t.prototype.m=function(){var t=this.auth&&this.auth.getUid();return Ee(null===t||"string"==typeof t),new h(t)},t}(),g=function(){function t(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=h.h}return Object.defineProperty(t.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),m=function(){function t(t,e){this.P=t,this.V=e}return t.prototype.getToken=function(){return Promise.resolve(new g(this.P,this.V))},t.prototype.l=function(t){t(h.h)},t.prototype.T=function(){},t.prototype._=function(){},t}(),_=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new d(f.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new d(f.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new d(f.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new d(f.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.p=function(t){return this.seconds===t.seconds?Te(this.nanoseconds,t.nanoseconds):Te(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),b=function(){function t(t){this.timestamp=t}return t.v=function(e){return new t(e)},t.S=function(){return t.MIN},t.prototype.D=function(t){return this.timestamp.p(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.C=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.F=function(){return this.timestamp},t}();b.MIN=new b(new _(0,0));var w=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ke(),void 0===n?n=t.length-e:n>t.length-e&&ke(),this.segments=t,this.offset=e,this.N=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.N},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.k(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.$(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.M=function(t){return this.$(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.L=function(){return this.$(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.B=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.q=function(){return 0===this.length},t.prototype.U=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.W=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.j=function(){return this.segments.slice(this.offset,this.limit())},t.k=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.$=function(t,n,r){return new e(t,n,r)},e.prototype.K=function(){return this.j().join("/")},e.prototype.toString=function(){return this.K()},e.G=function(t){if(t.indexOf("//")>=0)throw new d(f.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e}(w);C.H=new C([]);var k=/^[_a-zA-Z][_a-zA-Z0-9]*$/,E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.$=function(t,n,r){return new e(t,n,r)},e.Y=function(t){return k.test(t)},e.prototype.K=function(){return this.j().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.Y(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.K()},e.prototype.J=function(){return 1===this.length&&"__name__"===this.get(0)},e.X=function(){return new e(["__name__"])},e.Z=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new d(f.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new d(f.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new d(f.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new d(f.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e}(w);E.H=new E([]);var S=function(){function t(t){this.path=t}return t.tt=function(e){return new t(C.G(e).M(5))},t.prototype.et=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===C.k(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.k=function(t,e){return C.k(t.path,e.path)},t.st=function(t){return t.length%2==0},t.it=function(e){return new t(new C(e.slice()))},t}();S.EMPTY=new S(new C([]));var T=function(){function t(t,e){this.k=t,this.root=e||A.EMPTY}return t.prototype.nt=function(e,n){return new t(this.k,this.root.nt(e,n,this.k).rt(null,null,A.ht,null,null))},t.prototype.remove=function(e){return new t(this.k,this.root.remove(e,this.k).rt(null,null,A.ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.q();){var n=this.k(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.q();){var r=this.k(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.q=function(){return this.root.q()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.ot=function(){return this.root.ot()},t.prototype.at=function(){return this.root.at()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ct=function(t){return this.root.ct(t)},t.prototype._t=function(){return new I(this.root,null,this.k,!1)},t.prototype.lt=function(t){return new I(this.root,t,this.k,!1)},t.prototype.dt=function(){return new I(this.root,null,this.k,!0)},t.prototype.ft=function(t){return new I(this.root,t,this.k,!0)},t}(),I=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.q();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.q();)this.Et.push(t),t=t.right;else for(t=t.right;!t.q();)this.Et.push(t),t=t.left;return e},t.prototype.wt=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),A=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.rt=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.q=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ct=function(t){return this.right.ct(t)||t(this.key,this.value)||this.left.ct(t)},t.prototype.min=function(){return this.left.q()?this:this.left.min()},t.prototype.ot=function(){return this.min().key},t.prototype.at=function(){return this.right.q()?this.key:this.right.at()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.rt(null,null,null,r.left.nt(t,e,n),null):0===i?r.rt(null,e,null,null,null):r.rt(null,null,null,null,r.right.nt(t,e,n))).At()},t.prototype.Pt=function(){if(this.left.q())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.gt()),(e=e.rt(null,null,null,e.left.Pt(),null)).At()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.q()||i.left.Vt()||i.left.left.Vt()||(i=i.gt()),i=i.rt(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.pt()),i.right.q()||i.right.Vt()||i.right.left.Vt()||(i=i.yt()),0===n(e,i.key)){if(i.right.q())return t.EMPTY;r=i.right.min(),i=i.rt(r.key,r.value,null,null,i.right.Pt())}i=i.rt(null,null,null,null,i.right.remove(e,n))}return i.At()},t.prototype.Vt=function(){return this.color},t.prototype.At=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.left.left.Vt()&&(t=t.pt()),t.left.Vt()&&t.right.Vt()&&(t=t.vt()),t},t.prototype.gt=function(){var t=this.vt();return t.right.left.Vt()&&(t=(t=(t=t.rt(null,null,null,null,t.right.pt())).bt()).vt()),t},t.prototype.yt=function(){var t=this.vt();return t.left.left.Vt()&&(t=(t=t.pt()).vt()),t},t.prototype.bt=function(){var e=this.rt(null,null,t.RED,null,this.right.left);return this.right.rt(null,null,this.color,e,null)},t.prototype.pt=function(){var e=this.rt(null,null,t.RED,this.left.right,null);return this.left.rt(null,null,this.color,null,e)},t.prototype.vt=function(){var t=this.left.rt(null,null,!this.left.color,null,null),e=this.right.rt(null,null,!this.right.color,null,null);return this.rt(null,null,!this.color,t,e)},t.prototype.St=function(){var t=this.Dt();return Math.pow(2,t)<=this.size+1},t.prototype.Dt=function(){if(this.Vt()&&this.left.Vt())throw ke();if(this.right.Vt())throw ke();var t=this.left.Dt();if(t!==this.right.Dt())throw ke();return t+(this.Vt()?0:1)},t}();A.EMPTY=null,A.RED=!0,A.ht=!1,A.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ke()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ke()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ke()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ke()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ke()},enumerable:!0,configurable:!0}),t.prototype.rt=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new A(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.q=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ct=function(t){return!1},t.prototype.ot=function(){return null},t.prototype.at=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.St=function(){return!0},t.prototype.Dt=function(){return 0},t}());var O=function(){function t(t){this.k=t,this.data=new T(this.k)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ot()},t.prototype.last=function(){return this.data.at()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.Ct=function(t,e){for(var n=this.data.lt(t[0]);n.wt();){var r=n.It();if(this.k(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.lt(e):this.data._t();n.wt();)if(!t(n.It().key))return},t.prototype.Nt=function(t){var e=this.data.lt(t);return e.wt()?e.It().key:null},t.prototype._t=function(){return new x(this.data._t())},t.prototype.lt=function(t){return new x(this.data.lt(t))},t.prototype.add=function(t){return this.rt(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.rt(this.data.remove(t)):this},t.prototype.q=function(){return this.data.q()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.wt();){var i=n.It().key,o=r.It().key;if(0!==this.k(i,o))return!1}return!0},t.prototype.j=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.rt=function(e){var n=new t(this.k);return n.data=e,n},t}(),x=function(){function t(t){this.$t=t}return t.prototype.It=function(){return this.$t.It().key},t.prototype.wt=function(){return this.$t.wt()},t}();function N(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function D(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var R=function(){function t(t){this.Mt=t}return t.fromBase64String=function(e){return new t(ye.Lt().atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return ye.Lt().btoa(this.Mt)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Mt)},t.prototype.Ot=function(){return 2*this.Mt.length},t.prototype.D=function(t){return Te(this.Mt,t.Mt)},t.prototype.isEqual=function(t){return this.Mt===t.Mt},t}();function M(t){return null==t}function L(t){return-0===t&&1/t==-1/0}function j(t){return"number"==typeof t&&Number.isInteger(t)&&!L(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function F(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function U(t){var e=K(t.mapValue.fields.__local_write_time__.timestampValue);return new _(e.seconds,e.nanos)}R.xt=new R("");var V=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function q(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?F(t)?4:10:ke()}function B(t,e){var n=q(t);if(n!==q(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return U(t).isEqual(U(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=K(t.timestampValue),r=K(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Y(t.bytesValue).isEqual(Y(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Q(t.geoPointValue.latitude)===Q(e.geoPointValue.latitude)&&Q(t.geoPointValue.longitude)===Q(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Q(t.integerValue)===Q(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Q(t.doubleValue),r=Q(e.doubleValue);return n===r?L(n)===L(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ie(t.arrayValue.values||[],e.arrayValue.values||[],B);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(N(n)!==N(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!B(n[i],r[i])))return!1;return!0}(t,e);default:return ke()}}function H(t,e){return void 0!==(t.values||[]).find((function(t){return B(t,e)}))}function z(t,e){var n=q(t),r=q(e);if(n!==r)return Te(n,r);switch(n){case 0:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Q(t.integerValue||t.doubleValue),r=Q(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return W(t.timestampValue,e.timestampValue);case 4:return W(U(t),U(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Y(t),r=Y(e);return n.D(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Te(n[i],r[i]);if(0!==o)return o}return Te(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Te(Q(t.latitude),Q(e.latitude));return 0!==n?n:Te(Q(t.longitude),Q(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=z(n[i],r[i]);if(o)return o}return Te(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Te(r[a],o[a]);if(0!==s)return s;var u=z(n[r[a]],i[o[a]]);if(0!==u)return u}return Te(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ke()}}function W(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Te(t,e);var n=K(t),r=K(e),i=Te(n.seconds,r.seconds);return 0!==i?i:Te(n.nanos,r.nanos)}function G(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=K(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Y(e.bytesValue).toBase64():"referenceValue"in e?S.tt(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):ke();var n}(t)}function K(t){if(Ee(!!t),"string"==typeof t){var e=0,n=V.exec(t);if(Ee(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Q(t.seconds),nanos:Q(t.nanos)}}function Q(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Y(t){return"string"==typeof t?R.fromBase64String(t):R.fromUint8Array(t)}function J(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.K()}}function X(t){return!!t&&"integerValue"in t}function Z(t){return!!t&&"arrayValue"in t}function $(t){return!!t&&"nullValue"in t}function tt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function et(t){return!!t&&"mapValue"in t}var nt=function(){function t(){}return t.prototype.Bt=function(t,e){return function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,t)},t.prototype.qt=function(t,e){return e},t.prototype.Ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();nt.instance=new nt;var rt=function(){function t(t){this.elements=t}return t.prototype.Bt=function(t,e){return this.apply(t)},t.prototype.qt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=at(t),n=function(t){e.some((function(e){return B(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Ie(this.elements,e.elements,B)},t}(),it=function(){function t(t){this.elements=t}return t.prototype.Bt=function(t,e){return this.apply(t)},t.prototype.qt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=at(t),n=function(t){e=e.filter((function(e){return!B(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Ut=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Ie(this.elements,e.elements,B)},t}(),ot=function(){function t(t,e){this.serializer=t,this.Qt=e}return t.prototype.Bt=function(t,e){var n=this.Ut(t),r=this.asNumber(n)+this.asNumber(this.Qt);return X(n)&&X(this.Qt)?this.serializer.Wt(r):this.serializer.jt(r)},t.prototype.qt=function(t,e){return e},t.prototype.Ut=function(t){return X(e=t)||function(t){return!!t&&"doubleValue"in t}(e)?t:{integerValue:0};var e},t.prototype.isEqual=function(e){return e instanceof t&&B(this.Qt,e.Qt)},t.prototype.asNumber=function(t){return Q(t.integerValue||t.doubleValue)},t}();function at(t){return Z(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var st=function(){function t(t){this.fields=t}return t.Kt=function(e){return new t(e)},t.Gt=function(e){var n=new O(E.k);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.zt=function(t){var e=!1;return this.fields.forEach((function(n){n.U(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),ut=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),lt=function(t,e){this.version=t,this.transformResults=e},ct=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ht",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Yt=function(t){return void 0!==this.updateTime?t instanceof bt&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof bt},t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();ct.NONE=new ct;var ht=function(){function t(){}return t.prototype.Jt=function(t){},t.Xt=function(t){return t instanceof bt?t.version:b.MIN},t}(),ft=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Zt=r,i.type=0,i}return i.__extends(e,t),e.prototype.qt=function(t,e){return this.Jt(t),new bt(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){if(this.Jt(t),!this.Zt.Yt(t))return t;var r=ht.Xt(t);return new bt(this.key,r,this.value,{te:!0})},e.prototype.ee=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Zt.isEqual(t.Zt)},e}(ht),dt=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.se=r,o.Zt=i,o.type=1,o}return i.__extends(e,t),e.prototype.qt=function(t,e){if(this.Jt(t),!this.Zt.Yt(t))return new Ct(this.key,e.version);var n=this.ie(t);return new bt(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){if(this.Jt(t),!this.Zt.Yt(t))return t;var r=ht.Xt(t),i=this.ie(t);return new bt(this.key,r,i,{te:!0})},e.prototype.ee=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.se.isEqual(t.se)&&this.Zt.isEqual(t.Zt)},e.prototype.ie=function(t){var e;return e=t instanceof bt?t.data():gt.EMPTY,this.ne(e)},e.prototype.ne=function(t){var e=this,n=t.re();return this.se.fields.forEach((function(t){if(!t.q()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.he()},e}(ht),pt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Zt=ct.exists(!0),r}return i.__extends(e,t),e.prototype.qt=function(t,e){if(this.Jt(t),Ee(null!=e.transformResults),!this.Zt.Yt(t))return new Ct(this.key,e.version);var n=this.oe(t),r=this.ae(t,e.transformResults),i=e.version,o=this.ue(n.data(),r);return new bt(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){if(this.Jt(t),!this.Zt.Yt(t))return t;var r=this.oe(t),i=this.ce(n,t,e),o=this.ue(r.data(),i);return new bt(this.key,r.version,o,{te:!0})},e.prototype.ee=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof bt?t.field(i.field):void 0,a=i.transform.Ut(o||null);null!=a&&(e=null==e?gt._e().set(i.field,a):e.set(i.field,a))}return e?e.he():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Ie(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.Zt.isEqual(t.Zt)},e.prototype.oe=function(t){return t},e.prototype.ae=function(t,e){var n=[];Ee(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof bt&&(a=t.field(i.field)),n.push(o.qt(a,e[r]))}return n},e.prototype.ce=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof bt&&(u=e.field(a.field)),null===u&&n instanceof bt&&(u=n.field(a.field)),r.push(s.Bt(u,t))}return r},e.prototype.ue=function(t,e){for(var n=t.re(),r=0;r<this.fieldTransforms.length;r++)n.set(this.fieldTransforms[r].field,e[r]);return n.he()},e}(ht),vt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Zt=n,r.type=3,r}return i.__extends(e,t),e.prototype.qt=function(t,e){return this.Jt(t),new wt(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.Bt=function(t,e,n){return this.Jt(t),this.Zt.Yt(t)?new wt(this.key,b.S()):t},e.prototype.ee=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},e}(ht),yt=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Zt=n,r.type=4,r}return i.__extends(e,t),e.prototype.qt=function(t,e){ke()},e.prototype.Bt=function(t,e,n){ke()},e.prototype.ee=function(t){ke()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},e}(ht),gt=function(){function t(t){this.proto=t}return t._e=function(){return t.EMPTY.re()},t.prototype.field=function(t){if(t.q())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!et(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.B()])||null},t.prototype.se=function(){return this.le(this.proto.mapValue)},t.prototype.le=function(t){var e=this,n=new O(E.k);return D(t.fields||{},(function(t,r){var i=new E([t]);if(10===q(r)){var o=e.le(r.mapValue).fields;o.q()?n=n.add(i):o.forEach((function(t){n=n.add(i.child(t))}))}else n=n.add(i)})),st.Kt(n)},t.prototype.isEqual=function(t){return B(this.proto,t.proto)},t.prototype.re=function(){return new mt(this)},t}();gt.EMPTY=new gt({mapValue:{}});var mt=function(){function t(t){this.de=t,this.fe=new Map}return t.prototype.set=function(t,e){return this.Te(t,e),this},t.prototype.delete=function(t){return this.Te(t,null),this},t.prototype.Te=function(t,e){for(var n=this.fe,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===q(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.B(),e)},t.prototype.he=function(){var t=this.Ee(E.H,this.fe);return null!=t?new gt(t):this.de},t.prototype.Ee=function(t,e){var n=this,r=!1,i=this.de.field(t),o=et(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.Ee(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}(),_t=function(){function t(t,e){this.key=t,this.version=e}return t.Ie=function(t,e){return S.k(t.key,e.key)},t}(),bt=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).we=r,o.te=!!i.te,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return i.__extends(e,t),e.prototype.field=function(t){return this.we.field(t)},e.prototype.data=function(){return this.we},e.prototype.Re=function(){return this.we.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.te===t.te&&this.hasCommittedMutations===t.hasCommittedMutations&&this.we.isEqual(t.we)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.we.toString()+", {hasLocalMutations: "+this.te+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.te||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.Ae=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?z(r,i):ke()},e}(_t),wt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return i.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(_t),Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(_t),kt=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.me=null}return t.prototype.canonicalId=function(){if(null===this.me){var t=this.path.K();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map((function(t){return t.canonicalId()})).join(","),t+="|ob:",t+=this.orderBy.map((function(t){return t.canonicalId()})).join(","),M(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.me=t}return this.me},t.prototype.toString=function(){var t=this.path.K();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),M(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Pe=function(){return S.st(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),Et=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.Ve=n,this.filters=r,this.limit=i,this.ge=o,this.startAt=a,this.endAt=s,this.pe=null,this.ye=null,this.startAt&&this.be(this.startAt),this.endAt&&this.be(this.endAt)}return t.ve=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.pe){var t=this.Se(),e=this.De();if(null!==t&&null===e)this.pe=t.J()?[jt]:[new Lt(t),jt];else{this.pe=[];for(var n=!1,r=0,i=this.Ve;r<i.length;r++){var o=i[r];this.pe.push(o),o.field.J()&&(n=!0)}n||this.pe.push((this.Ve.length>0?this.Ve[this.Ve.length-1].dir:Dt.ASCENDING)===Dt.ASCENDING?jt:Ft)}}return this.pe},enumerable:!0,configurable:!0}),t.prototype.Ce=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.Ve.slice(),n,this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Fe=function(e){var n=this.Ve.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Ne=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.ke=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.$e=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,e,this.endAt)},t.prototype.Me=function(e){return new t(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,e)},t.prototype.Le=function(e){return new t(e,null,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},t.prototype.Oe=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Ve.length||1===this.Ve.length&&this.Ve[0].field.J())},t.prototype.canonicalId=function(){return this.xe().canonicalId()+"|lt:"+this.ge},t.prototype.toString=function(){return"Query(target="+this.xe().toString()+"; limitType="+this.ge+")"},t.prototype.isEqual=function(t){return this.xe().isEqual(t.xe())&&this.ge===t.ge},t.prototype.Be=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.J()}return 0},t.prototype.matches=function(t){return this.qe(t)&&this.Ue(t)&&this.Qe(t)&&this.We(t)},t.prototype.je=function(){return!M(this.limit)&&"F"===this.ge},t.prototype.Ke=function(){return!M(this.limit)&&"L"===this.ge},t.prototype.De=function(){return this.Ve.length>0?this.Ve[0].field:null},t.prototype.Se=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Tt&&n.Ge())return n.field}return null},t.prototype.ze=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Tt&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pe=function(){return this.xe().Pe()},t.prototype.He=function(){return null!==this.collectionGroup},t.prototype.xe=function(){if(!this.ye)if("F"===this.ge)this.ye=new kt(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new Lt(r.field,r.dir===Dt.DESCENDING?Dt.ASCENDING:Dt.DESCENDING))}var i=this.endAt?new Mt(this.endAt.position,!this.endAt.before):null,o=this.startAt?new Mt(this.startAt.position,!this.startAt.before):null;this.ye=new kt(this.path,this.collectionGroup,t,this.filters,this.limit,i,o)}return this.ye},t.prototype.qe=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.et(this.collectionGroup)&&this.path.U(e):S.st(this.path)?this.path.isEqual(e):this.path.W(e)},t.prototype.Ue=function(t){for(var e=0,n=this.Ve;e<n.length;e++){var r=n[e];if(!r.field.J()&&null===t.field(r.field))return!1}return!0},t.prototype.Qe=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.We=function(t){return!(this.startAt&&!this.startAt.Ye(this.orderBy,t)||this.endAt&&this.endAt.Ye(this.orderBy,t))},t.prototype.be=function(t){},t}(),St=function(){function t(t){this.name=t}return t.G=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return ke()}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t}();St.LESS_THAN=new St("<"),St.LESS_THAN_OR_EQUAL=new St("<="),St.EQUAL=new St("=="),St.GREATER_THAN=new St(">"),St.GREATER_THAN_OR_EQUAL=new St(">="),St.ARRAY_CONTAINS=new St("array-contains"),St.IN=new St("in"),St.ARRAY_CONTAINS_ANY=new St("array-contains-any");var Tt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i.__extends(e,t),e.create=function(t,n,r){if(t.J())return n===St.IN?new At(t,r):new It(t,n,r);if($(r)){if(n!==St.EQUAL)throw new d(f.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(tt(r)){if(n!==St.EQUAL)throw new d(f.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===St.ARRAY_CONTAINS?new Ot(t,r):n===St.IN?new xt(t,r):n===St.ARRAY_CONTAINS_ANY?new Nt(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&q(this.value)===q(e)&&this.Je(z(e,this.value))},e.prototype.Je=function(t){switch(this.op){case St.LESS_THAN:return t<0;case St.LESS_THAN_OR_EQUAL:return t<=0;case St.EQUAL:return 0===t;case St.GREATER_THAN:return t>0;case St.GREATER_THAN_OR_EQUAL:return t>=0;default:return ke()}},e.prototype.Ge=function(){return[St.LESS_THAN,St.LESS_THAN_OR_EQUAL,St.GREATER_THAN,St.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.K()+this.op.toString()+G(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&B(this.value,t.value)},e.prototype.toString=function(){return this.field.K()+" "+this.op+" "+G(this.value)},e}((function(){})),It=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=S.tt(r.referenceValue),i}return i.__extends(e,t),e.prototype.matches=function(t){var e=S.k(t.key,this.key);return this.Je(e)},e}(Tt),At=function(t){function e(e,n){var r=this;return(r=t.call(this,e,St.IN,n)||this).keys=(n.arrayValue.values||[]).map((function(t){return S.tt(t.referenceValue)})),r}return i.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Tt),Ot=function(t){function e(e,n){return t.call(this,e,St.ARRAY_CONTAINS,n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Z(e)&&H(e.arrayValue,this.value)},e}(Tt),xt=function(t){function e(e,n){return t.call(this,e,St.IN,n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&H(this.value.arrayValue,e)},e}(Tt),Nt=function(t){function e(e,n){return t.call(this,e,St.ARRAY_CONTAINS_ANY,n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Z(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return H(e.value.arrayValue,t)}))},e}(Tt),Dt=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t}();Dt.ASCENDING=new Dt("asc"),Dt.DESCENDING=new Dt("desc");var Pt,Rt,Mt=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map((function(t){return G(t)})).join(",")},t.prototype.Ye=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(n=i.field.J()?S.k(S.tt(o.referenceValue),e.key):z(o,e.field(i.field)),i.dir===Dt.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!B(this.position[e],t.position[e]))return!1;return!0},t}(),Lt=function(){function t(t,e){this.field=t,void 0===e&&(e=Dt.ASCENDING),this.dir=e,this.Xe=t.J()}return t.prototype.compare=function(t,e){var n=this.Xe?bt.Ie(t,e):bt.Ae(this.field,t,e);switch(this.dir){case Dt.ASCENDING:return n;case Dt.DESCENDING:return-1*n;default:return ke()}},t.prototype.canonicalId=function(){return this.field.K()+this.dir.toString()},t.prototype.toString=function(){return this.field.K()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),jt=new Lt(E.X(),Dt.ASCENDING),Ft=new Lt(E.X(),Dt.DESCENDING),Ut=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=b.MIN),void 0===o&&(o=b.MIN),void 0===a&&(a=R.xt),this.target=t,this.targetId=e,this.Ze=n,this.sequenceNumber=r,this.ts=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.es=function(e){return new t(this.target,this.targetId,this.Ze,e,this.ts,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ss=function(e,n){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ns=function(e){return new t(this.target,this.targetId,this.Ze,this.sequenceNumber,this.ts,e,this.resumeToken)},t}(),Vt=function(t){this.count=t};function qt(t){switch(t){case f.OK:return ke();case f.CANCELLED:case f.UNKNOWN:case f.DEADLINE_EXCEEDED:case f.RESOURCE_EXHAUSTED:case f.INTERNAL:case f.UNAVAILABLE:case f.UNAUTHENTICATED:return!1;case f.INVALID_ARGUMENT:case f.NOT_FOUND:case f.ALREADY_EXISTS:case f.PERMISSION_DENIED:case f.FAILED_PRECONDITION:case f.ABORTED:case f.OUT_OF_RANGE:case f.UNIMPLEMENTED:case f.DATA_LOSS:return!0;default:return ke()}}function Bt(t){if(void 0===t)return we("GRPC error has no .code"),f.UNKNOWN;switch(t){case Pt.OK:return f.OK;case Pt.CANCELLED:return f.CANCELLED;case Pt.UNKNOWN:return f.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return f.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return f.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return f.INTERNAL;case Pt.UNAVAILABLE:return f.UNAVAILABLE;case Pt.UNAUTHENTICATED:return f.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return f.INVALID_ARGUMENT;case Pt.NOT_FOUND:return f.NOT_FOUND;case Pt.ALREADY_EXISTS:return f.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return f.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return f.FAILED_PRECONDITION;case Pt.ABORTED:return f.ABORTED;case Pt.OUT_OF_RANGE:return f.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return f.UNIMPLEMENTED;case Pt.DATA_LOSS:return f.DATA_LOSS;default:return ke()}}(Rt=Pt||(Pt={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";var Ht=new T(S.k);function zt(){return Ht}function Wt(){return zt()}var Gt=new T(S.k);function Kt(){return Gt}var Qt=new T(S.k);function Yt(){return Qt}var Jt=new O(S.k);function Xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Jt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Zt=new O(Te);function $t(){return Zt}var te=function(){function t(t){this.k=t?function(e,n){return t(e,n)||S.k(e.key,n.key)}:function(t,e){return S.k(t.key,e.key)},this.rs=Kt(),this.hs=new T(this.k)}return t.os=function(e){return new t(e.k)},t.prototype.has=function(t){return null!=this.rs.get(t)},t.prototype.get=function(t){return this.rs.get(t)},t.prototype.first=function(){return this.hs.ot()},t.prototype.last=function(){return this.hs.at()},t.prototype.q=function(){return this.hs.q()},t.prototype.indexOf=function(t){var e=this.rs.get(t);return e?this.hs.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.hs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.hs.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.rt(e.rs.nt(t.key,t),e.hs.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.rt(this.rs.remove(t),this.hs.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.hs._t(),r=e.hs._t();n.wt();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.rt=function(e,n){var r=new t;return r.k=this.k,r.rs=e,r.hs=n,r},t}(),ee=function(){function t(){this.as=new T(S.k)}return t.prototype.track=function(t){var e=t.doc.key,n=this.as.get(e);n?0!==t.type&&3===n.type?this.as=this.as.nt(e,t):3===t.type&&1!==n.type?this.as=this.as.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.as=this.as.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.as=this.as.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.as=this.as.remove(e):1===t.type&&2===n.type?this.as=this.as.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.as=this.as.nt(e,{type:2,doc:t.doc}):ke():this.as=this.as.nt(e,t)},t.prototype.us=function(){var t=[];return this.as.ut((function(e,n){t.push(n)})),t},t}(),ne=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.cs=n,this.docChanges=r,this._s=i,this.fromCache=o,this.ls=a,this.ds=s}return t.fs=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,te.os(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this._s.q()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ls===t.ls&&this._s.isEqual(t._s)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.cs.isEqual(t.cs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),re=function(){function t(t,e,n,r,i){this.ts=t,this.Ts=e,this.Es=n,this.Is=r,this.ws=i}return t.Rs=function(e,n){var r=new Map;return r.set(e,ie.As(e,n)),new t(b.MIN,r,$t(),zt(),Xt())},t}(),ie=function(){function t(t,e,n,r,i){this.resumeToken=t,this.ms=e,this.Ps=n,this.Vs=r,this.gs=i}return t.As=function(e,n){return new t(R.xt,n,Xt(),Xt(),Xt())},t}(),oe=function(t,e,n,r){this.ps=t,this.removedTargetIds=e,this.key=n,this.ys=r},ae=function(t,e){this.targetId=t,this.bs=e},se=function(t,e,n,r){void 0===n&&(n=R.xt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ue=function(){function t(){this.vs=0,this.Ss=he(),this.Ds=R.xt,this.Cs=!1,this.Fs=!0}return Object.defineProperty(t.prototype,"ms",{get:function(){return this.Cs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ns",{get:function(){return 0!==this.vs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ks",{get:function(){return this.Fs},enumerable:!0,configurable:!0}),t.prototype.$s=function(t){t.Ot()>0&&(this.Fs=!0,this.Ds=t)},t.prototype.Ms=function(){var t=Xt(),e=Xt(),n=Xt();return this.Ss.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ke()}})),new ie(this.Ds,this.Cs,t,e,n)},t.prototype.Ls=function(){this.Fs=!1,this.Ss=he()},t.prototype.Os=function(t,e){this.Fs=!0,this.Ss=this.Ss.nt(t,e)},t.prototype.xs=function(t){this.Fs=!0,this.Ss=this.Ss.remove(t)},t.prototype.Bs=function(){this.vs+=1},t.prototype.qs=function(){this.vs-=1},t.prototype.Us=function(){this.Fs=!0,this.Cs=!0},t}(),le=function(){function t(t){this.Qs=t,this.Ws=new Map,this.js=zt(),this.Ks=ce(),this.Gs=new O(Te)}return t.prototype.zs=function(t){for(var e=0,n=t.ps;e<n.length;e++){var r=n[e];t.ys instanceof bt?this.Hs(r,t.ys):t.ys instanceof wt&&this.Ys(r,t.key,t.ys)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Ys(o[i],t.key,t.ys)},t.prototype.Js=function(t){var e=this;this.Xs(t,(function(n){var r=e.Zs(n);switch(t.state){case 0:e.ti(n)&&r.$s(t.resumeToken);break;case 1:r.qs(),r.Ns||r.Ls(),r.$s(t.resumeToken);break;case 2:r.qs(),r.Ns||e.removeTarget(n);break;case 3:e.ti(n)&&(r.Us(),r.$s(t.resumeToken));break;case 4:e.ti(n)&&(e.ei(n),r.$s(t.resumeToken));break;default:ke()}}))},t.prototype.Xs=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ws.forEach((function(t,r){n.ti(r)&&e(r)}))},t.prototype.si=function(t){var e=t.targetId,n=t.bs.count,r=this.ii(e);if(r){var i=r.target;if(i.Pe())if(0===n){var o=new S(i.path);this.Ys(e,o,new wt(o,b.S()))}else Ee(1===n);else this.ni(e)!==n&&(this.ei(e),this.Gs=this.Gs.add(e))}},t.prototype.ri=function(t){var e=this,n=new Map;this.Ws.forEach((function(r,i){var o=e.ii(i);if(o){if(r.ms&&o.target.Pe()){var a=new S(o.target.path);null!==e.js.get(a)||e.hi(i,a)||e.Ys(i,a,new wt(a,t))}r.ks&&(n.set(i,r.Ms()),r.Ls())}}));var r=Xt();this.Ks.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.ii(t);return!n||2===n.Ze||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new re(t,n,this.Gs,this.js,r);return this.js=zt(),this.Ks=ce(),this.Gs=new O(Te),i},t.prototype.Hs=function(t,e){if(this.ti(t)){var n=this.hi(t,e.key)?2:0;this.Zs(t).Os(e.key,n),this.js=this.js.nt(e.key,e),this.Ks=this.Ks.nt(e.key,this.oi(e.key).add(t))}},t.prototype.Ys=function(t,e,n){if(this.ti(t)){var r=this.Zs(t);this.hi(t,e)?r.Os(e,1):r.xs(e),this.Ks=this.Ks.nt(e,this.oi(e).delete(t)),n&&(this.js=this.js.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ws.delete(t)},t.prototype.ni=function(t){var e=this.Zs(t).Ms();return this.Qs.ai(t).size+e.Ps.size-e.gs.size},t.prototype.Bs=function(t){this.Zs(t).Bs()},t.prototype.Zs=function(t){var e=this.Ws.get(t);return e||(e=new ue,this.Ws.set(t,e)),e},t.prototype.oi=function(t){var e=this.Ks.get(t);return e||(e=new O(Te),this.Ks=this.Ks.nt(t,e)),e},t.prototype.ti=function(t){var e=null!==this.ii(t);return e||be("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ii=function(t){var e=this.Ws.get(t);return e&&e.Ns?null:this.Qs.ui(t)},t.prototype.ei=function(t){var e=this;this.Ws.set(t,new ue),this.Qs.ai(t).forEach((function(n){e.Ys(t,n,null)}))},t.prototype.hi=function(t,e){return this.Qs.ai(t).has(e)},t}();function ce(){return new T(S.k)}function he(){return new T(S.k)}var fe=function(){var t={};return t[Dt.ASCENDING.name]="ASCENDING",t[Dt.DESCENDING.name]="DESCENDING",t}(),de=function(){var t={};return t[St.LESS_THAN.name]="LESS_THAN",t[St.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[St.GREATER_THAN.name]="GREATER_THAN",t[St.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[St.EQUAL.name]="EQUAL",t[St.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t[St.IN.name]="IN",t[St.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",t}(),pe=function(){function t(t,e){this.ci=t,this.options=e}return t.prototype._i=function(t){var e=void 0===t.code?f.UNKNOWN:Bt(t.code);return new d(e,t.message||"")},t.prototype.li=function(t){return this.options.di||M(t)?t:{value:t}},t.prototype.fi=function(t){var e;return M(e="object"==typeof t?t.value:t)?null:e},t.prototype.Wt=function(t){return{integerValue:""+t}},t.prototype.jt=function(t){if(this.options.di){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:L(t)?"-0":t}},t.prototype.Ti=function(t){return j(t)?this.Wt(t):this.jt(t)},t.prototype.F=function(t){return this.options.di?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.v=function(t){var e=K(t);return new _(e.seconds,e.nanos)},t.prototype.Ei=function(t){return this.options.di?t.toBase64():t.toUint8Array()},t.prototype.Ii=function(t){return this.options.di?(Ee(void 0===t||"string"==typeof t),R.fromBase64String(t||"")):(Ee(void 0===t||t instanceof Uint8Array),R.fromUint8Array(t||new Uint8Array))},t.prototype.toVersion=function(t){return this.F(t.F())},t.prototype.fromVersion=function(t){return Ee(!!t),b.v(this.v(t))},t.prototype.wi=function(t,e){return this.Ri(e||this.ci).child("documents").child(t).K()},t.prototype.Ai=function(t){var e=C.G(t);return Ee(ve(e)),e},t.prototype.mi=function(t){return this.wi(t.path)},t.prototype.tt=function(t){var e=this.Ai(t);return Ee(e.get(1)===this.ci.projectId),Ee(!e.get(3)&&!this.ci.database||e.get(3)===this.ci.database),new S(this.Pi(e))},t.prototype.Vi=function(t){return this.wi(t)},t.prototype.gi=function(t){var e=this.Ai(t);return 4===e.length?C.H:this.Pi(e)},Object.defineProperty(t.prototype,"pi",{get:function(){return new C(["projects",this.ci.projectId,"databases",this.ci.database]).K()},enumerable:!0,configurable:!0}),t.prototype.Ri=function(t){return new C(["projects",t.projectId,"databases",t.database])},t.prototype.Pi=function(t){return Ee(t.length>4&&"documents"===t.get(4)),t.M(5)},t.prototype.yi=function(t,e){return{name:this.mi(t),fields:e.proto.mapValue.fields}},t.prototype.bi=function(t){return{name:this.mi(t.key),fields:t.Re().mapValue.fields,updateTime:this.F(t.version.F())}},t.prototype.vi=function(t,e){var n=this.tt(t.name),r=this.fromVersion(t.updateTime),i=new gt({mapValue:{fields:t.fields}});return new bt(n,r,i,{hasCommittedMutations:!!e})},t.prototype.Si=function(t){Ee(!!t.found);var e=this.tt(t.found.name),n=this.fromVersion(t.found.updateTime),r=new gt({mapValue:{fields:t.found.fields}});return new bt(e,n,r,{})},t.prototype.Di=function(t){Ee(!!t.missing),Ee(!!t.readTime);var e=this.tt(t.missing),n=this.fromVersion(t.readTime);return new wt(e,n)},t.prototype.Ci=function(t){return"found"in t?this.Si(t):"missing"in t?this.Di(t):ke()},t.prototype.Fi=function(t){var e;if("targetChange"in t){var n=this.Ni(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.Ii(t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&this._i(o);e=new se(n,r,i,a||null)}else if("documentChange"in t){var s=t.documentChange,u=this.tt(s.document.name),l=this.fromVersion(s.document.updateTime),c=new gt({mapValue:{fields:s.document.fields}}),h=new bt(u,l,c,{});e=new oe(s.targetIds||[],s.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){var f=t.documentDelete,d=this.tt(f.document),p=f.readTime?this.fromVersion(f.readTime):b.S(),v=new wt(d,p);e=new oe([],f.removedTargetIds||[],v.key,v)}else if("documentRemove"in t){var y=t.documentRemove,g=this.tt(y.document);e=new oe([],y.removedTargetIds||[],g,null)}else{if(!("filter"in t))return ke();var m=t.filter,_=new Vt(m.count||0);e=new ae(m.targetId,_)}return e},t.prototype.Ni=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ke()},t.prototype.ki=function(t){if(!("targetChange"in t))return b.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?b.MIN:e.readTime?this.fromVersion(e.readTime):b.MIN},t.prototype.$i=function(t){var e,n=this;if(t instanceof ft)e={update:this.yi(t.key,t.value)};else if(t instanceof vt)e={delete:this.mi(t.key)};else if(t instanceof dt)e={update:this.yi(t.key,t.data),updateMask:this.Mi(t.se)};else if(t instanceof pt)e={transform:{document:this.mi(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.Li(t)}))}};else{if(!(t instanceof yt))return ke();e={verify:this.mi(t.key)}}return t.Zt.Ht||(e.currentDocument=this.Oi(t.Zt)),e},t.prototype.xi=function(t){var e=this,n=t.currentDocument?this.Bi(t.currentDocument):ct.NONE;if(t.update){var r=this.tt(t.update.name),i=new gt({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.qi(t.updateMask);return new dt(r,i,o,n)}return new ft(r,i,n)}if(t.delete){var a=this.tt(t.delete);return new vt(a,n)}if(t.transform){var s=this.tt(t.transform.document),u=t.transform.fieldTransforms.map((function(t){return e.Ui(t)}));return Ee(!0===n.exists),new pt(s,u)}if(t.verify){var l=this.tt(t.verify);return new yt(l,n)}return ke()},t.prototype.Oi=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ke()},t.prototype.Bi=function(t){return void 0!==t.updateTime?ct.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ct.exists(t.exists):ct.NONE},t.prototype.Qi=function(t,e){var n=this.fromVersion(t.updateTime?t.updateTime:e);n.isEqual(b.MIN)&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new lt(n,r)},t.prototype.Wi=function(t,e){var n=this;return t&&t.length>0?(Ee(void 0!==e),t.map((function(t){return n.Qi(t,e)}))):[]},t.prototype.Li=function(t){var e=t.transform;if(e instanceof nt)return{fieldPath:t.field.K(),setToServerValue:"REQUEST_TIME"};if(e instanceof rt)return{fieldPath:t.field.K(),appendMissingElements:{values:e.elements}};if(e instanceof it)return{fieldPath:t.field.K(),removeAllFromArray:{values:e.elements}};if(e instanceof ot)return{fieldPath:t.field.K(),increment:e.Qt};throw ke()},t.prototype.Ui=function(t){var e=null;"setToServerValue"in t?(Ee("REQUEST_TIME"===t.setToServerValue),e=nt.instance):"appendMissingElements"in t?e=new rt(t.appendMissingElements.values||[]):"removeAllFromArray"in t?e=new it(t.removeAllFromArray.values||[]):"increment"in t?e=new ot(this,t.increment):ke();var n=E.Z(t.fieldPath);return new ut(n,e)},t.prototype.ji=function(t){return{documents:[this.Vi(t.path)]}},t.prototype.Ki=function(t){return Ee(1===t.documents.length),Et.ve(this.gi(t.documents[0])).xe()},t.prototype.Gi=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Vi(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Vi(n.L()),e.structuredQuery.from=[{collectionId:n.B()}]);var r=this.zi(t.filters);r&&(e.structuredQuery.where=r);var i=this.Hi(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.li(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Yi(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Yi(t.endAt)),e},t.prototype.Ji=function(t){var e=this.gi(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.Xi(n.where));var s=[];n.orderBy&&(s=this.Zi(n.orderBy));var u=null;n.limit&&(u=this.fi(n.limit));var l=null;n.startAt&&(l=this.tn(n.startAt));var c=null;return n.endAt&&(c=this.tn(n.endAt)),new Et(e,i,s,a,u,"F",l,c).xe()},t.prototype.en=function(t){var e=this.sn(t.Ze);return null==e?null:{"goog-listen-tags":e}},t.prototype.sn=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ke()}},t.prototype.xe=function(t){var e,n=t.target;return(e=n.Pe()?{documents:this.ji(n)}:{query:this.Gi(n)}).targetId=t.targetId,t.resumeToken.Ot()>0&&(e.resumeToken=this.Ei(t.resumeToken)),e},t.prototype.zi=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof Tt?e.in(t):ke()}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.Xi=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.nn(t)]:void 0!==t.fieldFilter?[this.rn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.Xi(t)})).reduce((function(t,e){return t.concat(e)})):ke():[]},t.prototype.Hi=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.hn(t)}))},t.prototype.Zi=function(t){var e=this;return t.map((function(t){return e.on(t)}))},t.prototype.Yi=function(t){return{before:t.before,values:t.position}},t.prototype.tn=function(t){return new Mt(t.values||[],!!t.before)},t.prototype.an=function(t){return fe[t.name]},t.prototype.un=function(t){switch(t){case"ASCENDING":return Dt.ASCENDING;case"DESCENDING":return Dt.DESCENDING;default:return}},t.prototype.cn=function(t){return de[t.name]},t.prototype._n=function(t){switch(t){case"EQUAL":return St.EQUAL;case"GREATER_THAN":return St.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return St.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return St.LESS_THAN;case"LESS_THAN_OR_EQUAL":return St.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return St.ARRAY_CONTAINS;case"IN":return St.IN;case"ARRAY_CONTAINS_ANY":return St.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":default:return ke()}},t.prototype.ln=function(t){return{fieldPath:t.K()}},t.prototype.dn=function(t){return E.Z(t.fieldPath)},t.prototype.hn=function(t){return{field:this.ln(t.field),direction:this.an(t.dir)}},t.prototype.on=function(t){return new Lt(this.dn(t.field),this.un(t.direction))},t.prototype.rn=function(t){return Tt.create(this.dn(t.fieldFilter.field),this._n(t.fieldFilter.op),t.fieldFilter.value)},t.prototype.in=function(t){if(t.op===St.EQUAL){if(tt(t.value))return{unaryFilter:{field:this.ln(t.field),op:"IS_NAN"}};if($(t.value))return{unaryFilter:{field:this.ln(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.ln(t.field),op:this.cn(t.op),value:t.value}}},t.prototype.nn=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.dn(t.unaryFilter.field);return Tt.create(e,St.EQUAL,{doubleValue:NaN});case"IS_NULL":var n=this.dn(t.unaryFilter.field);return Tt.create(n,St.EQUAL,{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ke()}},t.prototype.Mi=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.K())})),{fieldPaths:e}},t.prototype.qi=function(t){var e=(t.fieldPaths||[]).map((function(t){return E.Z(t)}));return st.Gt(e)},t}();function ve(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var ye=function(){function t(){}return t.fn=function(e){t.platform&&ke(),t.platform=e},t.Lt=function(){return t.platform||ke(),t.platform},t}(),ge=new a.Logger("@firebase/firestore");function me(){return ge.logLevel}function _e(t){ge.logLevel=t}function be(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ge.logLevel<=a.LogLevel.DEBUG){var r=e.map(Ce);ge.debug.apply(ge,i.__spreadArrays(["Firestore ("+c+"): "+t],r))}}function we(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ge.logLevel<=a.LogLevel.ERROR){var r=e.map(Ce);ge.error.apply(ge,i.__spreadArrays(["Firestore ("+c+"): "+t],r))}}function Ce(t){if("string"==typeof t)return t;var e=ye.Lt();try{return e.Tn(t)}catch(e){return t}}function ke(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+t;throw we(e),new Error(e)}function Ee(t,e){t||ke()}var Se=function(){function t(){}return t.En=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t}();function Te(t,e){return t<e?-1:t>e?1:0}function Ie(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ae(t){return t+"\0"}var Oe=function(t,e,n,r,i){this.ci=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},xe=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"In",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.D=function(t){return Te(this.projectId,t.projectId)||Te(this.database,t.database)},t}(),Ne=function(){function t(t){this.wn=t,this.Rn={}}return t.prototype.get=function(t){var e=this.wn(t),n=this.Rn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.wn(t),r=this.Rn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Rn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.wn(t),n=this.Rn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Rn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){D(this.Rn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.q=function(){return P(this.Rn)},t}(),De=function(){function t(t,e,n,r){this.batchId=t,this.An=e,this.baseMutations=n,this.mutations=r}return t.prototype.qt=function(t,e,n){for(var r=n.mn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.qt(e,r[i]))}return e},t.prototype.Bt=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.Bt(e,e,this.An))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=u.Bt(e,o,this.An))}return e},t.prototype.Pn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Bt(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Xt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ie(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&Ie(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),Pe=function(){function t(t,e,n,r,i){this.batch=t,this.Vn=e,this.mn=n,this.streamToken=r,this.gn=i}return t.from=function(e,n,r,i){Ee(e.mutations.length===r.length);for(var o=Yt(),a=e.mutations,s=0;s<a.length;s++)o=o.nt(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),Re=function(){function t(){this.pn=new O(Me.Ie),this.yn=new O(Me.bn)}return t.prototype.q=function(){return this.pn.q()},t.prototype.vn=function(t,e){var n=new Me(t,e);this.pn=this.pn.add(n),this.yn=this.yn.add(n)},t.prototype.Sn=function(t,e){var n=this;t.forEach((function(t){return n.vn(t,e)}))},t.prototype.Dn=function(t,e){this.Cn(new Me(t,e))},t.prototype.Fn=function(t,e){var n=this;t.forEach((function(t){return n.Dn(t,e)}))},t.prototype.Nn=function(t){var e=this,n=S.EMPTY,r=new Me(n,t),i=new Me(n,t+1),o=[];return this.yn.Ct([r,i],(function(t){e.Cn(t),o.push(t.key)})),o},t.prototype.kn=function(){var t=this;this.pn.forEach((function(e){return t.Cn(e)}))},t.prototype.Cn=function(t){this.pn=this.pn.delete(t),this.yn=this.yn.delete(t)},t.prototype.$n=function(t){var e=S.EMPTY,n=new Me(e,t),r=new Me(e,t+1),i=Xt();return this.yn.Ct([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mn=function(t){var e=new Me(t,0),n=this.pn.Nt(e);return null!==n&&t.isEqual(n.key)},t}(),Me=function(){function t(t,e){this.key=t,this.Ln=e}return t.Ie=function(t,e){return S.k(t.key,e.key)||Te(t.Ln,e.Ln)},t.bn=function(t,e){return Te(t.Ln,e.Ln)||S.k(t.key,e.key)},t}(),Le=function(){function t(t){var e=this;this.On=null,this.xn=null,this.result=void 0,this.error=void 0,this.Bn=!1,this.qn=!1,t((function(t){e.Bn=!0,e.result=t,e.On&&e.On(t)}),(function(t){e.Bn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.qn&&ke(),this.qn=!0,this.Bn?this.error?this.Un(n,this.error):this.Qn(e,this.result):new t((function(t,i){r.On=function(n){r.Qn(e,n).next(t,i)},r.xn=function(e){r.Un(n,e).next(t,i)}}))},t.prototype.Wn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.jn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Qn=function(e,n){return e?this.jn((function(){return e(n)})):t.resolve(n)},t.prototype.Un=function(e,n){return e?this.jn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Kn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Gn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Kn(r)},t}(),je=function(){function t(){this.zn=new Ne((function(t){return t.toString()})),this.Hn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Yn},set:function(t){this.Yn=t},enumerable:!0,configurable:!0}),t.prototype.Jn=function(t,e){this.Xn(),this.readTime=e,this.zn.set(t.key,t)},t.prototype.Zn=function(t,e){this.Xn(),e&&(this.readTime=e),this.zn.set(t,null)},t.prototype.tr=function(t,e){this.Xn();var n=this.zn.get(e);return void 0!==n?Le.resolve(n):this.er(t,e)},t.prototype.getEntries=function(t,e){return this.sr(t,e)},t.prototype.apply=function(t){return this.Xn(),this.Hn=!0,this.ir(t)},t.prototype.Xn=function(){},t}(),Fe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ue=function(){function t(){this.nr=[]}return t.prototype.rr=function(t){this.nr.push(t)},t.prototype.hr=function(){this.nr.forEach((function(t){return t()}))},t}(),Ve=function(){function t(t,e,n){this.or=t,this.ar=e,this.ur=n}return t.prototype.cr=function(t,e){var n=this;return this.ar._r(t,e).next((function(r){return n.lr(t,e,r)}))},t.prototype.lr=function(t,e,n){return this.or.tr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Bt(e,t);return t}))},t.prototype.dr=function(t,e,n){var r=Wt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Bt(t,e);r=r.nt(t,e)})),r},t.prototype.Tr=function(t,e){var n=this;return this.or.getEntries(t,e).next((function(e){return n.Er(t,e)}))},t.prototype.Er=function(t,e){var n=this;return this.ar.Ir(t,e).next((function(r){var i=n.dr(t,e,r),o=zt();return i.forEach((function(t,e){e||(e=new wt(t,b.S())),o=o.nt(t,e)})),o}))},t.prototype.wr=function(t,e,n){return e.Pe()?this.Rr(t,e.path):e.He()?this.Ar(t,e,n):this.mr(t,e,n)},t.prototype.Rr=function(t,e){return this.cr(t,new S(e)).next((function(t){var e=Kt();return t instanceof bt&&(e=e.nt(t.key,t)),e}))},t.prototype.Ar=function(t,e,n){var r=this,i=e.collectionGroup,o=Kt();return this.ur.Pr(t,i).next((function(a){return Le.forEach(a,(function(a){var s=e.Le(a.child(i));return r.mr(t,s,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.mr=function(t,e,n){var r,i,o=this;return this.or.wr(t,e,n).next((function(n){return r=n,o.ar.Vr(t,e)})).next((function(e){return o.gr(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key,c=r.get(l),h=u.Bt(c,c,o.An);r=h instanceof bt?r.nt(l,h):r.remove(l)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.gr=function(t,e,n){for(var r=Xt(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof dt&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.or.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof bt&&(l=l.nt(t,e))})),l}))},t}(),qe=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.pr=n,this.yr=r}return t.br=function(e,n){for(var r=Xt(),i=Xt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Be=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.vr=function(t){return n.Sr(t)},this.Dr=function(t){return e.Cr(t)})}return t.prototype.Sr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Dr&&this.Dr(t),t},t}();Be.Fr=-1;var He=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ze=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Nr=t,this.kr=e,this.$r=n,this.Mr=r,this.Lr=i,this.Or=0,this.xr=null,this.Br=Date.now(),this.reset()}return t.prototype.reset=function(){this.Or=0},t.prototype.qr=function(){this.Or=this.Lr},t.prototype.Ur=function(t){var e=this;this.cancel();var n=Math.floor(this.Or+this.Qr()),r=Math.max(0,Date.now()-this.Br),i=Math.max(0,n-r);i>0&&be("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Or+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.xr=this.Nr.Wr(this.kr,i,(function(){return e.Br=Date.now(),t()})),this.Or*=this.Mr,this.Or<this.$r&&(this.Or=this.$r),this.Or>this.Lr&&(this.Or=this.Lr)},t.prototype.cancel=function(){null!==this.xr&&(this.xr.cancel(),this.xr=null)},t.prototype.Qr=function(){return(Math.random()-.5)*this.Or},t}(),We=function(){function t(t,e,n,r,i){this.jr=t,this.kr=e,this.Kr=n,this.op=r,this.Gr=i,this.zr=new He,this.then=this.zr.promise.then.bind(this.zr.promise),this.catch=this.zr.promise.catch.bind(this.zr.promise),this.zr.promise.catch((function(t){}))}return t.Hr=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.Yr=setTimeout((function(){return e.Jr()}),t)},t.prototype.Xr=function(){return this.Jr()},t.prototype.cancel=function(t){null!==this.Yr&&(this.clearTimeout(),this.zr.reject(new d(f.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Jr=function(){var t=this;this.jr.Zr((function(){return null!==t.Yr?(t.clearTimeout(),t.op().then((function(e){return t.zr.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Yr&&(this.Gr(this),clearTimeout(this.Yr),this.Yr=null)},t}(),Ge=function(){function t(){var t=this;this.th=Promise.resolve(),this.eh=Promise.resolve(),this.sh=!1,this.ih=[],this.nh=null,this.rh=!1,this.hh=[],this.oh=new ze(this,"async_queue_retry"),this.ah=function(){t.uh("async_queue_retry")};var e=ye.Lt().window;e&&e.addEventListener("visibilitychange",this.ah)}return Object.defineProperty(t.prototype,"_h",{get:function(){return this.sh},enumerable:!0,configurable:!0}),t.prototype.Zr=function(t){this.enqueue(t)},t.prototype.lh=function(t){this.dh(),this.fh(t)},t.prototype.Th=function(t){return this.dh(),this.fh(t)},t.prototype.Eh=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.dh(),this.sh?[3,2]:(this.sh=!0,(e=ye.Lt().window)&&e.removeEventListener("visibilitychange",this.ah),[4,this.Th(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.dh(),this.sh?new Promise((function(t){})):this.fh(t)},t.prototype.Ih=function(t){var e=this;this.dh(),this.sh||(this.eh=this.eh.then((function(){var n=new He;return e.Zr((function r(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t()];case 1:return i.sent(),n.resolve(),this.oh.reset(),[3,3];case 2:if("IndexedDbTransactionError"!==(e=i.sent()).name)throw n.resolve(),e;return be("AsyncQueue","Operation failed with retryable error: "+e),this.oh.Ur(r),[3,3];case 3:return[2]}}))}))})),n.promise})))},t.prototype.fh=function(t){var e=this,n=this.th.then((function(){return e.rh=!0,t().catch((function(t){throw e.nh=t,e.rh=!1,we("INTERNAL UNHANDLED ERROR: ",t.stack||t.message||""),t})).then((function(t){return e.rh=!1,t}))}));return this.th=n,n},t.prototype.Wr=function(t,e,n){var r=this;this.dh(),this.hh.indexOf(t)>-1&&(e=0);var i=We.Hr(this,t,e,n,(function(t){return r.wh(t)}));return this.ih.push(i),i},t.prototype.dh=function(){this.nh&&ke()},t.prototype.Rh=function(){},t.prototype.Ah=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.th];case 1:e.sent(),e.label=2;case 2:if(t!==this.th)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.mh=function(t){for(var e=0,n=this.ih;e<n.length;e++)if(n[e].kr===t)return!0;return!1},t.prototype.uh=function(t){var e=this;return this.Ah().then((function(){e.ih.sort((function(t,e){return t.Kr-e.Kr}));for(var n=0,r=e.ih;n<r.length;n++){var i=r[n];if(i.Xr(),"all"!==t&&i.kr===t)break}return e.Ah()}))},t.prototype.Ph=function(t){this.hh.push(t)},t.prototype.wh=function(t){var e=this.ih.indexOf(t);this.ih.splice(e,1)},t}();function Ke(t,e){var n=t[1],r=e[1],i=Te(t[0],e[0]);return 0===i?Te(n,r):i}var Qe=function(){function t(t){this.Vh=t,this.buffer=new O(Ke),this.gh=0}return t.prototype.ph=function(){return++this.gh},t.prototype.yh=function(t){var e=[t,this.ph()];if(this.buffer.size<this.Vh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ke(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Ye={bh:!1,vh:0,Sh:0,Dh:0},Je=function(){function t(t,e,n){this.Ch=t,this.Fh=e,this.Nh=n}return t.kh=function(e){return new t(e,t.$h,t.Mh)},t}();Je.Lh=-1,Je.Oh=1048576,Je.xh=41943040,Je.$h=10,Je.Mh=1e3,Je.Bh=new Je(Je.xh,Je.$h,Je.Mh),Je.DISABLED=new Je(Je.Lh,0,0);var Xe=function(){function t(t,e){this.qh=t,this.jr=e,this.Uh=!1,this.Qh=null}return t.prototype.start=function(t){this.qh.Wh.Ch!==Je.Lh&&this.jh(t)},t.prototype.stop=function(){this.Qh&&(this.Qh.cancel(),this.Qh=null)},Object.defineProperty(t.prototype,"Kh",{get:function(){return null!==this.Qh},enumerable:!0,configurable:!0}),t.prototype.jh=function(t){var e=this,n=this.Uh?3e5:6e4;be("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Qh=this.jr.Wr("lru_garbage_collection",n,(function(){return e.Qh=null,e.Uh=!0,t.Gh(e.qh).then((function(){return e.jh(t)})).catch(sr)}))},t}(),Ze=function(){function t(t,e){this.zh=t,this.Wh=e}return t.prototype.Hh=function(t,e){return this.zh.Yh(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Jh=function(t,e){var n=this;if(0===e)return Le.resolve(Be.Fr);var r=new Qe(e);return this.zh.Xs(t,(function(t){return r.yh(t.sequenceNumber)})).next((function(){return n.zh.Xh(t,(function(t){return r.yh(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zh=function(t,e,n){return this.zh.Zh(t,e,n)},t.prototype.to=function(t,e){return this.zh.to(t,e)},t.prototype.eo=function(t,e){var n=this;return this.Wh.Ch===Je.Lh?(be("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(Ye)):this.so(t).next((function(r){return r<n.Wh.Ch?(be("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.Wh.Ch),Ye):n.io(t,e)}))},t.prototype.so=function(t){return this.zh.so(t)},t.prototype.io=function(t,e){var n,r,i,o,s,u,l,c=this,h=Date.now();return this.Hh(t,this.Wh.Fh).next((function(e){return e>c.Wh.Nh?(be("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.Wh.Nh+" from "+e),r=c.Wh.Nh):r=e,o=Date.now(),c.Jh(t,r)})).next((function(r){return n=r,s=Date.now(),c.Zh(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.to(t,n)})).next((function(t){return l=Date.now(),me()<=a.LogLevel.DEBUG&&be("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(l-u)+"ms\nTotal Duration: "+(l-h)+"ms"),Le.resolve({bh:!0,vh:r,Sh:i,Dh:t})}))},t}();function $e(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=en(e)),e=tn(t.get(n),e);return en(e)}function tn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function en(t){return t+"\x01\x01"}function nn(t){var e=t.length;if(Ee(e>=2),2===e)return Ee("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),C.H;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&ke(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:ke()}o=a+2}return new C(r)}var rn=function(){function t(e){this.db=e,12.2===t.no(s.getUA())&&we("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.ro=function(e,n,r){return be("SimpleDb","Opening database:",e),new Le((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){i(new t(e.target.result))},a.onblocked=function(){o(new d(f.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new d(f.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},a.onupgradeneeded=function(t){be("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion),r.createOrUpgrade(t.target.result,a.transaction,t.oldVersion,Nn).next((function(){be("SimpleDb","Database upgrade to version "+Nn+" complete")}))}})).Wn()},t.delete=function(t){return be("SimpleDb","Removing database:",t),ln(window.indexedDB.deleteDatabase(t)).Wn()},t.ho=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.oo())return!0;if(void 0===window.navigator)return!1;var e=s.getUA(),n=t.no(e),r=0<n&&n<10,i=t.ao(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.oo=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.uo)},t.co=function(t,e){return t.store(e)},t.no=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.ao=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype._o=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,u;return i.__generator(this,(function(l){switch(l.label){case 0:r="readonly"===t,o=0,a=function(){var t,a,u,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:++o,t=sn.open(s.db,r?"readonly":"readwrite",e),i.label=1;case 1:return i.trys.push([1,3,,4]),a=n(t).catch((function(e){return t.abort(e),Le.reject(e)})).Wn(),u={},a.catch((function(){})),[4,t.lo];case 2:return[2,(u.value=(i.sent(),a),u)];case 3:return be("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(l=i.sent()).message,c="FirebaseError"!==l.name&&o<3),c?[3,4]:[2,{value:Promise.reject(l)}];case 4:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),on=function(){function t(t){this.do=t,this.fo=!1,this.To=null}return Object.defineProperty(t.prototype,"Bn",{get:function(){return this.fo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Eo",{get:function(){return this.To},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.do=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.fo=!0},t.prototype.Io=function(t){this.To=t},t.prototype.delete=function(){return ln(this.do.delete())},t}(),an=function(t){function e(e){var n=this;return(n=t.call(this,f.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return i.__extends(e,t),e}(d),sn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.wo=new He,this.transaction.oncomplete=function(){e.wo.resolve()},this.transaction.onabort=function(){t.error?e.wo.reject(new an(t.error)):e.wo.resolve()},this.transaction.onerror=function(t){var n=hn(t.target.error);e.wo.reject(new an(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"lo",{get:function(){return this.wo.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.wo.reject(t),this.aborted||(be("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new un(e)},t}(),un=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(be("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ln(n)},t.prototype.add=function(t){return be("SimpleDb","ADD",this.store.name,t,t),ln(this.store.add(t))},t.prototype.get=function(t){var e=this;return ln(this.store.get(t)).next((function(n){return void 0===n&&(n=null),be("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return be("SimpleDb","DELETE",this.store.name,t),ln(this.store.delete(t))},t.prototype.count=function(){return be("SimpleDb","COUNT",this.store.name),ln(this.store.count())},t.prototype.Ro=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ao(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.mo=function(t,e){be("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Po=!1;var r=this.cursor(n);return this.Ao(r,(function(t,e,n){return n.delete()}))},t.prototype.Vo=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ao(r,e)},t.prototype.po=function(t){var e=this.cursor({});return new Le((function(n,r){e.onerror=function(t){var e=hn(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Ao=function(t,e){var n=[];return new Le((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new on(i),a=e(i.primaryKey,i.value,o);if(a instanceof Le){var s=a.catch((function(t){return o.done(),Le.reject(t)}));n.push(s)}o.Bn?r():null===o.Eo?i.continue():i.continue(o.Eo)}else r()}})).next((function(){return Le.Kn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Po?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ln(t){return new Le((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=hn(t.target.error);n(e)}}))}var cn=!1;function hn(t){var e=rn.no(s.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new d("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return cn||(cn=!0,setTimeout((function(){throw r}),0)),r}}return t}var fn=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ur=n,this.yo=r,this.bo={}}return t.vo=function(e,n,r,i){return Ee(""!==e.uid),new t(e.t()?e.uid:"",n,r,i)},t.prototype.So=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vn(t).Vo({index:Ln.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Do=function(t,e,n){return this.Co(t).next((function(e){return e.lastStreamToken=n.toBase64(),gn(t).put(e)}))},t.prototype.Fo=function(t){return this.Co(t).next((function(t){return R.fromBase64String(t.lastStreamToken)}))},t.prototype.No=function(t,e){return this.Co(t).next((function(n){return n.lastStreamToken=e.toBase64(),gn(t).put(n)}))},t.prototype.ko=function(t,e,n,r){var i=this,o=yn(t),a=vn(t);return a.add({}).next((function(s){Ee("number"==typeof s);for(var u=new De(s,e,n,r),l=i.serializer.$o(i.userId,u),c=[],h=new O((function(t,e){return Te(t.K(),e.K())})),f=0,d=r;f<d.length;f++){var p=d[f],v=jn.key(i.userId,p.key.path,s);h=h.add(p.key.path.L()),c.push(a.put(l)),c.push(o.put(v,jn.PLACEHOLDER))}return h.forEach((function(e){c.push(i.ur.Mo(t,e))})),t.rr((function(){i.bo[s]=u.keys()})),Le.Kn(c).next((function(){return u}))}))},t.prototype.Lo=function(t,e){var n=this;return vn(t).get(e).next((function(t){return t?(Ee(t.userId===n.userId),n.serializer.Oo(t)):null}))},t.prototype.xo=function(t,e){var n=this;return this.bo[e]?Le.resolve(this.bo[e]):this.Lo(t,e).next((function(t){if(t){var r=t.keys();return n.bo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return vn(t).Vo({index:Ln.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ee(e.batchId>=r),o=n.serializer.Oo(e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vn(t).Vo({index:Ln.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vn(t).Ro(Ln.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.Oo(t)}))}))},t.prototype._r=function(t,e){var n=this,r=jn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return yn(t).Vo({range:i},(function(r,i,a){var s=r[0],u=r[2],l=nn(r[1]);if(s===n.userId&&e.path.isEqual(l))return vn(t).get(u).next((function(t){if(!t)throw ke();Ee(t.userId===n.userId),o.push(n.serializer.Oo(t))}));a.done()})).next((function(){return o}))},t.prototype.Ir=function(t,e){var n=this,r=new O(Te),i=[];return e.forEach((function(e){var o=jn.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=yn(t).Vo({range:a},(function(t,i,o){var a=t[0],s=t[2],u=nn(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),Le.Kn(i).next((function(){return n.Qo(t,r)}))},t.prototype.Vr=function(t,e){var n=this,r=e.path,i=r.length+1,o=jn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new O(Te);return yn(t).Vo({range:a},(function(t,e,o){var a=t[0],u=t[2],l=nn(t[1]);a===n.userId&&r.U(l)?l.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.Qo(t,s)}))},t.prototype.Qo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(vn(t).get(e).next((function(t){if(null===t)throw ke();Ee(t.userId===n.userId),r.push(n.serializer.Oo(t))})))})),Le.Kn(i).next((function(){return r}))},t.prototype.Wo=function(t,e){var n=this;return pn(t.jo,this.userId,e).next((function(r){return t.rr((function(){n.Ko(e.batchId)})),Le.forEach(r,(function(e){return n.yo.Go(t,e)}))}))},t.prototype.Ko=function(t){delete this.bo[t]},t.prototype.zo=function(t){var e=this;return this.So(t).next((function(n){if(!n)return Le.resolve();var r=IDBKeyRange.lowerBound(jn.prefixForUser(e.userId)),i=[];return yn(t).Vo({range:r},(function(t,n,r){if(t[0]===e.userId){var o=nn(t[1]);i.push(o)}else r.done()})).next((function(){Ee(0===i.length)}))}))},t.prototype.Mn=function(t,e){return dn(t,this.userId,e)},t.prototype.Co=function(t){var e=this;return gn(t).get(this.userId).next((function(t){return t||new Mn(e.userId,-1,"")}))},t}();function dn(t,e,n){var r=jn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return yn(t).Vo({range:o,Po:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function pn(t,e,n){var r=t.store(Ln.store),i=t.store(jn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Vo({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Ee(1===s)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var f=h[c],d=jn.key(e,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}return Le.Kn(o).next((function(){return l}))}function vn(t){return tr.co(t,Ln.store)}function yn(t){return tr.co(t,jn.store)}function gn(t){return tr.co(t,Mn.store)}var mn=function(){function t(t){this.Ho=t}return t.prototype.next=function(){return this.Ho+=2,this.Ho},t.Yo=function(){return new t(0)},t.Jo=function(){return new t(-1)},t}(),_n=function(){function t(t,e){this.yo=t,this.serializer=e}return t.prototype.Xo=function(t){var e=this;return this.Zo(t).next((function(n){var r=new mn(n.highestTargetId);return n.highestTargetId=r.next(),e.ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.ea=function(t){return this.Zo(t).next((function(t){return b.v(new _(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.sa=function(t){return Cn(t.jo)},t.prototype.ia=function(t,e,n){var r=this;return this.Zo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.F()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ta(t,i)}))},t.prototype.na=function(t,e){var n=this;return this.ra(t,e).next((function(){return n.Zo(t).next((function(r){return r.targetCount+=1,n.ha(e,r),n.ta(t,r)}))}))},t.prototype.oa=function(t,e){return this.ra(t,e)},t.prototype.aa=function(t,e){var n=this;return this.ua(t,e.targetId).next((function(){return bn(t).delete(e.targetId)})).next((function(){return n.Zo(t)})).next((function(e){return Ee(e.targetCount>0),e.targetCount-=1,n.ta(t,e)}))},t.prototype.Zh=function(t,e,n){var r=this,i=0,o=[];return bn(t).Vo((function(a,s){var u=r.serializer.ca(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.aa(t,u)))})).next((function(){return Le.Kn(o)})).next((function(){return i}))},t.prototype.Xs=function(t,e){var n=this;return bn(t).Vo((function(t,r){var i=n.serializer.ca(r);e(i)}))},t.prototype.Zo=function(t){return wn(t.jo)},t.prototype.ta=function(t,e){return(n=t,tr.co(n,zn.store)).put(zn.key,e);var n},t.prototype.ra=function(t,e){return bn(t).put(this.serializer._a(e))},t.prototype.ha=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.la=function(t){return this.Zo(t).next((function(t){return t.targetCount}))},t.prototype.da=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return bn(t).Vo({range:i,index:Bn.queryTargetsIndexName},(function(t,r,i){var a=n.serializer.ca(r);e.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},t.prototype.fa=function(t,e,n){var r=this,i=[],o=kn(t);return e.forEach((function(e){var a=$e(e.path);i.push(o.put(new Hn(n,a))),i.push(r.yo.vn(t,e))})),Le.Kn(i)},t.prototype.Ta=function(t,e,n){var r=this,i=kn(t);return Le.forEach(e,(function(e){var o=$e(e.path);return Le.Kn([i.delete([n,o]),r.yo.Dn(t,e)])}))},t.prototype.ua=function(t,e){var n=kn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Ea=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=kn(t),i=Xt();return r.Vo({range:n,Po:!0},(function(t,e,n){var r=nn(t[1]),o=new S(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mn=function(t,e){var n=$e(e.path),r=IDBKeyRange.bound([n],[Ae(n)],!1,!0),i=0;return kn(t).Vo({index:Hn.documentTargetsIndex,Po:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.ui=function(t,e){var n=this;return bn(t).get(e).next((function(t){return t?n.serializer.ca(t):null}))},t}();function bn(t){return tr.co(t,Bn.store)}function wn(t){return rn.co(t,zn.store).get(zn.key).next((function(t){return Ee(null!==t),t}))}function Cn(t){return wn(t).next((function(t){return t.highestListenSequenceNumber}))}function kn(t){return tr.co(t,Hn.store)}var En=function(){function t(t,e){this.serializer=t,this.ur=e}return t.prototype.Jn=function(t,e,n){return Tn(t).put(In(e),n)},t.prototype.Zn=function(t,e){var n=Tn(t),r=In(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Ia(t,r)}))},t.prototype.tr=function(t,e){var n=this;return Tn(t).get(In(e)).next((function(t){return n.wa(t)}))},t.prototype.Ra=function(t,e){var n=this;return Tn(t).get(In(e)).next((function(t){var e=n.wa(t);return e?{Aa:e,size:An(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Wt();return this.ma(t,e,(function(t,e){var i=n.wa(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Pa=function(t,e){var n=this,r=Wt(),i=new T(S.k);return this.ma(t,e,(function(t,e){var o=n.wa(e);o?(r=r.nt(t,o),i=i.nt(t,An(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Va:r,ga:i}}))},t.prototype.ma=function(t,e,n){if(e.q())return Le.resolve();var r=IDBKeyRange.bound(e.first().path.j(),e.last().path.j()),i=e._t(),o=i.It();return Tn(t).Vo({range:r},(function(t,e,r){for(var a=S.it(t);o&&S.k(o,a)<0;)n(o,null),o=i.It();o&&o.isEqual(a)&&(n(o,e),o=i.wt()?i.It():null),o?r.Io(o.path.j()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.It():null}))},t.prototype.wr=function(t,e,n){var r=this,i=Kt(),o=e.path.length+1,a={};if(n.isEqual(b.MIN)){var s=e.path.j();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.j(),l=this.serializer.pa(n);a.range=IDBKeyRange.lowerBound([u,l],!0),a.index=Vn.collectionReadTimeIndex}return Tn(t).Vo(a,(function(t,n,a){if(t.length===o){var s=r.serializer.ya(n);e.path.U(s.key.path)?s instanceof bt&&e.matches(s)&&(i=i.nt(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.ba=function(t,e){var n=this,r=zt(),i=this.serializer.pa(e),o=Tn(t),a=IDBKeyRange.lowerBound(i,!0);return o.Vo({index:Vn.readTimeIndex,range:a},(function(t,e){var o=n.serializer.ya(e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{va:r,readTime:n.serializer.Sa(i)}}))},t.prototype.Da=function(t){var e=this,n=Tn(t),r=b.MIN;return n.Vo({index:Vn.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.Sa(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Ca=function(e){return new t.Fa(this,!!e&&e.Na)},t.prototype.ka=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Sn(t).get(qn.key).next((function(t){return Ee(!!t),t}))},t.prototype.Ia=function(t,e){return Sn(t).put(qn.key,e)},t.prototype.wa=function(t){if(t){var e=this.serializer.ya(t);return e instanceof wt&&e.version.isEqual(b.S())?null:e}return null},t}();function Sn(t){return tr.co(t,qn.store)}function Tn(t){return tr.co(t,Vn.store)}function In(t){return t.path.j()}function An(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ke();e=t.noDocument}return JSON.stringify(e).length}En.Fa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).$a=e,r.Na=n,r.Ma=new Ne((function(t){return t.toString()})),r}return i.__extends(e,t),e.prototype.ir=function(t){var e=this,n=[],r=0,i=new O((function(t,e){return Te(t.K(),e.K())}));return this.zn.forEach((function(o,a){var s=e.Ma.get(o);if(a){var u=e.$a.serializer.La(a,e.readTime);i=i.add(o.path.L());var l=An(u);r+=l-s,n.push(e.$a.Jn(t,o,u))}else if(r-=s,e.Na){var c=e.$a.serializer.La(new wt(o,b.S()),e.readTime);n.push(e.$a.Jn(t,o,c))}else n.push(e.$a.Zn(t,o))})),i.forEach((function(r){n.push(e.$a.ur.Mo(t,r))})),n.push(this.$a.updateMetadata(t,r)),Le.Kn(n)},e.prototype.er=function(t,e){var n=this;return this.$a.Ra(t,e).next((function(t){return null===t?(n.Ma.set(e,0),null):(n.Ma.set(e,t.size),t.Aa)}))},e.prototype.sr=function(t,e){var n=this;return this.$a.Pa(t,e).next((function(t){var e=t.Va;return t.ga.forEach((function(t,e){n.Ma.set(t,e)})),e}))},e}(je);var On=function(){function t(){this.Oa=new xn}return t.prototype.Mo=function(t,e){return this.Oa.add(e),Le.resolve()},t.prototype.Pr=function(t,e){return Le.resolve(this.Oa.getEntries(e))},t}(),xn=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.B(),n=t.L(),r=this.index[e]||new O(C.k),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.B(),n=t.L(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new O(C.k)).j()},t}(),Nn=10,Dn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Ee(n<r&&n>=0&&r<=Nn);var o=new sn(e);n<1&&r>=1&&(function(t){t.createObjectStore(Rn.store)}(t),function(t){t.createObjectStore(Mn.store,{keyPath:Mn.keyPath}),t.createObjectStore(Ln.store,{keyPath:Ln.keyPath,autoIncrement:!0}).createIndex(Ln.userMutationsIndex,Ln.userMutationsKeyPath,{unique:!0}),t.createObjectStore(jn.store)}(t),Gn(t),function(t){t.createObjectStore(Vn.store)}(t));var a=Le.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Hn.store),t.deleteObjectStore(Bn.store),t.deleteObjectStore(zn.store)}(t),Gn(t)),a=a.next((function(){return function(t){var e=t.store(zn.store),n=new zn(0,0,b.MIN.F(),0);return e.put(zn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Ln.store).Ro().next((function(n){t.deleteObjectStore(Ln.store),t.createObjectStore(Ln.store,{keyPath:Ln.keyPath,autoIncrement:!0}).createIndex(Ln.userMutationsIndex,Ln.userMutationsKeyPath,{unique:!0});var r=e.store(Ln.store),i=n.map((function(t){return r.put(t)}));return Le.Kn(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Kn.store,{keyPath:Kn.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(qn.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Vn.store);e.createIndex(Vn.readTimeIndex,Vn.readTimeIndexPath,{unique:!1}),e.createIndex(Vn.collectionReadTimeIndex,Vn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Vn.store).Vo((function(t,n){e+=An(n)})).next((function(){var n=new qn(e);return t.store(qn.store).put(qn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Mn.store),r=t.store(Ln.store);return n.Ro().next((function(n){return Le.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ro(Ln.userMutationsIndex,i).next((function(r){return Le.forEach(r,(function(r){Ee(r.userId===n.userId);var i=e.serializer.Oo(r);return pn(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Hn.store),n=t.store(Vn.store);return Cn(t).next((function(t){var r=[];return n.Vo((function(n,i){var o=new C(n),a=function(t){return[0,$e(t)]}(o);r.push(e.get(a).next((function(n){return n?Le.resolve():function(n){return e.put(new Hn(0,$e(n),t))}(o)})))})).next((function(){return Le.Kn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Wn.store,{keyPath:Wn.keyPath});var n=e.store(Wn.store),r=new xn,i=function(t){if(r.add(t)){var e=t.B(),i=t.L();return n.put({collectionId:e,parent:$e(i)})}};return e.store(Vn.store).Vo({Po:!0},(function(t,e){var n=new C(t);return i(n.L())})).next((function(){return e.store(jn.store).Vo({Po:!0},(function(t,e){var n=nn(t[1]);return i(n.L())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Bn.store);return n.Vo((function(t,r){var i=e.serializer.ca(r),o=e.serializer._a(i);return n.put(o)}))},t}(),Pn=function(t,e){this.seconds=t,this.nanoseconds=e},Rn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Rn.store="owner",Rn.key="owner";var Mn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Mn.store="mutationQueues",Mn.keyPath="userId";var Ln=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ln.store="mutations",Ln.keyPath="batchId",Ln.userMutationsIndex="userMutationsIndex",Ln.userMutationsKeyPath=["userId","batchId"];var jn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,$e(e)]},t.key=function(t,e,n){return[t,$e(e),n]},t}();jn.store="documentMutations",jn.PLACEHOLDER=new jn;var Fn=function(t,e){this.path=t,this.readTime=e},Un=function(t,e){this.path=t,this.version=e},Vn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Vn.store="remoteDocuments",Vn.readTimeIndex="readTimeIndex",Vn.readTimeIndexPath="readTime",Vn.collectionReadTimeIndex="collectionReadTimeIndex",Vn.collectionReadTimeIndexPath=["parentPath","readTime"];var qn=function(t){this.byteSize=t};qn.store="remoteDocumentGlobal",qn.key="remoteDocumentGlobalKey";var Bn=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Bn.store="targets",Bn.keyPath="targetId",Bn.queryTargetsIndexName="queryTargetsIndex",Bn.queryTargetsKeyPath=["canonicalId","targetId"];var Hn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Hn.store="targetDocuments",Hn.keyPath=["targetId","path"],Hn.documentTargetsIndex="documentTargetsIndex",Hn.documentTargetsKeyPath=["path","targetId"];var zn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};zn.key="targetGlobalKey",zn.store="targetGlobal";var Wn=function(t,e){this.collectionId=t,this.parent=e};function Gn(t){t.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.documentTargetsIndex,Hn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Bn.store,{keyPath:Bn.keyPath}).createIndex(Bn.queryTargetsIndexName,Bn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(zn.store)}Wn.store="collectionParents",Wn.keyPath=["collectionId","parent"];var Kn=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Kn.store="clientMetadata",Kn.keyPath="clientId";var Qn=i.__spreadArrays(i.__spreadArrays(i.__spreadArrays([Mn.store,Ln.store,jn.store,Vn.store,Bn.store,Rn.store,zn.store,Hn.store],[Kn.store]),[qn.store]),[Wn.store]),Yn=function(){function t(){this.xa=new xn}return t.prototype.Mo=function(t,e){var n=this;if(!this.xa.has(e)){var r=e.B(),i=e.L();t.rr((function(){n.xa.add(e)}));var o={collectionId:r,parent:$e(i)};return Jn(t).put(o)}return Le.resolve()},t.prototype.Pr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ae(e),""],!1,!0);return Jn(t).Ro(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(nn(o.parent))}return n}))},t}();function Jn(t){return tr.co(t,Wn.store)}var Xn=function(){function t(t){this.Ba=t}return t.prototype.ya=function(t){if(t.document)return this.Ba.vi(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=S.it(t.noDocument.path),n=this.qa(t.noDocument.readTime);return new wt(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=S.it(t.unknownDocument.path),i=this.qa(t.unknownDocument.version);return new Ct(r,i)}return ke()},t.prototype.La=function(t,e){var n=this.pa(e),r=t.key.path.L().j();if(t instanceof bt){var i=this.Ba.bi(t);return new Vn(null,null,i,t.hasCommittedMutations,n,r)}if(t instanceof wt){var o=t.key.path.j(),a=this.Ua(t.version),s=t.hasCommittedMutations;return new Vn(null,new Fn(o,a),null,s,n,r)}if(t instanceof Ct){var u=t.key.path.j(),l=this.Ua(t.version);return new Vn(new Un(u,l),null,null,!0,n,r)}return ke()},t.prototype.pa=function(t){var e=t.F();return[e.seconds,e.nanoseconds]},t.prototype.Sa=function(t){var e=new _(t[0],t[1]);return b.v(e)},t.prototype.Ua=function(t){var e=t.F();return new Pn(e.seconds,e.nanoseconds)},t.prototype.qa=function(t){var e=new _(t.seconds,t.nanoseconds);return b.v(e)},t.prototype.$o=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.Ba.$i(t)})),i=e.mutations.map((function(t){return n.Ba.$i(t)}));return new Ln(t,e.batchId,e.An.toMillis(),r,i)},t.prototype.Oo=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.Ba.xi(t)})),r=t.mutations.map((function(t){return e.Ba.xi(t)})),i=_.fromMillis(t.localWriteTimeMs);return new De(t.batchId,i,n,r)},t.prototype.ca=function(t){var e,n=this.qa(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.qa(t.lastLimboFreeSnapshotVersion):b.MIN;return e=void 0!==t.query.documents?this.Ba.Ki(t.query):this.Ba.Ji(t.query),new Ut(e,t.targetId,0,t.lastListenSequenceNumber,n,r,R.fromBase64String(t.resumeToken))},t.prototype._a=function(t){var e,n=this.Ua(t.ts),r=this.Ua(t.lastLimboFreeSnapshotVersion);e=t.target.Pe()?this.Ba.ji(t.target):this.Ba.Gi(t.target);var i=t.resumeToken.toBase64();return new Bn(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),Zn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",$n=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jo=e,r.Qa=n,r}return i.__extends(e,t),e}(Ue),tr=function(){function t(e,n,r,i,o,a,s,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Nr=a,this.Wa=u,this.ja=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ka=null,this.inForeground=!1,this.Ga=null,this.za=null,this.Ha=Number.NEGATIVE_INFINITY,this.Ya=function(t){return Promise.resolve()},!t.ho())throw new d(f.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.yo=new rr(this,o),this.Ja=n+t.Xa,this.serializer=new Xn(s),this.document=i.document,this.Za=new _n(this.yo,this.serializer),this.ur=new Yn,this.or=new En(this.serializer,this.ur),!i.window||!i.window.localStorage)throw new d(f.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.tu=this.window.localStorage}return t.co=function(t,e){if(t instanceof $n)return rn.co(t.jo,e);throw ke()},t.prototype.start=function(){var t=this;return rn.ro(this.Ja,Nn,new Dn(this.serializer)).then((function(e){return t.eu=e,t.su()})).then((function(){return t.iu(),t.nu(),t.ru(),t.eu.runTransaction("readonly",[zn.store],(function(t){return Cn(t)}))})).then((function(e){t.hu=new Be(e,t.Wa)})).then((function(){t.ja=!0})).catch((function(e){return t.eu&&t.eu.close(),Promise.reject(e)}))},t.prototype.ou=function(t){var e=this;return this.Ya=function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.Kh?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.au=function(t){var e=this;this.eu._o((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.uu=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Nr.Zr((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Kh?[4,this.su()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.su=function(){var t=this;return this.eu.runTransaction("readwrite",Qn,(function(e){return nr(e).put(new Kn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.cu(e).next((function(e){e||(t.isPrimary=!1,t.Nr.Zr((function(){return t.Ya(!1)})))}))})).next((function(){return t._u(e)})).next((function(n){return t.isPrimary&&!n?t.lu(e).next((function(){return!1})):!!n&&t.du(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Nr.Zr((function(){return t.Ya(e)})),t.isPrimary=e}))},t.prototype.cu=function(t){var e=this;return er(t).get(Rn.key).next((function(t){return Le.resolve(e.fu(t))}))},t.prototype.Tu=function(t){return nr(t).delete(this.clientId)},t.prototype.Eu=function(){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.Iu(this.Ha,18e5)?[3,2]:(this.Ha=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(n){var r=t.co(n,Kn.store);return r.Ro().next((function(t){var n=e.wu(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Le.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.Ru(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.ru=function(){var t=this;this.za=this.Nr.Wr("client_metadata_refresh",4e3,(function(){return t.su().then((function(){return t.Eu()})).then((function(){return t.ru()}))}))},t.prototype.fu=function(t){return!!t&&t.ownerId===this.clientId},t.prototype._u=function(t){var e=this;return er(t).get(Rn.key).next((function(n){if(null!==n&&e.Iu(n.leaseTimestampMs,5e3)&&!e.Au(n.ownerId)){if(e.fu(n)&&e.networkEnabled)return!0;if(!e.fu(n)){if(!n.allowTabSynchronization)throw new d(f.FAILED_PRECONDITION,Zn);return!1}}return!(!e.networkEnabled||!e.inForeground)||nr(t).Ro().next((function(t){return void 0===e.wu(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&be("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.mu=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){switch(e.label){case 0:return this.ja=!1,this.Pu(),this.za&&(this.za.cancel(),this.za=null),this.Vu(),this.gu(),[4,this.eu.runTransaction("readwrite",[Rn.store,Kn.store],(function(e){return t.lu(e).next((function(){return t.Tu(e)}))}))];case 1:return e.sent(),this.eu.close(),this.pu(),[2]}}))}))},t.prototype.wu=function(t,e){var n=this;return t.filter((function(t){return n.Iu(t.updateTimeMs,e)&&!n.Au(t.clientId)}))},t.prototype.yu=function(){var t=this;return this.eu.runTransaction("readonly",[Kn.store],(function(e){return nr(e).Ro().next((function(e){return t.wu(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return t.ho()?[4,rn.delete(e+t.Xa)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"Kh",{get:function(){return this.ja},enumerable:!0,configurable:!0}),t.prototype.bu=function(t){return fn.vo(t,this.serializer,this.ur,this.yo)},t.prototype.vu=function(){return this.Za},t.prototype.Su=function(){return this.or},t.prototype.Du=function(){return this.ur},t.prototype.runTransaction=function(t,e,n){var r,i=this;return be("IndexedDbPersistence","Starting transaction:",t),this.eu.runTransaction("readonly"===e?"readonly":"readwrite",Qn,(function(o){return r=new $n(o,i.hu.next()),"readwrite-primary"===e?i.cu(o).next((function(t){return!!t||i._u(o)})).next((function(e){if(!e)throw we("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Nr.Zr((function(){return i.Ya(!1)})),new d(f.FAILED_PRECONDITION,Fe);return n(r)})).next((function(t){return i.du(o).next((function(){return t}))})):i.Cu(o).next((function(){return n(r)}))})).then((function(t){return r.hr(),t}))},t.prototype.Cu=function(t){var e=this;return er(t).get(Rn.key).next((function(t){if(null!==t&&e.Iu(t.leaseTimestampMs,5e3)&&!e.Au(t.ownerId)&&!e.fu(t)&&!t.allowTabSynchronization)throw new d(f.FAILED_PRECONDITION,Zn)}))},t.prototype.du=function(t){var e=new Rn(this.clientId,this.allowTabSynchronization,Date.now());return er(t).put(Rn.key,e)},t.ho=function(){return rn.ho()},t.Fu=function(t){var e=t.ci.projectId;return t.ci.In||(e+="."+t.ci.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.lu=function(t){var e=this,n=er(t);return n.get(Rn.key).next((function(t){return e.fu(t)?(be("IndexedDbPersistence","Releasing primary lease."),n.delete(Rn.key)):Le.resolve()}))},t.prototype.Iu=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(we("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.iu=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ga=function(){t.Nr.Zr((function(){return t.inForeground="visible"===t.document.visibilityState,t.su()}))},this.document.addEventListener("visibilitychange",this.Ga),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Vu=function(){this.Ga&&(this.document.removeEventListener("visibilitychange",this.Ga),this.Ga=null)},t.prototype.nu=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Ka=function(){t.Pu(),t.Nr.Zr((function(){return t.mu()}))},this.window.addEventListener("unload",this.Ka))},t.prototype.gu=function(){this.Ka&&(this.window.removeEventListener("unload",this.Ka),this.Ka=null)},t.prototype.Au=function(t){try{var e=null!==this.tu.getItem(this.Ru(t));return be("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return we("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Pu=function(){try{this.tu.setItem(this.Ru(this.clientId),String(Date.now()))}catch(t){we("Failed to set zombie client id.",t)}},t.prototype.pu=function(){try{this.tu.removeItem(this.Ru(this.clientId))}catch(t){}},t.prototype.Ru=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function er(t){return t.store(Rn.store)}function nr(t){return t.store(Kn.store)}tr.Xa="main";var rr=function(){function t(t,e){this.db=t,this.Nu=null,this.qh=new Ze(this,e)}return t.prototype.Yh=function(t){var e=this.ku(t);return this.db.vu().la(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.ku=function(t){var e=0;return this.Xh(t,(function(t){e++})).next((function(){return e}))},t.prototype.Xs=function(t,e){return this.db.vu().Xs(t,e)},t.prototype.Xh=function(t,e){return this.$u(t,(function(t,n){return e(n)}))},t.prototype.Mu=function(t){this.Nu=t},t.prototype.vn=function(t,e){return ir(t,e)},t.prototype.Dn=function(t,e){return ir(t,e)},t.prototype.Zh=function(t,e,n){return this.db.vu().Zh(t,e,n)},t.prototype.Go=function(t,e){return ir(t,e)},t.prototype.Lu=function(t,e){return this.Nu.Mn(e)?Le.resolve(!0):function(t,e){var n=!1;return gn(t).po((function(r){return dn(t,r,e).next((function(t){return t&&(n=!0),Le.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.to=function(t,e){var n=this,r=this.db.Su().Ca(),i=[],o=0;return this.$u(t,(function(a,s){if(s<=e){var u=n.Lu(t,a).next((function(e){if(!e)return o++,r.tr(t,a).next((function(){return r.Zn(a),kn(t).delete([0,$e(a.path)])}))}));i.push(u)}})).next((function(){return Le.Kn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.es(t.Qa);return this.db.vu().oa(t,n)},t.prototype.Ou=function(t,e){return ir(t,e)},t.prototype.$u=function(t,e){var n,r=kn(t),i=Be.Fr;return r.Vo({index:Hn.documentTargetsIndex},(function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==Be.Fr&&e(new S(nn(n)),i),i=a,n=o):i=Be.Fr})).next((function(){i!==Be.Fr&&e(new S(nn(n)),i)}))},t.prototype.so=function(t){return this.db.Su().ka(t)},t}();function ir(t,e){return kn(t).put(function(t,e){return new Hn(0,$e(t.path),e)}(e,t.Qa))}var or=function(){function t(t,e,n){this.persistence=t,this.xu=e,this.Bu=new Re,this.qu=new T(Te),this.Uu=new Ne((function(t){return t.canonicalId()})),this.Qu=b.MIN,this.persistence.yo.Mu(this.Bu),this.ar=t.bu(n),this.Wu=t.Su(),this.Za=t.vu(),this.ju=new Ve(this.Wu,this.ar,this.persistence.Du()),this.xu.Ku(this.ju)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Gu=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.ar,n=this.ju,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var i;return o.ar.Uo(r).next((function(a){return i=a,e=o.persistence.bu(t),n=new Ve(o.Wu,e,o.persistence.Du()),e.Uo(r)})).next((function(t){for(var e=[],o=[],a=Xt(),s=0,u=i;s<u.length;s++){var l=u[s];e.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++)a=a.add(h[c].key)}for(var f=0,d=t;f<d.length;f++){var p=d[f];o.push(p.batchId);for(var v=0,y=p.mutations;v<y.length;v++)a=a.add(y[v].key)}return n.Tr(r,a).next((function(t){return{zu:t,Hu:e,Yu:o}}))}))}))];case 1:return r=i.sent(),[2,(this.ar=e,this.ju=n,this.xu.Ku(this.ju),r)]}}))}))},t.prototype.Ju=function(t){var e,n=this,r=_.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Xt());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.ju.Tr(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var l=u[s],c=l.ee(e.get(l.key));null!=c&&a.push(new dt(l.key,c,c.se(),ct.exists(!0)))}return n.ar.ko(o,r,a,t)}))})).then((function(t){var n=t.Pn(e);return{batchId:t.batchId,zn:n}}))},t.prototype.Do=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Wu.Ca({Na:!0});return e.ar.Do(n,t.batch,t.streamToken).next((function(){return e.Xu(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.ar.zo(n)})).next((function(){return e.ju.Tr(n,r)}))}))},t.prototype.Zu=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ar.Lo(n,t).next((function(t){return Ee(null!==t),r=t.keys(),e.ar.Wo(n,t)})).next((function(){return e.ar.zo(n)})).next((function(){return e.ju.Tr(n,r)}))}))},t.prototype.qo=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ar.qo(e)}))},t.prototype.Fo=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(e){return t.ar.Fo(e)}))},t.prototype.No=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(n){return e.ar.No(n,t)}))},t.prototype.ea=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Za.ea(e)}))},t.prototype.tc=function(e){var n=this,r=e.ts,i=this.qu;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var a=n.Wu.Ca({Na:!0});i=n.qu;var s=[];e.Ts.forEach((function(e,a){var u=i.get(a);if(u){s.push(n.Za.Ta(o,e.gs,a).next((function(){return n.Za.fa(o,e.Ps,a)})));var l=e.resumeToken;if(l.Ot()>0){var c=u.ss(l,r).es(o.Qa);i=i.nt(a,c),t.ec(u,c,e)&&s.push(n.Za.oa(o,c))}}}));var u=zt(),l=Xt();if(e.Is.forEach((function(t,e){l=l.add(t)})),s.push(a.getEntries(o,l).next((function(t){e.Is.forEach((function(i,l){var c=t.get(i);l instanceof wt&&l.version.isEqual(b.MIN)?(a.Zn(i,r),u=u.nt(i,l)):null==c||l.version.D(c.version)>0||0===l.version.D(c.version)&&c.hasPendingWrites?(a.Jn(l,r),u=u.nt(i,l)):be("LocalStore","Ignoring outdated watch update for ",i,". Current version:",c.version," Watch version:",l.version),e.ws.has(i)&&s.push(n.persistence.yo.Ou(o,i))}))}))),!r.isEqual(b.MIN)){var c=n.Za.ea(o).next((function(t){return n.Za.ia(o,o.Qa,r)}));s.push(c)}return Le.Kn(s).next((function(){return a.apply(o)})).next((function(){return n.ju.Er(o,u)}))})).then((function(t){return n.qu=i,t}))},t.ec=function(t,e,n){return Ee(e.resumeToken.Ot()>0),0===t.resumeToken.Ot()||e.ts.C()-t.ts.C()>=this.sc||n.Ps.size+n.Vs.size+n.gs.size>0},t.prototype.ic=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.Bu.Sn(i.pr,o),this.Bu.Fn(i.yr,o),!i.fromCache){var a=this.qu.get(o),s=a.ns(a.ts);this.qu=this.qu.nt(o,s)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(n){return Le.forEach(t,(function(t){return Le.forEach(t.yr,(function(t){return e.persistence.yo.Dn(n,t)}))}))}))},t.prototype.nc=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ar.Bo(n,t)}))},t.prototype.rc=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.ju.cr(n,t)}))},t.prototype.hc=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Za.da(n,t).next((function(i){return i?Le.resolve(r=i):e.Za.Xo(n).next((function(i){return r=new Ut(t,i,0,n.Qa),e.Za.na(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.qu.get(n.targetId)&&(e.qu=e.qu.nt(n.targetId,n),e.Uu.set(t,n.targetId)),n}))},t.prototype.da=function(t,e){var n=this.Uu.get(e);return void 0!==n?Le.resolve(this.qu.get(n)):this.Za.da(t,e)},t.prototype.oc=function(t,e){var n=this,r=this.qu.get(t);return this.persistence.runTransaction("Release target",e?"readwrite":"readwrite-primary",(function(i){var o=n.Bu.Nn(t);return e?Le.resolve():Le.forEach(o,(function(t){return n.persistence.yo.Dn(i,t)})).next((function(){n.persistence.yo.removeTarget(i,r)}))})).then((function(){n.qu=n.qu.remove(t),n.Uu.delete(r.target)}))},t.prototype.ac=function(t,e){var n=this,r=b.MIN,i=Xt();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.da(o,t.xe()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Za.Ea(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.xu.wr(o,t,e?r:b.MIN,e?i:Xt())})).next((function(t){return{documents:t,uc:i}}))}))},t.prototype.cc=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",(function(n){return e.Za.Ea(n,t)}))},t.prototype.Xu=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Le.resolve();return o.forEach((function(r){a=a.next((function(){return n.tr(t,r)})).next((function(t){var o=t,a=e.gn.get(r);Ee(null!==a),(!o||o.version.D(a)<0)&&(o=i.qt(r,o,e))&&n.Jn(o,e.Vn)}))})),a.next((function(){return r.ar.Wo(t,i)}))},t.prototype.Gh=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.eo(n,e.qu)}))},t}();or.sc=3e8;var ar=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.ar=e.bu(r),i.Wu=e.Su(),i.Za=e.vu(),i}return i.__extends(e,t),e.prototype.start=function(){return this._c()},e.prototype.lc=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ar.xo(n,t).next((function(t){return t?e.ju.Tr(n,t):Le.resolve(null)}))}))},e.prototype.dc=function(t){this.ar.Ko(t)},e.prototype.uu=function(t){this.persistence.uu(t)},e.prototype.yu=function(){return this.persistence.yu()},e.prototype.fc=function(t){var e=this,n=this.qu.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Za.ui(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.ba=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Wu.ba(e,t.Qu)})).then((function(e){var n=e.va;return t.Qu=e.readTime,n}))},e.prototype._c=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Wu.Da(t)}))];case 1:return t.Qu=n.sent(),[2]}}))}))},e}(or);function sr(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){if(t.code!==f.FAILED_PRECONDITION||t.message!==Fe)throw t;return be("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function ur(t,e){if(0!==e.length)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Sr(e.length,"argument")+".")}function lr(t,e,n){if(e.length!==n)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires "+Sr(n,"argument")+", but was called with "+Sr(e.length,"argument")+".")}function cr(t,e,n){if(e.length<n)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Sr(n,"argument")+", but was called with "+Sr(e.length,"argument")+".")}function hr(t,e,n,r){if(e.length<n||e.length>r)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Sr(e.length,"argument")+".")}function fr(t,e,n,r){gr(t,e,Er(n)+" argument",r)}function dr(t,e,n,r){void 0!==r&&fr(t,e,n,r)}function pr(t,e,n,r){gr(t,e,n+" option",r)}function vr(t,e,n,r){void 0!==r&&pr(t,e,n,r)}function yr(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(_r(u))}var l=_r(r);throw new d(f.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function gr(t,e,n,r){if(!("object"===e?mr(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=_r(r);throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function mr(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function _r(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ke()}function br(t,e,n){if(void 0===n)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Er(e)+" argument, but it was undefined.")}function wr(t,e,n){D(e,(function(e,r){if(n.indexOf(e)<0)throw new d(f.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Cr(t,e,n,r){var i=_r(r);return new d(f.INVALID_ARGUMENT,"Function "+t+"() requires its "+Er(n)+" argument to be a "+e+", but it was: "+i)}function kr(t,e,n){if(n<=0)throw new d(f.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+Er(e)+" argument to be a positive number, but it was: "+n+".")}function Er(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Sr(t,e){return t+" "+e+(1===t?"":"s")}function Tr(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new d(f.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function Ir(){if("undefined"==typeof Uint8Array)throw new d(f.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ar(){if(!ye.Lt().Tc)throw new d(f.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Or=function(){function t(t){Ar(),this.Ec=t}return t.fromBase64String=function(e){lr("Blob.fromBase64String",arguments,1),fr("Blob.fromBase64String","string",1,e),Ar();try{return new t(R.fromBase64String(e))}catch(e){throw new d(f.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(lr("Blob.fromUint8Array",arguments,1),Ir(),!(e instanceof Uint8Array))throw Cr("Blob.fromUint8Array","Uint8Array",1,e);return new t(R.fromUint8Array(e))},t.prototype.toBase64=function(){return lr("Blob.toBase64",arguments,0),Ar(),this.Ec.toBase64()},t.prototype.toUint8Array=function(){return lr("Blob.toUint8Array",arguments,0),Ir(),this.Ec.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.Ec.isEqual(t.Ec)},t}(),xr=Tr(Or,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Nr=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new d(f.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Sr(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(fr("FieldPath","string",n,t[n]),0===t[n].length)throw new d(f.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Ic=new E(t)}return t.documentId=function(){return t.wc},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Cr("isEqual","FieldPath",1,e);return this.Ic.isEqual(e.Ic)},t}();Nr.wc=new Nr(E.X().K());var Dr=new RegExp("[~\\*/\\[\\]]"),Pr=function(){function t(t){this.Rc=t}return t.delete=function(){return ur("FieldValue.delete",arguments),Rr.instance},t.serverTimestamp=function(){return ur("FieldValue.serverTimestamp",arguments),Mr.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return cr("FieldValue.arrayUnion",arguments,1),new Lr(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return cr("FieldValue.arrayRemove",arguments,1),new jr(t)},t.increment=function(t){return fr("FieldValue.increment","number",1,t),lr("FieldValue.increment",arguments,1),new Fr(t)},t.prototype.isEqual=function(t){return this===t},t}(),Rr=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return i.__extends(e,t),e}(Pr);Rr.instance=new Rr;var Mr=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return i.__extends(e,t),e}(Pr);Mr.instance=new Mr;var Lr=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.arrayUnion")||this).Ac=e,n}return i.__extends(e,t),e}(Pr),jr=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.arrayRemove")||this).Ac=e,n}return i.__extends(e,t),e}(Pr),Fr=function(t){function e(e){var n=this;return(n=t.call(this,"FieldValue.increment")||this).mc=e,n}return i.__extends(e,t),e}(Pr),Ur=Tr(Pr,"Use FieldValue.<field>() instead."),Vr=function(){function t(t,e){if(lr("GeoPoint",arguments,2),fr("GeoPoint","number",1,t),fr("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new d(f.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new d(f.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Pc=t,this.Vc=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Pc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.Vc},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.Pc===t.Pc&&this.Vc===t.Vc},t.prototype.p=function(t){return Te(this.Pc,t.Pc)||Te(this.Vc,t.Vc)},t}(),qr=/^__.*__$/,Br=function(){function t(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}return t.prototype.gc=function(t,e){var n=[];return n.push(null!==this.se?new dt(t,this.data,this.se,e):new ft(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new pt(t,this.fieldTransforms)),n},t}(),Hr=function(){function t(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}return t.prototype.gc=function(t,e){var n=[new dt(t,this.data,this.se,e)];return this.fieldTransforms.length>0&&n.push(new pt(t,this.fieldTransforms)),n},t}();function zr(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}var Wr=function(){function t(t,e,n,r,i,o){this.pc=t,this.methodName=e,this.path=n,this.yc=r,void 0===i&&this.bc(),this.yc=void 0!==r&&r,this.fieldTransforms=i||[],this.se=o||[]}return t.prototype.vc=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.pc,this.methodName,n,!1,this.fieldTransforms,this.se);return r.Sc(e),r},t.prototype.Dc=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.pc,this.methodName,n,!1,this.fieldTransforms,this.se);return r.bc(),r},t.prototype.Cc=function(e){return new t(this.pc,this.methodName,null,!0,this.fieldTransforms,this.se)},t.prototype.Fc=function(t){var e=null===this.path||this.path.q()?"":" (found in field "+this.path.toString()+")";return new d(f.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.se.find((function(e){return t.U(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.U(e.field)}))},t.prototype.bc=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Sc(this.path.get(t))},t.prototype.Sc=function(t){if(0===t.length)throw this.Fc("Document fields must not be empty");if(zr(this.pc)&&qr.test(t))throw this.Fc('Document fields cannot begin and end with "__"')},t}(),Gr=function(t,e){this.ci=t,this.key=e},Kr=function(){function t(t,e){this.serializer=t,this.Nc=e}return t.prototype.kc=function(t,e){var n=new Wr(0,t,E.H);Yr("Data must be an object, but it was:",n,e);var r=this.$c(e,n);return new Br(new gt(r),null,n.fieldTransforms)},t.prototype.Mc=function(t,e,n){var r=new Wr(2,t,E.H);Yr("Data must be an object, but it was:",r,e);var i,o,a=this.$c(e,r);if(n){for(var s=new O(E.k),u=0,l=n;u<l.length;u++){var c=l[u],h=void 0;if(c instanceof Nr)h=c.Ic;else{if("string"!=typeof c)throw ke();h=Xr(t,c)}if(!r.contains(h))throw new d(f.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=st.Kt(s),o=r.fieldTransforms.filter((function(t){return i.zt(t.field)}))}else i=st.Gt(r.se),o=r.fieldTransforms;return new Br(new gt(a),i,o)},t.prototype.Lc=function(t,e){var n=this,r=new Wr(1,t,E.H);Yr("Data must be an object, but it was:",r,e);var i=new O(E.k),o=gt._e();D(e,(function(e,a){var s=Xr(t,e),u=r.Dc(s);if((a=n.Oc(a,u))instanceof Rr)i=i.add(s);else{var l=n.xc(a,u);null!=l&&(i=i.add(s),o.set(s,l))}}));var a=st.Kt(i);return new Hr(o.he(),a,r.fieldTransforms)},t.prototype.Bc=function(t,e,n,r){var i=new Wr(1,t,E.H),o=[Jr(t,e)],a=[n];if(r.length%2!=0)throw new d(f.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Jr(t,r[s])),a.push(r[s+1]);for(var u=new O(E.k),l=gt._e(),c=0;c<o.length;++c){var h=o[c],p=i.Dc(h),v=this.Oc(a[c],p);if(v instanceof Rr)u=u.add(h);else{var y=this.xc(v,p);null!=y&&(u=u.add(h),l.set(h,y))}}var g=st.Kt(u);return new Hr(l.he(),g,i.fieldTransforms)},t.prototype.qc=function(t,e,n){void 0===n&&(n=!1);var r=new Wr(n?4:3,t,E.H);return this.xc(e,r)},t.prototype.Oc=function(t,e){try{return this.Nc(t)}catch(t){var n=Zr(t);throw e.Fc(n)}},t.prototype.xc=function(t,e){if(Qr(t=this.Oc(t,e)))return Yr("Unsupported field value:",e,t),this.$c(t,e);if(t instanceof Pr)return this.Uc(t,e),null;if(e.path&&e.se.push(e.path),t instanceof Array){if(e.yc&&4!==e.pc)throw e.Fc("Nested arrays are not supported");return this.Qc(t,e)}return this.Wc(t,e)},t.prototype.$c=function(t,e){var n=this,r={};return P(t)?e.path&&e.path.length>0&&e.se.push(e.path):D(t,(function(t,i){var o=n.xc(i,e.vc(t));null!=o&&(r[t]=o)})),{mapValue:{fields:r}}},t.prototype.Qc=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=this.xc(o[i],e.Cc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}},t.prototype.Uc=function(t,e){if(!zr(e.pc))throw e.Fc(t.Rc+"() can only be used with update() and set()");if(null===e.path)throw e.Fc(t.Rc+"() is not currently supported inside arrays");if(t instanceof Rr){if(2!==e.pc)throw e.Fc(1===e.pc?"FieldValue.delete() can only appear at the top level of your update data":"FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.se.push(e.path)}else if(t instanceof Mr)e.fieldTransforms.push(new ut(e.path,nt.instance));else if(t instanceof Lr){var n=this.jc(t.Rc,t.Ac),r=new rt(n);e.fieldTransforms.push(new ut(e.path,r))}else if(t instanceof jr){var i=this.jc(t.Rc,t.Ac),o=new it(i);e.fieldTransforms.push(new ut(e.path,o))}else if(t instanceof Fr){var a=this.qc("FieldValue.increment",t.mc),s=new ot(this.serializer,a);e.fieldTransforms.push(new ut(e.path,s))}else ke()},t.prototype.Wc=function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return this.serializer.Ti(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=_.fromDate(t);return{timestampValue:this.serializer.F(n)}}if(t instanceof _){var r=new _(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:this.serializer.F(r)}}if(t instanceof Vr)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Or)return{bytesValue:this.serializer.Ei(t)};if(t instanceof Gr)return{referenceValue:this.serializer.wi(t.key.path,t.ci)};throw e.Fc("Unsupported field value: "+_r(t))},t.prototype.jc=function(t,e){var n=this;return e.map((function(e,r){var i=new Wr(3,t,E.H);return n.xc(e,i.Cc(r))}))},t}();function Qr(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _||t instanceof Vr||t instanceof Or||t instanceof Gr||t instanceof Pr)}function Yr(t,e,n){if(!Qr(n)||!mr(n)){var r=_r(n);throw e.Fc("an object"===r?t+" a custom object":t+" "+r)}}function Jr(t,e){if(e instanceof Nr)return e.Ic;if("string"==typeof e)return Xr(t,e);throw new d(f.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Xr(t,e){try{return function(t){if(t.search(Dr)>=0)throw new d(f.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Nr.bind.apply(Nr,i.__spreadArrays([void 0],t.split("."))))}catch(i){throw new d(f.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Ic}catch(e){var n=Zr(e);throw new d(f.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Zr(t){return t instanceof Error?t.message:t.toString()}var $r=function(){function t(t,e,n,r,i,o){this.Nr=t,this.Kc=n,this.Gc=r,this.zc=i,this.listener=o,this.state=0,this.Hc=0,this.Yc=null,this.stream=null,this.oh=new ze(t,e)}return t.prototype.Jc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Xc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Zc()},t.prototype.stop=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Jc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(){this.state=0,this.oh.reset()},t.prototype.e_=function(){var t=this;this.Xc()&&null===this.Yc&&(this.Yc=this.Nr.Wr(this.Kc,6e4,(function(){return t.s_()})))},t.prototype.i_=function(t){this.n_(),this.stream.send(t)},t.prototype.s_=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.Xc()?[2,this.close(0)]:[2]}))}))},t.prototype.n_=function(){this.Yc&&(this.Yc.cancel(),this.Yc=null)},t.prototype.close=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.n_(),this.oh.cancel(),this.Hc++,3!==t?this.oh.reset():e&&e.code===f.RESOURCE_EXHAUSTED?(we(e.toString()),we("Using maximum backoff delay to prevent overloading the backend."),this.oh.qr()):e&&e.code===f.UNAUTHENTICATED&&this.zc._(),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.h_(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.r_=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.o_(this.Hc),n=this.Hc;this.zc.getToken().then((function(e){t.Hc===n&&t.a_(e)}),(function(n){e((function(){var e=new d(f.UNKNOWN,"Fetching auth token failed: "+n.message);return t.u_(e)}))}))},t.prototype.a_=function(t){var e=this,n=this.o_(this.Hc);this.stream=this.c_(t),this.stream.__((function(){n((function(){return e.state=2,e.listener.__()}))})),this.stream.h_((function(t){n((function(){return e.u_(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Zc=function(){var t=this;this.state=4,this.oh.Ur((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.u_=function(t){return be("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.o_=function(t){var e=this;return function(n){e.Nr.Zr((function(){return e.Hc===t?n():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ti=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return i.__extends(e,t),e.prototype.c_=function(t){return this.Gc.l_("Listen",t)},e.prototype.onMessage=function(t){this.oh.reset();var e=this.serializer.Fi(t),n=this.serializer.ki(t);return this.listener.d_(e,n)},e.prototype.f_=function(t){var e={};e.database=this.serializer.pi,e.addTarget=this.serializer.xe(t);var n=this.serializer.en(t);n&&(e.labels=n),this.i_(e)},e.prototype.T_=function(t){var e={};e.database=this.serializer.pi,e.removeTarget=t,this.i_(e)},e}($r),ei=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.E_=!1,a.lastStreamToken=R.xt,a}return i.__extends(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.E_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.E_=!1,t.prototype.start.call(this)},e.prototype.r_=function(){this.E_&&this.w_([])},e.prototype.c_=function(t){return this.Gc.l_("Write",t)},e.prototype.onMessage=function(t){if(Ee(!!t.streamToken),this.lastStreamToken=this.serializer.Ii(t.streamToken),this.E_){this.oh.reset();var e=this.serializer.Wi(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.R_(n,e)}return Ee(!t.writeResults||0===t.writeResults.length),this.E_=!0,this.listener.A_()},e.prototype.m_=function(){var t={};t.database=this.serializer.pi,this.i_(t)},e.prototype.w_=function(t){var e=this,n={streamToken:this.serializer.Ei(this.lastStreamToken),writes:t.map((function(t){return e.serializer.$i(t)}))};this.i_(n)},e}($r),ni=function(){function t(t,e,n,r){this.Nr=t,this.Gc=e,this.credentials=n,this.serializer=r}return t.prototype.P_=function(t){return new ei(this.Nr,this.Gc,this.credentials,this.serializer,t)},t.prototype.V_=function(t){return new ti(this.Nr,this.Gc,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.pi,writes:t.map((function(t){return e.serializer.$i(t)}))};return this.g_("Commit",n).then((function(t){return e.serializer.Wi(t.writeResults,t.commitTime)}))},t.prototype.p_=function(t){var e=this,n={database:this.serializer.pi,documents:t.map((function(t){return e.serializer.mi(t)}))};return this.y_("BatchGetDocuments",n).then((function(n){var r=zt();n.forEach((function(t){var n=e.serializer.Ci(t);r=r.nt(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);Ee(!!e),i.push(e)})),i}))},t.prototype.g_=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.Gc.g_(t,e,r)})).catch((function(t){throw t.code===f.UNAUTHENTICATED&&n.credentials._(),t}))},t.prototype.y_=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.Gc.y_(t,e,r)})).catch((function(t){throw t.code===f.UNAUTHENTICATED&&n.credentials._(),t}))},t}(),ri=function(){function t(t){this.b_=t,this.v_=Yt(),this.mutations=[],this.S_=!1,this.D_=null,this.C_=new Set}return t.prototype.p_=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(this.F_(),this.mutations.length>0)throw new d(f.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.b_.p_(t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof wt||t instanceof bt?n.N_(t):ke()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.gc(t,this.Zt(t))),this.C_.add(t)},t.prototype.update=function(t,e){try{this.write(e.gc(t,this.k_(t)))}catch(t){this.D_=t}this.C_.add(t)},t.prototype.delete=function(t){this.write([new vt(t,this.Zt(t))]),this.C_.add(t)},t.prototype.commit=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(this.F_(),this.D_)throw this.D_;return t=this.v_,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new yt(t,e.Zt(t)))})),[4,this.b_.commit(this.mutations)];case 1:return n.sent(),this.S_=!0,[2]}}))}))},t.prototype.N_=function(t){var e;if(t instanceof bt)e=t.version;else{if(!(t instanceof wt))throw ke();e=b.S()}var n=this.v_.get(t.key);if(null!==n){if(!e.isEqual(n))throw new d(f.ABORTED,"Document version changed between two reads.")}else this.v_=this.v_.nt(t.key,e)},t.prototype.Zt=function(t){var e=this.v_.get(t);return!this.C_.has(t)&&e?ct.updateTime(e):ct.NONE},t.prototype.k_=function(t){var e=this.v_.get(t);if(!this.C_.has(t)&&e){if(e.isEqual(b.S()))throw new d(f.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ct.updateTime(e)}return ct.exists(!0)},t.prototype.write=function(t){this.F_(),this.mutations=this.mutations.concat(t)},t.prototype.F_=function(){},t}(),ii=function(){function t(t,e){this.jr=t,this.M_=e,this.state="Unknown",this.L_=0,this.O_=null,this.x_=!0}return t.prototype.B_=function(){var t=this;0===this.L_&&(this.q_("Unknown"),this.O_=this.jr.Wr("online_state_timeout",1e4,(function(){return t.O_=null,t.U_("Backend didn't respond within 10 seconds."),t.q_("Offline"),Promise.resolve()})))},t.prototype.Q_=function(t){"Online"===this.state?this.q_("Unknown"):(this.L_++,this.L_>=1&&(this.W_(),this.U_("Connection failed 1 times. Most recent error: "+t.toString()),this.q_("Offline")))},t.prototype.set=function(t){this.W_(),this.L_=0,"Online"===t&&(this.x_=!1),this.q_(t)},t.prototype.q_=function(t){t!==this.state&&(this.state=t,this.M_(t))},t.prototype.U_=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.x_?(we(e),this.x_=!1):be("OnlineStateTracker",e)},t.prototype.W_=function(){null!==this.O_&&(this.O_.cancel(),this.O_=null)},t}(),oi=function(){function t(t,e,n,r,o){var a=this;this.j_=t,this.b_=e,this.K_=[],this.G_=new Map,this.z_=null,this.networkEnabled=!1,this.isPrimary=!1,this.H_=o,this.H_.Y_((function(t){n.Zr((function(){return i.__awaiter(a,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.J_()?(be("RemoteStore","Restarting streams for network reachability change."),[4,this.X_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Z_=new ii(n,r),this.tl=this.b_.V_({__:this.el.bind(this),h_:this.sl.bind(this),d_:this.il.bind(this)}),this.nl=this.b_.P_({__:this.rl.bind(this),h_:this.hl.bind(this),A_:this.ol.bind(this),R_:this.R_.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.J_()?(t=this.nl,[4,this.j_.Fo()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.al()?this.ul():this.Z_.set("Unknown"),[4,this.cl()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this._l()];case 1:return t.sent(),this.Z_.set("Offline"),[2]}}))}))},t.prototype._l=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.nl.stop()];case 1:return t.sent(),[4,this.tl.stop()];case 2:return t.sent(),this.K_.length>0&&(be("RemoteStore","Stopping write stream with "+this.K_.length+" pending writes"),this.K_=[]),this.ll(),[2]}}))}))},t.prototype.mu=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return be("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this._l()];case 1:return t.sent(),this.H_.mu(),this.Z_.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.G_.has(t.targetId)||(this.G_.set(t.targetId,t),this.al()?this.ul():this.tl.Xc()&&this.dl(t))},t.prototype.fl=function(t){this.G_.delete(t),this.tl.Xc()&&this.Tl(t),0===this.G_.size&&(this.tl.Xc()?this.tl.e_():this.J_()&&this.Z_.set("Unknown"))},t.prototype.ui=function(t){return this.G_.get(t)||null},t.prototype.ai=function(t){return this.El.ai(t)},t.prototype.dl=function(t){this.z_.Bs(t.targetId),this.tl.f_(t)},t.prototype.Tl=function(t){this.z_.Bs(t),this.tl.T_(t)},t.prototype.ul=function(){this.z_=new le(this),this.tl.start(),this.Z_.B_()},t.prototype.al=function(){return this.J_()&&!this.tl.Jc()&&this.G_.size>0},t.prototype.J_=function(){return this.isPrimary&&this.networkEnabled},t.prototype.ll=function(){this.z_=null},t.prototype.el=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){return this.G_.forEach((function(e,n){t.dl(e)})),[2]}))}))},t.prototype.sl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.ll(),this.al()?(this.Z_.Q_(t),this.ul()):this.Z_.set("Unknown"),[2]}))}))},t.prototype.il=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:return this.Z_.set("Online"),t instanceof se&&2===t.state&&t.cause?[2,this.Il(t)]:(t instanceof oe?this.z_.zs(t):t instanceof ae?this.z_.si(t):this.z_.Js(t),e.isEqual(b.MIN)?[3,4]:[4,this.j_.ea()]);case 1:return n=r.sent(),e.D(n)>=0?[4,this.wl(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:r.label=4;case 4:return[2]}}))}))},t.prototype.wl=function(t){var e=this,n=this.z_.ri(t);return n.Ts.forEach((function(n,r){if(n.resumeToken.Ot()>0){var i=e.G_.get(r);i&&e.G_.set(r,i.ss(n.resumeToken,t))}})),n.Es.forEach((function(t){var n=e.G_.get(t);if(n){e.G_.set(t,n.ss(R.xt,n.ts)),e.Tl(t);var r=new Ut(n.target,t,1,n.sequenceNumber);e.dl(r)}})),this.El.tc(n)},t.prototype.Il=function(t){var e=this,n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.G_.has(t)?[2,(this.G_.delete(t),this.z_.removeTarget(t),this.El.Rl(t,n))]:[2]}))}))}))})),r},t.prototype.cl=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return this.Al()?[4,this.j_.nc(this.K_.length>0?this.K_[this.K_.length-1].batchId:-1)]:[3,5];case 1:return null!==(t=e.sent())?[3,2]:(0===this.K_.length&&this.nl.e_(),[3,4]);case 2:return this.ml(t),[4,this.cl()];case 3:e.sent(),e.label=4;case 4:e.label=5;case 5:return this.Pl()&&this.Vl(),[2]}}))}))},t.prototype.Al=function(){return this.J_()&&this.K_.length<10},t.prototype.gl=function(){return this.K_.length},t.prototype.ml=function(t){this.K_.push(t),this.nl.Xc()&&this.nl.I_&&this.nl.w_(t.mutations)},t.prototype.Pl=function(){return this.J_()&&!this.nl.Jc()&&this.K_.length>0},t.prototype.Vl=function(){this.nl.start()},t.prototype.rl=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.nl.m_(),[2]}))}))},t.prototype.ol=function(){var t=this;return this.j_.No(this.nl.lastStreamToken).then((function(){for(var e=0,n=t.K_;e<n.length;e++)t.nl.w_(n[e].mutations)})).catch(sr)},t.prototype.R_=function(t,e){var n=this,r=this.K_.shift(),i=Pe.from(r,t,e,this.nl.lastStreamToken);return this.El.pl(i).then((function(){return n.cl()}))},t.prototype.hl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){return t&&this.K_.length>0?[2,(e=this.nl.I_?this.yl(t):this.bl(t),e.then((function(){n.Pl()&&n.Vl()})))]:[2]}))}))},t.prototype.bl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return qt(t.code)?[2,(be("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.nl.lastStreamToken),this.nl.lastStreamToken=R.xt,this.j_.No(R.xt).catch(sr))]:[2]}))}))},t.prototype.yl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){return qt(n=t.code)&&n!==f.ABORTED?(e=this.K_.shift(),[2,(this.nl.t_(),this.El.vl(e.batchId,t).then((function(){return r.cl()})))]):[2]}))}))},t.prototype.Sl=function(){return new ri(this.b_)},t.prototype.X_=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this._l()];case 1:return t.sent(),this.Z_.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.Dl=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.J_()?(be("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.X_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Cl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:[4,this._l()];case 3:e.sent(),this.Z_.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function ai(t,e){return"firestore_clients_"+t+"_"+e}function si(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function ui(t,e){return"firestore_targets_"+t+"_"+e}var li=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Fl=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new d(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(we("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Nl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ci=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Fl=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new d(r.error.code,r.error.message)),i?new t(e,r.state,o):(we("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Nl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),hi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Fl=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=$t(),a=0;i&&a<r.activeTargetIds.length;++a)i=j(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(we("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),fi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Fl=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(we("SharedClientState","Failed to parse online state: "+e),null)},t}(),di=function(){function t(){this.activeTargetIds=$t()}return t.prototype.kl=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.$l=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Nl=function(){var t={activeTargetIds:this.activeTargetIds.j(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),pi=function(){function t(e,n,r,i,o){if(this.Nr=e,this.platform=n,this.persistenceKey=r,this.Ml=i,this.El=null,this.M_=null,this.vr=null,this.Ll=this.Ol.bind(this),this.xl=new T(Te),this.Kh=!1,this.Bl=[],!t.ho(this.platform))throw new d(f.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.ql=ai(this.persistenceKey,this.Ml),this.Ul=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.xl=this.xl.nt(this.Ml,new di),this.Ql=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Wl=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.jl=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Kl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Ll)}return t.ho=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,o,a,s,u,l,c,h=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.El.yu()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ml&&(o=this.getItem(ai(this.persistenceKey,r)))&&(a=hi.Fl(r,o))&&(this.xl=this.xl.nt(a.clientId,a));for(this.Gl(),(s=this.storage.getItem(this.Kl))&&(u=this.zl(s))&&this.Hl(u),l=0,c=this.Bl;l<c.length;l++)this.Ol(c[l]);return this.Bl=[],this.platform.window.addEventListener("unload",(function(){return h.mu()})),this.Kh=!0,[2]}}))}))},t.prototype.Cr=function(t){this.setItem(this.Ul,JSON.stringify(t))},t.prototype.Yl=function(){return this.Jl(this.xl)},t.prototype.Xl=function(t){var e=!1;return this.xl.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Zl=function(t){this.td(t,"pending")},t.prototype.ed=function(t,e,n){this.td(t,e,n),this.sd(t)},t.prototype.nd=function(t){var e="not-current";if(this.Xl(t)){var n=this.storage.getItem(ui(this.persistenceKey,t));if(n){var r=ci.Fl(t,n);r&&(e=r.state)}}return this.rd.kl(t),this.Gl(),e},t.prototype.hd=function(t){this.rd.$l(t),this.Gl()},t.prototype.od=function(t){return this.rd.activeTargetIds.has(t)},t.prototype.ad=function(t){this.removeItem(ui(this.persistenceKey,t))},t.prototype.ud=function(t,e,n){this._d(t,e,n)},t.prototype.Gu=function(t,e,n){var r=this;e.forEach((function(t){r.sd(t)})),this.currentUser=t,n.forEach((function(t){r.Zl(t)}))},t.prototype.ld=function(t){this.dd(t)},t.prototype.mu=function(){this.Kh&&(this.platform.window.removeEventListener("storage",this.Ll),this.removeItem(this.ql),this.Kh=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return be("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){be("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){be("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ol=function(t){var e=this;if(t.storageArea===this.storage){if(be("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ql)return void we("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Nr.Ih((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n,r,o,a,s;return i.__generator(this,(function(i){if(this.Kh){if(null!==t.key)if(this.Ql.test(t.key)){if(null==t.newValue)return e=this.fd(t.key),[2,this.Td(e,null)];if(n=this.Ed(t.key,t.newValue))return[2,this.Td(n.clientId,n)]}else if(this.Wl.test(t.key)){if(null!==t.newValue&&(r=this.Id(t.key,t.newValue)))return[2,this.wd(r)]}else if(this.jl.test(t.key)){if(null!==t.newValue&&(o=this.Rd(t.key,t.newValue)))return[2,this.Ad(o)]}else if(t.key===this.Kl){if(null!==t.newValue&&(a=this.zl(t.newValue)))return[2,this.Hl(a)]}else t.key===this.Ul&&(s=function(t){var e=Be.Fr;if(null!=t)try{var n=JSON.parse(t);Ee("number"==typeof n),e=n}catch(t){we("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Be.Fr&&this.vr(s)}else this.Bl.push(t);return[2]}))}))}))}},Object.defineProperty(t.prototype,"rd",{get:function(){return this.xl.get(this.Ml)},enumerable:!0,configurable:!0}),t.prototype.Gl=function(){this.setItem(this.ql,this.rd.Nl())},t.prototype.td=function(t,e,n){var r=new li(this.currentUser,t,e,n),i=si(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Nl())},t.prototype.sd=function(t){var e=si(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.dd=function(t){this.storage.setItem(this.Kl,JSON.stringify({clientId:this.Ml,onlineState:t}))},t.prototype._d=function(t,e,n){var r=ui(this.persistenceKey,t),i=new ci(t,e,n);this.setItem(r,i.Nl())},t.prototype.fd=function(t){var e=this.Ql.exec(t);return e?e[1]:null},t.prototype.Ed=function(t,e){var n=this.fd(t);return hi.Fl(n,e)},t.prototype.Id=function(t,e){var n=this.Wl.exec(t),r=Number(n[1]);return li.Fl(new h(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Rd=function(t,e){var n=this.jl.exec(t),r=Number(n[1]);return ci.Fl(r,e)},t.prototype.zl=function(t){return fi.Fl(t)},t.prototype.wd=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.El.md(t.batchId,t.state,t.error)]:(be("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Ad=function(t){return this.El.Pd(t.targetId,t.state,t.error)},t.prototype.Td=function(t,e){var n=this,r=e?this.xl.nt(t,e):this.xl.remove(t),i=this.Jl(this.xl),o=this.Jl(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.El.Vd(a,s).then((function(){n.xl=r}))},t.prototype.Hl=function(t){this.xl.get(t.clientId)&&this.M_(t.onlineState)},t.prototype.Jl=function(t){var e=$t();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),vi=function(){function t(){this.gd=new di,this.pd={},this.El=null,this.M_=null,this.vr=null}return t.prototype.Zl=function(t){},t.prototype.ed=function(t,e,n){},t.prototype.nd=function(t){return this.gd.kl(t),this.pd[t]||"not-current"},t.prototype.ud=function(t,e,n){this.pd[t]=e},t.prototype.hd=function(t){this.gd.$l(t)},t.prototype.od=function(t){return this.gd.activeTargetIds.has(t)},t.prototype.ad=function(t){delete this.pd[t]},t.prototype.Yl=function(){return this.gd.activeTargetIds},t.prototype.Xl=function(t){return this.gd.activeTargetIds.has(t)},t.prototype.start=function(){return this.gd=new di,Promise.resolve()},t.prototype.Gu=function(t,e,n){},t.prototype.ld=function(t){},t.prototype.mu=function(){},t.prototype.Cr=function(t){},t}(),yi=function(t){this.key=t},gi=function(t){this.key=t},mi=function(){function t(t,e){this.query=t,this.yd=e,this.bd=null,this.ms=!1,this.vd=Xt(),this._s=Xt(),this.Sd=new te(t.Be.bind(t))}return Object.defineProperty(t.prototype,"Dd",{get:function(){return this.yd},enumerable:!0,configurable:!0}),t.prototype.Cd=function(t,e){var n=this,r=e?e.Fd:new ee,i=e?e.Sd:this.Sd,o=e?e._s:this._s,a=i,s=!1,u=this.query.je()&&i.size===this.query.limit?i.last():null,l=this.query.Ke()&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var c=i.get(t),h=e instanceof bt?e:null;h&&(h=n.query.matches(h)?h:null);var f=!!c&&n._s.has(c.key),d=!!h&&(h.te||n._s.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Nd(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.query.Be(h,u)>0||l&&n.query.Be(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.je()||this.query.Ke())for(;a.size>this.query.limit;){var c=this.query.je()?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{Sd:a,Fd:r,kd:s,_s:o}},t.prototype.Nd=function(t,e){return t.te&&e.hasCommittedMutations&&!e.te},t.prototype.ir=function(t,e,n){var r=this,i=this.Sd;this.Sd=t.Sd,this._s=t._s;var o=t.Fd.us();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return n(t)-n(e)}(t.type,e.type)||r.query.Be(t.doc,e.doc)})),this.$d(n);var a=e?this.Md():[],s=0===this.vd.size&&this.ms?1:0,u=s!==this.bd;return this.bd=s,0!==o.length||u?{snapshot:new ne(this.query,t.Sd,i,o,t._s,0===s,u,!1),Ld:a}:{Ld:a}},t.prototype.Od=function(t){return this.ms&&"Offline"===t?(this.ms=!1,this.ir({Sd:this.Sd,Fd:new ee,_s:this._s,kd:!1},!1)):{Ld:[]}},t.prototype.xd=function(t){return!this.yd.has(t)&&!!this.Sd.has(t)&&!this.Sd.get(t).te},t.prototype.$d=function(t){var e=this;t&&(t.Ps.forEach((function(t){return e.yd=e.yd.add(t)})),t.Vs.forEach((function(t){})),t.gs.forEach((function(t){return e.yd=e.yd.delete(t)})),this.ms=t.ms)},t.prototype.Md=function(){var t=this;if(!this.ms)return[];var e=this.vd;this.vd=Xt(),this.Sd.forEach((function(e){t.xd(e.key)&&(t.vd=t.vd.add(e.key))}));var n=[];return e.forEach((function(e){t.vd.has(e)||n.push(new gi(e))})),this.vd.forEach((function(t){e.has(t)||n.push(new yi(t))})),n},t.prototype.Bd=function(t){this.yd=t.uc,this.vd=Xt();var e=this.Cd(t.documents);return this.ir(e,!0)},t.prototype.qd=function(){return ne.fs(this.query,this.Sd,this._s,0===this.bd)},t}(),_i=function(){function t(t,e,n,r){this.jr=t,this.Ud=e,this.updateFunction=n,this.zr=r,this.Qd=5,this.oh=new ze(this.jr,"transaction_retry")}return t.prototype.Wd=function(){this.jd()},t.prototype.jd=function(){var t=this;this.oh.Ur((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return i.__generator(this,(function(r){return t=this.Ud.Sl(),(e=this.Kd(t))&&e.then((function(e){n.jr.Zr((function(){return t.commit().then((function(){n.zr.resolve(e)})).catch((function(t){n.Gd(t)}))}))})).catch((function(t){n.Gd(t)})),[2]}))}))}))},t.prototype.Kd=function(t){try{var e=this.updateFunction(t);return!M(e)&&e.catch&&e.then?e:(this.zr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.zr.reject(t),null}},t.prototype.Gd=function(t){var e=this;this.Qd>0&&this.zd(t)?(this.Qd-=1,this.jr.Zr((function(){return e.jd(),Promise.resolve()}))):this.zr.reject(t)},t.prototype.zd=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qt(e)}return!1},t}(),bi=function(t,e,n){this.query=t,this.targetId=e,this.view=n},wi=function(t){this.key=t,this.Hd=!1},Ci=function(){function t(t,e,n,r,i){this.j_=t,this.Ud=e,this.Yd=n,this.currentUser=r,this.Jd=i,this.Xd=null,this.Zd=new Ne((function(t){return t.canonicalId()})),this.tf=new Map,this.ef=[],this.sf=new T(S.k),this.if=new Map,this.nf=new Re,this.rf={},this.hf=new Map,this.af=mn.Jo(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"uf",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){this.Xd=t},t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return this.cf("listen()"),(r=this.Zd.get(t))?(this.Yd.nd(e=r.targetId),n=r.view.qd(),[3,4]):[3,1];case 1:return[4,this.j_.hc(t.xe())];case 2:return o=i.sent(),a=this.Yd.nd(o.targetId),[4,this._f(t,e=o.targetId,"current"===a)];case 3:n=i.sent(),this.uf&&this.Ud.listen(o),i.label=4;case 4:return[2,(this.Xd.d_([n]),e)]}}))}))},t.prototype._f=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,u,l;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.j_.ac(t,!0)];case 1:return r=i.sent(),o=new mi(t,r.uc),a=o.Cd(r.documents),s=ie.As(e,n&&"Offline"!==this.onlineState),u=o.ir(a,this.uf,s),this.lf(e,u.Ld),l=new bi(t,e,o),[2,(this.Zd.set(t,l),this.tf.has(e)?this.tf.get(e).push(t):this.tf.set(e,[t]),u.snapshot)]}}))}))},t.prototype.fl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.cf("unlisten()"),e=this.Zd.get(t),(n=this.tf.get(e.targetId)).length>1?[2,(this.tf.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),void this.Zd.delete(t))]:this.uf?(this.Yd.hd(e.targetId),this.Yd.Xl(e.targetId)?[3,2]:[4,this.j_.oc(e.targetId,!1).then((function(){r.Yd.ad(e.targetId),r.Ud.fl(e.targetId),r.df(e.targetId)})).catch(sr)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.df(e.targetId),[4,this.j_.oc(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:this.cf("write()"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.j_.Ju(t)];case 2:return n=i.sent(),[3,4];case 3:if("IndexedDbTransactionError"===(r=i.sent()).name)return[2,(we("SyncEngine","Dropping write that cannot be persisted: "+r),void e.reject(new d(f.UNAVAILABLE,"Failed to persist write: "+r)))];throw r;case 4:return this.Yd.Zl(n.batchId),this.ff(n.batchId,e),[4,this.Tf(n.zn)];case 5:return i.sent(),[4,this.Ud.cl()];case 6:return i.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new _i(t,this.Ud,e,n).Wd()},t.prototype.tc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:this.cf("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.j_.tc(t)];case 2:return e=r.sent(),t.Ts.forEach((function(t,e){var r=n.if.get(e);r&&(Ee(t.Ps.size+t.Vs.size+t.gs.size<=1),t.Ps.size>0?r.Hd=!0:t.Vs.size>0?Ee(r.Hd):t.gs.size>0&&(Ee(r.Hd),r.Hd=!1))})),[4,this.Tf(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,sr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Od=function(t,e){this.cf("applyOnlineStateChange()");var n=[];this.Zd.forEach((function(e,r){var i=r.view.Od(t);i.snapshot&&n.push(i.snapshot)})),this.Xd.Ef(t),this.Xd.d_(n),this.onlineState=t},t.prototype.Rl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.cf("rejectListens()"),this.Yd.ud(t,"rejected",e),n=this.if.get(t),(r=n&&n.key)?(this.sf=this.sf.remove(r),this.if.delete(t),this.If(),o=(o=new T(S.k)).nt(r,new wt(r,b.S())),a=Xt().add(r),s=new re(b.MIN,new Map,new O(Te),o,a),[2,this.tc(s)]):[4,this.j_.oc(t,!1).then((function(){return u.df(t,e)})).catch(sr)];case 1:return i.sent(),[2]}}))}))},t.prototype.pl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:this.cf("applySuccessfulWrite()"),this.wf(e=t.batch.batchId,null),this.Rf(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.j_.Do(t)];case 2:return n=r.sent(),this.Yd.ed(e,"acknowledged"),[4,this.Tf(n)];case 3:return r.sent(),[3,6];case 4:return[4,sr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.vl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:this.cf("rejectFailedWrite()"),this.wf(t,e),this.Rf(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.j_.Zu(t)];case 2:return n=r.sent(),this.Yd.ed(t,"rejected",e),[4,this.Tf(n)];case 3:return r.sent(),[3,6];case 4:return[4,sr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Af=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return this.Ud.J_()||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.j_.qo()];case 1:return-1===(e=r.sent())?[2,void t.resolve()]:((n=this.hf.get(e)||[]).push(t),this.hf.set(e,n),[2])}}))}))},t.prototype.Rf=function(t){(this.hf.get(t)||[]).forEach((function(t){t.resolve()})),this.hf.delete(t)},t.prototype.mf=function(t){this.hf.forEach((function(e){e.forEach((function(e){e.reject(new d(f.CANCELLED,t))}))})),this.hf.clear()},t.prototype.ff=function(t,e){var n=this.rf[this.currentUser.s()];n||(n=new T(Te)),n=n.nt(t,e),this.rf[this.currentUser.s()]=n},t.prototype.wf=function(t,e){var n=this.rf[this.currentUser.s()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.rf[this.currentUser.s()]=n}},t.prototype.df=function(t,e){var n=this;void 0===e&&(e=null),this.Yd.hd(t);for(var r=0,i=this.tf.get(t);r<i.length;r++){var o=i[r];this.Zd.delete(o),e&&this.Xd.Pf(o,e)}if(this.tf.delete(t),this.uf){var a=this.nf.$n(t);this.nf.Nn(t),a.forEach((function(t){n.nf.Mn(t)||n.Vf(t)}))}},t.prototype.Vf=function(t){var e=this.sf.get(t);null!==e&&(this.Ud.fl(e),this.sf=this.sf.remove(t),this.if.delete(e),this.If())},t.prototype.lf=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof yi?(this.nf.vn(i.key,t),this.gf(i)):i instanceof gi?(be("SyncEngine","Document no longer in limbo: "+i.key),this.nf.Dn(i.key,t),this.nf.Mn(i.key)||this.Vf(i.key)):ke()}},t.prototype.gf=function(t){var e=t.key;this.sf.get(e)||(be("SyncEngine","New document in limbo: "+e),this.ef.push(e),this.If())},t.prototype.If=function(){for(;this.ef.length>0&&this.sf.size<this.Jd;){var t=this.ef.shift(),e=this.af.next();this.if.set(e,new wi(t)),this.sf=this.sf.nt(t,e),this.Ud.listen(new Ut(Et.ve(t.path).xe(),e,2,Be.Fr))}},t.prototype.pf=function(){return this.sf},t.prototype.yf=function(){return this.ef},t.prototype.Tf=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=[],r=[],o=[],this.Zd.forEach((function(i,s){o.push(Promise.resolve().then((function(){var e=s.view.Cd(t);return e.kd?a.j_.ac(s.query,!1).then((function(t){return s.view.Cd(t.documents,e)})):e})).then((function(t){var i=e&&e.Ts.get(s.targetId),o=s.view.ir(t,a.uf,i);if(a.lf(s.targetId,o.Ld),o.snapshot){a.uf&&a.Yd.ud(s.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=qe.br(s.targetId,o.snapshot);r.push(u)}})))})),[4,Promise.all(o)];case 1:return i.sent(),this.Xd.d_(n),[4,this.j_.ic(r)];case 2:return i.sent(),[2]}}))}))},t.prototype.cf=function(t){},t.prototype.Dl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.mf("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.j_.Gu(t)]):[3,3];case 1:return n=r.sent(),this.Yd.Gu(t,n.Hu,n.Yu),[4,this.Tf(n.zu)];case 2:r.sent(),r.label=3;case 3:return[4,this.Ud.Dl()];case 4:return r.sent(),[2]}}))}))},t.prototype.enableNetwork=function(){return this.Ud.enableNetwork()},t.prototype.disableNetwork=function(){return this.Ud.disableNetwork()},t.prototype.ai=function(t){var e=this.if.get(t);if(e&&e.Hd)return Xt().add(e.key);var n=Xt(),r=this.tf.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=this.Zd.get(o[i]);n=n.kt(a.view.Dd)}return n},t}(),ki=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this).j_=e,a.isPrimary=void 0,a}return i.__extends(e,t),Object.defineProperty(e.prototype,"uf",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.enableNetwork=function(){return this.j_.uu(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.j_.uu(!1),t.prototype.disableNetwork.call(this)},e.prototype.bf=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this.j_.ac(t.query,!0)];case 1:return e=r.sent(),n=t.view.Bd(e),[2,(this.isPrimary&&this.lf(t.targetId,n.Ld),n)]}}))}))},e.prototype.Od=function(e,n){this.uf&&0===n&&(t.prototype.Od.call(this,e,n),this.Yd.ld(e)),this.uf||1!==n||t.prototype.Od.call(this,e,n)},e.prototype.md=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r;return i.__generator(this,(function(i){switch(i.label){case 0:return this.cf("applyBatchState()"),[4,this.j_.lc(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.Ud.cl()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.wf(t,n||null),this.j_.dc(t)):ke(),i.label=4;case 4:return[4,this.Tf(r)];case 5:return i.sent(),[3,7];case 6:be("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Cl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a,s,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Ud.Cl(!0)]);case 1:return i.sent(),e=this.Yd.Yl(),[4,this.vf(e.j())];case 2:for(n=i.sent(),r=0,o=n;r<o.length;r++)this.Ud.listen(o[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),this.tf.forEach((function(t,e){u.Yd.od(e)?a.push(e):s=s.then((function(){return u.df(e),u.j_.oc(e,!0)})),u.Ud.fl(e)})),[4,s]);case 4:return i.sent(),[4,this.vf(a)];case 5:return i.sent(),this.Sf(),[4,this.Ud.Cl(!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},e.prototype.Sf=function(){var t=this;this.if.forEach((function(e,n){t.Ud.fl(n)})),this.nf.kn(),this.if=new Map,this.sf=new T(S.k)},e.prototype.vf=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a,s,u,l,c,h,f,d;return i.__generator(this,(function(i){switch(i.label){case 0:e=[],n=[],r=0,o=t,i.label=1;case 1:return r<o.length?(s=void 0,(u=this.tf.get(a=o[r]))&&0!==u.length?[4,this.j_.oc(a,!0)]:[3,8]):[3,14];case 2:return i.sent(),[4,this.j_.hc(u[0].xe())];case 3:s=i.sent(),l=0,c=u,i.label=4;case 4:return l<c.length?(h=this.Zd.get(c[l]),[4,this.bf(h)]):[3,7];case 5:(f=i.sent()).snapshot&&n.push(f.snapshot),i.label=6;case 6:return l++,[3,4];case 7:return[3,12];case 8:return[4,this.j_.fc(a)];case 9:return d=i.sent(),[4,this.j_.hc(d)];case 10:return s=i.sent(),[4,this._f(this.Df(d),a,!1)];case 11:i.sent(),i.label=12;case 12:e.push(s),i.label=13;case 13:return r++,[3,1];case 14:return[2,(this.Xd.d_(n),e)]}}))}))},e.prototype.Df=function(t){return new Et(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.yu=function(){return this.j_.yu()},e.prototype.Pd=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return this.isPrimary?(be("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.tf.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.j_.ba()];case 3:return r=i.sent(),o=re.Rs(t,"current"===e),[4,this.Tf(r,o)];case 4:return i.sent(),[3,8];case 5:return[4,this.j_.oc(t,!0)];case 6:return i.sent(),this.df(t,n),[3,8];case 7:ke(),i.label=8;case 8:return[2]}}))}))},e.prototype.Vd=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u,l,c,h,f=this;return i.__generator(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[3,10];n=0,r=t,d.label=1;case 1:return n<r.length?this.tf.has(o=r[n])?(be("SyncEngine","Adding an already active target "+o),[3,5]):[4,this.j_.fc(o)]:[3,6];case 2:return a=d.sent(),[4,this.j_.hc(a)];case 3:return s=d.sent(),[4,this._f(this.Df(a),s.targetId,!1)];case 4:d.sent(),this.Ud.listen(s),d.label=5;case 5:return n++,[3,1];case 6:u=function(t){return i.__generator(this,(function(e){switch(e.label){case 0:return l.tf.has(t)?[4,l.j_.oc(t,!1).then((function(){f.Ud.fl(t),f.df(t)})).catch(sr)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=this,c=0,h=e,d.label=7;case 7:return c<h.length?[5,u(h[c])]:[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e}(Ci),Ei=function(){this.Cf=null,this.targetId=0,this.Ff=[]},Si=function(){function t(t){this.El=t,this.Nf=new Ne((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.kf=new Set,this.El.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.Nf.get(e);return r||(n=!0,r=new Ei,this.Nf.set(e,r)),r.Ff.push(t),t.Od(this.onlineState),r.Cf&&t.$f(r.Cf)&&this.Mf(),n?this.El.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.fl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){return n=!1,(r=this.Nf.get(e=t.query))&&(o=r.Ff.indexOf(t))>=0&&(r.Ff.splice(o,1),n=0===r.Ff.length),n?[2,(this.Nf.delete(e),this.El.fl(e))]:[2]}))}))},t.prototype.d_=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=this.Nf.get(i.query);if(o){for(var a=0,s=o.Ff;a<s.length;a++)s[a].$f(i)&&(e=!0);o.Cf=i}}e&&this.Mf()},t.prototype.Pf=function(t,e){var n=this.Nf.get(t);if(n)for(var r=0,i=n.Ff;r<i.length;r++)i[r].onError(e);this.Nf.delete(t)},t.prototype.Ef=function(t){this.onlineState=t;var e=!1;this.Nf.forEach((function(n,r){for(var i=0,o=r.Ff;i<o.length;i++)o[i].Od(t)&&(e=!0)})),e&&this.Mf()},t.prototype.Lf=function(t){this.kf.add(t),t.next()},t.prototype.Of=function(t){this.kf.delete(t)},t.prototype.Mf=function(){this.kf.forEach((function(t){t.next()}))},t}(),Ti=function(){function t(t,e,n){this.query=t,this.xf=e,this.Bf=!1,this.qf=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.$f=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ne(t.query,t.docs,t.cs,e,t._s,t.fromCache,t.ls,!0)}var o=!1;return this.Bf?this.Uf(t)&&(this.xf.next(t),o=!0):this.Qf(t,this.onlineState)&&(this.Wf(t),o=!0),this.qf=t,o},t.prototype.onError=function(t){this.xf.error(t)},t.prototype.Od=function(t){this.onlineState=t;var e=!1;return this.qf&&!this.Bf&&this.Qf(this.qf,t)&&(this.Wf(this.qf),e=!0),e},t.prototype.Qf=function(t,e){return!t.fromCache||!(this.options.jf&&"Offline"!==e||t.docs.q()&&"Offline"!==e)},t.prototype.Uf=function(t){return t.docChanges.length>0||!!(t.ls||this.qf&&this.qf.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Wf=function(t){t=ne.fs(t.query,t.docs,t._s,t.fromCache),this.Bf=!0,this.xf.next(t)},t}(),Ii=function(){function t(){}return t.prototype.Ku=function(t){this.Kf=t},t.prototype.wr=function(t,e,n,r){var i=this;return e.Oe()||n.isEqual(b.MIN)?this.Gf(t,e):this.Kf.Tr(t,r).next((function(o){var s=i.zf(e,o);return(e.je()||e.Ke())&&i.kd(e.ge,s,r,n)?i.Gf(t,e):(me()<=a.LogLevel.DEBUG&&be("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Kf.wr(t,e,n).next((function(t){return s.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.zf=function(t,e){var n=new O((function(e,n){return t.Be(e,n)}));return e.forEach((function(e,r){r instanceof bt&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.kd=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.D(r)>0)},t.prototype.Gf=function(t,e){return me()<=a.LogLevel.DEBUG&&be("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Kf.wr(t,e,b.MIN)},t}(),Ai=function(){function t(t,e){this.ur=t,this.yo=e,this.ar=[],this.Hf=1,this.lastStreamToken=R.xt,this.Yf=new O(Me.Ie)}return t.prototype.So=function(t){return Le.resolve(0===this.ar.length)},t.prototype.Do=function(t,e,n){return Ee(0===this.Jf(e.batchId,"acknowledged")),this.lastStreamToken=n,Le.resolve()},t.prototype.Fo=function(t){return Le.resolve(this.lastStreamToken)},t.prototype.No=function(t,e){return this.lastStreamToken=e,Le.resolve()},t.prototype.ko=function(t,e,n,r){var i=this.Hf;this.Hf++;var o=new De(i,e,n,r);this.ar.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.Yf=this.Yf.add(new Me(u.key,i)),this.ur.Mo(t,u.key.path.L())}return Le.resolve(o)},t.prototype.Lo=function(t,e){return Le.resolve(this.Xf(e))},t.prototype.Bo=function(t,e){var n=this.Zf(e+1),r=n<0?0:n;return Le.resolve(this.ar.length>r?this.ar[r]:null)},t.prototype.qo=function(){return Le.resolve(0===this.ar.length?-1:this.Hf-1)},t.prototype.Uo=function(t){return Le.resolve(this.ar.slice())},t.prototype._r=function(t,e){var n=this,r=new Me(e,0),i=new Me(e,Number.POSITIVE_INFINITY),o=[];return this.Yf.Ct([r,i],(function(t){var e=n.Xf(t.Ln);o.push(e)})),Le.resolve(o)},t.prototype.Ir=function(t,e){var n=this,r=new O(Te);return e.forEach((function(t){var e=new Me(t,0),i=new Me(t,Number.POSITIVE_INFINITY);n.Yf.Ct([e,i],(function(t){r=r.add(t.Ln)}))})),Le.resolve(this.tT(r))},t.prototype.Vr=function(t,e){var n=e.path,r=n.length+1,i=n;S.st(i)||(i=i.child(""));var o=new Me(new S(i),0),a=new O(Te);return this.Yf.Ft((function(t){var e=t.key.path;return!!n.U(e)&&(e.length===r&&(a=a.add(t.Ln)),!0)}),o),Le.resolve(this.tT(a))},t.prototype.tT=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Xf(t);null!==r&&n.push(r)})),n},t.prototype.Wo=function(t,e){var n=this;Ee(0===this.Jf(e.batchId,"removed")),this.ar.shift();var r=this.Yf;return Le.forEach(e.mutations,(function(i){var o=new Me(i.key,e.batchId);return r=r.delete(o),n.yo.Go(t,i.key)})).next((function(){n.Yf=r}))},t.prototype.Ko=function(t){},t.prototype.Mn=function(t,e){var n=new Me(e,0),r=this.Yf.Nt(n);return Le.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return Le.resolve()},t.prototype.Jf=function(t,e){return this.Zf(t)},t.prototype.Zf=function(t){return 0===this.ar.length?0:t-this.ar[0].batchId},t.prototype.Xf=function(t){var e=this.Zf(t);return e<0||e>=this.ar.length?null:this.ar[e]},t}(),Oi=function(){function t(t,e){this.ur=t,this.eT=e,this.docs=new T(S.k),this.size=0}return t.prototype.Jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.eT(e);return this.docs=this.docs.nt(r,{Aa:e,size:a,readTime:n}),this.size+=a-o,this.ur.Mo(t,r.path.L())},t.prototype.Zn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.tr=function(t,e){var n=this.docs.get(e);return Le.resolve(n?n.Aa:null)},t.prototype.getEntries=function(t,e){var n=this,r=Wt();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Aa:null)})),Le.resolve(r)},t.prototype.wr=function(t,e,n){for(var r=Kt(),i=new S(e.path.child("")),o=this.docs.lt(i);o.wt();){var a=o.It(),s=a.value,u=s.Aa,l=s.readTime;if(!e.path.U(a.key.path))break;l.D(n)<=0||u instanceof bt&&e.matches(u)&&(r=r.nt(u.key,u))}return Le.resolve(r)},t.prototype.sT=function(t,e){return Le.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Ca=function(e){return new t.Fa(this)},t.prototype.ka=function(t){return Le.resolve(this.size)},t}();Oi.Fa=function(t){function e(e){var n=this;return(n=t.call(this)||this).$a=e,n}return i.__extends(e,t),e.prototype.ir=function(t){var e=this,n=[];return this.zn.forEach((function(r,i){i?n.push(e.$a.Jn(t,i,e.readTime)):e.$a.Zn(r)})),Le.Kn(n)},e.prototype.er=function(t,e){return this.$a.tr(t,e)},e.prototype.sr=function(t,e){return this.$a.getEntries(t,e)},e}(je);var xi=function(){function t(t){this.persistence=t,this.iT=new Ne((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=b.MIN,this.highestTargetId=0,this.nT=0,this.rT=new Re,this.targetCount=0,this.hT=mn.Yo()}return t.prototype.Xs=function(t,e){return this.iT.forEach((function(t,n){return e(n)})),Le.resolve()},t.prototype.ea=function(t){return Le.resolve(this.lastRemoteSnapshotVersion)},t.prototype.sa=function(t){return Le.resolve(this.nT)},t.prototype.Xo=function(t){return this.highestTargetId=this.hT.next(),Le.resolve(this.highestTargetId)},t.prototype.ia=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.nT&&(this.nT=e),Le.resolve()},t.prototype.ra=function(t){this.iT.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.hT=new mn(e),this.highestTargetId=e),t.sequenceNumber>this.nT&&(this.nT=t.sequenceNumber)},t.prototype.na=function(t,e){return this.ra(e),this.targetCount+=1,Le.resolve()},t.prototype.oa=function(t,e){return this.ra(e),Le.resolve()},t.prototype.aa=function(t,e){return this.iT.delete(e.target),this.rT.Nn(e.targetId),this.targetCount-=1,Le.resolve()},t.prototype.Zh=function(t,e,n){var r=this,i=0,o=[];return this.iT.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.iT.delete(a),o.push(r.ua(t,s.targetId)),i++)})),Le.Kn(o).next((function(){return i}))},t.prototype.la=function(t){return Le.resolve(this.targetCount)},t.prototype.da=function(t,e){var n=this.iT.get(e)||null;return Le.resolve(n)},t.prototype.fa=function(t,e,n){this.rT.Sn(e,n);var r=this.persistence.yo,i=[];return r&&e.forEach((function(e){i.push(r.vn(t,e))})),Le.Kn(i)},t.prototype.Ta=function(t,e,n){this.rT.Fn(e,n);var r=this.persistence.yo,i=[];return r&&e.forEach((function(e){i.push(r.Dn(t,e))})),Le.Kn(i)},t.prototype.ua=function(t,e){return this.rT.Nn(e),Le.resolve()},t.prototype.Ea=function(t,e){var n=this.rT.$n(e);return Le.resolve(n)},t.prototype.Mn=function(t,e){return Le.resolve(this.rT.Mn(e))},t}(),Ni=function(){function t(t){var e=this;this.oT={},this.hu=new Be(0),this.ja=!1,this.ja=!0,this.yo=t(this),this.Za=new xi(this),this.ur=new On,this.or=new Oi(this.ur,(function(t){return e.yo.aT(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.mu=function(){return this.ja=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Kh",{get:function(){return this.ja},enumerable:!0,configurable:!0}),t.prototype.au=function(){},t.prototype.Du=function(){return this.ur},t.prototype.bu=function(t){var e=this.oT[t.s()];return e||(e=new Ai(this.ur,this.yo),this.oT[t.s()]=e),e},t.prototype.vu=function(){return this.Za},t.prototype.Su=function(){return this.or},t.prototype.runTransaction=function(t,e,n){var r=this;be("MemoryPersistence","Starting transaction:",t);var i=new Di(this.hu.next());return this.yo.uT(),n(i).next((function(t){return r.yo.cT(i).next((function(){return t}))})).Wn().then((function(t){return i.hr(),t}))},t.prototype._T=function(t,e){return Le.Gn(Object.values(this.oT).map((function(n){return function(){return n.Mn(t,e)}})))},t}(),Di=function(t){function e(e){var n=this;return(n=t.call(this)||this).Qa=e,n}return i.__extends(e,t),e}(Ue),Pi=function(){function t(t){this.persistence=t,this.Nu=null,this.lT=null}return t.dT=function(e){return new t(e)},Object.defineProperty(t.prototype,"fT",{get:function(){if(this.lT)return this.lT;throw ke()},enumerable:!0,configurable:!0}),t.prototype.Mu=function(t){this.Nu=t},t.prototype.vn=function(t,e){return this.fT.delete(e),Le.resolve()},t.prototype.Dn=function(t,e){return this.fT.add(e),Le.resolve()},t.prototype.Go=function(t,e){return this.fT.add(e),Le.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.vu();return r.Ea(t,e.targetId).next((function(t){t.forEach((function(t){return n.fT.add(t)}))})).next((function(){return r.aa(t,e)}))},t.prototype.uT=function(){this.lT=new Set},t.prototype.cT=function(t){var e=this,n=this.persistence.Su().Ca();return Le.forEach(this.fT,(function(r){return e.TT(t,r).next((function(t){t||n.Zn(r)}))})).next((function(){return e.lT=null,n.apply(t)}))},t.prototype.Ou=function(t,e){var n=this;return this.TT(t,e).next((function(t){t?n.fT.delete(e):n.fT.add(e)}))},t.prototype.aT=function(t){return 0},t.prototype.TT=function(t,e){var n=this;return Le.Gn([function(){return n.persistence.vu().Mn(t,e)},function(){return n.persistence._T(t,e)},function(){return Le.resolve(n.Nu.Mn(e))}])},t}(),Ri=function(){function t(){}return t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return this.Yd=this.ET(t),this.persistence=this.IT(t),[4,this.persistence.start()];case 1:return n.sent(),this.wT=this.RT(t),this.j_=this.AT(t),this.Ud=this.mT(t),this.El=this.PT(t),this.VT=this.gT(t),this.Yd.M_=function(t){return e.El.Od(t,1)},this.Ud.El=this.El,[4,this.j_.start()];case 2:return n.sent(),[4,this.Yd.start()];case 3:return n.sent(),[4,this.Ud.start()];case 4:return n.sent(),[4,this.Ud.Cl(this.El.uf)];case 5:return n.sent(),[2]}}))}))},t.prototype.gT=function(t){return new Si(this.El)},t.prototype.RT=function(t){return null},t.prototype.AT=function(t){return new or(this.persistence,new Ii,t.pT)},t.prototype.IT=function(t){return new Ni(Pi.dT)},t.prototype.mT=function(t){var e=this;return new oi(this.j_,t.b_,t.jr,(function(t){return e.El.Od(t,0)}),t.platform.yT())},t.prototype.ET=function(t){return new vi},t.prototype.PT=function(t){return new Ci(this.j_,this.Ud,this.Yd,t.pT,t.Jd)},t.prototype.clearPersistence=function(t){throw new d(f.FAILED_PRECONDITION,"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.")},t}(),Mi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.ou((function(t){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,this.El.Cl(t)];case 1:return e.sent(),this.wT&&(t&&!this.wT.Kh?this.wT.start(this.j_):t||this.wT.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.AT=function(t){return new ar(this.persistence,new Ii,t.pT)},e.prototype.PT=function(t){var e=new ki(this.j_,this.Ud,this.Yd,t.pT,t.Jd);return this.Yd instanceof pi&&(this.Yd.El=e),e},e.prototype.RT=function(t){return new Xe(this.persistence.yo.qh,t.jr)},e.prototype.IT=function(t){var e=tr.Fu(t.bT),n=t.platform.vT(t.bT.ci);return new tr(t.ST.synchronizeTabs,e,t.clientId,t.platform,Je.kh(t.ST.cacheSizeBytes),t.jr,n,this.Yd)},e.prototype.ET=function(t){if(t.ST.DT&&t.ST.synchronizeTabs){if(!pi.ho(t.platform))throw new d(f.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var e=tr.Fu(t.bT);return new pi(t.jr,t.platform,e,t.clientId,t.pT)}return new vi},e.prototype.clearPersistence=function(t){var e=tr.Fu(t);return tr.clearPersistence(e)},e}(Ri),Li=function(){function t(t,e,n,r){this.platform=t,this.bT=e,this.credentials=n,this.jr=r,this.clientId=Se.En()}return t.prototype.start=function(t,e){var n=this;this.CT();var r=new He,i=new He,o=!1;return this.credentials.l((function(a){if(!o)return o=!0,be("FirestoreClient","Initializing. user=",a.uid),n.FT(t,e,a,i).then(r.resolve,r.reject);n.jr.Zr((function(){return n.Dl(a)}))})),this.jr.Zr((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.CT(),this.jr.enqueue((function(){return t.El.enableNetwork()}))},t.prototype.FT=function(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,a,s,u,l=this;return i.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,this.platform.NT(this.bT)];case 1:return o=c.sent(),a=this.platform.vT(this.bT.ci),s=new ni(this.jr,o,this.credentials,a),[4,t.initialize({jr:this.jr,bT:this.bT,platform:this.platform,b_:s,clientId:this.clientId,pT:n,Jd:100,ST:e})];case 2:return c.sent(),this.persistence=t.persistence,this.Yd=t.Yd,this.j_=t.j_,this.Ud=t.Ud,this.El=t.El,this.wT=t.wT,this.kT=t.VT,this.persistence.au((function(){return i.__awaiter(l,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(u=c.sent(),r.reject(u),!this.$T(u))throw u;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),this.FT(new Ri,{DT:!1},n,r))];case 4:return[2]}}))}))},t.prototype.$T=function(t){return"FirebaseError"===t.name?t.code===f.FAILED_PRECONDITION||t.code===f.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.CT=function(){if(this.jr._h)throw new d(f.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Dl=function(t){return this.jr.Rh(),be("FirestoreClient","Credential Changed. Current user: "+t.uid),this.El.Dl(t)},t.prototype.disableNetwork=function(){var t=this;return this.CT(),this.jr.enqueue((function(){return t.El.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.jr.Eh((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.wT&&this.wT.stop(),[4,this.Ud.mu()];case 1:return t.sent(),[4,this.Yd.mu()];case 2:return t.sent(),[4,this.persistence.mu()];case 3:return t.sent(),this.credentials.T(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.CT();var e=new He;return this.jr.Zr((function(){return t.El.Af(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.CT();var i=new Ti(t,e,n);return this.jr.Zr((function(){return r.kT.listen(i)})),i},t.prototype.fl=function(t){var e=this;this.MT||this.jr.Zr((function(){return e.kT.fl(t)}))},t.prototype.LT=function(t){var e=this;return this.CT(),this.jr.enqueue((function(){return e.j_.rc(t)})).then((function(t){if(t instanceof bt)return t;if(t instanceof wt)return null;throw new d(f.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.OT=function(t){var e=this;return this.CT(),this.jr.enqueue((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.j_.ac(t,!0)];case 1:return e=i.sent(),n=new mi(t,e.uc),r=n.Cd(e.documents),[2,n.ir(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.CT();var n=new He;return this.jr.Zr((function(){return e.El.write(t,n)})),n.promise},t.prototype.ci=function(){return this.bT.ci},t.prototype.Lf=function(t){var e=this;this.CT(),this.jr.Zr((function(){return e.kT.Lf(t),Promise.resolve()}))},t.prototype.Of=function(t){this.MT||this.kT.Of(t)},Object.defineProperty(t.prototype,"MT",{get:function(){return this.jr._h},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.CT();var n=new He;return this.jr.Zr((function(){return e.El.runTransaction(e.jr,t,n),Promise.resolve()})),n.promise},t}(),ji=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.xT(this.observer.next,t)},t.prototype.error=function(t){this.xT(this.observer.error,t)},t.prototype.BT=function(){this.muted=!0},t.prototype.xT=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Fi(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ui=function(){function t(t,e,n,r){this.firestore=t,this.timestampsInSnapshots=e,this.qT=n,this.converter=r}return t.prototype.UT=function(t){switch(q(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Q(t.integerValue||t.doubleValue);case 3:return this.QT(t.timestampValue);case 4:return this.WT(t);case 5:return t.stringValue;case 6:return new Or(Y(t.bytesValue));case 7:return this.jT(t.referenceValue);case 8:return new Vr(t.geoPointValue.latitude,t.geoPointValue.longitude);case 9:return this.KT(t.arrayValue);case 10:return this.GT(t.mapValue);default:throw ke()}},t.prototype.GT=function(t){var e=this,n={};return D(t.fields||{},(function(t,r){n[t]=e.UT(r)})),n},t.prototype.KT=function(t){var e=this;return(t.values||[]).map((function(t){return e.UT(t)}))},t.prototype.WT=function(t){switch(this.qT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return F(n)?t(n):n}(t);return null==e?null:this.UT(e);case"estimate":return this.QT(U(t));default:return null}},t.prototype.QT=function(t){var e=K(t),n=new _(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.jT=function(t){var e=C.G(t);Ee(ve(e));var n=new xe(e.get(1),e.get(3)),r=new S(e.M(5));return n.isEqual(this.firestore.zT)||we("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.zT.projectId+"/"+this.firestore.zT.database+") instead."),new Wi(r,this.firestore,this.converter)},t}(),Vi=Je.Lh,qi=function(){function t(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new d(f.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else pr("settings","non-empty string","host",t.host),this.host=t.host,vr("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(wr("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),vr("settings","object","credentials",t.credentials),this.credentials=t.credentials,vr("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?we("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&we("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,vr("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Je.xh;else{if(t.cacheSizeBytes!==Vi&&t.cacheSizeBytes<Je.Oh)throw new d(f.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Je.Oh);this.cacheSizeBytes=t.cacheSizeBytes}vr("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Bi=function(){function t(e,n,r){var o=this;if(void 0===r&&(r=new Ri),this.HT=null,this.YT=new Ge,this.INTERNAL={delete:function(){return i.__awaiter(o,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.JT(),[4,this.XT.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.HT=a,this.zT=t.ZT(a),this.tE=a.name,this.eE=new y(n)}else{var s=e;if(!s.projectId)throw new d(f.INVALID_ARGUMENT,"Must provide projectId");this.zT=new xe(s.projectId,s.database),this.tE="[DEFAULT]",this.eE=new v}this.sE=r,this.iE=new qi({}),this.nE=this.rE(this.zT)}return t.prototype.settings=function(t){lr("Firestore.settings",arguments,1),fr("Firestore.settings","object",1,t);var e=new qi(t);if(this.XT&&!this.iE.isEqual(e))throw new d(f.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.iE=e,void 0!==e.credentials&&(this.eE=function(t){if(!t)return new v;switch(t.type){case"gapi":var e=t.hE;return Ee(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new m(e,t.V||"0");case"provider":return t.hE;default:throw new d(f.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.JT(),this.XT.enableNetwork()},t.prototype.disableNetwork=function(){return this.JT(),this.XT.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.XT)throw new d(f.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1;return t&&(void 0!==t.experimentalTabSynchronization&&we("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n),this.oE(this.sE,{DT:!0,cacheSizeBytes:this.iE.cacheSizeBytes,synchronizeTabs:r})},t.prototype.clearPersistence=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){if(void 0!==this.XT&&!this.XT.MT)throw new d(f.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new He,[2,(this.YT.lh((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.aE(),[4,this.sE.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"uE",{get:function(){return this.JT(),this.XT.MT},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.JT(),this.XT.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.JT(),Fi(t)?this.cE(t):(fr("Firestore.onSnapshotsInSync","function",1,t),this.cE({next:t}))},t.prototype.cE=function(t){var e=this,n=new ji({next:function(){t.next&&t.next()},error:function(t){throw ke()}});return this.XT.Lf(n),function(){n.BT(),e.XT.Of(n)}},t.prototype.JT=function(){return this.XT||this.oE(new Ri,{DT:!1}),this.XT},t.prototype.aE=function(){return new Oe(this.zT,this.tE,this.iE.host,this.iE.ssl,this.iE.forceLongPolling)},t.prototype.oE=function(t,e){var n=this.aE();return this.XT=new Li(ye.Lt(),n,this.eE,this.YT),this.XT.start(t,e)},t.prototype.rE=function(t){var e=ye.Lt().vT(t);return new Kr(e,(function(e){if(e instanceof Wi){var n=t,r=e.firestore.zT;if(!r.isEqual(n))throw new d(f.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Gr(t,e._E)}return e}))},t.ZT=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new d(f.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new d(f.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new xe(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.HT)throw new d(f.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.HT},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return lr("Firestore.collection",arguments,1),fr("Firestore.collection","non-empty string",1,t),this.JT(),new Xi(C.G(t),this)},t.prototype.doc=function(t){return lr("Firestore.doc",arguments,1),fr("Firestore.doc","non-empty string",1,t),this.JT(),Wi.lE(C.G(t),this)},t.prototype.collectionGroup=function(t){if(lr("Firestore.collectionGroup",arguments,1),fr("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new d(f.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.JT(),new Yi(new Et(C.H,t),this)},t.prototype.runTransaction=function(t){var e=this;return lr("Firestore.runTransaction",arguments,1),fr("Firestore.runTransaction","function",1,t),this.JT().transaction((function(n){return t(new Hi(e,n))}))},t.prototype.batch=function(){return this.JT(),new zi(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(me()){case a.LogLevel.DEBUG:return"debug";case a.LogLevel.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(lr("Firestore.setLogLevel",arguments,1),fr("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":_e(a.LogLevel.DEBUG);break;case"error":_e(a.LogLevel.ERROR);break;case"silent":_e(a.LogLevel.SILENT);break;default:throw new d(f.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.dE=function(){return this.iE.timestampsInSnapshots},t}(),Hi=function(){function t(t,e){this.fE=t,this.TE=e}return t.prototype.get=function(t){var e=this;lr("Transaction.get",arguments,1);var n=eo("Transaction.get",t,this.fE);return this.TE.p_([n._E]).then((function(t){if(!t||1!==t.length)return ke();var r=t[0];if(r instanceof wt)return new Ki(e.fE,n._E,null,!1,!1,n.EE);if(r instanceof bt)return new Ki(e.fE,n._E,r,!1,!1,n.EE);throw ke()}))},t.prototype.set=function(t,e,n){hr("Transaction.set",arguments,2,3);var r=eo("Transaction.set",t,this.fE);n=Zi("Transaction.set",n);var i=ro(r.EE,e,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this.fE.nE.Mc(a,o,n.mergeFields):this.fE.nE.kc(a,o);return this.TE.set(r._E,s),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Nr?(cr("Transaction.update",arguments,3),r=eo("Transaction.update",t,this.fE),i=this.fE.nE.Bc("Transaction.update",e,n,o)):(lr("Transaction.update",arguments,2),r=eo("Transaction.update",t,this.fE),i=this.fE.nE.Lc("Transaction.update",e)),this.TE.update(r._E,i),this},t.prototype.delete=function(t){lr("Transaction.delete",arguments,1);var e=eo("Transaction.delete",t,this.fE);return this.TE.delete(e._E),this},t}(),zi=function(){function t(t){this.fE=t,this.IE=[],this.wE=!1}return t.prototype.set=function(t,e,n){hr("WriteBatch.set",arguments,2,3),this.RE();var r=eo("WriteBatch.set",t,this.fE);n=Zi("WriteBatch.set",n);var i=ro(r.EE,e,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this.fE.nE.Mc(a,o,n.mergeFields):this.fE.nE.kc(a,o);return this.IE=this.IE.concat(s.gc(r._E,ct.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.RE(),"string"==typeof e||e instanceof Nr?(cr("WriteBatch.update",arguments,3),r=eo("WriteBatch.update",t,this.fE),i=this.fE.nE.Bc("WriteBatch.update",e,n,o)):(lr("WriteBatch.update",arguments,2),r=eo("WriteBatch.update",t,this.fE),i=this.fE.nE.Lc("WriteBatch.update",e)),this.IE=this.IE.concat(i.gc(r._E,ct.exists(!0))),this},t.prototype.delete=function(t){lr("WriteBatch.delete",arguments,1),this.RE();var e=eo("WriteBatch.delete",t,this.fE);return this.IE=this.IE.concat(new vt(e._E,ct.NONE)),this},t.prototype.commit=function(){return this.RE(),this.wE=!0,this.IE.length>0?this.fE.JT().write(this.IE):Promise.resolve()},t.prototype.RE=function(){if(this.wE)throw new d(f.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Wi=function(){function t(t,e,n){this._E=t,this.firestore=e,this.EE=n,this.XT=this.firestore.JT()}return t.lE=function(e,n,r){if(e.length%2!=0)throw new d(f.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.K()+" has "+e.length);return new t(new S(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this._E.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Xi(this._E.path.L(),this.firestore,this.EE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._E.path.K()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(lr("DocumentReference.collection",arguments,1),fr("DocumentReference.collection","non-empty string",1,t),!t)throw new d(f.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=C.G(t);return new Xi(this._E.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Cr("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._E.isEqual(e._E)&&this.EE===e.EE},t.prototype.set=function(t,e){hr("DocumentReference.set",arguments,1,2),e=Zi("DocumentReference.set",e);var n=ro(this.EE,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.nE.Mc(i,r,e.mergeFields):this.firestore.nE.kc(i,r);return this.XT.write(o.gc(this._E,ct.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Nr?(cr("DocumentReference.update",arguments,2),n=this.firestore.nE.Bc("DocumentReference.update",t,e,r)):(lr("DocumentReference.update",arguments,1),n=this.firestore.nE.Lc("DocumentReference.update",t)),this.XT.write(n.gc(this._E,ct.exists(!0)))},t.prototype.delete=function(){return lr("DocumentReference.delete",arguments,0),this.XT.write([new vt(this._E,ct.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];hr("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Fi(t[i])||(wr("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),vr("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Fi(t[i])?n=t[i]:(fr("DocumentReference.onSnapshot","function",i,t[i]),dr("DocumentReference.onSnapshot","function",i+1,t[i+1]),dr("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.AE(o,n)},t.prototype.AE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new ji({next:function(t){if(e.next){var r=t.docs.get(n._E);e.next(new Ki(n.firestore,n._E,r,t.fromCache,t.hasPendingWrites,n.EE))}},error:r}),o=this.XT.listen(Et.ve(this._E.path),i,t);return function(){i.BT(),n.XT.fl(o)}},t.prototype.get=function(t){var e=this;return hr("DocumentReference.get",arguments,0,1),to("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.JT().LT(e._E).then((function(t){n(new Ki(e.firestore,e._E,t,!0,t instanceof bt&&t.te,e.EE))}),r):e.mE(n,r,t)}))},t.prototype.mE=function(t,e,n){var r=this.AE({includeMetadataChanges:!0,jf:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new d(f.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new d(f.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this._E,this.firestore,e)},t}(),Gi=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ki=function(){function t(t,e,n,r,i,o){this.fE=t,this._E=e,this.PE=n,this.VE=r,this.gE=i,this.EE=o}return t.prototype.data=function(t){if(hr("DocumentSnapshot.data",arguments,0,1),t=$i("DocumentSnapshot.data",t),this.PE){if(this.EE){var e=new Qi(this.fE,this._E,this.PE,this.VE,this.gE);return this.EE.fromFirestore(e,t)}return new Ui(this.fE,this.fE.dE(),t.serverTimestamps,void 0).UT(this.PE.Re())}},t.prototype.get=function(t,e){if(hr("DocumentSnapshot.get",arguments,1,2),e=$i("DocumentSnapshot.get",e),this.PE){var n=this.PE.data().field(Jr("DocumentSnapshot.get",t));if(null!==n)return new Ui(this.fE,this.fE.dE(),e.serverTimestamps,this.EE).UT(n)}},Object.defineProperty(t.prototype,"id",{get:function(){return this._E.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Wi(this._E,this.fE,this.EE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.PE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Gi(this.gE,this.VE)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Cr("isEqual","DocumentSnapshot",1,e);return this.fE===e.fE&&this.VE===e.VE&&this._E.isEqual(e._E)&&(null===this.PE?null===e.PE:this.PE.isEqual(e.PE))&&this.EE===e.EE},t}(),Qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Ki),Yi=function(){function t(t,e,n){this.pE=t,this.firestore=e,this.EE=n}return t.prototype.where=function(e,n,r){var i;lr("Query.where",arguments,3),br("Query.where",3,r),function(t,e,n,r){if(!e.some((function(t){return t===r})))throw new d(f.INVALID_ARGUMENT,"Invalid value "+_r(r)+" provided to function Query.where() for its "+Er(2)+" argument. Acceptable values: "+e.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,n);var o=Jr("Query.where",e),a=St.G(n);if(o.J()){if(a===St.ARRAY_CONTAINS||a===St.ARRAY_CONTAINS_ANY)throw new d(f.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===St.IN){this.yE(r,a);for(var s=[],u=0,l=r;u<l.length;u++){var c=l[u];s.push(this.bE(c))}i={arrayValue:{values:s}}}else i=this.bE(r)}else a!==St.IN&&a!==St.ARRAY_CONTAINS_ANY||this.yE(r,a),i=this.firestore.nE.qc("Query.where",r,a===St.IN);var h=Tt.create(o,a,i);return this.vE(h),new t(this.pE.Ce(h),this.firestore,this.EE)},t.prototype.orderBy=function(e,n){var r;if(hr("Query.orderBy",arguments,1,2),dr("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Dt.ASCENDING;else{if("desc"!==n)throw new d(f.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Dt.DESCENDING}if(null!==this.pE.startAt)throw new d(f.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.pE.endAt)throw new d(f.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Jr("Query.orderBy",e),o=new Lt(i,r);return this.SE(o),new t(this.pE.Fe(o),this.firestore,this.EE)},t.prototype.limit=function(e){return lr("Query.limit",arguments,1),fr("Query.limit","number",1,e),kr("Query.limit",1,e),new t(this.pE.Ne(e),this.firestore,this.EE)},t.prototype.limitToLast=function(e){return lr("Query.limitToLast",arguments,1),fr("Query.limitToLast","number",1,e),kr("Query.limitToLast",1,e),new t(this.pE.ke(e),this.firestore,this.EE)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cr("Query.startAt",arguments,1);var i=this.DE("Query.startAt",e,n,!0);return new t(this.pE.$e(i),this.firestore,this.EE)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cr("Query.startAfter",arguments,1);var i=this.DE("Query.startAfter",e,n,!1);return new t(this.pE.$e(i),this.firestore,this.EE)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cr("Query.endBefore",arguments,1);var i=this.DE("Query.endBefore",e,n,!0);return new t(this.pE.Me(i),this.firestore,this.EE)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cr("Query.endAt",arguments,1);var i=this.DE("Query.endAt",e,n,!1);return new t(this.pE.Me(i),this.firestore,this.EE)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Cr("isEqual","Query",1,e);return this.firestore===e.firestore&&this.pE.isEqual(e.pE)},t.prototype.withConverter=function(e){return new t(this.pE,this.firestore,e)},t.prototype.DE=function(t,e,n,r){if(br(t,1,e),e instanceof Ki){if(n.length>0)throw new d(f.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new d(f.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.CE(i.PE,r)}var o=[e].concat(n);return this.FE(t,o,r)},t.prototype.CE=function(t,e){for(var n=[],r=0,i=this.pE.orderBy;r<i.length;r++){var o=i[r];if(o.field.J())n.push(J(this.firestore.zT,t.key));else{var a=t.field(o.field);if(F(a))throw new d(f.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var s=o.field.K();throw new d(f.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+s+"' (used as the orderBy) does not exist.")}n.push(a)}}return new Mt(n,e)},t.prototype.FE=function(t,e,n){var r=this.pE.Ve;if(e.length>r.length)throw new d(f.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.J()){if("string"!=typeof a)throw new d(f.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this.pE.He()&&-1!==a.indexOf("/"))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this.pE.path.child(C.G(a));if(!S.st(s))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new S(s);i.push(J(this.firestore.zT,u))}else{var l=this.firestore.nE.qc(t,a);i.push(l)}}return new Mt(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];hr("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Fi(t[i])||(wr("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),vr("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Fi(t[i])?n=t[i]:(fr("Query.onSnapshot","function",i,t[i]),dr("Query.onSnapshot","function",i+1,t[i+1]),dr("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.NE(this.pE),this.AE(r,n)},t.prototype.AE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new ji({next:function(t){e.next&&e.next(new Ji(n.firestore,n.pE,t,n.EE))},error:r}),o=this.firestore.JT(),a=o.listen(this.pE,i,t);return function(){i.BT(),o.fl(a)}},t.prototype.NE=function(t){if(t.Ke()&&0===t.Ve.length)throw new d(f.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return hr("Query.get",arguments,0,1),to("Query.get",t),this.NE(this.pE),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.JT().OT(e.pE).then((function(t){n(new Ji(e.firestore,e.pE,t,e.EE))}),r):e.mE(n,r,t)}))},t.prototype.mE=function(t,e,n){var r=this.AE({includeMetadataChanges:!0,jf:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new d(f.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.bE=function(t){if("string"==typeof t){if(""===t)throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.pE.He()&&-1!==t.indexOf("/"))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.pE.path.child(C.G(t));if(!S.st(e))throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return J(this.firestore.zT,new S(e))}if(t instanceof Wi)return J(this.firestore.zT,t._E);throw new d(f.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_r(t)+".")},t.prototype.yE=function(t,e){if(!Array.isArray(t)||0===t.length)throw new d(f.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new d(f.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new d(f.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new d(f.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.vE=function(t){if(t instanceof Tt){var e=[St.ARRAY_CONTAINS,St.ARRAY_CONTAINS_ANY],n=[St.IN,St.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.Ge()){var o=this.pE.Se();if(null!==o&&!o.isEqual(t.field))throw new d(f.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this.pE.De();null!==a&&this.kE(t.field,a)}else if(i||r){var s=null;if(i&&(s=this.pE.ze(n)),null===s&&r&&(s=this.pE.ze(e)),null!=s)throw new d(f.INVALID_ARGUMENT,s===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.SE=function(t){if(null===this.pE.De()){var e=this.pE.Se();null!==e&&this.kE(e,t.field)}},t.prototype.kE=function(t,e){if(!e.isEqual(t))throw new d(f.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Ji=function(){function t(t,e,n,r){this.fE=t,this.$E=e,this.ME=n,this.EE=r,this.LE=null,this.OE=null,this.metadata=new Gi(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.ME.docs.q()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ME.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;hr("QuerySnapshot.forEach",arguments,1,2),fr("QuerySnapshot.forEach","function",1,t),this.ME.docs.forEach((function(r){t.call(e,n.xE(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Yi(this.$E,this.fE,this.EE)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(wr("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),vr("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.ME.ds)throw new d(f.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.LE&&this.OE===e||(this.LE=function(t,e,n,r){if(n.cs.q()){var i=0;return n.docChanges.map((function(e){return{type:"added",doc:new Qi(t,e.doc.key,e.doc,n.fromCache,n._s.has(e.doc.key),r),oldIndex:-1,newIndex:i++}}))}var o=n.cs;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new Qi(t,e.doc.key,e.doc,n.fromCache,n._s.has(e.doc.key),r),a=-1,s=-1;return 0!==e.type&&(a=o.indexOf(e.doc.key),o=o.delete(e.doc.key)),1!==e.type&&(s=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:no(e.type),doc:i,oldIndex:a,newIndex:s}}))}(this.fE,e,this.ME,this.EE),this.OE=e),this.LE},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Cr("isEqual","QuerySnapshot",1,e);return this.fE===e.fE&&this.$E.isEqual(e.$E)&&this.ME.isEqual(e.ME)&&this.EE===e.EE},t.prototype.xE=function(t){return new Qi(this.fE,t.key,t,this.metadata.fromCache,this.ME._s.has(t.key),this.EE)},t}(),Xi=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Et.ve(e),n,r)||this).BE=e,e.length%2!=1)throw new d(f.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.K()+" has "+e.length);return i}return i.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.pE.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.pE.path.L();return t.q()?null:new Wi(new S(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.pE.path.K()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(hr("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Se.En()),fr("CollectionReference.doc","non-empty string",1,t),""===t)throw new d(f.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=C.G(t);return Wi.lE(this.pE.path.child(e),this.firestore,this.EE)},e.prototype.add=function(t){lr("CollectionReference.add",arguments,1),fr("CollectionReference.add","object",1,this.EE?this.EE.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.BE,this.firestore,t)},e}(Yi);function Zi(t,e){if(void 0===e)return{merge:!1};if(wr(t,e,["merge","mergeFields"]),vr(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+_r(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new d(f.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+_r(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Nr}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new d(f.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function $i(t,e){return void 0===e?{}:(wr(t,e,["serverTimestamps"]),yr(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function to(t,e){dr(t,"object",1,e),e&&(wr(t,e,["source"]),yr(t,0,"source",e.source,["default","server","cache"]))}function eo(t,e,n){if(e instanceof Wi){if(e.firestore!==n)throw new d(f.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Cr(t,"DocumentReference",1,e)}function no(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}function ro(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var io=Tr(Bi,"Use firebase.firestore() instead."),oo=Tr(Hi,"Use firebase.firestore().runTransaction() instead."),ao=Tr(zi,"Use firebase.firestore().batch() instead."),so=Tr(Wi,"Use firebase.firestore().doc() instead."),uo=Tr(Ki),lo=Tr(Qi),co=Tr(Yi),ho=Tr(Ji),fo=Tr(Xi,"Use firebase.firestore().collection() instead."),po={Firestore:io,GeoPoint:Vr,Timestamp:_,Blob:xr,Transaction:oo,WriteBatch:ao,DocumentReference:so,DocumentSnapshot:uo,Query:co,QueryDocumentSnapshot:lo,QuerySnapshot:ho,CollectionReference:fo,FieldPath:Nr,FieldValue:Ur,setLogLevel:Bi.setLogLevel,CACHE_SIZE_UNLIMITED:Vi},vo=function(){function t(){}return t.prototype.Y_=function(t){},t.prototype.mu=function(){},t}(),yo=function(){function t(){var t=this;this.qE=function(){return t.UE()},this.QE=function(){return t.WE()},this.jE=[],this.KE()}return t.prototype.Y_=function(t){this.jE.push(t)},t.prototype.mu=function(){window.removeEventListener("online",this.qE),window.removeEventListener("offline",this.QE)},t.prototype.KE=function(){window.addEventListener("online",this.qE),window.addEventListener("offline",this.QE)},t.prototype.UE=function(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.jE;t<e.length;t++)(0,e[t])(0)},t.prototype.WE=function(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.jE;t<e.length;t++)(0,e[t])(1)},t.ho=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),go=function(){function t(t){this.GE=t.GE,this.zE=t.zE}return t.prototype.__=function(t){this.HE=t},t.prototype.h_=function(t){this.YE=t},t.prototype.onMessage=function(t){this.JE=t},t.prototype.close=function(){this.zE()},t.prototype.send=function(t){this.GE(t)},t.prototype.XE=function(){this.HE()},t.prototype.ZE=function(t){this.YE(t)},t.prototype.tI=function(t){this.JE(t)},t}(),mo={BatchGetDocuments:"batchGet",Commit:"commit"},_o="gl-js/ fire/"+c,bo=function(){function t(t){this.ci=t.ci,this.eI=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.sI=function(t,e){if(e)for(var n in e.o)e.o.hasOwnProperty(n)&&(t[n]=e.o[n]);t["X-Goog-Api-Client"]=_o},t.prototype.g_=function(t,e,n){var r=this,i=this.iI(t);return new Promise((function(o,a){var s=new l.XhrIo;s.listenOnce(l.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var e=s.getResponseJson();be("Connection","XHR received:",JSON.stringify(e)),o(e);break;case l.ErrorCode.TIMEOUT:be("Connection",'RPC "'+t+'" timed out'),a(new d(f.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(be("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(f).indexOf(e)>=0?e:f.UNKNOWN}(r.status);a(new d(i,r.message))}else a(new d(f.UNKNOWN,"Server responded with status "+s.getStatus()))}else be("Connection",'RPC "'+t+'" failed'),a(new d(f.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{be("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);be("Connection","XHR sending: ",i+" "+c);var h={"Content-Type":"text/plain"};r.sI(h,n),s.send(i,"POST",c,h,15)}))},t.prototype.y_=function(t,e,n){return this.g_(t,e,n)},t.prototype.l_=function(t,e){var n=[this.eI,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=l.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.ci.projectId+"/databases/"+this.ci.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.sI(i.initMessageHeaders,e),s.isMobileCordova()||s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");be("Connection","Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,c=!1,h=new go({GE:function(t){c?be("Connection","Not sending because WebChannel is closed:",t):(u||(be("Connection","Opening WebChannel transport."),a.open(),u=!0),be("Connection","WebChannel sending:",t),a.send(t))},zE:function(){return a.close()}}),p=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(l.WebChannel.EventType.OPEN,(function(){c||be("Connection","WebChannel transport opened.")})),p(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,be("Connection","WebChannel transport closed"),h.ZE())})),p(l.WebChannel.EventType.ERROR,(function(t){c||(c=!0,be("Connection","WebChannel transport errored:",t),h.ZE(new d(f.UNAVAILABLE,"The operation could not be completed")))})),p(l.WebChannel.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ee(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){be("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Pt[t];if(void 0!==e)return Bt(e)}(i),s=r.message;void 0===o&&(o=f.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.ZE(new d(o,s)),a.close()}else be("Connection","WebChannel received:",n),h.tI(n)}})),setTimeout((function(){h.XE()}),0),h},t.prototype.iI=function(t){return this.eI+"/v1/projects/"+this.ci.projectId+"/databases/"+this.ci.database+"/documents:"+mo[t]},t}();function wo(t){!function(t,e){t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){return function(t,e){return new Bi(t,e,new Mi)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},po)))}(t),t.registerVersion("@firebase/firestore","1.14.2")}ye.fn(new(function(){function t(){this.Tc="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.NT=function(t){return Promise.resolve(new bo(t))},t.prototype.yT=function(){return yo.ho()?new yo:new vo},t.prototype.vT=function(t){return new pe(t,{di:!0})},t.prototype.Tn=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}())),wo(o),e.__PRIVATE_registerFirestore=wo},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),a=n("2QA8"),s=n("2fFW"),u=n("NJ4a"),l=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,o){var a;switch(_classCallCheck(this,n),(a=e.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.a;break;case 1:if(!t){a.destination=i.a;break}if("object"==typeof t){t instanceof n?(a.syncErrorThrowable=t.syncErrorThrowable,a.destination=t,t.add(_assertThisInitialized(a))):(a.syncErrorThrowable=!0,a.destination=new c(_assertThisInitialized(a),t));break}default:a.syncErrorThrowable=!0,a.destination=new c(_assertThisInitialized(a),t,r,o)}return a}return _createClass(n,[{key:a.a,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(o.a),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,s){var u,l;_classCallCheck(this,n),(u=e.call(this))._parentSubscriber=t;var c=_assertThisInitialized(u);return Object(r.a)(o)?l=o:o&&(l=o.next,a=o.error,s=o.complete,o!==i.a&&(c=Object.create(o),Object(r.a)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(_assertThisInitialized(u)))),u._context=c,u._next=l,u._error=a,u._complete=s,u}return _createClass(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(l)},"8Y7J":function(t,e,n){"use strict";n.d(e,"kb",(function(){return Ko})),n.d(e,"lb",(function(){return Qo})),n.d(e,"mb",(function(){return Yo})),n.d(e,"nb",(function(){return Jo})),n.d(e,"jb",(function(){return Wi})),n.d(e,"ib",(function(){return Di})),n.d(e,"g",(function(){return Po})),n.d(e,"R",(function(){return Oo})),n.d(e,"w",(function(){return Ao})),n.d(e,"S",(function(){return Ut})),n.d(e,"W",(function(){return Ft})),n.d(e,"c",(function(){return zi})),n.d(e,"A",(function(){return Ki})),n.d(e,"z",(function(){return Qi})),n.d(e,"b",(function(){return Yi})),n.d(e,"d",(function(){return Bi})),n.d(e,"e",(function(){return Hi})),n.d(e,"U",(function(){return zo})),n.d(e,"L",(function(){return Co})),n.d(e,"Y",(function(){return Eo})),n.d(e,"s",(function(){return Xi})),n.d(e,"f",(function(){return Xo})),n.d(e,"m",(function(){return Ui})),n.d(e,"l",(function(){return Mt})),n.d(e,"F",(function(){return le})),n.d(e,"G",(function(){return ue})),n.d(e,"a",(function(){return ze})),n.d(e,"P",(function(){return H})),n.d(e,"N",(function(){return Sn})),n.d(e,"M",(function(){return Tn})),n.d(e,"Nb",(function(){return v})),n.d(e,"T",(function(){return b})),n.d(e,"p",(function(){return Le})),n.d(e,"Ob",(function(){return R})),n.d(e,"V",(function(){return M})),n.d(e,"o",(function(){return I})),n.d(e,"n",(function(){return l})),n.d(e,"y",(function(){return c})),n.d(e,"H",(function(){return f})),n.d(e,"x",(function(){return vo})),n.d(e,"C",(function(){return kn})),n.d(e,"D",(function(){return wn})),n.d(e,"E",(function(){return Cn})),n.d(e,"i",(function(){return oo})),n.d(e,"j",(function(){return vn})),n.d(e,"k",(function(){return _n})),n.d(e,"t",(function(){return U})),n.d(e,"v",(function(){return F})),n.d(e,"u",(function(){return Mo})),n.d(e,"B",(function(){return qi})),n.d(e,"I",(function(){return Fo})),n.d(e,"J",(function(){return Lo})),n.d(e,"K",(function(){return Bn})),n.d(e,"O",(function(){return zn})),n.d(e,"h",(function(){return De})),n.d(e,"q",(function(){return jn})),n.d(e,"r",(function(){return Fn})),n.d(e,"Q",(function(){return Je})),n.d(e,"X",(function(){return Go})),n.d(e,"wb",(function(){return Xe})),n.d(e,"bb",(function(){return Ji})),n.d(e,"Z",(function(){return Re})),n.d(e,"ab",(function(){return yn})),n.d(e,"eb",(function(){return ae})),n.d(e,"fb",(function(){return fe})),n.d(e,"gb",(function(){return Ht})),n.d(e,"vb",(function(){return T})),n.d(e,"zb",(function(){return Qe})),n.d(e,"Hb",(function(){return m})),n.d(e,"xb",(function(){return ln})),n.d(e,"yb",(function(){return un})),n.d(e,"ub",(function(){return ji})),n.d(e,"tb",(function(){return Fi})),n.d(e,"cb",(function(){return Pi})),n.d(e,"db",(function(){return Ri})),n.d(e,"Mb",(function(){return tt})),n.d(e,"Kb",(function(){return We})),n.d(e,"Qb",(function(){return $e})),n.d(e,"Pb",(function(){return tn})),n.d(e,"Lb",(function(){return en})),n.d(e,"Rb",(function(){return rn})),n.d(e,"hb",(function(){return Zo})),n.d(e,"ob",(function(){return Gr})),n.d(e,"pb",(function(){return bs})),n.d(e,"qb",(function(){return ar})),n.d(e,"rb",(function(){return yi})),n.d(e,"sb",(function(){return $o})),n.d(e,"Ab",(function(){return Ur})),n.d(e,"Bb",(function(){return Fr})),n.d(e,"Cb",(function(){return la})),n.d(e,"Db",(function(){return ri})),n.d(e,"Fb",(function(){return gi})),n.d(e,"Eb",(function(){return ha})),n.d(e,"Gb",(function(){return ia})),n.d(e,"Ib",(function(){return fa})),n.d(e,"Jb",(function(){return va}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),a=n("VRyK"),s=n("w1tV");function u(t,e,n){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=_construct(i,e);return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}var l=u("Inject",(function(t){return{token:t}})),c=u("Optional"),h=u("Self"),f=u("SkipSelf"),d=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function p(t){for(var e in t)if(t[e]===p)return e;throw Error("Could not find renamed property on target object.")}function v(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function y(t){var e=t[g];return e&&e.token===t?e:null}var g=p({ngInjectableDef:p});function m(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(m).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return"".concat(t.overriddenName);if(t.name)return"".concat(t.name);var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var _=p({__forward_ref__:p});function b(t){return t.__forward_ref__=b,t.toString=function(){return m(this())},t}function w(t){var e=t;return"function"==typeof e&&e.hasOwnProperty(_)&&e.__forward_ref__===b?e():t}var C="undefined"!=typeof globalThis&&globalThis,k="undefined"!=typeof window&&window,E="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,S="undefined"!=typeof global&&global,T=C||S||k||E,I=function(){function t(e,n){_classCallCheck(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=v({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(t,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),t}(),A=new I("INJECTOR",-1),O=new Object,x=/\n/gm,N=p({provide:String,useValue:p}),D=void 0;function P(t){var e=D;return D=t,e}function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Default;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Default;if(void 0===D)throw new Error("inject() must be called from an injection context");return null===D?function(t,e,n){var r=y(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&d.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(m(t),"]"))}(t,0,e):D.get(t,e&d.Optional?null:void 0,e)}(t,e)}var M=R,L=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;if(e===O){var n=new Error("NullInjectorError: No provider for ".concat(m(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}();function j(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=m(e);if(e instanceof Array)i=e.map(m).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):m(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(x,"\n  "))}var F=function t(){_classCallCheck(this,t)},U=function t(){_classCallCheck(this,t)};function V(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function q(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var B=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),H=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),z={},W=[],G=p({ngComponentDef:p}),K=p({ngDirectiveDef:p}),Q=p({ngPipeDef:p}),Y=0;function J(t){return function(t){return t[G]||null}(t)||function(t){return t[K]||null}(t)}function X(t){return function(t){return t[Q]||null}(t)}function Z(t,e){if(null==t)return z;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var $,tt=function(t){var e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,consts:t.consts,vars:t.vars,factory:t.factory,template:t.template||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===B.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||H.Emulated,id:"c",styles:t.styles||W,_:null,setInput:null,schemas:t.schemas||null,tView:null};return i._=""+{toString:function(){var n=t.directives,o=t.features,a=t.pipes;i.id+=Y++,i.inputs=Z(t.inputs,r),i.outputs=Z(t.outputs),o&&o.forEach((function(t){return t(i)})),i.directiveDefs=n?function(){return("function"==typeof n?n():n).map(J)}:null,i.pipeDefs=a?function(){return("function"==typeof a?a():a).map(X)}:null,e.hasOwnProperty(g)||(e[g]=v({token:e,factory:t.factory}))}},i},et=null,nt=new Map,rt=null;function it(t,e){return rt&&t===rt||(rt=t,e&&(et=nt.get(t)||null),et=et||{classesBitMask:0,classesIndex:1,stylesBitMask:0,stylesIndex:1}),et}function ot(t,e){return function(t){for(;Array.isArray(t);)t=t[0];return t}(e[t.index])}function at(t,e){return e[1].data[t+19]}function st(){return $}var ut=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(T);function lt(t,e){0===e?t[2]>0&&function(t){ht(t,2|ct(t))}(t):t[2]=e}function ct(t){return t[1]}function ht(t,e){t[1]=e}function ft(t,e){return t[e+2]}function dt(t,e){return 1&t[e+0]}function pt(t,e){return(1&dt(t,e))>0}function vt(t,e){return t[e+0]>>1}function yt(t,e,n){var r=dt(t,e);t[e+0]=r|n<<1}function gt(t,e){return t[e+1]}function mt(t,e,n){return t[e+3+n]}function _t(t,e){return!(!t||e!==t[2])}function bt(t){return(1&ct(t))>0}function wt(t){return(2&ct(t))>0}function Ct(t){return 6+t[4]}function kt(t,e){var n=Array.isArray(t)?t[0]:t,r=Array.isArray(e)?e[0]:e;return n instanceof String&&(n=n.toString()),r instanceof String&&(r=r.toString()),function(t,e){return!(t!=t&&e!=e)&&t!==e}(n,r)}function Et(t){return null!=t&&""!==t}function St(t){return t.replace(/[a-z][A-Z]/g,(function(t){return t.charAt(0)+"-"+t.charAt(1)})).toLowerCase()}function Tt(t){return Array.isArray(t)&&t.length>=6&&"string"!=typeof t[1]}function It(t,e){return t[e+0]}function At(t,e,n){t[e+1]=n}function Ot(t,e){return t[e+1]}var xt=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();function Nt(t){return!!t.listen}function Dt(t){return t.ngDebugContext}function Pt(t){return t.ngOriginalError}function Rt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var Mt=function(){function t(){_classCallCheck(this,t),this._console=console}return _createClass(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Rt}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?Dt(t)?Dt(t):this._findContext(Pt(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=Pt(t);e&&Pt(e);)e=Pt(e);return e}}]),t}(),Lt=!0,jt=!1;function Ft(){return jt=!0,Lt}function Ut(){if(jt)throw new Error("Cannot enable prod mode after platform setup.");Lt=!1}var Vt=function(){function t(e){if(_classCallCheck(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(t,[{key:"getInertBodyElement_XHR",value:function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),qt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Bt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ht(t){return(t=String(t)).match(qt)||t.match(Bt)?t:(Ft()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function zt(t){var e,n={},r=_createForOfIteratorHelper(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Wt(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var Gt,Kt=zt("area,br,col,hr,img,wbr"),Qt=zt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yt=zt("rp,rt"),Jt=Wt(Yt,Qt),Xt=Wt(Kt,Wt(Qt,zt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wt(Yt,zt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jt),Zt=zt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$t=zt("srcset"),te=Wt(Zt,$t,zt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ee=zt("script,style,template"),ne=function(){function t(){_classCallCheck(this,t),this.sanitizedSomething=!1,this.buf=[]}return _createClass(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!Xt.hasOwnProperty(e))return this.sanitizedSomething=!0,!ee.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(te.hasOwnProperty(s)){var u=o.value;Zt[s]&&(u=Ht(u)),$t[s]&&(n=u,u=(n=String(n)).split(",").map((function(t){return Ht(t.trim())})).join(", ")),this.buf.push(" ",a,'="',oe(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();Xt.hasOwnProperty(e)&&!Kt.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(oe(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(t.outerHTML));return e}}]),t}(),re=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ie=/([^\#-~ |!])/g;function oe(t){return t.replace(/&/g,"&amp;").replace(re,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(ie,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ae(t,e){var n=null;try{Gt=Gt||new Vt(t);var r=e?String(e):"";n=Gt.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Gt.getInertBodyElement(r)}while(r!==o);var a=new ne,s=a.sanitizeChildren(se(n)||n);return Ft()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=se(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function se(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ue=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),le=function t(){_classCallCheck(this,t)},ce=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),he=/^url\(([^)]+)\)$/;function fe(t){if(!(t=String(t).trim()))return"";var e=t.match(he);return e&&Ht(e[1])===e[1]||t.match(ce)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Ft()&&console.warn("WARNING: sanitizing unsafe style value ".concat(t," (see http://g.co/ng/security#xss).")),"unsafe")}function de(t){var e;return e=t.replace(/[$@]/g,"_"),"ng-reflect-".concat(t=e.replace(pe,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()})))}var pe=/([A-Z])/g;function ve(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}var ye=[];function ge(t,e,n,r,i,o,a,s,u){bt(t)||(a?function(t,e,n,r,i){ye.unshift(t,e,n,r,i)}(t,n,r,i,u):(ye.length&&me(),_e(t,n,r,i,u)));var l=s||kt(e[i],o);return l&&(e[i]=o),l}function me(){for(var t=0;t<ye.length;)_e(ye[t++],ye[t++],ye[t++],ye[t++],ye[t++]);ye.length=0}function _e(t,e,n,r,i){var o=!1;if(n){for(var a=!1,s=Ct(t);s<t.length;){var u=gt(t,s),l=ft(t,s);if(a=n<=l){n<l&&be(t,s,n,i),we(t,!1,s,r,e);break}s+=3+u}a||(be(t,t.length,n,i),we(t,!1,s,r,e),o=!0)}else we(t,!0,3,r,e),o=!0;return o}function be(t,e,n,r){t.splice(e,0,r?1:0,1,n,null),yt(t,e,1)}function we(t,e,n,r,i){var o=n+3,a=o+gt(t,n);if(e||a--,"number"==typeof r){for(var s=o;s<=a;s++)if(t[s]===r)return;t.splice(a,0,r),t[n+1]++,yt(t,n,vt(t,n)|1<<i)}else null!==r&&null==t[a]&&(t[a]=r)}function Ce(t,e,n,r,i,o,a,s){return i&&r&&(function(t){if(!bt(t)){var e=Tt(n=t)?n[0]:n;e&&function(t,e){for(var n=1;n<e.length;n+=2){var r=Ot(e,n);r&&_e(t,-1,It(e,n),r,!1)}}(t,e),function(t){ht(t,1|ct(t))}(t)}var n}(r),function(t,e){return t&&e>0}(r,o))?(function(t,e,n,r,i,o,a){for(var s,u=!0===(s=i)?-1:!1===s?0:s,l=ke,c=(u&vt(t,3))>0?1:0,h=Ct(t);h<t.length;){var f=gt(t,h);if(u&vt(t,h)){for(var d=!1,p=ft(t,h),v=f-1,y=mt(t,h,v),g=0;g<v;g++){var m=mt(t,h,g),_=r[m];if(Et(_)){o(e,n,p,a&&pt(t,h)?a(p,_,2):_,m),d=!0;break}}if(l){var b=l(t,e,n,r,o,a,c|(d?4:2),p,y);d=d||b}d||o(e,n,p,y)}h+=3+f}l&&l(t,e,n,r,o,a,c)}(r,t,e,n,o,a,s),!0):i}var ke=null,Ee=function(t,e,n,r){var i=e.style;r?(r=r.toString(),t&&Nt(t)?t.setStyle(e,n,r,xt.DashCase):i&&i.setProperty(n,r)):t&&Nt(t)?t.removeStyle(e,n,xt.DashCase):i&&i.removeProperty(n)},Se=function(t,e,n,r){if(""!==n){var i=e.classList;r?t&&Nt(t)?t.addClass(e,n):i&&i.add(n):t&&Nt(t)?t.removeClass(e,n):i&&i.remove(n)}},Te={},Ie=function(t,e,n,r,i,o,a,s,u){var l=!1;if(gt(t,3)){var c=!0,h=!s;h&&-2&a&&(c=!1,l=!0),c&&(l=function t(e,n,r,i,o,a,s,u,l,c){var h,f=!1;if(l<gt(e,3)){for(var d=mt(e,3,l),p=i[d],v=((h=l)>=xe.length&&xe.push(1),xe[h]);v<p.length;){var y=It(p,v),g=u&&y>u,m=!g&&y===u,_=Ot(p,v),b=Et(_),w=t(e,n,r,i,o,a,g?s:Ae(s,b,m),g?u:y,l+1,c);if(g){f||(f=w);break}if(!w&&Oe(s,m)){var C=m&&!b,k=C?c:_,E=C?d:null;o(n,r,y,a?a(y,k,3):k,E),w=!0}f=w&&m,v+=2}if(xe[l]=v,1===p.length||!u)return t(e,n,r,i,o,a,s,u,l+1,c)}return f}(t,e,n,r,i,o,a,s||null,0,u||null)),h&&function(){for(var t=0;t<xe.length;t++)xe[t]=1}()}return l};function Ae(t,e,n){var r=t;return e||4&t||!(n||1&t)?(r|=4,r&=-3):(r|=2,r&=-5),r}function Oe(t,e){var n=(1&t)>0;return n?4&t&&e&&(n=!1):2&t&&(n=e),n}var xe=[];function Ne(t,e,n,r){for(var i=1;i<t.length;i+=2){var o=It(t,i);if(e<=o){var a=!1;if(o===e){var s=t[i];!r&&Et(s)||(a=!0,At(t,i,n))}else a=!0,t.splice(i,0,e,n);return a}}return t.push(e,n),!0}var De=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Pe()},t}(),Pe=function(){},Re=new I("The presence of this token marks an injector as being the root injector."),Me=function(t,e,n){return new qe(t,e,n)},Le=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Me(t,e,""):Me(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=O,t.NULL=new L,t.ngInjectableDef=v({token:t,providedIn:"any",factory:function(){return R(A)}}),t.__NG_ELEMENT_ID__=-1,t}(),je=function(t){return t},Fe=[],Ue=je,Ve=function(){return Array.prototype.slice.call(arguments)},qe=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.NULL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,t),this.parent=n,this.source=r;var i=this._records=new Map;i.set(Le,{token:Le,fn:je,deps:Fe,value:this,useNew:!1}),i.set(A,{token:A,fn:je,deps:Fe,value:this,useNew:!1}),function t(e,n){if(n)if((n=w(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw He("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw He("Unexpected provider",n);var i=w(n.provide),o=function(t){var e=function(t){var e=Fe,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6,o=w(n[r]);if(o instanceof Array)for(var a=0,s=o;a<s.length;a++){var u=s[a];u instanceof c||u==c?i|=1:u instanceof f||u==f?i&=-3:u instanceof h||u==h?i&=-5:o=u instanceof l?u.token:w(u)}e.push({token:o,options:i})}}else if(t.useExisting)e=[{token:w(t.useExisting),options:6}];else if(!(n||N in t))throw He("'deps' required",t);return e}(t),n=je,r=Fe,i=!1,o=w(t.provide);if(N in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=w(t.useClass);else{if("function"!=typeof o)throw He("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==Ve)throw Be(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:Ve,value:Fe});i=n,a.deps.push({token:i,options:6})}var s=e.get(i);if(s&&s.fn==Ve)throw Be(i);e.set(i,o)}}(i,e)}return _createClass(t,[{key:"get",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Default,r=this._records.get(t);try{return function t(e,n,r,i,o,a){try{return function(e,n,r,i,o,a){var s;if(!n||a&d.SkipSelf)a&d.Self||(s=i.get(e,o,d.Default));else{if((s=n.value)==Ue)throw Error("\u0275Circular dependency");if(s===Fe){n.value=Ue;var u=n.useNew,l=n.fn,c=n.deps,h=Fe;if(c.length){h=[];for(var f=0;f<c.length;f++){var p=c[f],v=p.options,y=2&v?r.get(p.token):void 0;h.push(t(p.token,y,r,y||4&v?i:Le.NULL,1&v?null:Le.THROW_IF_NOT_FOUND,d.Default))}}n.value=s=u?_construct(l,_toConsumableArray(h)):l.apply(void 0,h)}}return s}(e,n,r,i,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(e),n&&n.value==Ue&&(n.value=Fe),s}}(t,r,this._records,this.parent,e,n)}catch(i){return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=j("\n"+t.message,i,"StaticInjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(i,t,0,this.source)}}},{key:"toString",value:function(){var t=[];return this._records.forEach((function(e,n){return t.push(m(n))})),"StaticInjector[".concat(t.join(", "),"]")}}]),t}();function Be(t){return He("Cannot mix multi providers and regular providers",t)}function He(t,e){return new Error(j(t,e,"StaticInjectorError"))}var ze=new I("AnalyzeForEntryComponents");function We(t){var e=(void 0)[1];e.firstTemplatePass&&(function(t,e,n){var r=t.expandoInstructions,i=r.length;i>=2&&r[i-2]===null.hostBindings?r[i-1]=r[i-1]+n:r.push(null.hostBindings,n)}(e,0,t),function(t,e,n){for(var r=0;r<n;r++)(void 0).push(Te),t.blueprint.push(Te),t.data.push(null)}(e,0,t))}var Ge=null;function Ke(){if(!Ge){var t=T.Symbol;if(t&&t.iterator)Ge=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ge=r)}}return Ge}function Qe(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Ye(t,e){var n=Xe(t),r=Xe(e);return n&&r?function(t,e,n){for(var r=t[Ke()](),i=e[Ke()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,Ye):!(n||!(t&&("object"==typeof t||"function"==typeof t))||r||!(e&&("object"==typeof e||"function"==typeof e)))||Qe(t,e)}var Je=function(){function t(e){_classCallCheck(this,t),this.wrapped=e}return _createClass(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function Xe(t){return!!Ze(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ke()in t)}function Ze(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function $e(){(void 0)[1].firstTemplatePass&&(lt(an(void 0),1),lt(on(void 0),1))}function tn(t){nn(-1,on(at(-1,void 0)),(void 0)[7]++,t,!1,!1)}function en(t){!function(t,e){nn(-1,an(at(-1,void 0)),(void 0)[7]++,e,!0,!1)}(0,t)}function nn(t,e,n,r,i,o){ke=Ie;var a=!1;if(r!==Te){var s=ot(at(t,void 0),void 0),u=(void 0)[n];a=kt(u,r);var l=function(t,e,n){var r=Array.isArray(t)?t:[null];r[0]=e||null;for(var i=1;i<r.length;i+=2)At(r,i,null);var o,a=null,s=!1;if("string"==typeof e?e.length&&(a=e.split(/\s+/),s=!0):(a=e?Object.keys(e):null,o=e),a)for(var u=0;u<a.length;u++){var l=a[u];Ne(r,n?St(l):l,!!s||o[l],!0)}return r}(u,r,!i);i?function(t,e,n,r,i,o,a,s){var u=it(n,wt(t));!ge(t,void 0,0,null,i,o,a,s,!1)&&!s||(u.classesBitMask|=1)}(e,0,s,0,n,l,o,a):function(t,e,n,r,i,o,a,s,u){var l=it(n,wt(t));!ge(t,void 0,0,null,i,o,s,u,!0)&&!u||(l.stylesBitMask|=1)}(e,0,s,0,n,l,st(),o,a)}return a}function rn(){var t=at(-1,void 0),e=function(t,e){return 3===t.type?(void 0)[12]:null}(t),n=ot(t,void 0),r=st();(function(t,e,n,r,i,o,a){var s=n?wt(n):!!r&&wt(r),u=_t(n,1),l=_t(r,1);ye.length&&(u||l)&&me();var c=it(i,s),h=Ce(t,i,void 0,n,u,c.classesBitMask,Se,null),f=Ce(t,i,void 0,r,l,c.stylesBitMask,Ee,a);h&&f?(et=null,rt=null,s&&function(t){nt.delete(t)}(i)):s&&function(t,e){nt.set(t,e)}(i,c)})(e,0,an(t),on(t),n,0,r),$=null}function on(t){return sn(t,!1)}function an(t){return sn(t,!0)}function sn(t,e){var n=e?t.classes:t.styles;return Tt(n)||(n=[n||[""],0,0,1,0,"--MAP--"],e?t.classes=n:t.styles=n),n}function un(t){return!!t&&"function"==typeof t.then}function ln(t){return!!t&&"function"==typeof t.subscribe}var cn=function(){function t(e,n,r){_classCallCheck(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return _createClass(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}(),hn=function t(){_classCallCheck(this,t)};function fn(t){var e=Error("No component factory found for ".concat(m(t),". Did you add it to @NgModule.entryComponents?"));return e[dn]=t,e}var dn="ngComponent",pn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){throw fn(t)}}]),t}(),vn=function(){var t=function t(){_classCallCheck(this,t)};return t.NULL=new pn,t}(),yn=function(){function t(e,n,r){_classCallCheck(this,t),this._parent=n,this._ngModule=r,this._factories=new Map;for(var i=0;i<e.length;i++){var o=e[i];this._factories.set(o.componentType,o)}}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw fn(t);return new gn(e,this._ngModule)}}]),t}(),gn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).factory=t,i.ngModule=r,i.selector=t.selector,i.componentType=t.componentType,i.ngContentSelectors=t.ngContentSelectors,i.inputs=t.inputs,i.outputs=t.outputs,i}return _createClass(n,[{key:"create",value:function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}]),n}(hn);function mn(){}var _n=function(){var t=function t(e){_classCallCheck(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return bn(t)},t}(),bn=mn,wn=function t(){_classCallCheck(this,t)},Cn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),kn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return En()},t}(),En=mn,Sn=function t(e){_classCallCheck(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},Tn=new Sn("8.2.14"),In=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return Xe(t)}},{key:"create",value:function(t){return new On(t)}}]),t}(),An=function(t,e){return e},On=function(){function t(e){_classCallCheck(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||An}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Pn(n,r,i)?e:n,a=Pn(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,f=h+c;l<=f&&f<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!Xe(t))throw new Error("Error trying to diff '".concat(m(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Qe(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Qe(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[Ke()]();!(r=i.next()).done;)e(r.value)}(t,(function(t){i=e._trackByFn(n,t),null!==o&&Qe(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Qe(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Qe(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Qe(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new xn(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Dn),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Dn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),t}(),xn=function t(e,n){_classCallCheck(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Nn=function(){function t(){_classCallCheck(this,t),this._head=null,this._tail=null}return _createClass(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Qe(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),Dn=function(){function t(){_classCallCheck(this,t),this.map=new Map}return _createClass(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Nn,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),t}();function Pn(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Rn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return t instanceof Map||Ze(t)}},{key:"create",value:function(){return new Mn}}]),t}(),Mn=function(){function t(){_classCallCheck(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||Ze(t)))throw new Error("Error trying to diff '".concat(m(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Ln(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Qe(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),t}(),Ln=function t(e){_classCallCheck(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},jn=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new c]]}}}]),t}();return t.ngInjectableDef=v({token:t,providedIn:"root",factory:function(){return new t([new In])}}),t}(),Fn=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new c]]}}}]),t}();return t.ngInjectableDef=v({token:t,providedIn:"root",factory:function(){return new t([new Rn])}}),t}(),Un=[new Rn],Vn=new jn([new In]),qn=new Fn(Un),Bn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Hn(t,_n)},t}(),Hn=mn,zn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Wn(t,_n)},t}(),Wn=mn;function Gn(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(e,"'. Current value: '").concat(n,"'.");return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Kn(n,e),n}(i,t)}function Kn(t,e){t.ngDebugContext=e,t.ngErrorLogger=e.logError.bind(e)}function Qn(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: ".concat(t))}function Yn(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Jn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Xn(t,e){return t.nodes[e]}function Zn(t,e){return t.nodes[e]}function $n(t,e){return t.nodes[e]}function tr(t,e){return t.nodes[e]}function er(t,e){return t.nodes[e]}var nr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},rr=function(){},ir=new Map;function or(t){var e=ir.get(t);return e||(e=m(t)+"_"+ir.size,ir.set(t,e)),e}function ar(t){return{id:"$$undefined",styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var sr=0;function ur(t,e,n,r){return!(!(2&t.state)&&Qe(t.oldValues[e.bindingIndex+n],r))}function lr(t,e,n,r){return!!ur(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function cr(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Ye(i,r)){var o=e.bindings[n].name;throw Gn(nr.createDebugContext(t,e.nodeIndex),"".concat(o,": ").concat(i),"".concat(o,": ").concat(r),0!=(1&t.state))}}function hr(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function fr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function dr(t,e,n,r){try{return hr(33554432&t.def.nodes[e].flags?Zn(t,e).componentView:t),nr.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function pr(t){return t.parent?Zn(t.parent,t.parentNodeDef.nodeIndex):null}function vr(t){return t.parent?t.parentNodeDef.parent:null}function yr(t,e){switch(201347067&e.flags){case 1:return Zn(t,e.nodeIndex).renderElement;case 2:return Xn(t,e.nodeIndex).renderText}}function gr(t,e){return t?"".concat(t,":").concat(e):e}function mr(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function _r(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function br(t){return 1<<t%32}function wr(t){var e={},n=0,r={};return t&&t.forEach((function(t){var i=_slicedToArray(t,2),o=i[0],a=i[1];"number"==typeof o?(e[o]=a,n|=br(o)):r[o]=a})),{matchedQueries:e,references:r,matchedQueryIds:n}}function Cr(t,e){return t.map((function(t){var n,r,i;return Array.isArray(t)?(i=(n=_slicedToArray(t,2))[0],r=n[1]):(i=0,r=t),r&&("function"==typeof r||"object"==typeof r)&&e&&Object.defineProperty(r,"__source",{value:e,configurable:!0}),{flags:i,token:r,tokenKey:or(r)}}))}function kr(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===H.Native?Zn(t,n.renderParent.nodeIndex).renderElement:void 0:e}var Er=new WeakMap;function Sr(t){var e=Er.get(t);return e||((e=t((function(){return rr}))).factory=t,Er.set(t,e)),e}function Tr(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(yr(t,t.def.lastRenderRootNode))),Ir(t,e,0,t.def.nodes.length-1,n,r,i)}function Ir(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&Or(t,u,e,i,o,a),s+=u.childCount}}function Ar(t,e,n,r,i,o){for(var a=t;a&&!mr(a);)a=a.parent;for(var s=a.parent,u=vr(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===e&&Or(s,h,n,r,i,o),c+=h.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(var d=0;d<f.length;d++)xr(t,f[d],n,r,i,o)}}function Or(t,e,n,r,i,o){if(8&e.flags)Ar(t,e.ngContent.index,n,r,i,o);else{var a=yr(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&xr(t,a,n,r,i,o),32&e.bindingFlags&&xr(Zn(t,e.nodeIndex).componentView,a,n,r,i,o)):xr(t,a,n,r,i,o),16777216&e.flags)for(var s=Zn(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)Tr(s[u],n,r,i,o);1&e.flags&&!e.element.name&&Ir(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function xr(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var Nr=/^:([^:]+):(.+)$/;function Dr(t){if(":"===t[0]){var e=t.match(Nr);return[e[1],e[2]]}return["",t]}function Pr(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}var Rr=new Object,Mr=or(Le),Lr=or(A),jr=or(F);function Fr(t,e,n,r){return n=w(n),{index:-1,deps:Cr(r,m(e)),flags:t,token:e,value:n}}function Ur(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===Re&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[or(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function Vr(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le.THROW_IF_NOT_FOUND,o=P(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(i=null),1&e.flags)return t._parent.get(e.token,i);var a=e.tokenKey;switch(a){case Mr:case Lr:case jr:return t}var s,u=t._def.providersByKey[a];if(u){var l=t._providers[u.index];return void 0===l&&(l=t._providers[u.index]=qr(t,u)),l===Rr?void 0:l}if((s=y(e.token))&&(n=t,null!=(r=s).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(n,r.providedIn)||"root"===r.providedIn&&n._def.isRoot))){var c=t._providers.length;return t._def.providers[c]=t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:c,token:e.token},t._providers[c]=Rr,t._providers[c]=qr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?i:t._parent.get(e.token,i)}finally{P(o)}}function qr(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Vr(t,n[0]));case 2:return new e(Vr(t,n[0]),Vr(t,n[1]));case 3:return new e(Vr(t,n[0]),Vr(t,n[1]),Vr(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Vr(t,n[o]);return _construct(e,i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Vr(t,n[0]));case 2:return e(Vr(t,n[0]),Vr(t,n[1]));case 3:return e(Vr(t,n[0]),Vr(t,n[1]),Vr(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Vr(t,n[o]);return e.apply(void 0,i)}}(t,e.value,e.deps);break;case 2048:n=Vr(t,e.deps[0]);break;case 256:n=e.value}return n===Rr||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Rr:n}function Br(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,q(n,e),nr.dirtyParentQueries(r),zr(r),r}function Hr(t,e,n){var r=e?yr(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Tr(n,2,i,o,void 0)}function zr(t){Tr(t,3,null,null,void 0)}var Wr=new Object;function Gr(t,e,n,r,i,o){return new Kr(t,e,n,r,i,o)}var Kr=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a,s){var u;return _classCallCheck(this,n),(u=e.call(this)).selector=t,u.componentType=r,u._inputs=o,u._outputs=a,u.ngContentSelectors=s,u.viewDefFactory=i,u}return _createClass(n,[{key:"create",value:function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=Sr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=nr.createRootView(t,e||[],n,i,r,Wr),s=$n(a,o).instance;return n&&a.renderer.setAttribute(Zn(a,0).renderElement,"ng-version",Tn.full),new Qr(a,new Zr(a),s)}},{key:"inputs",get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t}},{key:"outputs",get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}}]),n}(hn),Qr=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._view=t,o._viewRef=r,o._component=i,o._elDef=o._view.def.nodes[0],o.hostView=r,o.changeDetectorRef=r,o.instance=i,o}return _createClass(n,[{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(t){this._viewRef.onDestroy(t)}},{key:"location",get:function(){return new _n(Zn(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new ni(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}}]),n}(function(){return function t(){_classCallCheck(this,t)}}());function Yr(t,e,n){return new Jr(t,e,n)}var Jr=function(){function t(e,n,r){_classCallCheck(this,t),this._view=e,this._elDef=n,this._data=r,this._embeddedViews=[]}return _createClass(t,[{key:"clear",value:function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Br(this._data,t);nr.destroyView(e)}}},{key:"get",value:function(t){var e=this._embeddedViews[t];if(e){var n=new Zr(e);return n.attachToViewContainerRef(this),n}return null}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof gn||(i=o.get(F));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a}},{key:"insert",value:function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a,s=t;return n=this._view,r=this._data,i=e,o=s._view,a=r.viewContainer._embeddedViews,null==i&&(i=a.length),o.viewContainerParent=n,V(a,i,o),function(t,e){var n=pr(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(!(4&e.flags)){t.nodeFlags|=4,e.flags|=4;for(var n=e.parent;n;)n.childFlags|=4,n=n.parent}}(e.parent.def,e.parentNodeDef)}}(r,o),nr.dirtyParentQueries(o),Hr(r,i>0?a[i-1]:null,o),s.attachToViewContainerRef(this),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return n=this._data,r=s,i=e,o=n.viewContainer._embeddedViews,a=o[r],q(o,r),null==i&&(i=o.length),V(o,i,a),nr.dirtyParentQueries(a),zr(a),Hr(n,i>0?o[i-1]:null,a),t}},{key:"indexOf",value:function(t){return this._embeddedViews.indexOf(t._view)}},{key:"remove",value:function(t){var e=Br(this._data,t);e&&nr.destroyView(e)}},{key:"detach",value:function(t){var e=Br(this._data,t);return e?new Zr(e):null}},{key:"element",get:function(){return new _n(this._data.renderElement)}},{key:"injector",get:function(){return new ni(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=vr(t),t=t.parent;return t?new ni(t,e):new ni(this._view,null)}},{key:"length",get:function(){return this._embeddedViews.length}}]),t}();function Xr(t){return new Zr(t)}var Zr=function(){function t(e){_classCallCheck(this,t),this._view=e,this._viewContainerRef=null,this._appRef=null}return _createClass(t,[{key:"markForCheck",value:function(){hr(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{nr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}},{key:"checkNoChanges",value:function(){nr.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),nr.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,zr(this._view),nr.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"rootNodes",get:function(){return Tr(this._view,0,void 0,void 0,t=[]),t;var t}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}}]),t}();function $r(t,e){return new ti(t,e)}var ti=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._parentView=t,i._def=r,i}return _createClass(n,[{key:"createEmbeddedView",value:function(t){return new Zr(nr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}},{key:"elementRef",get:function(){return new _n(Zn(this._parentView,this._def.nodeIndex).renderElement)}}]),n}(Bn);function ei(t,e){return new ni(t,e)}var ni=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.elDef=n}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.THROW_IF_NOT_FOUND;return nr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:or(t)},e)}}]),t}();function ri(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Zn(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Xn(t,n.nodeIndex).renderText;if(20240&n.flags)return $n(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index ".concat(e))}function ii(t){return new oi(t.renderer)}var oi=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"selectRootElement",value:function(t){return this.delegate.selectRootElement(t)}},{key:"createElement",value:function(t,e){var n=_slicedToArray(Dr(e),2),r=n[0],i=n[1],o=this.delegate.createElement(i,r);return t&&this.delegate.appendChild(t,o),o}},{key:"createViewRoot",value:function(t){return t}},{key:"createTemplateAnchor",value:function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}},{key:"createText",value:function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}},{key:"projectNodes",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}},{key:"attachViewAfter",value:function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}},{key:"detachView",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}},{key:"destroyView",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"listenGlobal",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"setElementProperty",value:function(t,e,n){this.delegate.setProperty(t,e,n)}},{key:"setElementAttribute",value:function(t,e,n){var r=_slicedToArray(Dr(e),2),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)}},{key:"setBindingDebugInfo",value:function(t,e,n){}},{key:"setElementClass",value:function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}},{key:"setElementStyle",value:function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}},{key:"invokeElementMethod",value:function(t,e,n){t[e].apply(t,n)}},{key:"setText",value:function(t,e){this.delegate.setValue(t,e)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),t}();function ai(t,e,n,r){return new si(t,e,n,r)}var si=function(){function t(e,n,r,i){_classCallCheck(this,t),this._moduleType=e,this._parent=n,this._bootstrapComponents=r,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=qr(t,i))}}(this)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Default,r=0;return n&d.SkipSelf?r|=1:n&d.Self&&(r|=4),Vr(this,{token:t,tokenKey:or(t),flags:r},e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(m(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==Rr){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach((function(t){return t()}))}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(vn)}}]),t}(),ui=or((function t(){_classCallCheck(this,t)})),li=or(kn),ci=or(_n),hi=or(zn),fi=or(Bn),di=or(De),pi=or(Le),vi=or(A);function yi(t,e,n,r,i,o,a,s){var u=[];if(a)for(var l in a){var c=_slicedToArray(a[l],2),h=c[0],f=c[1];u[h]={flags:8,name:l,nonMinifiedName:f,ns:null,securityContext:null,suffix:null}}var d=[];if(s)for(var p in s)d.push({type:1,propName:p,target:null,eventName:s[p]});return mi(t,e|=16384,n,r,i,i,o,u,d)}function gi(t,e,n,r,i){return mi(-1,t,e,0,n,r,i)}function mi(t,e,n,r,i,o,a,s,u){var l=wr(n),c=l.matchedQueries,h=l.references,f=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=w(o);var d=Cr(a,m(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Pr(s),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function _i(t,e){return ki(t,e)}function bi(t,e){for(var n=t;n.parent&&!mr(n);)n=n.parent;return Ei(n.parent,vr(n),!0,e.provider.value,e.provider.deps)}function wi(t,e){var n=Ei(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName];if(!ln(o))throw new Error("@Output ".concat(i.propName," not initialized in '").concat(n.constructor.name,"'."));var a=o.subscribe(Ci(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=a.unsubscribe.bind(a)}return n}function Ci(t,e,n){return function(r){return dr(t,e,n,r)}}function ki(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return Ei(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(Ti(t,e,n,i[0]));case 2:return r(Ti(t,e,n,i[0]),Ti(t,e,n,i[1]));case 3:return r(Ti(t,e,n,i[0]),Ti(t,e,n,i[1]),Ti(t,e,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=Ti(t,e,n,i[s]);return r.apply(void 0,a)}}(t,e.parent,n,r.value,r.deps);case 2048:return Ti(t,e.parent,n,r.deps[0]);case 256:return r.value}}function Ei(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(Ti(t,e,n,i[0]));case 2:return new r(Ti(t,e,n,i[0]),Ti(t,e,n,i[1]));case 3:return new r(Ti(t,e,n,i[0]),Ti(t,e,n,i[1]),Ti(t,e,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=Ti(t,e,n,i[s]);return _construct(r,a)}}var Si={};function Ti(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Le.THROW_IF_NOT_FOUND;if(8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===di&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case ui:return ii(Ii(s,e,n));case li:return Ii(s,e,n).renderer;case ci:return new _n(Zn(s,e.nodeIndex).renderElement);case hi:return Zn(s,e.nodeIndex).viewContainer;case fi:if(e.element.template)return Zn(s,e.nodeIndex).template;break;case di:return Xr(Ii(s,e,n));case pi:case vi:return ei(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var l=$n(s,u.nodeIndex);return l||(l={instance:ki(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=mr(s),e=vr(s),s=s.parent,4&r.flags&&(s=null)}var c=o.root.injector.get(r.token,Si);return c!==Si||i===Si?c:o.root.ngModule.injector.get(r.token,i)}function Ii(t,e,n){var r;if(n)r=Zn(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!mr(r);)r=r.parent;return r}function Ai(t,e,n,r,i,o){if(32768&n.flags){var a=Zn(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=Je.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new cn(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Oi(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Ni(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=xi(t,a,e,r)),a=a.parent}}function xi(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Ni(t,i,o.flags&n,r++),i+=o.childCount}return r}function Ni(t,e,n,r){var i=$n(t,e);if(i){var o=i.instance;o&&(nr.setCurrentNode(t,e),1048576&n&&Jn(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Jn(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var Di=new I("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return ut}}),Pi={},Ri=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),Mi=void 0,Li=["en",[["a","p"],["AM","PM"],Mi],[["AM","PM"],Mi,Mi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mi,"{1} 'at' {0}",Mi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];function ji(t){return Fi(t)[Ri.PluralCase]}function Fi(t){var e=t.toLowerCase().replace(/_/g,"-"),n=Pi[e];if(n)return n;var r=e.split("-")[0];if(n=Pi[r])return n;if("en"===r)return Li;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}var Ui=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(t=e.call(this)).__isAsync=r,t}return _createClass(n,[{key:"emit",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var o,a=function(t){return null},s=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(a=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},e&&(a=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)}),r&&(s=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var u=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,o,a,s);return t instanceof i.a&&t.add(u),u}}]),n}(r.a);function Vi(){return this._results[Ke()]()}var qi=function(){function t(){_classCallCheck(this,t),this.dirty=!0,this._results=[],this.changes=new Ui,this.length=0;var e=Ke(),n=t.prototype;n[e]||(n[e]=Vi)}return _createClass(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),Bi=new I("Application Initializer"),Hi=function(){function t(e){var n=this;_classCallCheck(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return _createClass(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();un(i)&&e.push(i)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}(),zi=new I("AppId");function Wi(){return"".concat(Gi()).concat(Gi()).concat(Gi())}function Gi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ki=new I("Platform Initializer"),Qi=new I("Platform ID"),Yi=new I("appBootstrapListener"),Ji=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}(),Xi=new I("LocaleId");function Zi(){throw new Error("Runtime compiler is not loaded")}var $i,to,eo=Zi,no=Zi,ro=Zi,io=Zi,oo=function(){function t(){_classCallCheck(this,t),this.compileModuleSync=eo,this.compileModuleAsync=no,this.compileModuleAndAllComponentsSync=ro,this.compileModuleAndAllComponentsAsync=io}return _createClass(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}(),ao=function t(){_classCallCheck(this,t)};var so,uo=!(!(so=T.wtf)||($i=so.trace,!$i)||(to=$i.events,0));function lo(t,e){return null}var co=uo?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return to.createScope(t,e)}:function(t,e){return lo},ho=uo?function(t,e){return $i.leaveScope(t,e),e}:function(t,e){return e},fo=Promise.resolve(0);function po(t){"undefined"==typeof Zone?fo.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var vo=function(){function t(e){var n,r=e.enableLongStackTrace,i=void 0!==r&&r;if(_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ui(!1),this.onMicrotaskEmpty=new Ui(!1),this.onStable=new Ui(!1),this.onError=new Ui(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,r,i,o,a){try{return _o(n),t.invokeTask(r,i,o,a)}finally{bo(n)}},onInvoke:function(t,e,r,i,o,a,s){try{return _o(n),t.invoke(r,i,o,a,s)}finally{bo(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,mo(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,go,yo,yo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function yo(){}var go={};function mo(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function _o(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bo(t){t._nesting--,mo(t)}var wo=function(){function t(){_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ui,this.onMicrotaskEmpty=new Ui,this.onStable=new Ui,this.onError=new Ui}return _createClass(t,[{key:"run",value:function(t){return t()}},{key:"runGuarded",value:function(t){return t()}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t){return t()}}]),t}(),Co=function(){function t(e){var n=this;_classCallCheck(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){vo.assertNotInAngularZone(),po((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())po((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(t){return t.timeoutId!==i})),t(r._didWork,r.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}(),ko=function(){function t(){_classCallCheck(this,t),this._applications=new Map,To.addToWindow(this)}return _createClass(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return To.findTestabilityInTree(this,t,e)}}]),t}();function Eo(t){To=t}var So,To=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Io=new I("AllowMultipleToken"),Ao=function t(e,n){_classCallCheck(this,t),this.name=e,this.token=n};function Oo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(e),i=new I(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=xo();if(!o||o.injector.get(Io,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(So&&!So.destroyed&&!So.injector.get(Io,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");So=t.get(No);var e=t.get(Ki,null);e&&e.forEach((function(t){return t()}))}(Le.create({providers:a,name:r}))}return function(t){var e=xo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function xo(){return So&&!So.destroyed?So:null}var No=function(){function t(e){_classCallCheck(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new wo:("zone.js"===n?void 0:n)||new vo({enableLongStackTrace:Ft()}),o=[{provide:vo,useValue:i}];return i.run((function(){var e=Le.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(Mt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Ro(r._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})})),function(t,e,i){try{var o=((a=n.injector.get(Hi)).runInitializers(),a.donePromise.then((function(){return r._moduleDoBootstrap(n),n})));return un(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(s){throw e.runOutsideAngular((function(){return t.handleError(s)})),s}var a}(a,i)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Do({},n);return function(t,e,n){return t.get(ao).createCompiler([e]).compileModuleAsync(n)}(this.injector,r,t).then((function(t){return e.bootstrapModuleFactory(t,r)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(Po);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(m(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function Do(t,e){return Array.isArray(e)?e.reduce(Do,t):Object.assign({},t,e)}var Po=function(){var t=function(){function t(e,n,r,i,u,l){var c=this;_classCallCheck(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=u,this._initStatus=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ft(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run((function(){c.tick()}))}});var h=new o.a((function(t){c._stable=c._zone.isStable&&!c._zone.hasPendingMacrotasks&&!c._zone.hasPendingMicrotasks,c._zone.runOutsideAngular((function(){t.next(c._stable),t.complete()}))})),f=new o.a((function(t){var e;c._zone.runOutsideAngular((function(){e=c._zone.onStable.subscribe((function(){vo.assertNotInAngularZone(),po((function(){c._stable||c._zone.hasPendingMacrotasks||c._zone.hasPendingMicrotasks||(c._stable=!0,t.next(!0))}))}))}));var n=c._zone.onUnstable.subscribe((function(){vo.assertInAngularZone(),c._stable&&(c._stable=!1,c._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=Object(a.a)(h,f.pipe(Object(s.a)()))}return _createClass(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof hn?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof gn?null:this._injector.get(F),o=n.create(Le.NULL,[],e||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(Co,null);return a&&o.injector.get(ko).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Ft()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0;var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;){r.value.detectChanges()}}catch(s){i.e(s)}finally{i.f()}if(this._enforceNoNewChanges){var o,a=_createForOfIteratorHelper(this._views);try{for(a.s();!(o=a.n()).done;){o.value.checkNoChanges()}}catch(s){a.e(s)}finally{a.f()}}}catch(u){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(u)}))}finally{this._runningTick=!1,ho(n)}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;Ro(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Yi,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),Ro(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t._tickScope=co("ApplicationRef#tick()"),t}();function Ro(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Mo=function t(){_classCallCheck(this,t)},Lo=function t(){_classCallCheck(this,t)},jo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Fo=function(){function t(e,n){_classCallCheck(this,t),this._compiler=e,this._config=n||jo}return _createClass(t,[{key:"load",value:function(t){return this._compiler instanceof oo?this.loadFactory(t):this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var e=this,r=_slicedToArray(t.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),n("zn8P")(i).then((function(t){return t[o]})).then((function(t){return Uo(t,i,o)})).then((function(t){return e._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(t){var e=_slicedToArray(t.split("#"),2),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(t){return t[i+o]})).then((function(t){return Uo(t,r,i)}))}}]),t}();function Uo(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var Vo=function t(e,n){_classCallCheck(this,t),this.name=e,this.callback=n},qo=function(){function t(e,n,r){_classCallCheck(this,t),this.listeners=[],this.parent=null,this._debugContext=r,this.nativeNode=e,n&&n instanceof Bo&&n.addChild(this)}return _createClass(t,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),t}(),Bo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r,i)).properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=t,o}return _createClass(n,[{key:"addChild",value:function(t){t&&(this.childNodes.push(t),t.parent=this)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}},{key:"insertChildrenAfter",value:function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(_toConsumableArray(e))),e.forEach((function(e){e.parent&&e.parent.removeChild(e),t.parent=r})))}},{key:"insertBefore",value:function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}},{key:"query",value:function(t){return this.queryAll(t)[0]||null}},{key:"queryAll",value:function(t){var e=[];return function t(e,r,i){e.childNodes.forEach((function(e){e instanceof n&&(r(e)&&i.push(e),t(e,r,i))}))}(this,t,e),e}},{key:"queryAllNodes",value:function(t){var e=[];return function t(e,r,i){e instanceof n&&e.childNodes.forEach((function(e){r(e)&&i.push(e),e instanceof n&&t(e,r,i)}))}(this,t,e),e}},{key:"triggerEventHandler",value:function(t,e){this.listeners.forEach((function(n){n.name==t&&n.callback(e)}))}},{key:"children",get:function(){return this.childNodes.filter((function(t){return t instanceof n}))}}]),n}(qo),Ho=new Map,zo=function(t){return Ho.get(t)||null};function Wo(t){Ho.set(t.nativeNode,t)}var Go=Oo(null,"core",[{provide:Qi,useValue:"unknown"},{provide:No,deps:[Le]},{provide:ko,deps:[]},{provide:Ji,deps:[]}]);function Ko(){return Vn}function Qo(){return qn}function Yo(t){return t||"en-US"}function Jo(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}var Xo=function t(e){_classCallCheck(this,t)};function Zo(t,e,n,r,i,o){t|=1;var a=wr(e),s=a.matchedQueries,u=a.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:a.matchedQueryIds,references:u,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Sr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||rr},provider:null,text:null,query:null,ngContent:null}}function $o(t,e,n,r,i,o){var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;c||(c=rr);var d=wr(n),p=d.matchedQueries,v=d.references,y=d.matchedQueryIds,g=null,m=null;o&&(g=(a=_slicedToArray(Dr(o),2))[0],m=a[1]),u=u||[];for(var _=new Array(u.length),b=0;b<u.length;b++){var w=_slicedToArray(u[b],3),C=w[0],k=w[1],E=w[2],S=Dr(k),T=_slicedToArray(S,2),I=T[0],A=T[1],O=void 0,x=void 0;switch(15&C){case 4:x=E;break;case 1:case 8:O=E}_[b]={flags:C,ns:I,name:A,nonMinifiedName:A,securityContext:O,suffix:x}}l=l||[];for(var N=new Array(l.length),D=0;D<l.length;D++){var P=_slicedToArray(l[D],2),R=P[0],M=P[1];N[D]={type:0,target:R,eventName:M,propName:null}}var L=(s=s||[]).map((function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1],i=_slicedToArray(Dr(n),2);return[i[0],i[1],r]}));return f=function(t){if(t&&"$$undefined"===t.id){var e=null!=t.encapsulation&&t.encapsulation!==H.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c".concat(sr++):"$$empty"}return t&&"$$empty"===t.id&&(t=null),t||null}(f),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:y,references:v,ngContentIndex:r,childCount:i,bindings:_,bindingFlags:Pr(_),outputs:N,element:{ns:g,name:m,attrs:L,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:c||rr},provider:null,text:null,query:null,ngContent:null}}function ta(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=kr(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o,!!i.componentRendererType&&i.componentRendererType.encapsulation===H.ShadowDom);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var l=_slicedToArray(i.attrs[u],3),c=l[0],h=l[1],f=l[2];a.setAttribute(r,h,f,c)}return r}function ea(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=na(t,n.nodeIndex,gr(o.target,o.eventName)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var l=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=l}}function na(t,e,n){return function(r){return dr(t,e,n,r)}}function ra(t,e,n,r){if(!lr(t,e,n,r))return!1;var i=e.bindings[n],o=Zn(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(ue.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}function ia(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:br(e),bindings:r},ngContent:null}}function oa(t){for(var e=t.def.nodeMatchedQueries;t.parent&&_r(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++){var o=t.def.nodes[i];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&er(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}}if(134217728&t.def.nodeFlags)for(var a=0;a<t.def.nodes.length;a++){var s=t.def.nodes[a];134217728&s.flags&&536870912&s.flags&&er(t,a).setDirty(),a+=s.childCount}}function aa(t,e){var n=er(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=sa(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=$n(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=sa(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function sa(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(ua(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Zn(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(sa(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],f=pr(h);f&&f===u&&sa(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(var p=0;p<d.length;p++){var v=d[p];sa(v,0,v.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function ua(t,e,n){if(null!=n)switch(n){case 1:return Zn(t,e.nodeIndex).renderElement;case 0:return new _n(Zn(t,e.nodeIndex).renderElement);case 2:return Zn(t,e.nodeIndex).template;case 3:return Zn(t,e.nodeIndex).viewContainer;case 4:return $n(t,e.nodeIndex).instance}}function la(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function ca(t,e,n){var r=kr(t,e,n);r&&Ar(t,n.ngContent.index,1,r,null,void 0)}function ha(t,e){for(var n=Object.keys(e),r=n.length,i=new Array(r),o=0;o<r;o++){var a=n[o];i[e[a]]=a}return function(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:64,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Pr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,t,i)}function fa(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function da(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=kr(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function pa(t,e){return(null!=t?t.toString():"")+e.suffix}function va(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,l=null,c=null,h=!1,f=!1,d=null,p=0;p<e.length;p++){var v=e[p];if(v.nodeIndex=p,v.parent=l,v.bindingIndex=i,v.outputIndex=o,v.renderParent=c,a|=v.flags,u|=v.matchedQueryIds,v.element){var y=v.element;y.publicProviders=l?l.element.publicProviders:Object.create(null),y.allProviders=y.publicProviders,h=!1,f=!1,v.element.template&&(u|=v.element.template.nodeMatchedQueries)}if(ga(l,v,e.length),i+=v.bindings.length,o+=v.outputs.length,!c&&3&v.flags&&(d=v),20224&v.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&v.flags);0==(8192&v.flags)||g?l.element.publicProviders[or(v.provider.token)]=v:(f||(f=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[or(v.provider.token)]=v),g&&(l.element.componentProvider=v)}if(l?(l.childFlags|=v.flags,l.directChildFlags|=v.flags,l.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(l.childMatchedQueries|=v.element.template.nodeMatchedQueries)):s|=v.flags,v.childCount>0)l=v,ya(v)||(c=v);else for(;l&&p===l.nodeIndex+l.childCount;){var m=l.parent;m&&(m.childFlags|=l.childFlags,m.childMatchedQueries|=l.childMatchedQueries),c=(l=m)&&ya(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||rr,updateRenderer:r||rr,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function ya(t){return 0!=(1&t.flags)&&null===t.element.name}function ga(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(e.nodeIndex,"!"))}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(e.nodeIndex,"!"));if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(e.nodeIndex,"!"));if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(e.nodeIndex,"!"))}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(e.nodeIndex,"!"))}}function ma(t,e,n,r){var i=wa(t.root,t.renderer,t,e,n);return Ca(i,t.component,r),ka(i),i}function _a(t,e,n){var r=wa(t,t.renderer,null,null,e);return Ca(r,n,n),ka(r),r}function ba(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,wa(t.root,i,t,e.element.componentProvider,n)}function wa(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function Ca(t,e,n){t.component=e,t.context=n}function ka(t){var e;mr(t)&&(e=Zn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i],a=void 0;switch(nr.setCurrentNode(t,i),201347067&o.flags){case 1:var s=ta(t,e,o),u=void 0;if(33554432&o.flags){var l=Sr(o.element.componentView);u=nr.createComponentView(t,o,l,s)}ea(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?$r(t,o):void 0},16777216&o.flags&&(a.viewContainer=Yr(t,o,a));break;case 2:a=da(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:_i(t,o)});break;case 16:a={instance:bi(t,o)};break;case 16384:(a=r[i])||(a={instance:wi(t,o)}),32768&o.flags&&Ca(Zn(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new qi;break;case 8:ca(t,e,o),a=void 0}r[i]=a}Da(t,Na.CreateViewNodes),La(t,201326592,268435456,0)}function Ea(t){Ia(t),nr.updateDirectives(t,1),Pa(t,Na.CheckNoChanges),nr.updateRenderer(t,1),Da(t,Na.CheckNoChanges),t.state&=-97}function Sa(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Yn(t,0,256),Ia(t),nr.updateDirectives(t,0),Pa(t,Na.CheckAndUpdate),La(t,67108864,536870912,0);var e=Yn(t,256,512);Oi(t,2097152|(e?1048576:0)),nr.updateRenderer(t,0),Da(t,Na.CheckAndUpdate),La(t,134217728,536870912,0),Oi(t,8388608|((e=Yn(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Yn(t,768,1024)}function Ta(t,e,n,r,i,o,a,s,u,l,c,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=e.bindings.length,d=!1;return f>0&&ra(t,e,0,n)&&(d=!0),f>1&&ra(t,e,1,r)&&(d=!0),f>2&&ra(t,e,2,i)&&(d=!0),f>3&&ra(t,e,3,o)&&(d=!0),f>4&&ra(t,e,4,a)&&(d=!0),f>5&&ra(t,e,5,s)&&(d=!0),f>6&&ra(t,e,6,u)&&(d=!0),f>7&&ra(t,e,7,l)&&(d=!0),f>8&&ra(t,e,8,c)&&(d=!0),f>9&&ra(t,e,9,h)&&(d=!0),d}(t,e,n,r,i,o,a,s,u,l,c,h);case 2:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=!1,d=e.bindings,p=d.length;if(p>0&&lr(t,e,0,n)&&(f=!0),p>1&&lr(t,e,1,r)&&(f=!0),p>2&&lr(t,e,2,i)&&(f=!0),p>3&&lr(t,e,3,o)&&(f=!0),p>4&&lr(t,e,4,a)&&(f=!0),p>5&&lr(t,e,5,s)&&(f=!0),p>6&&lr(t,e,6,u)&&(f=!0),p>7&&lr(t,e,7,l)&&(f=!0),p>8&&lr(t,e,8,c)&&(f=!0),p>9&&lr(t,e,9,h)&&(f=!0),f){var v=e.text.prefix;p>0&&(v+=pa(n,d[0])),p>1&&(v+=pa(r,d[1])),p>2&&(v+=pa(i,d[2])),p>3&&(v+=pa(o,d[3])),p>4&&(v+=pa(a,d[4])),p>5&&(v+=pa(s,d[5])),p>6&&(v+=pa(u,d[6])),p>7&&(v+=pa(l,d[7])),p>8&&(v+=pa(c,d[8])),p>9&&(v+=pa(h,d[9]));var y=Xn(t,e.nodeIndex).renderText;t.renderer.setValue(y,v)}return f}(t,e,n,r,i,o,a,s,u,l,c,h);case 16384:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=$n(t,e.nodeIndex),d=f.instance,p=!1,v=void 0,y=e.bindings.length;return y>0&&ur(t,e,0,n)&&(p=!0,v=Ai(t,f,e,0,n,v)),y>1&&ur(t,e,1,r)&&(p=!0,v=Ai(t,f,e,1,r,v)),y>2&&ur(t,e,2,i)&&(p=!0,v=Ai(t,f,e,2,i,v)),y>3&&ur(t,e,3,o)&&(p=!0,v=Ai(t,f,e,3,o,v)),y>4&&ur(t,e,4,a)&&(p=!0,v=Ai(t,f,e,4,a,v)),y>5&&ur(t,e,5,s)&&(p=!0,v=Ai(t,f,e,5,s,v)),y>6&&ur(t,e,6,u)&&(p=!0,v=Ai(t,f,e,6,u,v)),y>7&&ur(t,e,7,l)&&(p=!0,v=Ai(t,f,e,7,l,v)),y>8&&ur(t,e,8,c)&&(p=!0,v=Ai(t,f,e,8,c,v)),y>9&&ur(t,e,9,h)&&(p=!0,v=Ai(t,f,e,9,h,v)),v&&d.ngOnChanges(v),65536&e.flags&&Jn(t,256,e.nodeIndex)&&d.ngOnInit(),262144&e.flags&&d.ngDoCheck(),p}(t,e,n,r,i,o,a,s,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,l,c,h){var f=e.bindings,d=!1,p=f.length;if(p>0&&lr(t,e,0,n)&&(d=!0),p>1&&lr(t,e,1,r)&&(d=!0),p>2&&lr(t,e,2,i)&&(d=!0),p>3&&lr(t,e,3,o)&&(d=!0),p>4&&lr(t,e,4,a)&&(d=!0),p>5&&lr(t,e,5,s)&&(d=!0),p>6&&lr(t,e,6,u)&&(d=!0),p>7&&lr(t,e,7,l)&&(d=!0),p>8&&lr(t,e,8,c)&&(d=!0),p>9&&lr(t,e,9,h)&&(d=!0),d){var v,y=tr(t,e.nodeIndex);switch(201347067&e.flags){case 32:v=new Array(f.length),p>0&&(v[0]=n),p>1&&(v[1]=r),p>2&&(v[2]=i),p>3&&(v[3]=o),p>4&&(v[4]=a),p>5&&(v[5]=s),p>6&&(v[6]=u),p>7&&(v[7]=l),p>8&&(v[8]=c),p>9&&(v[9]=h);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=o),p>4&&(v[f[4].name]=a),p>5&&(v[f[5].name]=s),p>6&&(v[f[6].name]=u),p>7&&(v[f[7].name]=l),p>8&&(v[f[8].name]=c),p>9&&(v[f[9].name]=h);break;case 128:var g=n;switch(p){case 1:v=g.transform(n);break;case 2:v=g.transform(r);break;case 3:v=g.transform(r,i);break;case 4:v=g.transform(r,i,o);break;case 5:v=g.transform(r,i,o,a);break;case 6:v=g.transform(r,i,o,a,s);break;case 7:v=g.transform(r,i,o,a,s,u);break;case 8:v=g.transform(r,i,o,a,s,u,l);break;case 9:v=g.transform(r,i,o,a,s,u,l,c);break;case 10:v=g.transform(r,i,o,a,s,u,l,c,h)}}y.value=v}return d}(t,e,n,r,i,o,a,s,u,l,c,h);default:throw"unreachable"}}(t,e,r,i,o,a,s,u,l,c,h,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)ra(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)lr(t,e,o,n[o])&&(i=!0);if(i){for(var a="",s=0;s<n.length;s++)a+=pa(n[s],r[s]);a=e.text.prefix+a;var u=Xn(t,e.nodeIndex).renderText;t.renderer.setValue(u,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=$n(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)ur(t,e,s,n[s])&&(o=!0,a=Ai(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&Jn(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)lr(t,e,o,n[o])&&(i=!0);if(i){var a,s=tr(t,e.nodeIndex);switch(201347067&e.flags){case 32:a=n;break;case 64:a={};for(var u=0;u<n.length;u++)a[r[u].name]=n[u];break;case 128:var l=n[0],c=n.slice(1);a=l.transform.apply(l,_toConsumableArray(c))}s.value=a}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Ia(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Zn(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,fr(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Aa(t,e,n,r,i,o,a,s,u,l,c,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){var f=e.bindings.length;f>0&&cr(t,e,0,n),f>1&&cr(t,e,1,r),f>2&&cr(t,e,2,i),f>3&&cr(t,e,3,o),f>4&&cr(t,e,4,a),f>5&&cr(t,e,5,s),f>6&&cr(t,e,6,u),f>7&&cr(t,e,7,l),f>8&&cr(t,e,8,c),f>9&&cr(t,e,9,h)}(t,e,r,i,o,a,s,u,l,c,h,f):function(t,e,n){for(var r=0;r<n.length;r++)cr(t,e,r,n[r])}(t,e,r),!1}function Oa(t,e){if(er(t,e.nodeIndex).dirty)throw Gn(nr.createDebugContext(t,e.nodeIndex),"Query ".concat(e.query.id," not dirty"),"Query ".concat(e.query.id," dirty"),0!=(1&t.state))}function xa(t){if(!(128&t.state)){if(Pa(t,Na.Destroy),Da(t,Na.Destroy),Oi(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=pr(t);if(e){var n=e.template._projectedViews;n&&(q(n,n.indexOf(t)),nr.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Zn(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Xn(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&er(t,n).destroy()}}(t),mr(t)&&t.renderer.destroy(),t.state|=128}}var Na=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Da(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?Ra(Zn(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Pa(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Zn(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)Ra(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Ra(t,e){var n=t.state;switch(e){case Na.CheckNoChanges:0==(128&n)&&(12==(12&n)?Ea(t):64&n&&Ma(t,Na.CheckNoChangesProjectedViews));break;case Na.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Ea(t):64&n&&Ma(t,e));break;case Na.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Sa(t):64&n&&Ma(t,Na.CheckAndUpdateProjectedViews));break;case Na.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Sa(t):64&n&&Ma(t,e));break;case Na.Destroy:xa(t);break;case Na.CreateViewNodes:ka(t)}}function Ma(t,e){Pa(t,e),Da(t,e)}function La(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(nr.setCurrentNode(t,a.nodeIndex),r){case 0:aa(t,a);break;case 1:Oa(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var ja=!1;function Fa(t,e,n,r,i,o){var a=i.injector.get(wn);return _a(Va(t,i,a,e,n),r,o)}function Ua(t,e,n,r,i,o){var a=i.injector.get(wn),s=Va(t,i,new ms(a),e,n),u=Ja(r);return ys(os.create,_a,null,[s,u,o])}function Va(t,e,n,r,i){var o=e.injector.get(le),a=e.injector.get(Mt),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function qa(t,e,n,r){var i=Ja(n);return ys(os.create,ma,null,[t,e,i,r])}function Ba(t,e,n,r){return n=Ga.get(e.element.componentProvider.provider.token)||Ja(n),ys(os.create,ba,null,[t,e,n,r])}function Ha(t,e,n,r){return ai(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===za.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach((function(t){var r=za.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)})),t.modules.forEach((function(t){Wa.forEach((function(r,i){y(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)}))})),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasOverrides,r=e.hasDeprecatedOverrides;return n?(function(t){for(var e=0;e<t.providers.length;e++){var n=t.providers[e];r&&(n.flags|=4096);var i=za.get(n.token);i&&(n.flags=-3841&n.flags|i.flags,n.deps=Cr(i.deps),n.value=i.value)}if(Wa.size>0){var o=new Set(t.modules);Wa.forEach((function(e,n){if(o.has(y(n).providedIn)){var i={token:n,flags:e.flags|(r?4096:0),deps:Cr(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[or(n)]=i}}))}}(t=t.factory((function(){return rr}))),t):t}(r))}var za=new Map,Wa=new Map,Ga=new Map;function Ka(t){var e;za.set(t.token,t),"function"==typeof t.token&&(e=y(t.token))&&"function"==typeof e.providedIn&&Wa.set(t.token,t)}function Qa(t,e){var n=Sr(e.viewDefFactory),r=Sr(n.nodes[0].element.componentView);Ga.set(t,r)}function Ya(){za.clear(),Wa.clear(),Ga.clear()}function Ja(t){if(0===za.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&za.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory((function(){return rr}));for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=za.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Cr(o.deps),i.value=o.value)}}}}function Xa(t,e,n,r,i,o,a,s,u,l,c,h,f){var d=t.def.nodes[e];return Ta(t,d,n,r,i,o,a,s,u,l,c,h,f),224&d.flags?tr(t,e).value:void 0}function Za(t,e,n,r,i,o,a,s,u,l,c,h,f){var d=t.def.nodes[e];return Aa(t,d,n,r,i,o,a,s,u,l,c,h,f),224&d.flags?tr(t,e).value:void 0}function $a(t){return ys(os.detectChanges,Sa,null,[t])}function ts(t){return ys(os.checkNoChanges,Ea,null,[t])}function es(t){return ys(os.destroy,xa,null,[t])}var ns,rs,is,os=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function as(t,e){rs=t,is=e}function ss(t,e,n,r){return as(t,e),ys(os.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function us(t,e){if(128&t.state)throw Qn(os[ns]);return as(t,fs(t,0)),t.def.updateDirectives((function(t,n,r){for(var i=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?cs(t,i,r,a):hs(t,i,r,a),16384&i.flags&&as(t,fs(t,n)),224&i.flags?tr(t,i.nodeIndex).value:void 0}),t)}function ls(t,e){if(128&t.state)throw Qn(os[ns]);return as(t,ds(t,0)),t.def.updateRenderer((function(t,n,r){for(var i=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?cs(t,i,r,a):hs(t,i,r,a),3&i.flags&&as(t,ds(t,n)),224&i.flags?tr(t,i.nodeIndex).value:void 0}),t)}function cs(t,e,n,r){if(Ta.apply(void 0,[t,e,n].concat(_toConsumableArray(r)))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=i[a];8&s.flags&&(o[de(s.nonMinifiedName)]=ve(u))}var l=e.parent,c=Zn(t,l.nodeIndex).renderElement;if(l.element.name)for(var h in o){var f=o[h];null!=f?t.renderer.setAttribute(c,h,f):t.renderer.removeAttribute(c,h)}else t.renderer.setValue(c,"bindings=".concat(JSON.stringify(o,null,2)))}}}function hs(t,e,n,r){Aa.apply(void 0,[t,e,n].concat(_toConsumableArray(r)))}function fs(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function ds(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var ps=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var r=this.nodeDef,i=e;r&&0==(1&r.flags);)r=r.parent;if(!r)for(;!r&&i;)r=vr(i),i=i.parent;this.elDef=r,this.elView=i}return _createClass(t,[{key:"logError",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,o;2&this.nodeDef.flags?(i=this.view.def,o=this.nodeDef.nodeIndex):(i=this.elView.def,o=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(i,o),s=-1;i.factory((function(){var e;return++s===a?(e=t.error).bind.apply(e,[t].concat(n)):rr})),s<a&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,n))}},{key:"elOrCompView",get:function(){return Zn(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return ei(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}},{key:"references",get:function(){var t={};if(this.elDef){vs(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&vs(this.elView,n,t),e+=n.childCount}}return t}},{key:"componentRenderElement",get:function(){var t=function(t){for(;t&&!mr(t);)t=t.parent;return t.parent?Zn(t.parent,vr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?yr(this.view,this.nodeDef):yr(this.elView,this.elDef)}}]),t}();function vs(t,e,n){for(var r in e.references)n[r]=ua(t,e,e.references[r])}function ys(t,e,n,r){var i,o,a=ns,s=rs,u=is;try{ns=t;var l=e.apply(n,r);return rs=s,is=u,ns=a,l}catch(c){if(Dt(c)||!rs)throw c;throw i=c,o=gs(),i instanceof Error||(i=new Error(i.toString())),Kn(i,o),i}}function gs(){return rs?new ps(rs,is):null}var ms=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"createRenderer",value:function(t,e){return new _s(this.delegate.createRenderer(t,e))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),t}(),_s=function(){function t(e){_classCallCheck(this,t),this.delegate=e,this.debugContextFactory=gs,this.data=this.delegate.data}return _createClass(t,[{key:"createDebugContext",value:function(t){return this.debugContextFactory(t)}},{key:"destroyNode",value:function(t){var e=zo(t);!function(t){Ho.delete(t.nativeNode)}(e),e instanceof qo&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(t,e){var n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){var i=new Bo(n,null,r);i.name=t,Wo(i)}return n}},{key:"createComment",value:function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Wo(new qo(e,null,n)),e}},{key:"createText",value:function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Wo(new qo(e,null,n)),e}},{key:"appendChild",value:function(t,e){var n=zo(t),r=zo(e);n&&r&&n instanceof Bo&&n.addChild(r),this.delegate.appendChild(t,e)}},{key:"insertBefore",value:function(t,e,n){var r=zo(t),i=zo(e),o=zo(n);r&&i&&r instanceof Bo&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)}},{key:"removeChild",value:function(t,e){var n=zo(t),r=zo(e);n&&r&&n instanceof Bo&&n.removeChild(r),this.delegate.removeChild(t,e)}},{key:"selectRootElement",value:function(t,e){var n=this.delegate.selectRootElement(t,e),r=gs();return r&&Wo(new Bo(n,null,r)),n}},{key:"setAttribute",value:function(t,e,n,r){var i=zo(t);i&&i instanceof Bo&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){var r=zo(t);r&&r instanceof Bo&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){var n=zo(t);n&&n instanceof Bo&&(n.classes[e]=!0),this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){var n=zo(t);n&&n instanceof Bo&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){var i=zo(t);i&&i instanceof Bo&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){var r=zo(t);r&&r instanceof Bo&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){var r=zo(t);r&&r instanceof Bo&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){if("string"!=typeof t){var r=zo(t);r&&r.listeners.push(new Vo(e,n))}return this.delegate.listen(t,e,n)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setValue",value:function(t,e){return this.delegate.setValue(t,e)}}]),t}();function bs(t,e,n){return new ws(t,e,n)}var ws=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this)).moduleType=t,o._bootstrapComponents=r,o._ngModuleDefFactory=i,o}return _createClass(n,[{key:"create",value:function(t){!function(){if(!ja){ja=!0;var t=Ft()?{setCurrentNode:as,createRootView:Ua,createEmbeddedView:qa,createComponentView:Ba,createNgModuleRef:Ha,overrideProvider:Ka,overrideComponentView:Qa,clearOverrides:Ya,checkAndUpdateView:$a,checkNoChangesView:ts,destroyView:es,createDebugContext:function(t,e){return new ps(t,e)},handleEvent:ss,updateDirectives:us,updateRenderer:ls}:{setCurrentNode:function(){},createRootView:Fa,createEmbeddedView:ma,createComponentView:ba,createNgModuleRef:ai,overrideProvider:rr,overrideComponentView:rr,clearOverrides:rr,checkAndUpdateView:Sa,checkNoChangesView:Ea,destroyView:xa,createDebugContext:function(t,e){return new ps(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Xa:Za,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Xa:Za,t)}};nr.setCurrentNode=t.setCurrentNode,nr.createRootView=t.createRootView,nr.createEmbeddedView=t.createEmbeddedView,nr.createComponentView=t.createComponentView,nr.createNgModuleRef=t.createNgModuleRef,nr.overrideProvider=t.overrideProvider,nr.overrideComponentView=t.overrideComponentView,nr.clearOverrides=t.clearOverrides,nr.checkAndUpdateView=t.checkAndUpdateView,nr.checkNoChangesView=t.checkNoChangesView,nr.destroyView=t.destroyView,nr.resolveDep=Ti,nr.createDebugContext=t.createDebugContext,nr.handleEvent=t.handleEvent,nr.updateDirectives=t.updateDirectives,nr.updateRenderer=t.updateRenderer,nr.dirtyParentQueries=oa}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(Sr(this._ngModuleDefFactory));return nr.createNgModuleRef(this.moduleType,t||Le.NULL,this._bootstrapComponents,e)}}]),n}(U)},"9ppp":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},CRDf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("kJWO"),i=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},Cfvw:function(t,e,n){"use strict";var r=n("HDdC"),i=n("c2HN"),o=n("I55L"),a=n("kJWO"),s=n("Lhse"),u=n("yCtX"),l=n("quSY"),c=n("a7t3"),h=n("pLzU"),f=n("CRDf"),d=n("SeVD");function p(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(d.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a(e?function(n){var r=new l.a;return r.add(e.schedule((function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}:Object(f.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return new r.a(e?function(n){var r=new l.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}:Object(c.a)(t))}(t,e);if(Object(o.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"==typeof t[s.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(e?function(n){var r,i=new l.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[s.a](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}:Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",(function(){return p}))},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a"),i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC"),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},GIw4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("kDjp");function i(t){return(Object(r.c)(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}},HDdC:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),a=n("kJWO"),s=n("mCNh"),u=n("2fFW");n.d(e,"a",(function(){return c}));var l,c=((l=function(){function t(e){_classCallCheck(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _createClass(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var a=this.operator,s=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(s.add(a?a.call(s,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),u.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=h(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:a.a,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:Object(s.b)(e)(this)}},{key:"toPromise",value:function(t){var e=this;return new(t=h(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))}}]),t}()).create=function(t){return new l(t)},l);function h(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I1TF:function(t,e,n){"use strict";var r=n("sDu7"),i=n("WEwH"),o=n("b/LO"),a=n("kDjp");function s(t,e){return function(n,r){return Object(a.a)(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}var u=n("lJxs");function l(t,e){var n,l=e.schedulers.outsideAngular;return{query:t,update:s(t.ref,"update"),set:s(t.ref,"set"),push:function(e){return t.ref.push(e)},remove:(n=t.ref,function(t){return t?Object(a.a)(t,{stringCase:function(){return n.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):n.remove()}),snapshotChanges:function(n){return Object(r.a)(t,n,l).pipe(e.keepUnstableUntilFirst)},stateChanges:function(n){return Object(i.a)(t,n,l).pipe(e.keepUnstableUntilFirst)},auditTrail:function(n){return Object(o.a)(t,n,l).pipe(e.keepUnstableUntilFirst)},valueChanges:function(n){return Object(r.a)(t,n,l).pipe(e.keepUnstableUntilFirst,Object(u.a)((function(t){return t.map((function(t){return t.payload.val()}))})))}}}n.d(e,"a",(function(){return l}))},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},IjjT:function(t,e,n){"use strict";var r=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;_classCallCheck(this,t),this.SchedulerAction=e,this.now=n}return _createClass(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}();n.d(e,"a",(function(){return i}));var i=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return _classCallCheck(this,n),(i=e.call(this,t,(function(){return n.delegate&&n.delegate!==_assertThisInitialized(i)?n.delegate.now():o()}))).actions=[],i.active=!1,i.scheduled=void 0,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(r)},Kqap:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}var o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),a=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return _createClass(n,[{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}},{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}}]),n}(r.a)},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("EY2u"),a=n("XUOw");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=e[e.length-1];switch(Object(r.a)(s)?e.pop():s=void 0,e.length){case 0:return Object(o.b)(s);case 1:return s?Object(i.a)(e,s):Object(a.a)(e[0]);default:return Object(i.a)(e,s)}}},Lhse:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}))}n.d(e,"a",(function(){return r}))},NSPt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,a=n("mrSG"),s=n("zVF4"),u=n("q/0M"),l=n("S+S0"),c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),s.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:s.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return s.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),v=new u.Logger("@firebase/database"),y=(i=1,function(){return i++}),g=function(t){var e=s.stringToByteArray(t),n=new s.Sha1;n.update(e);var r=n.digest();return s.base64.encodeByteArray(r)},m=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=t.apply(null,o):r+="object"==typeof o?s.stringify(o):o,r+=" "}return r},_=null,b=!0,w=function(t,e){s.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=u.LogLevel.VERBOSE,_=v.log.bind(v),e&&p.set("logging_enabled",!0)):"function"==typeof t?_=t:(_=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===_&&!0===p.get("logging_enabled")&&w(!0)),_){var n=m.apply(null,t);_(n)}},k=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,a.__spread([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,a.__spread(t));v.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,a.__spread(t));throw v.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,a.__spread(t));v.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",O="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===A||e===O)return-1;if(e===A||t===O)return 1;var n=Q(t),r=Q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},D=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+s.stringify(e))},P=function t(e){if("object"!=typeof e||null===e)return s.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=s.stringify(n[o]),i+=":",i+=t(e[n[o]]);return i+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function M(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L,j,F,U,V,q,B,H,z,W,G=function(t){var e,n,r,i,o;s.assert(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),l="";for(o=0;o<64;o+=8){var c=parseInt(u.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()},K=new RegExp("^-?(0*)\\d{1,10}$"),Q=function(t){if(K.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Y=function(t){try{t()}catch(e){setTimeout((function(){throw T("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},J=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Z=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=s.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=s.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=s.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),$=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(s.assert("string"==typeof t,"typeof type must == string"),s.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return M(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),tt=function(t){var e=et(t),n=e.namespace;return"firebase"===e.domain&&S(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new $(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,"",n!==e.subdomain),path:new X(e.pathString)}},et=function(t){var e="",n="",r="",i="",o="",s=!0,u="https",l=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(u=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=a.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(c=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,l=parseInt(e.substring(c+1),10)):c=t.length;var p=e.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in d&&(o=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,it=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},ot=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&s.contains(t,".sv")},st=function(t,e,n,r,i){i&&void 0===n||ut(s.errorPrefix(t,e,i),n,r)},ut=function t(e,n,r){var i=r instanceof X?new Z(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(I(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>10485760/3&&s.stringLength(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(M(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!it(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()})),o&&a)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var o=s.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];M(n,(function(t,e){var n=new X(t);if(ut(o,e,r.child(n)),".priority"===n.getBack()&&!at(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!it(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},ct=function(t,e,n,r){if(!r||void 0!==n){if(I(n))throw new Error(s.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!at(n))throw new Error(s.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ht=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(s.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ft=function(t,e,n,r){if(!(r&&void 0===n||it(n)))throw new Error(s.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(s.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!it(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ot(t)}(r))throw new Error(s.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},gt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(s.errorPrefix(t,e,r)+"must be a boolean.")},mt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){s.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),s.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){s.validateArgCount("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),s.validateCallback("OnDisconnect.remove",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){s.validateArgCount("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),st("OnDisconnect.set",1,t,this.path_,!1),s.validateCallback("OnDisconnect.set",2,e,!0);var n=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){s.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),st("OnDisconnect.setWithPriority",1,t,this.path_,!1),ct("OnDisconnect.setWithPriority",2,e,!1),s.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new s.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(s.validateArgCount("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update",1,t,this.path_,!1),s.validateCallback("OnDisconnect.update",2,e,!0);var i=new s.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),_t=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return s.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),bt=(L="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j=0,F=[],function(t){var e,n=t===j;j=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=L.charAt(t%64),t=Math.floor(t/64);s.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===F[e];e--)F[e]=0;F[e]++}else for(e=0;e<12;e++)F[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=L.charAt(F[e]);return s.assert(20===i.length,"nextPushId: Length should be 20."),i}),wt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new wt(A,t),r=new wt(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return wt.MIN},t}(),kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return U},set:function(t){U=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw s.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return new wt(O,U)},e.prototype.makePost=function(t,e){return s.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new wt(t,U)},e.prototype.toString=function(){return".key"},e}(Ct),Et=new kt,St=function(t){return"number"==typeof t?"number:"+G(t):"string:"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();s.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&s.contains(e,".sv"),"Priority must be a string or number.")}else s.assert(t===V||t.isEmpty(),"priority of unexpected type.");s.assert(t===V||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},It=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,s.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Tt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return q},set:function(t){q=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(s.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?G(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(s.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return s.assert(i>=0,"Unknown leaf type: "+n),s.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),At=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return new wt(O,new It("[PRIORITY-POST]",H))},e.prototype.makePost=function(t,e){var n=B(t);return new wt(e,new It("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),Ot=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),xt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ot(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ot(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ot(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ot(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nt,t}(),Pt=Math.log(2),Rt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Pt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Mt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e;var u=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new xt(a,o.node,xt.BLACK,null,null);var u=parseInt(s/2,10)+r,l=e(r,u),c=e(u+1,i);return o=t[u],a=n?n(o):o,new xt(a,o.node,xt.BLACK,l,c)}(i+1,a),l=t[i],c=n?n(l):l;s(new xt(c,l.node,r,null,u))},s=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var l=e.nextBitIsOne(),c=Math.pow(2,e.count-(u+1));l?a(c,xt.BLACK):(a(c,xt.BLACK),a(c,xt.RED))}return i}(new Rt(t.length));return new Dt(r||e,i)},Lt={},jt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return s.assert(Lt&&At,"ChildrenNode.ts has not been loaded"),z=z||new t({".priority":Lt},{".priority":At})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=s.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return s.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){s.assert(e!==Et,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,u=n.getIterator(wt.Wrap),l=u.getNext();l;)o=o||e.isDefinedOn(l.node),i.push(l),l=u.getNext();r=o?Mt(i,e.getCompare()):Lt;var c=e.toString(),h=a.__assign({},this.indexSet_);h[c]=e;var f=a.__assign({},this.indexes_);return f[c]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(s.map(this.indexes_,(function(t,i){var o=s.safeGet(r.indexSet_,i);if(s.assert(o,"Missing index implementation for "+i),t===Lt){if(o.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(wt.Wrap),l=u.getNext();l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),Mt(a,o.getCompare())}return Lt}var c=n.get(e.name),h=t;return c&&(h=h.remove(new wt(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(s.map(this.indexes_,(function(t){if(t===Lt)return t;var r=n.get(e.name);return r?t.remove(new wt(e.name,r)):t})),this.indexSet_)},t}();function Ft(t,e){return x(t.name,e.name)}function Ut(t,e){return x(t,e)}var Vt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&s.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return W||(W=new t(new Dt(Ut),null,jt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||W},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?W:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(s.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new wt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?W:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;s.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(At,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(At,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new wt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new wt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new wt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qt?-1:0},t.prototype.withIndex=function(e){if(e===Et||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Et||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(At),r=e.getIterator(At),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Et?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),qt=new(function(t){function e(){return t.call(this,new Dt(Ut),Vt.EMPTY_NODE,jt.Default)||this}return a.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Vt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Vt));function Bt(t,e){if(void 0===e&&(e=null),null===t)return Vt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),s.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new It(t,Bt(e));if(t instanceof Array){var n=Vt.EMPTY_NODE;return M(t,(function(e,r){if(s.contains(t,e)&&"."!==e.substring(0,1)){var i=Bt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Bt(e))}var r=[],i=!1;if(M(t,(function(t,e){if("."!==t.substring(0,1)){var n=Bt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new wt(t,n)))}})),0===r.length)return Vt.EMPTY_NODE;var o=Mt(r,Ft,(function(t){return t.name}),Ut);if(i){var a=Mt(r,At.getCompare());return new Vt(o,Bt(e),new jt({".priority":a},{".priority":At}))}return new Vt(o,Bt(e),jt.Default)}Object.defineProperties(wt,{MIN:{value:new wt(A,Vt.EMPTY_NODE)},MAX:{value:new wt(O,qt)}}),kt.__EMPTY_NODE=Vt.EMPTY_NODE,It.__childrenNodeConstructor=Vt,V=qt,H=qt,function(t){B=t}(Bt);var Ht,zt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return wt.MAX},e.prototype.makePost=function(t,e){var n=Bt(t);return new wt(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),Wt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,s.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return a.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Bt(t),r=Vt.EMPTY_NODE.updateChild(this.indexPath_,n);return new wt(e,r)},e.prototype.maxPost=function(){var t=Vt.EMPTY_NODE.updateChild(this.indexPath_,qt);return new wt(O,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),Gt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return s.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return s.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return s.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return s.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){s.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),dt("DataSnapshot.child",1,e,!1);var n=new X(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,At)},t.prototype.hasChild=function(t){s.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),dt("DataSnapshot.hasChild",1,t,!1);var e=new X(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return s.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(s.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),s.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),At))}))},t.prototype.hasChildren=function(){return s.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return s.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return s.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Kt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+s.stringify(this.snapshot.exportVal())},t}(),Qt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Yt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Kt("value",this,new Gt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Jt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return s.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.createEvent=function(t,e){s.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Kt(t.type,this,new Gt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Xt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(Ht,"Reference.ts has not been loaded"),Ht},set:function(t){Ht=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Et){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===At){if(null!=e&&!at(e)||null!=n&&!at(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(s.assert(t.getIndex()instanceof Wt||t.getIndex()===zt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return s.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){s.validateArgCount("Query.on",2,4,arguments.length),ht("Query.on",1,e,!1),s.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Yt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Jt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){s.validateArgCount("Query.off",0,3,arguments.length),ht("Query.off",1,t,!0),s.validateCallback("Query.off",2,e,!0),s.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Yt(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Jt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;s.validateArgCount("Query.once",1,4,arguments.length),ht("Query.once",1,e,!1),s.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,l=new s.Deferred;l.promise.catch((function(){}));var c=function t(r){u&&(u=!1,o.off(e,t),n&&n.bind(a.context)(r),l.resolve(r))};return this.on(e,c,(function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),l.reject(t)})),l.promise},t.prototype.limitToFirst=function(e){if(s.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(s.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(s.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');dt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Wt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){s.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Et);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){s.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(At);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){s.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.startAt",0,2,arguments.length),st("Query.startAt",1,e,this.path,!0),ft("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.endAt",0,2,arguments.length),st("Query.endAt",1,e,this.path,!0),ft("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(s.validateArgCount("Query.equalTo",1,2,arguments.length),st("Query.equalTo",1,t,this.path,!1),ft("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return s.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return s.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=P(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(s.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,s.validateCallback(t,3,r.cancel,!0),r.context=n,s.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(s.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Zt=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),$t=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),te=function(t,e,n){return t&&"object"==typeof t?(s.assert(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ee(t[".sv"],e,n):"object"==typeof t[".sv"]?ne(t[".sv"],e):void s.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ee=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:s.assert(!1,"Unexpected server value: "+t)}},ne=function(t,e,n){t.hasOwnProperty("increment")||s.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&s.assert(!1,"Unexpected increment value: "+r);var i=e.node();if(s.assert(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},re=function(t,e,n,r){return oe(e,new $t(n,t),r)},ie=function(t,e,n){return oe(t,new Zt(e),n)};function oe(t,e,n){var r,i=t.getPriority().val(),o=te(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=te(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new It(s,Bt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new It(o))),u.forEachChild(At,(function(t,i){var o=oe(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ae,se,ue=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(At,(function(t,e){n.remember(new X(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new X(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),le=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ce=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,s.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),he=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=le.ACK_USER_WRITE,this.source=ce.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return s.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(e));return new t(X.Empty,n,this.revert)}return s.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),fe=function(){function t(t,e){void 0===e&&(ae||(ae=new Dt(N)),e=ae),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return M(e,(function(t,e){n=n.set(new X(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:X.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new X(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(X.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,X.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,X.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(X.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),de=function(){function t(t,e){this.source=t,this.path=e,this.type=le.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty):new t(this.source,this.path.popFront())},t}(),pe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=le.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=le.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new pe(this.source,X.Empty,n.value):new t(this.source,X.Empty,n)}return s.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ye=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ge=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ye(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ye(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ye(Vt.EMPTY_NODE,!1,!1),new ye(Vt.EMPTY_NODE,!1,!1)),t}(),me=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),_e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){s.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(me.childRemovedChange(e,a)):s.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(me.childAddedChange(e,n)):o.trackChildChange(me.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(At,(function(t,r){e.hasChild(t)||n.trackChildChange(me.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(At,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me.childChangedChange(e,r,i))}else n.trackChildChange(me.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Vt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;s.assert(e===me.CHILD_ADDED||e===me.CHILD_CHANGED||e===me.CHILD_REMOVED,"Only child changes supported for tracking"),s.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===me.CHILD_ADDED&&i===me.CHILD_REMOVED)this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===me.CHILD_REMOVED&&i===me.CHILD_ADDED)this.changeMap.delete(n);else if(e===me.CHILD_REMOVED&&i===me.CHILD_CHANGED)this.changeMap.set(n,me.childRemovedChange(n,r.oldSnap));else if(e===me.CHILD_CHANGED&&i===me.CHILD_ADDED)this.changeMap.set(n,me.childAddedChange(n,t.snapshotNode));else{if(e!==me.CHILD_CHANGED||i!==me.CHILD_CHANGED)throw s.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),we=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ce=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ye(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),ke=function(t,e){this.viewCache=t,this.changes=e},Ee=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){s.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),s.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,u=new be;if(n.type===le.OVERWRITE){var l=n;l.source.fromUser?o=this.applyUserOverwrite_(e,l.path,l.snap,r,i,u):(s.assert(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered()&&!l.path.isEmpty(),o=this.applyServerOverwrite_(e,l.path,l.snap,r,i,a,u))}else if(n.type===le.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,u):(s.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,u))}else if(n.type===le.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==le.LISTEN_COMPLETE)throw s.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new ke(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(me.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(s.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var l=t.getCompleteServerSnap(),c=n.calcCompleteEventChildren(l instanceof Vt?l:Vt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){s.assert(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),l=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(e,n);s=l.updateFullNode(u.getNode(),c,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?l.updatePriority(u.getNode(),d):l.updateChild(u.getNode(),h,d,f,we,null)}var p=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),l.filtersNodes()),v=new Ce(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),l=new Ce(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=e.getFront();if(".priority"===c)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(c),d=void 0;if(h.isEmpty())d=n;else{var p=l.getCompleteChild(c);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Vt.EMPTY_NODE}if(f.equals(d))a=t;else{var v=this.filter_.updateChild(u.getNode(),c,d,h,l,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,l){var c=n.child(r);t.cacheHasChild_(e,c.getFront())&&(u=s.applyUserOverwrite_(u,c,l,i,o,a))})),r.foreach((function(r,l){var c=n.child(r);t.cacheHasChild_(e,c.getFront())||(u=s.applyUserOverwrite_(u,c,l,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,l=t;u=e.isEmpty()?n:fe.Empty.setTree(e,n);var c=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(c.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);l=s.applyServerOverwrite_(l,new X(e),h,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!c.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);l=s.applyServerOverwrite_(l,new X(e),f,r,i,o,a)}})),l},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=fe.Empty;return s.getNode().forEachChild(Et,(function(t,e){u=u.set(new X(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var l=fe.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(l=l.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,l,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,we,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new Ce(n,t,r),u=t.getEventCache().getNode(),l=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();s.assert(h instanceof Vt,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}l=this.filter_.updateFullNode(u,c=c,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(l=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Vt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(l=this.filter_.updateFullNode(l,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),t.updateEventSnap(l,o,this.filter_.filtersNodes())},t}(),Se=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===me.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(me.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,me.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,me.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,me.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,me.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,me.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw s.assertionError("Should only compare child_ events.");var n=new wt(t.childName,t.snapshotNode),r=new wt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Te=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new _e(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ee(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Vt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Vt.EMPTY_NODE,a.getNode(),null),l=new ye(s,o.isFullyInitialized(),r.filtersNodes()),c=new ye(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ge(c,l),this.eventGenerator_=new Se(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){s.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===le.MERGE&&null!==t.source.queryId&&(s.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),s.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),s.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(At,(function(t,e){n.push(me.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(me.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Ie=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(se,"Reference.ts has not been loaded"),se},set:function(t){s.assert(!se,"__referenceConstructor has already been defined"),se=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var u=this.views.get(o);return s.assert(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var l=[];try{for(var c=a.__values(this.views.values()),h=c.next();!h.done;h=c.next())l=l.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return l},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof Vt?(s=n.calcCompleteEventChildren(r),u=!1):(s=Vt.EMPTY_NODE,u=!1);var l=new ge(new ye(s,u,!1),new ye(r,i,!1));a=new Te(t,l),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),u=[],l=[],c=this.hasCompleteView();if("default"===s)try{for(var h=a.__values(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=a.__read(f.value,2),v=p[0];l=l.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(v),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(l=l.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return c&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:l}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=a.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=a.__values(this.views.values()),o=i.next();!o.done;o=i.next())r=r||o.value.getCompleteServerCache(t)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=a.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ae=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new fe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=X.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new fe(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return M(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,fe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(X.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(At,(function(e,n){t.push(new wt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new wt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new fe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(s.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(X.Empty,this.writeTree_,t)},t.Empty=new t(new fe(null)),t}(),Oe=function(){function t(){this.visibleWrites_=Ae.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new xe(t,this)},t.prototype.addOverwrite=function(t,e,n,r){s.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){s.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));s.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),a--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):M(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(X.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Vt.EMPTY_NODE):null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);return s.isEmpty()?n:null!=n||s.hasCompleteWrite(X.Empty)?s.apply(n||Vt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Vt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(At,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(At,(function(t,e){var r=i.childCompoundWrite(new X(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){s.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(X.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var l=[],c=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&l.length<r;)0!==c(f,n)&&l.push(f),f=h.getNext();return l},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ae.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,u=void 0;if(o.snap)n.contains(a)?(u=X.relativePath(n,a),r=r.addWrite(u,o.snap)):a.contains(n)&&(u=X.relativePath(a,n),r=r.addWrite(X.Empty,o.snap.getChild(u)));else{if(!o.children)throw s.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))u=X.relativePath(n,a),r=r.addWrites(u,o.children);else if(a.contains(n))if((u=X.relativePath(a,n)).isEmpty())r=r.addWrites(X.Empty,o.children);else{var l=s.safeGet(o.children,u.getFront());if(l){var c=l.getChild(u.popFront());r=r.addWrite(X.Empty,c)}}}}}return r},t}(),xe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ne=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=fe.Empty,this.pendingWriteTree_=new Oe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new pe(ce.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=fe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(ce.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=fe.Empty;return null!=n.snap?r=r.set(X.Empty,!0):M(n.children,(function(t,e){r=r.set(new X(t),e)})),this.applyOperationToSyncPoints_(new he(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new pe(ce.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=fe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(ce.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new de(ce.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=X.relativePath(a,e),l=new pe(ce.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=X.relativePath(a,e),l=fe.fromObject(n),c=new ve(ce.forServerTaggedQuery(s),u,l);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=X.relativePath(o,e),u=new de(ce.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=X.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(X.Empty)):(u=new Ie,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Vt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(X.Empty);n&&(i=i.updateImmediateChild(t,n))})));var l=u.viewExistsForQuery(e);if(!l&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);s.assert(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!l&&!o){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var l=u.removed;s=u.events;var c=-1!==l.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(c&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var v=d[p],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}!h&&l.length>0&&!r&&(c?this.listenProvider_.stopListening(t.queryForListening_(e),null):l.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(l)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=X.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),M(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)s.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),M(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<l.length;++c){var h=l[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Vt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return s.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);s.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(X.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(X.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,l,c))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),l=t.operationForChild(e);l&&(a=a.concat(i.applyOperationDescendantsHelper_(l,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),De=function(){function t(){this.rootNode_=Vt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Pe=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Re=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),s.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return s.deepCopy(this.counters_)},t}(),Me=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Re),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Le=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=a.__assign({},t);return this.last_&&M(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Le(t);var n=1e4+2e4*Math.random();J(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;M(e,(function(e,i){i>0&&s.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),J(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ue(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ue=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();_&&C("event: "+e.toString()),Y(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Ve=function(){function t(t){this.allowedEvents_=t,this.listeners_={},s.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=a.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){s.assert(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),qe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ve),Be=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||s.isMobileCordova()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ve),He=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Y((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),ze=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(t),this.stats_=Me.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new He(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(s.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new We((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.__read(t,5),i=r[0],o=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.__read(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(s.isNodeSdk()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=s.base64Encode(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!s.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=s.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),We=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,s.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;s.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Ge="",Ke=null;"undefined"!=typeof MozWebSocket?Ke=MozWebSocket:"undefined"!=typeof WebSocket&&(Ke=WebSocket);var Qe=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=Me.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!s.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(s.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+Ge+"/"+process.platform+"/"+(s.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},i=process.env,o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Ke(this.connURL,[],r)}else this.mySock=new Ke(this.connURL)}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ke&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=s.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(s.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ye=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[ze,Qe]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Qe&&Qe.isAvailable(),o=i&&!Qe.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Qe];else{var s=this.transports_=[];try{for(var u=a.__values(t.ALL_TRANSPORTS),l=u.next();!l.done;l=u.next()){var c=l.value;c&&c.isAvailable()&&s.push(c)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Je=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new Ye(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=J((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=D("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),J((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):J((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Xe=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Ze=function(t){function e(n,r,i,o,a,u){var l=t.call(this)||this;if(l.repoInfo_=n,l.onDataUpdate_=r,l.onConnectStatus_=i,l.onServerInfoUpdate_=o,l.authTokenProvider_=a,l.authOverride_=u,l.id=e.nextPersistentConnectionId_++,l.log_=k("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,u&&!s.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),qe.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Be.getInstance().on("online",l.onOnline_,l),l}return a.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(s.stringify(i)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&s.contains(t,"w")){var n=s.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||s.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=s.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+s.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+s.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,u=!1,l=null,c=function(){l?l.close():(u=!0,r())};this.realtime_={close:c,sendRequest:function(t){s.assert(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(e){u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,l=new Je(i,o.repoInfo_,t,n,r,(function(t){T(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),a))})).then(null,(function(t){o.log_("Failed to get token: "+t),u||(s.CONSTANTS.NODE_ADMIN&&T(t),c())}))}},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],s.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return P(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new X(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=a.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(s.values())),l=u.next();!l.done;l=u.next())this.sendListen_(l.value)}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";s.CONSTANTS.NODE_ADMIN?e="admin_node":s.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+Ge.replace(/\./g,"-")]=1,s.isMobileCordova()?t["framework.cordova"]=1:s.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Be.getInstance().currentlyOnline();return s.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Xe),$e=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=k("p:rest:"),i.listens_={},i}return a.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(s.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),l={};this.listens_[u]=l;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),s.safeGet(o.listens_,u)===l&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+s.querystring(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=s.jsonEval(u.responseText)}catch(e){T("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&T("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(Xe),tn=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ue,this.persistentConnection_=null;var o=new Pe(n,r);if(this.stats_=Me.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new $e(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{s.stringify(a)}catch(u){throw new Error("Invalid authOverride provided: "+u)}}this.persistentConnection_=new Ze(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=Me.getOrCreateReporter(t,(function(){return new je(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new De,this.infoSyncTree_=new Ne({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ne({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new X(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=s.map(e,(function(t){return Bt(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Bt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var l=s.map(e,(function(t){return Bt(t)}));o=this.serverSyncTree_.applyServerMerge(i,l)}else{var c=Bt(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;M(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new X("/.info/"+t),r=Bt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Bt(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=ie(a,s,o),l=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,u,l,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||T("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(l,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(M(e,(function(e,n){i=!1,a[e]=re(t.child(e),Bt(n),r.serverSyncTree_,o)})),i)C("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||T("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),M(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ue;this.onDisconnect_.forEachTree(X.Empty,(function(r,i){var o=re(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(X.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new ue,this.eventQueue_.raiseEventsForChangedPath(X.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Bt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Bt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(s.isEmpty(e))return C("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&M(e,(function(e,n){var i=Bt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Le(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);M(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),C.apply(void 0,a.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Y((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new hn(this))},enumerable:!0,configurable:!0}),t}(),en=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new wt(e,n))||(n=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Vt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Vt.EMPTY_NODE);var i=this;return e.forEachChild(At,(function(t,e){i.matches(new wt(t,e))||(r=r.updateImmediateChild(t,Vt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),nn=function(){function t(t){this.rangedFilter_=new en(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new wt(e,n))||(n=Vt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Vt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Vt.EMPTY_NODE);var s=void 0,u=void 0,l=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(t,e){return c(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&l(s,a)<=0&&(h=!0),h&&o<this.limit_&&l(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Vt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var u=t;s.assert(u.numChildren()===this.limit_,"");var l=new wt(e,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,l);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me.childRemovedChange(e,f));var v=u.updateImmediateChild(e,Vt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(me.childAddedChange(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&o(c,l)>=0?(null!=i&&(i.trackChildChange(me.childRemovedChange(c.name,c.node)),i.trackChildChange(me.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(c.name,Vt.EMPTY_NODE)):t},t}(),rn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return s.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==At&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===At},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new _e(this.getIndex()):this.hasLimit()?new nn(this):new en(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===At?e=n.PRIORITY_INDEX:this.index_===zt?e=n.VALUE_INDEX:this.index_===Et?e=n.KEY_INDEX:(s.assert(this.index_ instanceof Wt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=s.stringify(e),this.startSet_&&(r[n.START_AT]=s.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+s.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=s.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+s.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),on=function(t){function e(e,n){if(!(e instanceof tn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,rn.DEFAULT,!1)||this}return a.__extends(e,t),e.prototype.getKey=function(){return s.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return s.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof X||(null===this.path.getFront()?pt("Reference.child",1,t,!1):dt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){s.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){s.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){s.validateArgCount("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),st("Reference.set",1,t,this.path,!1),s.validateCallback("Reference.set",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(s.validateArgCount("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("Reference.update",1,t,this.path,!1),s.validateCallback("Reference.update",2,e,!0);var i=new s.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(s.validateArgCount("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),st("Reference.setWithPriority",1,t,this.path,!1),ct("Reference.setWithPriority",2,e,!1),s.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new s.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return s.validateArgCount("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),s.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(s.validateArgCount("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),s.validateCallback("Reference.transaction",1,t,!1),s.validateCallback("Reference.transaction",2,e,!0),gt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new s.Deferred;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new _t(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){s.validateArgCount("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ct("Reference.setPriority",1,t,!1),s.validateCallback("Reference.setPriority",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){s.validateArgCount("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),st("Reference.push",1,t,this.path,!0),s.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=bt(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new mt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Xt);Xt.__referenceConstructor=on,Ie.__referenceConstructor=on;var an=function(){this.children={},this.childCount=0,this.value=null},sn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new an),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof X?e:new X(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,s.safeGet(r.node_.children,i)||new an),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){s.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;M(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=s.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),un=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});tn.MAX_TRANSACTION_RETRIES_=25,tn.prototype.transactionsInit_=function(){this.transactionQueueTree_=new sn},tn.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new on(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:y(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var l=a.update(u.val());if(void 0===l){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new Gt(a.currentInputSnapshot,new on(this,a.path),At);a.onComplete(null,!1,c)}}else{ut("transaction failed: Data returned ",l,a.path),a.status=un.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof l&&null!==l&&s.contains(l,".priority")?(d=s.safeGet(l,".priority"),s.assert(at(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Vt.EMPTY_NODE).getPriority().val(),d=d;var p=this.generateServerValues(),v=Bt(l,d),g=ie(v,u,p);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},tn.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Vt.EMPTY_NODE},tn.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);s.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===un.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},tn.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),u=0;u<e.length;u++){var l=e[u];s.assert(l.status===un.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=un.SENT,l.retryCount++;var c=X.relativePath(t,l.path);o=o.updateChild(c,l.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=un.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new on(n,e[a].path),l=new Gt(s,u,At);o.push(e[a].onComplete.bind(null,null,!0,l))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)Y(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status=e[a].status===un.SENT_NEEDS_ABORT?un.NEEDS_ABORT:un.RUN;else for(T("transaction at "+f.toString()+" failed: "+r),a=0;a<e.length;a++)e[a].status=un.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}}),a)},tn.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},tn.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===un.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var a=t[o],u=X.relativePath(e,a.path),l=!1,c=void 0;if(s.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===un.NEEDS_ABORT)l=!0,c=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===un.RUN)if(a.retryCount>=tn.MAX_TRANSACTION_RETRIES_)l=!0,c="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[o].update(h.val());if(void 0!==f){ut("transaction failed: Data returned ",f,a.path);var d=Bt(f);"object"==typeof f&&null!=f&&s.contains(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,v=this.generateServerValues(),y=ie(d,h,v);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else l=!0,c="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=un.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===c){var g=new on(this,t[o].path),m=new Gt(t[o].currentInputSnapshot,g,At);n.push(t[o].onComplete.bind(null,null,!1,m))}else n.push(t[o].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)Y(n[o]);this.sendReadyTransactions_()}},tn.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},tn.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},tn.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},tn.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==un.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},tn.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},tn.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===un.SENT_NEEDS_ABORT||(e[o].status===un.SENT?(s.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=un.SENT_NEEDS_ABORT,e[o].abortReason="set"):(s.assert(e[o].status===un.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)Y(n[o])}};var ln,cn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return ln||(ln=new t),ln},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=a.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(Object.keys(this.repos_[s]))),l=u.next();!l.done;l=u.next())this.repos_[s][l.value].interrupt()}catch(c){n={error:c}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=a.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(Object.keys(this.repos_[s]))),l=u.next();!l.done;l=u.next())this.repos_[s][l.value].resume()}catch(c){n={error:c}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var r=n||t.options.databaseURL;void 0===r&&S("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var i=tt(r),o=i.repoInfo,a=void 0;return"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(o=(i=tt(r="http://"+a+"?ns="+o.namespace)).repoInfo),yt("Invalid Firebase Database URL",1,i),i.path.isEmpty()||S("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},t.prototype.deleteRepo=function(t){var e=s.safeGet(this.repos_,t.app.name);e&&s.safeGet(e,t.repoInfo_.toURLString())===t||S("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=s.safeGet(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=s.safeGet(r,t.toURLString());return i&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new tn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),hn=function(){function t(t){this.repo_=t,t instanceof tn||S("Don't call new Database() directly - please use firebase.database()."),this.root_=new on(t,X.Empty),this.INTERNAL=new fn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),s.validateArgCount("database.ref",0,1,arguments.length),t instanceof on?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),s.validateArgCount(e,1,1,arguments.length);var n=tt(t);yt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&S(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&S("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){s.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){s.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),fn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.database.checkDeleted_("delete"),cn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),dn=Object.freeze({__proto__:null,forceLongPolling:function(){Qe.forceDisallow(),ze.forceAllow()},forceWebSockets:function(){ze.forceDisallow()},isWebSocketsAvailable:function(){return Qe.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),pn=Ze;Ze.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ze.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var vn=Object.freeze({__proto__:null,DataConnection:pn,RealTimeConnection:Je,hijackHash:function(t){var e=Ze.prototype.put;return Ze.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ze.prototype.put=e}},ConnectionTarget:$,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){cn.getInstance().forceRestClient(t)}}),yn=hn.ServerValue;function gn(e){Ge=e.SDK_VERSION;var n=e.INTERNAL.registerComponent(new l.Component("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return cn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:on,Query:Xt,Database:hn,DataSnapshot:Gt,enableLogging:w,INTERNAL:dn,ServerValue:yn,TEST_ACCESS:vn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.6.1"),s.isNodeSdk()&&(t.exports=n)}gn(o),e.DataSnapshot=Gt,e.Database=hn,e.OnDisconnect=mt,e.Query=Xt,e.Reference=on,e.ServerValue=yn,e.enableLogging=w,e.registerDatabase=gn},O0a9:function(t,e,n){"use strict";n.r(e);var r=n("PVcy"),i=n("pZk1"),o=n("I1TF"),a=n("sDu7"),s=n("WEwH"),u=n("b/LO"),l=n("hbGf"),c=n("z5t0");n.d(e,"AngularFireDatabase",(function(){return r.a})),n.d(e,"RealtimeDatabaseURL",(function(){return r.c})),n.d(e,"DATABASE_URL",(function(){return r.b})),n.d(e,"URL",(function(){return r.d})),n.d(e,"listChanges",(function(){return i.a})),n.d(e,"createListReference",(function(){return o.a})),n.d(e,"snapshotChanges",(function(){return a.a})),n.d(e,"stateChanges",(function(){return s.a})),n.d(e,"auditTrail",(function(){return u.a})),n.d(e,"fromRef",(function(){return l.a})),n.d(e,"AngularFireDatabaseModule",(function(){return c.a}))},PVcy:function(t,e,n){"use strict";var r=n("kDjp"),i=n("I1TF"),o=n("lJxs"),a=n("hbGf");function s(t,e){return function(){return Object(a.a)(t,"value","on",e)}}var u=n("1XSQ"),l=n("yA/v");n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u.b})),n.d(e,"b",(function(){return u.a})),n.d(e,"d",(function(){return u.a}));var c=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.schedulers=new u.c(o),this.keepUnstableUntilFirst=Object(u.d)(this.schedulers,i),this.database=o.runOutsideAngular((function(){return Object(l.e)(e,o,n).database(r||void 0)}))}return _createClass(t,[{key:"list",value:function(t,e){var n=Object(r.b)(this.database,t),o=n;return e&&(o=e(n)),Object(i.a)(o,this)}},{key:"object",value:function(t){var e,n,i=Object(r.b)(this.database,t);return n=this,{query:e=i,snapshotChanges:function(){return s(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst)},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){return s(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,Object(o.a)((function(t){return t.payload.exists()?t.payload.val():null})))}}}},{key:"createPushId",value:function(){return this.database.ref().push().key}}]),t}()},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(c){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(u);s.resolve(l)}catch(c){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=s,e.Provider=a},SVse:function(t,e,n){"use strict";n.d(e,"x",(function(){return p})),n.d(e,"k",(function(){return y})),n.d(e,"l",(function(){return v})),n.d(e,"y",(function(){return g})),n.d(e,"b",(function(){return N})),n.d(e,"h",(function(){return b})),n.d(e,"i",(function(){return C})),n.d(e,"j",(function(){return E})),n.d(e,"m",(function(){return A})),n.d(e,"n",(function(){return O})),n.d(e,"o",(function(){return x})),n.d(e,"c",(function(){return D})),n.d(e,"w",(function(){return P})),n.d(e,"s",(function(){return R})),n.d(e,"t",(function(){return M})),n.d(e,"r",(function(){return L})),n.d(e,"v",(function(){return _})),n.d(e,"u",(function(){return m})),n.d(e,"q",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"p",(function(){return h})),n.d(e,"f",(function(){return u}));var r=n("8Y7J"),i=function t(){_classCallCheck(this,t)},o=new r.o("Location Initialized"),a=function t(){_classCallCheck(this,t)},s=new r.o("appBaseHref"),u=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._subject=new r.m,this._urlChangeListeners=[],this._platformStrategy=e;var o=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=t.stripTrailingSlash(l(o)),this._platformStrategy.onPopState((function(t){i._subject.emit({url:i.path(!0),pop:!0,state:t.state,type:t.type})}))}return _createClass(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+t.normalizeQueryParams(n))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,l(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}},{key:"replaceState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}],[{key:"normalizeQueryParams",value:function(t){return t&&"?"!==t[0]?"?"+t:t}},{key:"joinWithSlash",value:function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}},{key:"stripTrailingSlash",value:function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}]),t}();function l(t){return t.replace(/\/index.html$/,"")}var c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=u.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(a),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;if(_classCallCheck(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,_possibleConstructorReturn(i)}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return u.joinWithSlash(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+u.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(a),f=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),d=r.ub,p=new r.o("UseV4Plurals"),v=function t(){_classCallCheck(this,t)},y=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).locale=t,i.deprecatedPluralFn=r,i}return _createClass(n,[{key:"getPluralCategory",value:function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):d(e||this.locale)(t)){case f.Zero:return"zero";case f.One:return"one";case f.Two:return"two";case f.Few:return"few";case f.Many:return"many";default:return"other"}}}]),n}(v);function g(t,e){e=encodeURIComponent(e);var n,r=_createForOfIteratorHelper(t.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.indexOf("="),a=_slicedToArray(-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],2),s=a[0],u=a[1];if(s.trim()===e)return decodeURIComponent(u)}}catch(l){r.e(l)}finally{r.f()}return null}var m=function t(){_classCallCheck(this,t)},_=function(){function t(e,n,r,i){_classCallCheck(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._initialClasses=[]}return _createClass(t,[{key:"getValue",value:function(){return null}},{key:"setClass",value:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"setNgClass",value:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.wb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"applyChanges",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachRemovedItem((function(t){t.previousValue&&e._toggleClass(t.key,!1)}))}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(Object(r.Hb)(t.item)));e._toggleClass(t.item,!0)})),t.forEachRemovedItem((function(t){return e._toggleClass(t.item,!1)}))}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!0)})):Object.keys(t).forEach((function(n){return e._toggleClass(n,!!t[n])})))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!1)})):Object.keys(t).forEach((function(t){return e._toggleClass(t,!1)})))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach((function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)}))}}]),t}(),b=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"ngDoCheck",value:function(){this._delegate.applyChanges()}},{key:"klass",set:function(t){this._delegate.setClass(t)}},{key:"ngClass",set:function(t){this._delegate.setNgClass(t)}}]),n}(function(){var t=function(){function t(e){_classCallCheck(this,t),this._delegate=e}return _createClass(t,[{key:"getValue",value:function(){return this._delegate.getValue()}}]),t}();return t.ngDirectiveDef=void 0,t}()),w=function(){function t(e,n,r,i){_classCallCheck(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return _createClass(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),C=function(){function t(e,n,r){_classCallCheck(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOfDirty=!0,this._differ=null}return _createClass(t,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new w(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new k(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new k(t,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}},{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(t){Object(r.W)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". ")+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}(),k=function t(e,n){_classCallCheck(this,t),this.record=e,this.view=n},E=function(){function t(e,n){_classCallCheck(this,t),this._viewContainer=e,this._context=new S,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(t,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){T("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){T("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}}]),t}(),S=function t(){_classCallCheck(this,t),this.$implicit=null,this.ngIf=null};function T(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(r.Hb)(e),"'."))}var I=function(){function t(e,n){_classCallCheck(this,t),this._viewContainerRef=e,this._templateRef=n,this._created=!1}return _createClass(t,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}]),t}(),A=function(){function t(){_classCallCheck(this,t),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _createClass(t,[{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}},{key:"_matchCase",value:function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}},{key:"_updateDefaultCases",value:function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}},{key:"ngSwitch",set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}}]),t}(),O=function(){function t(e,n,r){_classCallCheck(this,t),this.ngSwitch=r,r._addCase(),this._view=new I(e,n)}return _createClass(t,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),t}(),x=function t(e,n,r){_classCallCheck(this,t),r._addDefault(new I(e,n))},N=function t(){_classCallCheck(this,t)},D=new r.o("DocumentToken"),P="browser";function R(t){return t===P}function M(t){return"server"===t}var L=function(){var t=function t(){_classCallCheck(this,t)};return t.ngInjectableDef=Object(r.Nb)({token:t,providedIn:"root",factory:function(){return new j(Object(r.Ob)(D),window,Object(r.Ob)(r.l))}}),t}(),j=function(){function t(e,n,r){_classCallCheck(this,t),this.document=e,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var e=this.document.querySelector("#".concat(t));if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='".concat(t,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}]),t}()},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("HDdC"),i=n("ngJS"),o=n("a7t3"),a=n("pLzU"),s=n("CRDf"),u=n("I55L"),l=n("c2HN"),c=n("XoHu"),h=n("Lhse"),f=n("kJWO"),d=function(t){if(t instanceof r.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[f.a])return Object(s.a)(t);if(Object(u.a)(t))return Object(i.a)(t);if(Object(l.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[h.a])return Object(a.a)(t);var e=Object(c.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(e," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),a=n("yCtX");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,l=e[e.length-1];return Object(i.a)(l)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(s=e.pop())):"number"==typeof l&&(s=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(s)(Object(a.a)(e,u))}},WEwH:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("hbGf"),i=n("GIw4"),o=n("VRyK");function a(t,e,n){var a=(e=Object(i.a)(e)).map((function(e){return Object(r.a)(t,e,"on",n)}));return Object(o.a).apply(void 0,_toConsumableArray(a))}},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.14.2","app"),t.exports=i},XNiG:function(t,e,n){"use strict";var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),a=n("9ppp"),s=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(o.a),u=n("2QA8");n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return h}));var l,c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t)).destination=t,r}return n}(i.a),h=((l=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _createClass(n,[{key:u.a,value:function(){return new c(this)}},{key:"lift",value:function(t){var e=new f(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new a.a;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new s(this,t))}},{key:"asObservable",value:function(){var t=new r.a;return t.source=this,t}}]),n}(r.a)).create=function(t,e){return new f(t,e)},l),f=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).destination=t,i.source=r,i}return _createClass(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):o.a.EMPTY}}]),n}(h)},XUOw:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t){var e=new r.a((function(e){e.next(t),e.complete()}));return e._isScalar=!0,e.value=t,e}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("51Dv"),i=n("SeVD");function o(t,e,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r.a(t,n,o);if(!a.closed)return Object(i.a)(e)(a)}},a7t3:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("NJ4a"),i=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,r.a),e}}},"b/LO":function(t,e,n){"use strict";var r=n("WEwH"),i=n("hbGf"),o=n("Kqap"),a=n("lJxs"),s=n("l7GE"),u=n("ZUHj"),l=function(){function t(e,n){_classCallCheck(this,t),this.observables=e,this.project=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new c(t,this.observables,this.project))}}]),t}(),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;_classCallCheck(this,n),(o=e.call(this,t)).observables=r,o.project=i,o.toRespond=[];var a=r.length;o.values=new Array(a);for(var s=0;s<a;s++)o.toRespond.push(s);for(var l=0;l<a;l++){var c=r[l];o.add(Object(u.a)(_assertThisInitialized(o),c,c,l))}return o}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(_toConsumableArray(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(s.a),h=n("7o/Q"),f=function(){function t(e){_classCallCheck(this,t),this.predicate=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new d(t,this.predicate))}}]),t}(),d=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(h.a);function p(t,e,n){return function(t,e,n){return function(t,e){return Object(i.a)(t,"value","on",e).pipe(Object(a.a)((function(t){var e;return t.payload.forEach((function(t){return e=t.key,!1})),{data:t,lastKeyToLoad:e}})))}(t,n).pipe(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new l(e,n))}}(e),Object(a.a)((function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1],i=n.lastKeyToLoad,o=r.map((function(t){return t.key}));return{actions:r,lastKeyToLoad:i,loadedKeys:o}})),(r=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new f(r))}),Object(a.a)((function(t){return t.actions})));var r}(t,Object(r.a)(t,e).pipe(Object(o.a)((function(t,e){return[].concat(_toConsumableArray(t),[e])}),[])),n)}n.d(e,"a",(function(){return p}))},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},eIep:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("l7GE"),i=n("51Dv"),o=n("ZUHj"),a=n("lJxs"),s=n("Cfvw");function u(t,e){return"function"==typeof e?function(n){return n.pipe(u((function(n,r){return Object(s.a)(t(n,r)).pipe(Object(a.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new l(t))}}var l=function(){function t(e){_classCallCheck(this,t),this.project=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new c(t,this.project))}}]),t}(),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var a=new i.a(this,void 0,void 0);this.destination.add(a),this.innerSubscription=Object(o.a)(this,t,e,n,a)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||_get(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}}]),n}(r.a)},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},hbGf:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("D0XW"),i=n("HDdC"),o=n("lJxs"),a=n("w1tV");function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.a;return new i.a((function(r){var i;return i=t[n](e,(function(t,e){s.schedule((function(){r.next({snapshot:t,prevKey:e})})),"once"==n&&s.schedule((function(){return r.complete()}))}),(function(t){s.schedule((function(){return r.error(t)}))})),"on"==n?{unsubscribe:function(){null!=i&&t.off(e,i)}}:{unsubscribe:function(){}}})).pipe(Object(o.a)((function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}})),Object(a.a)())}},kDjp:function(t,e,n){"use strict";function r(t){return null==t}function i(t){return"function"==typeof t.set}function o(t,e){return i(e)?e:t.ref(e)}function a(t,e){if("string"==typeof t)return e.stringCase();if(i(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: ".concat(typeof t))}n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}))},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(n("7o/Q").a)},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){_classCallCheck(this,t),this.project=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))}}]),t}(),a=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||_assertThisInitialized(o),o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},mCNh:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("KqfI");function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(e)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:r.a}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return l})),n.d(e,"__awaiter",(function(){return c})),n.d(e,"__generator",(function(){return h})),n.d(e,"__exportStar",(function(){return f})),n.d(e,"__values",(function(){return d})),n.d(e,"__read",(function(){return p})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return g})),n.d(e,"__asyncGenerator",(function(){return m})),n.d(e,"__asyncDelegator",(function(){return _})),n.d(e,"__asyncValues",(function(){return b})),n.d(e,"__makeTemplateObject",(function(){return w})),n.d(e,"__importStar",(function(){return C})),n.d(e,"__importDefault",(function(){return k})),n.d(e,"__classPrivateFieldGet",(function(){return E})),n.d(e,"__classPrivateFieldSet",(function(){return S}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function _(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:g(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}function E(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},pLzU:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("Lhse"),i=function(t){return function(e){for(var n=t[r.a]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e}}},pZk1:function(t,e,n){"use strict";var r=n("hbGf"),i=n("LRne"),o=n("VRyK"),a=n("kDjp"),s=n("eIep"),u=n("Kqap"),l=n("7o/Q"),c=function(){function t(e,n){_classCallCheck(this,t),this.compare=e,this.keySelector=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.compare,this.keySelector))}}]),t}(),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return _createClass(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(l.a);function f(t,e,n){return Object(r.a)(t,"value","once",n).pipe(Object(s.a)((function(a){var s=[Object(i.a)(a)];return e.forEach((function(e){return s.push(Object(r.a)(t,e,"on",n))})),Object(o.a).apply(void 0,s).pipe(Object(u.a)(p,[]))})),(function(t){return t.lift(new c(void 0,void 0))}))}function d(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function p(t,e){var n=e.payload,r=e.prevKey,i=e.key,o=d(t,i),s=function(t,e){if(Object(a.c)(e))return 0;var n=d(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){var u=null;e.payload.forEach((function(e){var n={payload:e,type:"value",prevKey:u,key:e.key};return u=e.key,t=[].concat(_toConsumableArray(t),[n]),!1}))}return t;case"child_added":if(o>-1){var l=t[o-1];(l&&l.key||null)!=r&&(t=t.filter((function(t){return t.payload.key!==n.key}))).splice(s,0,e)}else{if(null==r)return[e].concat(_toConsumableArray(t));(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter((function(t){return t.payload.key!==n.key}));case"child_changed":return t.map((function(t){return t.payload.key===i?e:t}));case"child_moved":if(o>-1){var c=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,c),t}return t;default:return t}}n.d(e,"a",(function(){return f}))},pxpQ:function(t,e,n){"use strict";var r,i=n("7o/Q"),o=n("EY2u"),a=n("LRne"),s=n("z6cu"),u=((r=function(){function t(e,n,r){_classCallCheck(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return _createClass(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(o.b)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r);function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new c(t,e))}}n.d(e,"a",(function(){return l}));var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.scheduler=e,this.delay=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.scheduler,this.delay))}}]),t}(),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return _createClass(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new f(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(u.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(u.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(u.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(i.a),f=function t(e,n){_classCallCheck(this,t),this.notification=e,this.destination=n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return a})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return d}));var o=[],a=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,l=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),c=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=l[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}();function f(t){var e="string"==typeof t?s[t]:t;o.forEach((function(t){t.logLevel=e}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},quSY:function(t,e,n){"use strict";var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");function a(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}a.prototype=Object.create(Error.prototype);var s=a;n.d(e,"a",(function(){return c}));var u,l,c=((l=function(){function t(e){_classCallCheck(this,t),this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var t,e=!1;if(!this.closed){var n=this._parent,a=this._parents,u=this._unsubscribe,l=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var c=-1,f=a?a.length:0;n;)n.remove(this),n=++c<f&&a[c]||null;if(Object(o.a)(u))try{u.call(this)}catch(p){e=!0,t=p instanceof s?h(p.errors):[p]}if(Object(r.a)(l))for(c=-1,f=l.length;++c<f;){var d=l[c];if(Object(i.a)(d))try{d.unsubscribe()}catch(p){e=!0,t=t||[],p instanceof s?t=t.concat(h(p.errors)):t.push(p)}}if(e)throw new s(t)}}},{key:"add",value:function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"_addParent",value:function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}]),t}()).EMPTY=((u=new l).closed=!0,u),l);function h(t){return t.reduce((function(t,e){return t.concat(e instanceof s?e.errors:e)}),[])}},sDu7:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("pZk1"),i=n("GIw4");function o(t,e,n){return e=Object(i.a)(e),Object(r.a)(t,e,n)}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function a(t,e,n){return function(r){return r.lift(new s(t,e,n))}}var s=function(){function t(e,n,r){_classCallCheck(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),u=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,a,s){var u;return _classCallCheck(this,n),(u=e.call(this,t))._tapNext=i.a,u._tapError=i.a,u._tapComplete=i.a,u._tapError=a||i.a,u._tapComplete=s||i.a,Object(o.a)(r)?(u._context=_assertThisInitialized(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i.a,u._tapError=r.error||i.a,u._tapComplete=r.complete||i.a),u}return _createClass(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(r.a)},w1tV:function(t,e,n){"use strict";var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),a=n("quSY");function s(){return function(t){return t.lift(new u(t))}}var u=function(){function t(e){_classCallCheck(this,t),this.connectable=e}return _createClass(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),l=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(o.a),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=a.a.EMPTY):this._connection=t),t}},{key:"refCount",value:function(){return s()(this)}}]),n}(i.a).prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}},f=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(t){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(r.b);function d(){return new r.a}function p(){return function(t){return s()((e=d,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}n.d(e,"a",(function(){return p}))},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("mrSG"),a=n("zVF4"),s=n("S+S0"),u=n("q/0M"),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),c=new a.ErrorFactory("app","Firebase",l),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Logger("@firebase/app"),d=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var l=o.__values(this.firebase_.INTERNAL.components.values()),c=l.next();!c.done;c=l.next())this._addComponent(c.value)}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw c.create("bad-app-name",{appName:String(s)});if(a.contains(e,s))throw c.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}l(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw c.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.14.1",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!a.contains(e,t=t||"[DEFAULT]"))throw c.create("no-app",{appName:t});return e[t]}function l(s){var u,l,h=s.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw c.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),v=p.next();!v.done;v=p.next())e[v.value]._addComponent(s)}catch(y){u={error:y}}finally{try{v&&!v.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(d);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(a.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),g.apply(void 0,t)};var m=p;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.2",void 0),t.registerVersion("fire-js","")}(m),e.default=m,e.firebase=m},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",(function(){return sr})),n.d(e,"EventType",(function(){return ur})),n.d(e,"WebChannel",(function(){return lr})),n.d(e,"XhrIo",(function(){return cr})),n.d(e,"createWebChannelTransport",(function(){return ar}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t){return"number"==typeof t}function l(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function f(t){return"array"==h(t)}function d(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function C(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function k(){this.j=this.j,this.i=this.i}k.prototype.j=!1,k.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[v]||(this[v]=++y))},k.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function I(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var O,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function N(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var P=a.navigator;if(P){var R=P.userAgent;if(R){O=R;break t}}O=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e,n={};for(e in t)n[e]=t[e];return n}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=c;var V,q,B=N(O,"Opera"),H=N(O,"Trident")||N(O,"MSIE"),z=N(O,"Edge"),W=z||H,G=N(O,"Gecko")&&!(N(O.toLowerCase(),"webkit")&&!N(O,"Edge"))&&!(N(O,"Trident")||N(O,"MSIE"))&&!N(O,"Edge"),K=N(O.toLowerCase(),"webkit")&&!N(O,"Edge");function Q(){var t=a.document;return t?t.documentMode:void 0}t:{var Y="",J=(q=O,G?/rv:([^\);]+)(\)|;)/.exec(q):z?/Edge\/([\d\.]+)/.exec(q):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):K?/WebKit\/(\S+)/.exec(q):B?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(J&&(Y=J?J[1]:""),H){var X=Q();if(null!=X&&X>parseFloat(Y)){V=String(X);break t}}V=Y}var Z,$={};function tt(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=x(String(V)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var et=a.document;Z=et&&H?Q()||("CSS1Compat"==et.compatMode?parseInt(V,10):5):void 0;var nt=!H||9<=Number(Z),rt=H&&!tt("9"),it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(G){t:{try{U(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ia=!1},C(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++lt,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ft(t){this.src=t,this.a={},this.b=0}function dt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=pt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new ct(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function gt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Et(r),e&&e[ut]?e.Aa(n,r,p(i)?!!i.capture:!!i,o):mt(e,n,r,!0,i,o)}(t,e,n,r,i);if(f(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=Et(n),t&&t[ut]?t.za(e,n,p(r)?!!r.capture:!!r,i):mt(t,e,n,!1,r,i)}function mt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=Ct(t);if(s||(t[vt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=wt,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ut])dt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ct(e))?(dt(n,t),0==n.b&&(n.src=null,e[vt]=null)):ht(t)}}}function bt(t){return t in yt?yt[t]:yt[t]="on"+t}function wt(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&_t(t),n.call(r,e)}(t,nt?new at(e,this):e=new at(e||l("window.event"),this))}function Ct(t){return(t=t[vt])instanceof ft?t:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(t){return"function"==h(t)?t:(t[kt]||(t[kt]=function(e){return t.handleEvent(e)}),t[kt])}function St(){k.call(this),this.c=new ft(this),this.J=this,this.B=null}function Tt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&dt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}C(St,k),St.prototype[ut]=!0,(r=St.prototype).addEventListener=function(t,e,n,r){gt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Et(r),e&&e[ut]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=pt(a=e.a[n],r,i,o))&&(ht(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=Ct(e))&&(n=e.a[n.toString()],e=-1,n&&(e=pt(n,r,i,o)),(r=-1<e?n[e]:null)&&_t(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(s(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;F(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Tt(a,r,!0,t)&&i}if(i=Tt(a=t.a=n,r,!0,t)&&i,i=Tt(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tt(a=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(St.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var It=a.JSON.stringify;function At(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Ot(){this.b=this.a=null}At.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var xt,Nt=new At((function(){return new Pt}),(function(t){t.reset()}));function Dt(){var t=jt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function Rt(t){a.setTimeout((function(){throw t}),0)}function Mt(t,e){xt||function(){var t=a.Promise.resolve(void 0);xt=function(){t.then(Ft)}}(),Lt||(xt(),Lt=!0),jt.add(t,e)}Ot.prototype.add=function(t,e){var n=Nt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,jt=new Ot;function Ft(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(n){Rt(n)}var e=Nt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Ut(t,e){St.call(this),this.b=t||1,this.a=e||a,this.f=_(this.gb,this),this.g=w()}function Vt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function qt(t,e,n){if("function"==h(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Bt(t,e,n){k.call(this),this.f=null!=n?_(t,n):t,this.c=e,this.b=_(this.$a,this),this.a=[]}function Ht(t){t.U=qt(t.b,t.c),t.f.apply(null,t.a)}function zt(t){k.call(this),this.b=t,this.a={}}C(Ut,St),(r=Ut.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=w()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Vt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){Ut.N.G.call(this),Vt(this),delete this.a},C(Bt,k),(r=Bt.prototype).ea=!1,r.U=null,r.Ta=function(t){this.a=arguments,this.U?this.ea=!0:Ht(this)},r.G=function(){Bt.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,Ht(this))},C(zt,k);var Wt=[];function Gt(t,e,n,r){f(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=gt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){M(t.a,(function(t,e){this.a.hasOwnProperty(e)&&_t(t)}),t),t.a={}}function Qt(){}zt.prototype.G=function(){zt.N.G.call(this),Kt(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=new St;function Jt(t){ot.call(this,"serverreachability",t)}function Xt(t){Yt.dispatchEvent(new Jt(Yt,t))}function Zt(t){ot.call(this,"statevent",t)}function $t(t){Yt.dispatchEvent(new Zt(Yt,t))}function te(t){ot.call(this,"timingevent",t)}function ee(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}C(Jt,ot),C(Zt,ot),C(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},re={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ie(){}function oe(){}ie.prototype.a=null;var ae,se={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ue(){ot.call(this,"d")}function le(){ot.call(this,"c")}function ce(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new zt(this),this.O=fe,this.P=new Ut(t=W?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}C(ue,ot),C(le,ot),C(ce,ie),ae=new ce;var fe=45e3,de={},pe={};function ve(t,e,n){t.F=1,t.f=Ve(Pe(e)),t.l=n,t.H=!0,ge(t,null)}function ye(t,e,n,r){t.F=1,t.f=Ve(Pe(e)),t.l=null,t.H=n,ge(t,r)}function ge(t,e){t.v=w(),be(t),t.D=Pe(t.f),Ue(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Bt(_(t.Ja,t,t.a),t.J)),Gt(t.I,t.a,"readystatechange",t.cb),e=t.h?L(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Xt(1)}function me(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=_e(t,n);if(i==pe){4==e&&(t.c=4,$t(14),r=!1);break}if(i==de){t.c=4,$t(15),r=!1;break}Se(t,i)}4==e&&0==n.length&&(t.c=1,$t(16),r=!1),t.b=t.b&&r,r||(Ee(t),ke(t))}function _e(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?de:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.A=r+n,e))}function be(t){t.R=w()+t.O,we(t,t.O)}function we(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(_(t.ab,t),e)}function Ce(t){t.i&&(a.clearTimeout(t.i),t.i=null)}function ke(t){t.g.Ca()||t.m||t.g.na(t)}function Ee(t){Ce(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Vt(t.P),Kt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Se(t,e){try{t.g.Fa(t,e),Xt(4)}catch(n){}}function Te(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||s(t))S(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(d(t)||s(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(s(t))return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ie(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ie)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t,e){xe(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Oe(t))}function Oe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=he.prototype).setTimeout=function(t){this.O=t},r.cb=function(t){t=t.target;var e=this.B;e&&3==Pn(t)?e.Ta():this.Ja(t)},r.Ja=function(t){try{if(t==this.a)t:{var e=Pn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!W&&!this.a.aa())){this.m||4!=e||7==n||Xt(8==n||0>=r?3:2),Ce(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Rn(this.a,"X-HTTP-Initial-Response");if(a&&!A(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,$t(12),Ee(this),ke(this);break t}this.s=!0,Se(this,s)}this.H?(me(this,e,o),W&&this.b&&3==e&&(Gt(this.I,this.P,"tick",this.bb),this.P.start())):Se(this,o),4==e&&Ee(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,$t(12)):(this.c=0,$t(13)),Ee(this),ke(this)}}}catch(u){}},r.bb=function(){if(this.a){var t=Pn(this.a),e=this.a.aa();this.A<e.length&&(Ce(this),me(this,t,e),this.b&&4!=t&&be(this))}},r.cancel=function(){this.m=!0,Ee(this)},r.ab=function(){this.i=null;var t=w();0<=t-this.R?(2!=this.F&&(Xt(3),$t(17)),Ee(this),this.c=2,ke(this)):we(this,this.R-t)},(r=Ie.prototype).C=function(){Oe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return Oe(this),this.a.concat()},r.get=function(t,e){return xe(this.b,t)?this.b[t]:e},r.set=function(t,e){xe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ne=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function De(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof De?(this.h=void 0!==e?e:t.h,Re(this,t.f),this.j=t.j,Me(this,t.b),Le(this,t.i),this.a=t.a,je(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Ne))?(this.h=!!e,Re(this,n[1]||"",!0),this.j=qe(n[2]||""),Me(this,n[3]||"",!0),Le(this,n[4]),this.a=qe(n[5]||"",!0),je(this,n[6]||"",!0),this.g=qe(n[7]||"")):(this.h=!!e,this.c=new Ye(null,this.h))}function Pe(t){return new De(t)}function Re(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Me(t,e,n){t.b=n?qe(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function je(t,e,n){e instanceof Ye?(t.c=e,function(t,e){e&&!t.f&&(Je(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),$e(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=Be(e,Ke)),t.c=new Ye(e,t.h))}function Fe(t,e,n){t.c.set(e,n)}function Ue(t,e,n){f(n)||(n=[String(n)]),$e(t.c,e,n)}function Ve(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return s(t)?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}De.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,ze,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?Ge:We,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Be(n,Qe)),t.join("")},De.prototype.resolve=function(t){var e=Pe(this),n=!!t.f;n?Re(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Me(e,t.b):n=null!=t.i;var r=t.a;if(n)Le(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(N(i,"./")||N(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?je(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var ze=/[#\/\?@]/g,We=/[#\?:]/g,Ge=/[#\?]/g,Ke=/[#\?@]/g,Qe=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Je(t){t.a||(t.a=new Ie,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){Je(t),e=en(t,e),xe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae(t.a,e))}function Ze(t,e){return Je(t),e=en(t,e),xe(t.a.b,e)}function $e(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),I(n)),t.b+=n.length)}function tn(t){var e=new Ye;return e.c=t.c,t.a&&(e.a=new Ie(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)$t(4),e?($t(10),Gn(t.a,t,!1)):($t(11),Gn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Xn(e=t.a,e.Y()?t.f:null,t.i),$t(4),Ue(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Fe(e,n,r),ye(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function an(){this.a=new Ie}function sn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[v]||(t[v]=++y)):e.charAt(0)+t}function un(t,e){this.b=t,this.a=e}function ln(t){this.g=t||cn,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new an),this.b=null,this.c=[]}(r=Ye.prototype).add=function(t,e){Je(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Je(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.K=function(){Je(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Je(this);var e=[];if(s(t))Ze(this,t)&&(e=T(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},r.set=function(t,e){return Je(this),this.c=null,Ze(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},C((function(){}),(function(){})),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Rn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Rn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Yn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Yn(e,2)}else 1==this.M&&(this.g?$t(6):"11111"==e?($t(5),this.g=!0,(!H||10<=Number(Z))&&(this.c=200,this.b.cancel(),$t(11),Gn(this.a,this,!0))):($t(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?($t(11),Gn(this.a,this,!0)):($t(10),Gn(this.a,this,!1)));else{0==this.M?$t(8):1==this.M&&$t(9);var t=this.a;t.m=this.c,Yn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},an.prototype.add=function(t){this.a.set(sn(t),t)},an.prototype.C=function(){return this.a.C()};var cn=10;function hn(t,e){!t.a&&(N(e,"spdy")||N(e,"quic")||N(e,"h2"))&&(t.f=t.g,t.a=new an,t.b&&(vn(t,t.b),t.b=null))}function fn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function dn(t){return t.b?1:t.a?t.a.a.c:0}function pn(t,e){return t.b?t=t.b==e:t.a?(e=sn(e),t=xe(t.a.a.b,e)):t=!1,t}function vn(t,e){t.a?t.a.add(e):t.b=e}function yn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=sn(e),n=xe(t.a.a.b,n)),n&&Ae(t.a.a,sn(e)))}function gn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return S(t.a.C(),(function(t){e=e.concat(t.j)})),e}return I(t.c)}function mn(){}function _n(){this.a=new mn}function bn(t,e,n){var r=n||"";try{Te(t,(function(t,n){var i=t;p(t)&&(i=It(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ln.prototype.cancel=function(){this.c=gn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(S(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},mn.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},mn.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var Cn=a.JSON.parse;function kn(t){St.call(this),this.headers=new Ie,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}C(kn,St);var En="",Sn=/^https?$/i,Tn=["POST","PUT"];function In(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,On(t),Nn(t)}function On(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Pn(t)||2!=t.T()))if(t.l&&4==Pn(t))qt(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Pn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.A).match(Ne)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Sn.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var l=2<Pn(t)?t.a.statusText:""}catch(c){l=""}t.f=l+" ["+t.T()+"]",On(t)}}finally{Nn(t)}}}function Nn(t,e){if(t.a){Dn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Dn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function Pn(t){return t.a?t.a.readyState:0}function Rn(t,e){return t.a?t.a.getResponseHeader(e):null}function Mn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Fe(t,e,n),t}function Ln(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!l("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=l("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=l("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=l("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new ln(t&&t.concurrentRequestLimit),this.ja=new _n,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function jn(t){if(Fn(t),3==t.u){var e=t.P++,n=Pe(t.B);Fe(n,"SID",t.H),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Bn(t,n),(e=new he(t,e,void 0)).F=2,e.f=Ve(Pe(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),"")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=w(),be(e)}Jn(t)}function Fn(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(a.clearTimeout(t.l),t.l=null),Kn(t),t.b.cancel(),t.h&&(u(t.h)&&a.clearTimeout(t.h),t.h=null)}function Un(t,e){t.f.push(new un(t.Qa++,e)),3==t.u&&Vn(t)}function Vn(t){fn(t.b)||t.h||(t.h=!0,Mt(t.Ha,t),t.A=0)}function qn(t,e){var n;n=e?e.W:t.P++;var r=Pe(t.B);Fe(r,"SID",t.H),Fe(r,"RID",n),Fe(r,"AID",t.O),Bn(t,r),t.g&&t.i&&Mn(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Hn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),vn(t.b,n),ve(n,r,e)}function Bn(t,e){t.c&&Te({},(function(t,n){Fe(e,n,t)}))}function Hn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?_(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=o))o=Math.max(0,i[u].b-100),s=!1;else try{bn(c,a,"req"+l+"_")}catch(h){r&&r(c)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function zn(t){t.a||t.l||(t.S=1,Mt(t.Ga,t),t.v=0)}function Wn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(_(t.Ga,t),Qn(t,t.v)),t.v++,0))}function Gn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Xn(t,null,t.ha),Vn(t)}function Kn(t){null!=t.s&&(a.clearTimeout(t.s),t.s=null)}function Qn(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Yn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=_(t.eb,t);n||(n=new De("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Re(n,"https"),Ve(n)),function(t,e){var n=new Qt;if(a.Image){var r=new Image;r.onload=b(wn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=b(wn,n,r,"TestLoadImage: error",!1,e),r.onabort=b(wn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=b(wn,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else $t(2);t.u=0,t.c&&t.c.ta(e),Jn(t),Fn(t)}function Jn(t){t.u=0,t.m=-1,t.c&&(0==gn(t.b).length&&0==t.f.length||(t.b.c.length=0,I(t.f),t.f.length=0),t.c.sa())}function Xn(t,e,n){var r=function(t){return t instanceof De?Pe(t):new De(t,void 0)}(n);if(""!=r.b)e&&Me(r,e+"."+r.b),Le(r,r.i);else{var i=a.location;r=function(t,e,n,r){var i=new De(null,void 0);return t&&Re(i,t),e&&Me(i,e),n&&Le(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,(function(t,e){Fe(r,e,t)})),n=t.I,(e=t.j)&&n&&Fe(r,e,n),Fe(r,"VER",t.wa),Bn(t,r),r}function Zn(){}function $n(){if(H&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function tr(t,e){St.call(this),this.a=new Ln(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){le.call(this),this.status=1}function rr(t){this.a=t}(r=kn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ae),this.a.onreadystatechange=_(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void An(this,o)}t=n||"";var i=new Ie(this.headers);r&&Te(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=In,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=E(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dn(this),0<this.o&&((this.D=function(t){return H&&tt(9)&&u(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.Ba,this)):this.m=qt(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){An(this,o)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Nn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Nn(this,!0)),kn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?xn(this):this.Za())},r.Za=function(){xn(this)},r.T=function(){try{return 2<Pn(this)?this.a.status:-1}catch(q){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},r.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Cn(e)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?F(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Hn(this,n,e),Fe(i=Pe(this.B),"RID",t),Fe(i,"CVER",22),this.o&&this.j&&Fe(i,"X-HTTP-Session-Id",this.j),Bn(this,i),this.g&&r&&Mn(i,this.g,r),vn(this.b,n),this.W?(Fe(i,"$req",e),Fe(i,"SID","null"),n.S=!0,ve(n,i,null)):ve(n,i,e),this.u=2}}else 3==this.u&&(t?qn(this,t):0==this.f.length||fn(this.b)||qn(this))},r.Ga=function(){this.l=null,this.a=new he(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Pe(this.pa);Fe(t,"RID","rpc"),Fe(t,"SID",this.H),Fe(t,"CI",this.ia?"0":"1"),Fe(t,"AID",this.O),Bn(this,t),Fe(t,"TYPE","xmlhttp"),this.g&&this.i&&Mn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ye(this.a,t,!0,this.ga)},r.Fa=function(t,e){if(0!=this.u&&(this.a==t||pn(this.b,t)))if(this.m=t.o,!t.s&&pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Kn(this),this.a.cancel(),this.a=null}Wn(this),$t(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(_(this.Ya,this),6e3));if(1>=dn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Yn(this,11)}else if((t.s||this.a==t)&&Kn(this),!A(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,Fe(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(yn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ce(r),be(r)),this.a=r):zn(this),0<this.f.length&&Vn(this)}else"stop"!=r[0]&&"close"!=r[0]||Yn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Yn(this,7):jn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Wn(this),$t(19))},r.na=function(t){var e=null;if(this.a==t){Kn(this),this.a=null;var n=2}else{if(!pn(this.b,t))return;e=t.j,yn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=w()-t.v,Yt.dispatchEvent(new te(Yt,t.l?t.l.length:0,e,this.A)),Vn(this)):zn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(dn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=ee(_(t.Ha,t,e),Qn(t,t.A)),t.A++,0)))}(this,t)||2==n&&Wn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Yn(this,5);break;case 4:Yn(this,10);break;case 3:Yn(this,6);break;default:Yn(this,2)}}},r.eb=function(t){$t(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new kn(this.Ka)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Zn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},$n.prototype.a=function(t,e){return new tr(t,e)},C(tr,St),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;$t(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Mn(e,t.g,t.i)),(t=t.w).i=n,e=Xn(t.a,null,t.i),$t(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(Ue(e,"MODE","init"),!t.a.o&&t.a.j&&Ue(e,"X-HTTP-Session-Id",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,ye(t.b,e,!1,null),t.M=0)},r.close=function(){jn(this.a)},r.Wa=function(t){if(s(t)){var e={};e.__data__=t,Un(this.a,e)}else this.h?((e={}).__data__=It(t),Un(this.a,e)):Un(this.a,t)},r.G=function(){this.a.c=null,delete this.f,jn(this.a),delete this.a,tr.N.G.call(this)},C(er,ue),C(nr,le),C(rr,Zn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=b((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),$n);$n.prototype.createWebChannel=$n.prototype.a,tr.prototype.send=tr.prototype.Wa,tr.prototype.open=tr.prototype.Va,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=se,se.OPEN="a",se.CLOSE="b",se.ERROR="c",se.MESSAGE="d",St.prototype.listen=St.prototype.za,kn.prototype.listenOnce=kn.prototype.Aa,kn.prototype.getLastError=kn.prototype.Xa,kn.prototype.getLastErrorCode=kn.prototype.ya,kn.prototype.getStatus=kn.prototype.T,kn.prototype.getResponseJson=kn.prototype.Ua,kn.prototype.getResponseText=kn.prototype.aa,kn.prototype.send=kn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:oe,XhrIo:kn},ar=or.createWebChannelTransport,sr=or.ErrorCode,ur=or.EventType,lr=or.WebChannel,cr=or.XhrIo;e.default=or},"yA/v":function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return p}));var r,i=n("8Y7J"),o=n("Wcq6"),a=n.n(o),s=new i.o("angularfire2.app.options"),u=new i.o("angularfire2.app.nameOrConfig"),l=s,c=u,h=function t(){_classCallCheck(this,t)},f=new i.N("5.4.2");function d(t,e,n){var r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",a.a.apps.filter((function(t){return t&&t.name===r.name}))[0]||e.runOutsideAngular((function(){return a.a.initializeApp(t,r)}))}var p=r=function(){function t(e){_classCallCheck(this,t),a.a.registerVersion&&(a.a.registerVersion("angularfire",f.full,e.toString()),a.a.registerVersion("angular",i.M.full))}return _createClass(t,null,[{key:"initializeApp",value:function(t,e){return{ngModule:r,providers:[{provide:l,useValue:t},{provide:c,useValue:e}]}}}]),t}()},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("quSY"),o=n("ngJS");function a(t,e){return new r.a(e?function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:Object(o.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},z5t0:function(t,e,n){"use strict";n("NSPt"),n.d(e,"a",(function(){return r}));var r=function t(){_classCallCheck(this,t)}},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t,e){return new r.a(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){var e=t.error;t.subscriber.error(e)}},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J"),i=function t(){_classCallCheck(this,t)},o=function t(){_classCallCheck(this,t),this.title="barapp"},a=n("SVse"),s=n("LRne"),u=n("Cfvw"),l=n("XNiG"),c=n("9ppp"),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._value=t,r}return _createClass(n,[{key:"_subscribe",value:function(t){var e=_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new c.a;return this._value}},{key:"next",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=t)}},{key:"value",get:function(){return this.getValue()}}]),n}(l.a),f=n("HDdC");function d(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}d.prototype=Object.create(Error.prototype);var p=d,v=n("z+Ro"),y=n("DH7j"),g=n("l7GE"),m=n("ZUHj"),_=n("yCtX"),b={},w=function(){function t(e){_classCallCheck(this,t),this.resultSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new C(t,this.resultSelector))}}]),t}(),C=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return _createClass(n,[{key:"_next",value:function(t){this.values.push(b),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(m.a)(this,r,r,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===b?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(g.a),k=n("EY2u");function E(t){return new f.a((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(u.a)(n):Object(k.b)()).subscribe(e)}))}var S=n("lJxs"),T=n("bHdf");function I(){return Object(T.a)(1)}var A=n("7o/Q");function O(t,e){return function(n){return n.lift(new x(t,e))}}var x=function(){function t(e,n){_classCallCheck(this,t),this.predicate=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new N(t,this.predicate,this.thisArg))}}]),t}(),N=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(A.a);function D(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}D.prototype=Object.create(Error.prototype);var P=D;function R(t){return function(e){return 0===t?Object(k.b)():e.lift(new M(t))}}var M=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new P}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new L(t,this.total))}}]),t}(),L=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(A.a),j=n("vkgz"),F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return Object(j.a)({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function U(){return new p}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new q(t))}}var q=function(){function t(e){_classCallCheck(this,t),this.defaultValue=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new B(t,this.defaultValue))}}]),t}(),B=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return _createClass(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(A.a),H=n("SpAZ");function z(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?O((function(e,n){return t(e,n,r)})):H.a,R(1),n?V(e):F((function(){return new p})))}}var W=n("51Dv");function G(t){return function(e){var n=new K(t),r=e.lift(n);return n.caught=r}}var K=function(){function t(e){_classCallCheck(this,t),this.selector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Q(t,this.selector,this.caught))}}]),t}(),Q=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return _createClass(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(i){return void _get(_getPrototypeOf(n.prototype),"error",this).call(this,i)}this._unsubscribeAndRecycle();var r=new W.a(this,void 0,void 0);this.add(r),Object(m.a)(this,e,void 0,void 0,r)}}}]),n}(g.a);function Y(t){return function(e){return 0===t?Object(k.b)():e.lift(new J(t))}}var J=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new P}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new X(t,this.total))}}]),t}(),X=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(A.a);function Z(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?O((function(e,n){return t(e,n,r)})):H.a,Y(1),n?V(e):F((function(){return new p})))}}var $=n("5+tZ"),tt=function(){function t(e,n,r){_classCallCheck(this,t),this.predicate=e,this.thisArg=n,this.source=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new et(t,this.predicate,this.thisArg,this.source))}}]),t}(),et=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t)).predicate=r,a.thisArg=i,a.source=o,a.index=0,a.thisArg=i||_assertThisInitialized(a),a}return _createClass(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(A.a),nt=n("eIep"),rt=n("XUOw"),it=n("Kqap");function ot(t,e){return Object($.a)(t,e,1)}var at=n("mCNh"),st=n("quSY");function ut(t){return function(e){return e.lift(new lt(t))}}var lt=function(){function t(e){_classCallCheck(this,t),this.callback=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new ct(t,this.callback))}}]),t}(),ct=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).add(new st.a(r)),i}return n}(A.a),ht=null;function ft(){return ht}var dt,pt={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gt=function(){if(r.vb.Node)return r.vb.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}}(),mt=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"parse",value:function(t){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(t,e){return e in t}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"getProperty",value:function(t,e){return t[e]}},{key:"invoke",value:function(t,e,n){t[e].apply(t,_toConsumableArray(n))}},{key:"logError",value:function(t){window.console&&(console.error?console.error(t):console.log(t))}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"contains",value:function(t,e){return gt.call(t,e)}},{key:"querySelector",value:function(t,e){return t.querySelector(e)}},{key:"querySelectorAll",value:function(t,e){return t.querySelectorAll(e)}},{key:"on",value:function(t,e,n){t.addEventListener(e,n,!1)}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"createMouseEvent",value:function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}},{key:"createEvent",value:function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}},{key:"preventDefault",value:function(t){t.preventDefault(),t.returnValue=!1}},{key:"isPrevented",value:function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}},{key:"getInnerHTML",value:function(t){return t.innerHTML}},{key:"getTemplateContent",value:function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}},{key:"getOuterHTML",value:function(t){return t.outerHTML}},{key:"nodeName",value:function(t){return t.nodeName}},{key:"nodeValue",value:function(t){return t.nodeValue}},{key:"type",value:function(t){return t.type}},{key:"content",value:function(t){return this.hasProperty(t,"content")?t.content:t}},{key:"firstChild",value:function(t){return t.firstChild}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"parentElement",value:function(t){return t.parentNode}},{key:"childNodes",value:function(t){return t.childNodes}},{key:"childNodesAsList",value:function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n}},{key:"clearNodes",value:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"removeChild",value:function(t,e){t.removeChild(e)}},{key:"replaceChild",value:function(t,e,n){t.replaceChild(e,n)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"insertBefore",value:function(t,e,n){t.insertBefore(n,e)}},{key:"insertAllBefore",value:function(t,e,n){n.forEach((function(n){return t.insertBefore(n,e)}))}},{key:"insertAfter",value:function(t,e,n){t.insertBefore(n,e.nextSibling)}},{key:"setInnerHTML",value:function(t,e){t.innerHTML=e}},{key:"getText",value:function(t){return t.textContent}},{key:"setText",value:function(t,e){t.textContent=e}},{key:"getValue",value:function(t){return t.value}},{key:"setValue",value:function(t,e){t.value=e}},{key:"getChecked",value:function(t){return t.checked}},{key:"setChecked",value:function(t,e){t.checked=e}},{key:"createComment",value:function(t){return this.getDefaultDocument().createComment(t)}},{key:"createTemplate",value:function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createElementNS",value:function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}},{key:"createTextNode",value:function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}},{key:"createScriptTag",value:function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}},{key:"createStyleElement",value:function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}},{key:"createShadowRoot",value:function(t){return t.createShadowRoot()}},{key:"getShadowRoot",value:function(t){return t.shadowRoot}},{key:"getHost",value:function(t){return t.host}},{key:"clone",value:function(t){return t.cloneNode(!0)}},{key:"getElementsByClassName",value:function(t,e){return t.getElementsByClassName(e)}},{key:"getElementsByTagName",value:function(t,e){return t.getElementsByTagName(e)}},{key:"classList",value:function(t){return Array.prototype.slice.call(t.classList,0)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"hasClass",value:function(t,e){return t.classList.contains(e)}},{key:"setStyle",value:function(t,e,n){t.style[e]=n}},{key:"removeStyle",value:function(t,e){t.style[e]=""}},{key:"getStyle",value:function(t,e){return t.style[e]}},{key:"hasStyle",value:function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0}},{key:"tagName",value:function(t){return t.tagName}},{key:"attributeMap",value:function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e}},{key:"hasAttribute",value:function(t,e){return t.hasAttribute(e)}},{key:"hasAttributeNS",value:function(t,e,n){return t.hasAttributeNS(e,n)}},{key:"getAttribute",value:function(t,e){return t.getAttribute(e)}},{key:"getAttributeNS",value:function(t,e,n){return t.getAttributeNS(e,n)}},{key:"setAttribute",value:function(t,e,n){t.setAttribute(e,n)}},{key:"setAttributeNS",value:function(t,e,n,r){t.setAttributeNS(e,n,r)}},{key:"removeAttribute",value:function(t,e){t.removeAttribute(e)}},{key:"removeAttributeNS",value:function(t,e,n){t.removeAttributeNS(e,n)}},{key:"templateAwareRoot",value:function(t){return this.isTemplateElement(t)?this.content(t):t}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(t){return t.title}},{key:"setTitle",value:function(t,e){t.title=e||""}},{key:"elementMatches",value:function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}},{key:"isTemplateElement",value:function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}},{key:"isTextNode",value:function(t){return t.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(t){return t.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(t){return null!=t.shadowRoot&&t instanceof HTMLElement}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"importIntoDoc",value:function(t){return document.importNode(this.templateAwareRoot(t),!0)}},{key:"adoptNode",value:function(t){return document.adoptNode(t)}},{key:"getHref",value:function(t){return t.getAttribute("href")}},{key:"getEventKey",value:function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&yt.hasOwnProperty(e)&&(e=yt[e]))}return vt[e]||e}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=_t||(_t=document.querySelector("base"))?_t.getAttribute("href"):null;return null==n?null:(e=n,dt||(dt=document.createElement("a")),dt.setAttribute("href",e),"/"===dt.pathname.charAt(0)?dt.pathname:"/"+dt.pathname)}},{key:"resetBaseElement",value:function(){_t=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(t,e,n){this.setAttribute(t,"data-"+e,n)}},{key:"getData",value:function(t,e){return this.getAttribute(t,"data-"+e)}},{key:"getComputedStyle",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return getComputedStyle(t)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return Object(a.y)(document.cookie,t)}},{key:"setCookie",value:function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}},{key:"attrToPropMap",get:function(){return pt}}],[{key:"makeCurrent",value:function(){var t;t=new n,ht||(ht=t)}}]),n}(function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n),(t=e.call(this))._animationPrefix=null,t._transitionEnd=null;try{var r=t.createElement("div",document);if(null!=t.getStyle(r,"animationName"))t._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],o=0;o<i.length;o++)if(null!=t.getStyle(r,i[o]+"AnimationName")){t._animationPrefix="-"+i[o].toLowerCase()+"-";break}var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(a).forEach((function(e){null!=t.getStyle(r,e)&&(t._transitionEnd=a[e])}))}catch(s){t._animationPrefix=null,t._transitionEnd=null}return t}return _createClass(n,[{key:"getDistributedNodes",value:function(t){return t.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(t,e,n){t.href=null==n?e:e+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),n}(function(){function t(){_classCallCheck(this,t),this.resourceLoaderType=null}return _createClass(t,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t}}]),t}())),_t=null;function bt(){return!!window.history.pushState}var wt=new r.o("TRANSITION_ID"),Ct=[{provide:r.d,useFactory:function(t,e,n){return function(){n.get(r.e).donePromise.then((function(){var n=ft();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter((function(e){return n.getAttribute(e,"ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[wt,a.c,r.p],multi:!0}],kt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){r.vb.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.vb.getAllAngularTestabilities=function(){return t.getAllTestabilities()},r.vb.getAllAngularRootElements=function(){return t.getAllRootElements()},r.vb.frameworkStabilizers||(r.vb.frameworkStabilizers=[]),r.vb.frameworkStabilizers.push((function(t){var e=r.vb.getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach((function(t){t.whenStable(o)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?ft().isShadowRoot(e)?this.findTestabilityInTree(t,ft().getHost(e),!0):this.findTestabilityInTree(t,ft().parentElement(e),!0):null}}],[{key:"init",value:function(){Object(r.Y)(new t)}}]),t}();function Et(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r.vb.ng=r.vb.ng||{})[t]=e)}var St={ApplicationRef:r.g,NgZone:r.x};function Tt(t){return Object(r.U)(t)}var It=new r.o("EventManagerPlugins"),At=function(){function t(e,n){var r=this;_classCallCheck(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=r})),this._plugins=e.slice().reverse()}return _createClass(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event ".concat(t))}}]),t}(),Ot=function(){function t(e){_classCallCheck(this,t),this._doc=e}return _createClass(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=ft().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),xt=function(){function t(){_classCallCheck(this,t),this._stylesSet=new Set}return _createClass(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}(),Nt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return ft().remove(t)}))}}]),n}(xt),Dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Pt=/%COMP%/g;function Rt(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Rt(t,i,n):(i=i.replace(Pt,t),n.push(i))}return n}function Mt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Lt=function(){function t(e,n,r){_classCallCheck(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new jt(e)}return _createClass(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.P.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Vt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case r.P.Native:case r.P.ShadowDom:return new qt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=Rt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}(),jt=function(){function t(e){_classCallCheck(this,t),this.eventManager=e,this.data=Object.create(null)}return _createClass(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Dt[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=Dt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=Dt[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,i){i&r.E.DashCase?t.style.setProperty(e,n,i&r.E.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&r.E.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){Ut(e,"property"),t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return Ut(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Mt(n)):this.eventManager.addEventListener(t,e,Mt(n))}}]),t}(),Ft="@".charCodeAt(0);function Ut(t,e){if(t.charCodeAt(0)===Ft)throw new Error("Found the synthetic ".concat(e," ").concat(t,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var Vt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;_classCallCheck(this,n),(a=e.call(this,t)).component=i;var s,u=Rt(o+"-"+i.id,i.styles,[]);return r.addStyles(u),a.contentAttr="_ngcontent-%COMP%".replace(Pt,o+"-"+i.id),a.hostAttr=(s=o+"-"+i.id,"_nghost-%COMP%".replace(Pt,s)),a}return _createClass(n,[{key:"applyToHost",value:function(t){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,t,e);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(jt),qt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a){var s;_classCallCheck(this,n),(s=e.call(this,t)).sharedStylesHost=i,s.hostEl=o,s.component=a,s.shadowRoot=a.encapsulation===r.P.ShadowDom?o.attachShadow({mode:"open"}):o.createShadowRoot(),s.sharedStylesHost.addHost(s.shadowRoot);for(var u=Rt(a.id,a.styles,[]),l=0;l<u.length;l++){var c=document.createElement("style");c.textContent=u[l],s.shadowRoot.appendChild(c)}return s}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(jt),Bt="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Ht=Bt("addEventListener"),zt=Bt("removeEventListener"),Wt={},Gt="__zone_symbol__propagationStopped",Kt=function(){var t="undefined"!=typeof Zone&&Zone[Bt("BLACK_LISTED_EVENTS")];if(t){var e={};return t.forEach((function(t){e[t]=t})),e}}(),Qt=function(t){return!!Kt&&Kt.hasOwnProperty(t)},Yt=function(t){var e=Wt[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length){var i=n[0];return i.zone!==Zone.current?i.zone.run(i.handler,this,r):i.handler.apply(this,r)}for(var o=n.slice(),a=0;a<o.length&&!0!==t[Gt];a++){var s=o[a];s.zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},Jt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).ngZone=r,i&&Object(a.t)(i)||o.patchEvent(),o}return _createClass(n,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Gt]=!0),t&&t.apply(this,arguments)}}}},{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var i=this,o=n;if(!t[Ht]||r.x.isInAngularZone()&&!Qt(e))t.addEventListener(e,o,!1);else{var a=Wt[e];a||(a=Wt[e]=Bt("ANGULAR"+e+"FALSE"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var l=Qt(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:o});else{for(var c=!1,h=0;h<s.length;h++)if(s[h].handler===o){c=!0;break}c||s.push({zone:l,handler:o})}u||t[Ht](e,Yt,!1)}return function(){return i.removeEventListener(t,e,o)}}},{key:"removeEventListener",value:function(t,e,n){var r=t[zt];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=Wt[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,Yt,!1]):t.removeEventListener.apply(t,[e,n,!1])}}]),n}(Ot),Xt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Zt=new r.o("HammerGestureConfig"),$t=new r.o("HammerLoader"),te=function(){function t(){_classCallCheck(this,t),this.events=[],this.overrides={}}return _createClass(t,[{key:"buildHammer",value:function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e}}]),t}(),ee=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t))._config=r,a.console=i,a.loader=o,a}return _createClass(n,[{key:"supports",value:function(t){return!(!Xt.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(t,'" event cannot be bound because Hammer.JS is not ')+"loaded and no custom loader has been specified."),1))}},{key:"addEventListener",value:function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(t,e,n))})).catch((function(){r.console.warn('The "'.concat(e,'" event cannot be bound because the custom ')+"Hammer.JS loader failed."),a=function(){}})),function(){a()}}return i.runOutsideAngular((function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded((function(){n(t)}))};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}}))}},{key:"isCustomEvent",value:function(t){return this._config.events.indexOf(t)>-1}}]),n}(Ot),ne=["alt","control","meta","shift"],re={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},ie=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return ft().onAndCancel(t,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(ne.forEach((function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")})),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=ft().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ne.forEach((function(r){r!=n&&(0,re[r])(t)&&(e+=r+".")})),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded((function(){return e(i)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(Ot),oe=function t(){_classCallCheck(this,t)},ae=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r}return _createClass(n,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case r.G.NONE:return e;case r.G.HTML:return e instanceof ue?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(r.eb)(this._doc,String(e)));case r.G.STYLE:return e instanceof le?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(r.fb)(e));case r.G.SCRIPT:if(e instanceof ce)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.G.URL:return e instanceof fe||e instanceof he?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(r.gb)(String(e)));case r.G.RESOURCE_URL:if(e instanceof fe)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(t,e){if(t instanceof se)throw new Error("Required a safe ".concat(e,", got a ").concat(t.getTypeName()," ")+"(see http://g.co/ng/security#xss)")}},{key:"bypassSecurityTrustHtml",value:function(t){return new ue(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return new le(t)}},{key:"bypassSecurityTrustScript",value:function(t){return new ce(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return new he(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return new fe(t)}}]),n}(oe),se=function(){function t(e){_classCallCheck(this,t),this.changingThisBreaksApplicationSecurity=e}return _createClass(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),t}(),ue=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(se),le=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(se),ce=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(se),he=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(se),fe=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(se),de=[{provide:r.z,useValue:a.w},{provide:r.A,useValue:function(){mt.makeCurrent(),kt.init()},multi:!0},{provide:a.q,useClass:function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=ft().getLocation(),this._history=ft().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return ft().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){ft().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){ft().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"pushState",value:function(t,e,n){bt()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){bt()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(a.q),deps:[a.c]},{provide:a.c,useFactory:function(){return document},deps:[]}],pe=Object(r.R)(r.X,"browser",de);function ve(){return new r.l}var ye=function(){function t(e){if(_classCallCheck(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:wt,useExisting:r.c},Ct]}}}]),t}();"undefined"!=typeof window&&window;var ge=function t(e,n){_classCallCheck(this,t),this.id=e,this.url=n},me=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(ge),_e=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(ge),be=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).reason=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(ge),we=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).error=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(ge),Ce=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(ge),ke=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(ge),Ee=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s.shouldActivate=a,s}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(ge),Se=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(ge),Te=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(ge),Ie=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Ae=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),Oe=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),xe=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Ne=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),De=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Pe=function(){function t(e,n,r){_classCallCheck(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return _createClass(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),Re=function t(){_classCallCheck(this,t)},Me=function(){function t(e){_classCallCheck(this,t),this.params=e||{}}return _createClass(t,[{key:"has",value:function(t){return this.params.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function Le(t){return new Me(t)}function je(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Fe(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var Ue=function t(e,n){_classCallCheck(this,t),this.routes=e,this.module=n};function Ve(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];qe(r,Be(e,r))}}function qe(t,e){if(!t)throw new Error("\n      Invalid configuration of route '".concat(e,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(t))throw new Error("Invalid configuration of route '".concat(e,"': Array cannot be specified"));if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error("Invalid configuration of route '".concat(e,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and children cannot be used together"));if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and loadChildren cannot be used together"));if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': children and loadChildren cannot be used together"));if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and component cannot be used together"));if(t.path&&t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': path and matcher cannot be used together"));if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': routes must have either a path or a matcher specified"));if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '".concat(e,"': path cannot start with a slash"));if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(e,'", redirectTo: "').concat(t.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '".concat(e,"': pathMatch can only be set to 'prefix' or 'full'"));t.children&&Ve(t.children,e)}function Be(t,e){return e?t||e.path?t&&!e.path?"".concat(t,"/"):!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function He(t){var e=t.children&&t.children.map(He),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Re),n}function ze(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function We(t){return Array.prototype.concat.apply([],t)}function Ge(t){return t.length>0?t[t.length-1]:null}function Ke(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Qe(t){return Object(r.xb)(t)?t:Object(r.yb)(t)?Object(u.a)(Promise.resolve(t)):Object(s.a)(t)}function Ye(t,e,n){return n?function(t,e){return ze(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!$e(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!$e(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!$e(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!$e(n.segments,a)&&!!n.children.primary&&e(n.children.primary,r,s)}(e,n,n.segments)}(t.root,e.root)}var Je=function(){function t(e,n,r){_classCallCheck(this,t),this.root=e,this.queryParams=n,this.fragment=r}return _createClass(t,[{key:"toString",value:function(){return rn.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Le(this.queryParams)),this._queryParamMap}}]),t}(),Xe=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.segments=e,this.children=n,this.parent=null,Ke(n,(function(t,e){return t.parent=r}))}return _createClass(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return on(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),t}(),Ze=function(){function t(e,n){_classCallCheck(this,t),this.path=e,this.parameters=n}return _createClass(t,[{key:"toString",value:function(){return hn(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Le(this.parameters)),this._parameterMap}}]),t}();function $e(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function tn(t,e){var n=[];return Ke(t.children,(function(t,r){"primary"===r&&(n=n.concat(e(t,r)))})),Ke(t.children,(function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))})),n}var en=function t(){_classCallCheck(this,t)},nn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"parse",value:function(t){var e=new yn(t);return new Je(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){var e,n,r;return"".concat("/".concat(function t(e,n){if(!e.hasChildren())return on(e);if(n){var r=e.children.primary?t(e.children.primary,!1):"",i=[];return Ke(e.children,(function(e,n){"primary"!==n&&i.push("".concat(n,":").concat(t(e,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=tn(e,(function(n,r){return"primary"===r?[t(e.children.primary,!1)]:["".concat(r,":").concat(t(n,!1))]}));return"".concat(on(e),"/(").concat(o.join("//"),")")}(t.root,!0)),(n=t.queryParams,r=Object.keys(n).map((function(t){var e=n[t];return Array.isArray(e)?e.map((function(e){return"".concat(sn(t),"=").concat(sn(e))})).join("&"):"".concat(sn(t),"=").concat(sn(e))})),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof t.fragment?"#".concat((e=t.fragment,encodeURI(e))):"")}}]),t}(),rn=new nn;function on(t){return t.segments.map((function(t){return hn(t)})).join("/")}function an(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sn(t){return an(t).replace(/%3B/gi,";")}function un(t){return an(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ln(t){return decodeURIComponent(t)}function cn(t){return ln(t.replace(/\+/g,"%20"))}function hn(t){return"".concat(un(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(un(t),"=").concat(un(e[t]))})).join("")));var e}var fn=/^[^\/()?;=#]+/;function dn(t){var e=t.match(fn);return e?e[0]:""}var pn=/^[^=?&#]+/,vn=/^[^?&#]+/,yn=function(){function t(e){_classCallCheck(this,t),this.url=e,this.remaining=e}return _createClass(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Xe(t,e)),n}},{key:"parseSegment",value:function(){var t=dn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Ze(ln(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=dn(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=dn(this.remaining);r&&(n=r,this.capture(n))}t[ln(e)]=ln(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(pn);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(vn);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=cn(e),o=cn(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=dn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Xe([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),gn=function(){function t(e){_classCallCheck(this,t),this._root=e}return _createClass(t,[{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=mn(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=mn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=_n(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return _n(t,this._root).map((function(t){return t.value}))}},{key:"root",get:function(){return this._root.value}}]),t}();function mn(t,e){if(t===e.value)return e;var n,r=_createForOfIteratorHelper(e.children);try{for(r.s();!(n=r.n()).done;){var i=mn(t,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function _n(t,e){if(t===e.value)return[e];var n,r=_createForOfIteratorHelper(e.children);try{for(r.s();!(n=r.n()).done;){var i=_n(t,n.value);if(i.length)return i.unshift(e),i}}catch(o){r.e(o)}finally{r.f()}return[]}var bn=function(){function t(e,n){_classCallCheck(this,t),this.value=e,this.children=n}return _createClass(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function wn(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var Cn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).snapshot=r,An(_assertThisInitialized(i),t),i}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(gn);function kn(t,e){var n=function(t,e){var n=new Tn([],{},{},"",{},"primary",e,null,t.root,-1,{});return new In("",new bn(n,[]))}(t,e),r=new h([new Ze("",{})]),i=new h({}),o=new h({}),a=new h({}),s=new h(""),u=new En(r,i,a,s,o,"primary",e,n.root);return u.snapshot=n.root,new Cn(new bn(u,[]),n)}var En=function(){function t(e,n,r,i,o,a,s,u){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _createClass(t,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(S.a)((function(t){return Le(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(S.a)((function(t){return Le(t)})))),this._queryParamMap}}]),t}();function Sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Tn=function(){function t(e,n,r,i,o,a,s,u,l,c,h){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}return _createClass(t,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Le(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Le(this.queryParams)),this._queryParamMap}}]),t}(),In=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,r)).url=t,An(_assertThisInitialized(i),r),i}return _createClass(n,[{key:"toString",value:function(){return On(this._root)}}]),n}(gn);function An(t,e){e.value._routerState=t,e.children.forEach((function(e){return An(t,e)}))}function On(t){var e=t.children.length>0?" { ".concat(t.children.map(On).join(", ")," } "):"";return"".concat(t.value).concat(e)}function xn(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Nn(t,e){var n,r;return ze(t.params,e.params)&&$e(n=t.url,r=e.url)&&n.every((function(t,e){return ze(t.parameters,r[e].parameters)}))&&!(!t.parent!=!e.parent)&&(!t.parent||Nn(t.parent,e.parent))}function Dn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pn(t,e,n,r,i){var o={};return r&&Ke(r,(function(t,e){o[e]=Array.isArray(t)?t.map((function(t){return"".concat(t)})):"".concat(t)})),new Je(n.root===t?e:function t(e,n,r){var i={};return Ke(e.children,(function(e,o){i[o]=e===n?r:t(e,n,r)})),new Xe(e.segments,i)}(n.root,t,e),o,i)}var Rn=function(){function t(e,n,r){if(_classCallCheck(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Dn(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(t){return"object"==typeof t&&null!=t&&t.outlets}));if(i&&i!==Ge(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),Mn=function t(e,n,r){_classCallCheck(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function Ln(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:"".concat(t)}function jn(t,e,n){if(t||(t=new Xe([],{})),0===t.segments.length&&t.hasChildren())return Fn(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=Ln(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Bn(s,u,a))return o;r+=2}else{if(!Bn(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new Xe(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new Xe(t.segments.slice(r.pathIndex),t.children),Fn(o,0,i)}return r.match&&0===i.length?new Xe(t.segments,{}):r.match&&!t.hasChildren()?Un(t,e,n):r.match?Fn(t,0,i):Un(t,e,n)}function Fn(t,e,n){if(0===n.length)return new Xe(t.segments,{});var r=function(t){return"object"!=typeof t[0]?{primary:t}:void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return Ke(r,(function(n,r){null!==n&&(i[r]=jn(t.children[r],e,n))})),Ke(t.children,(function(t,e){void 0===r[e]&&(i[e]=t)})),new Xe(t.segments,i)}function Un(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=Vn(n[i].outlets);return new Xe(r,o)}if(0===i&&Dn(n[0]))r.push(new Ze(t.segments[e].path,n[0])),i++;else{var a=Ln(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Dn(s)?(r.push(new Ze(a,qn(s))),i+=2):(r.push(new Ze(a,{})),i++)}}return new Xe(r,{})}function Vn(t){var e={};return Ke(t,(function(t,n){null!==t&&(e[n]=Un(new Xe([],{}),0,t))})),e}function qn(t){var e={};return Ke(t,(function(t,n){return e[n]="".concat(t)})),e}function Bn(t,e,n){return t==n.path&&ze(e,n.parameters)}var Hn=function(){function t(e,n,r,i){_classCallCheck(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),xn(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=wn(e);t.children.forEach((function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]})),Ke(i,(function(t,e){r.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=wn(t),o=t.value.component?r.children:e;Ke(i,(function(t,e){return n.deactivateRouteAndItsChildren(t,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=wn(e);t.children.forEach((function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new De(t.value.snapshot))})),t.children.length&&this.forwardEvent(new xe(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(xn(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),zn(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),l=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=l,a.outlet&&a.outlet.activateWith(r,l),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function zn(t){xn(t.value),t.children.forEach(zn)}function Wn(t){return"function"==typeof t}function Gn(t){return t instanceof Je}var Kn=function t(e){_classCallCheck(this,t),this.segmentGroup=e||null},Qn=function t(e){_classCallCheck(this,t),this.urlTree=e};function Yn(t){return new f.a((function(e){return e.error(new Kn(t))}))}function Jn(t){return new f.a((function(e){return e.error(new Qn(t))}))}function Xn(t){return new f.a((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var Zn=function(){function t(e,n,i,o,a){_classCallCheck(this,t),this.configLoader=n,this.urlSerializer=i,this.urlTree=o,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(r.v)}return _createClass(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(S.a)((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(G((function(e){if(e instanceof Qn)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Kn)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(S.a)((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(G((function(t){if(t instanceof Kn)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new Xe([],{primary:t}):t;return new Je(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(S.a)((function(t){return new Xe([],t)}))):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(s.a)({});var o=[],a=[],u={};return Ke(n,(function(n,i){var s=function(n,i){return r.expandSegmentGroup(t,e,i,n)}(i,n).pipe(Object(S.a)((function(t){return u[i]=t})));"primary"===i?o.push(s):a.push(s)})),s.a.apply(null,o.concat(a)).pipe(I(),z(),Object(S.a)((function(){return u})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,r,i,o){var a=this;return Object(s.a).apply(void 0,_toConsumableArray(n)).pipe(Object(S.a)((function(u){return a.expandSegmentAgainstRoute(t,e,n,u,r,i,o).pipe(G((function(t){if(t instanceof Kn)return Object(s.a)(null);throw t})))})),I(),Z((function(t){return!!t})),G((function(t,n){if(t instanceof p||"EmptyError"===t.name){if(a.noLeftoversInUrl(e,r,i))return Object(s.a)(new Xe([],{}));throw new Kn(e)}throw t})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return nr(r)!==o?Yn(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Yn(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Jn(o):this.lineralizeSegments(n,o).pipe(Object($.a)((function(n){var o=new Xe(n,{});return i.expandSegment(t,o,e,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=$n(e,r,i),u=s.matched,l=s.consumedSegments,c=s.lastChild,h=s.positionalParamSegments;if(!u)return Yn(e);var f=this.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?Jn(f):this.lineralizeSegments(r,f).pipe(Object($.a)((function(r){return a.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(S.a)((function(t){return n._loadedConfig=t,new Xe(r,{})}))):Object(s.a)(new Xe(r,{}));var o=$n(e,n,r),a=o.matched,u=o.consumedSegments,l=o.lastChild;if(!a)return Yn(e);var c=r.slice(l);return this.getChildConfig(t,n,r).pipe(Object($.a)((function(t){var n=t.module,r=t.routes,o=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some((function(n){return er(t,e,n)&&"primary"!==nr(n)}))}(t,n,r)?{segmentGroup:tr(new Xe(e,function(t,e){var n={};n.primary=e;var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;""===o.path&&"primary"!==nr(o)&&(n[nr(o)]=new Xe([],{}))}}catch(a){i.e(a)}finally{i.f()}return n}(r,new Xe(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some((function(n){return er(t,e,n)}))}(t,n,r)?{segmentGroup:tr(new Xe(t.segments,function(t,e,n,r){var i,o={},a=_createForOfIteratorHelper(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;er(t,e,s)&&!r[nr(s)]&&(o[nr(s)]=new Xe([],{}))}}catch(u){a.e(u)}finally{a.f()}return Object.assign({},r,o)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,u,c,r),a=o.segmentGroup,l=o.slicedSegments;return 0===l.length&&a.hasChildren()?i.expandChildren(n,r,a).pipe(Object(S.a)((function(t){return new Xe(u,t)}))):0===r.length&&0===l.length?Object(s.a)(new Xe(u,{})):i.expandSegment(n,a,r,l,"primary",!0).pipe(Object(S.a)((function(t){return new Xe(u.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(s.a)(new Ue(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(s.a)(e._loadedConfig):function(t,e,n){var r,i=e.canLoad;return i&&0!==i.length?Object(u.a)(i).pipe(Object(S.a)((function(r){var i,o=t.get(r);if(function(t){return t&&Wn(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Wn(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return Qe(i)}))).pipe(I(),(r=function(t){return!0===t},function(t){return t.lift(new tt(r,void 0,t))})):Object(s.a)(!0)}(t.injector,e,n).pipe(Object($.a)((function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(S.a)((function(t){return e._loadedConfig=t,t}))):function(t){return new f.a((function(e){return e.error(je("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):Object(s.a)(new Ue([],t))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(s.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Xn(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Je(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return Ke(t,(function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return Ke(e.children,(function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)})),new Xe(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map((function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(r),o;r++}}catch(a){i.e(a)}finally{i.f()}return t}}]),t}();function $n(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||Fe)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function tr(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new Xe(t.segments.concat(e.segments),e.children)}return t}function er(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function nr(t){return t.outlet||"primary"}var rr=function t(e){_classCallCheck(this,t),this.path=e,this.route=this.path[this.path.length-1]},ir=function t(e,n){_classCallCheck(this,t),this.component=e,this.route=n};function or(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ar(t,e,n){var r=wn(t),i=t.value;Ke(r,(function(t,r){ar(t,i.component?e?e.children.getContext(r):null:e,n)})),n.canDeactivateChecks.push(new ir(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var sr=Symbol("INITIAL_VALUE");function ur(){return Object(nt.a)((function(t){return(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=null,i=null;return Object(v.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(y.a)(e[0])&&(e=e[0]),Object(_.a)(e,i).lift(new w(r))}).apply(void 0,_toConsumableArray(t.map((function(t){return t.pipe(Y(1),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n=e[e.length-1];Object(v.a)(n)?e.pop():n=null;var r=e.length;return function(){return I()(Object(s.a).apply(void 0,arguments))}(1!==r||n?r>0?Object(_.a)(e,n):Object(k.b)(n):Object(rt.a)(e[0]),t)}}(sr))})))).pipe(Object(it.a)((function(t,e){var n=!1;return e.reduce((function(t,r,i){if(t!==sr)return t;if(r===sr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Gn(r))return r}return t}),t)}),sr),O((function(t){return t!==sr})),Object(S.a)((function(t){return Gn(t)?t:!0===t})),Y(1))}))}function lr(t,e){return null!==t&&e&&e(new Ne(t)),Object(s.a)(!0)}function cr(t,e){return null!==t&&e&&e(new Oe(t)),Object(s.a)(!0)}function hr(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(s.a)(!0);var i=r.map((function(r){return E((function(){var i,o=or(r,e,n);if(function(t){return t&&Wn(t.canActivate)}(o))i=Qe(o.canActivate(e,t));else{if(!Wn(o))throw new Error("Invalid CanActivate guard");i=Qe(o(e,t))}return i.pipe(Z())}))}));return Object(s.a)(i).pipe(ur())}function fr(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return E((function(){var i=e.guards.map((function(i){var o,a=or(i,e.node,n);if(function(t){return t&&Wn(t.canActivateChild)}(a))o=Qe(a.canActivateChild(r,t));else{if(!Wn(a))throw new Error("Invalid CanActivateChild guard");o=Qe(a(r,t))}return o.pipe(Z())}));return Object(s.a)(i).pipe(ur())}))}));return Object(s.a)(i).pipe(ur())}var dr=function t(){_classCallCheck(this,t)},pr=function(){function t(e,n,r,i,o,a){_classCallCheck(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _createClass(t,[{key:"recognize",value:function(){try{var t=gr(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Tn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new bn(n,e),i=new In(this.url,r);return this.inheritParamsAndData(i._root),Object(s.a)(i)}catch(o){return new f.a((function(t){return t.error(o)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=Sn(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,r=this,i=tn(e,(function(e,n){return r.processSegmentGroup(t,e,n)}));return n={},i.forEach((function(t){var e=n[t.value.outlet];if(e){var r=e.url.map((function(t){return t.toString()})).join("/"),i=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[t.value.outlet]=t.value})),i.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),i}},{key:"processSegment",value:function(t,e,n,r){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;try{return this.processSegmentAgainstRoute(a,e,n,r)}catch(s){if(!(s instanceof dr))throw s}}}catch(u){o.e(u)}finally{o.f()}if(this.noLeftoversInUrl(e,n,r))return[];throw new dr}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo)throw new dr;if((t.outlet||"primary")!==r)throw new dr;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?Ge(n).parameters:{};i=new Tn(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,br(t),r,t.component,t,vr(e),yr(e)+n.length,wr(t))}else{var u=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new dr;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||Fe)(n,t,e);if(!r)throw new dr;var i={};Ke(r.posParams,(function(t,e){i[e]=t.path}));var o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=u.consumedSegments,a=n.slice(u.lastChild),i=new Tn(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,br(t),r,t.component,t,vr(e),yr(e)+o.length,wr(t))}var l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),c=gr(e,o,a,l,this.relativeLinkResolution),h=c.segmentGroup,f=c.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(l,h);return[new bn(i,d)]}if(0===l.length&&0===f.length)return[new bn(i,[])];var p=this.processSegment(l,h,f,"primary");return[new bn(i,p)]}}]),t}();function vr(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function yr(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function gr(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some((function(n){return mr(t,e,n)&&"primary"!==_r(n)}))}(t,n,r)){var o=new Xe(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o,a=_createForOfIteratorHelper(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(""===s.path&&"primary"!==_r(s)){var u=new Xe([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[_r(s)]=u}}}catch(l){a.e(l)}finally{a.f()}return i}(t,e,r,new Xe(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some((function(n){return mr(t,e,n)}))}(t,n,r)){var a=new Xe(t.segments,function(t,e,n,r,i,o){var a,s={},u=_createForOfIteratorHelper(r);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(mr(t,n,l)&&!i[_r(l)]){var c=new Xe([],{});c._sourceSegment=t,c._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[_r(l)]=c}}}catch(h){u.e(h)}finally{u.f()}return Object.assign({},i,s)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}var s=new Xe(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function mr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function _r(t){return t.outlet||"primary"}function br(t){return t.data||{}}function wr(t){return t.resolve||{}}function Cr(t,e,n,r){var i=or(t,e,r);return Qe(i.resolve?i.resolve(e,n):i(e,n))}function kr(t){return function(e){return e.pipe(Object(nt.a)((function(e){var n=t(e);return n?Object(u.a)(n).pipe(Object(S.a)((function(){return e}))):Object(u.a)([e])})))}}var Er=function t(){_classCallCheck(this,t)},Sr=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}(),Tr=new r.o("ROUTES"),Ir=function(){function t(e,n,r,i){_classCallCheck(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(S.a)((function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Ue(We(i.injector.get(Tr)).map(He),i)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object(u.a)(this.loader.load(t)):Qe(t()).pipe(Object($.a)((function(t){return t instanceof r.t?Object(s.a)(t):Object(u.a)(e.compiler.compileModuleAsync(t))})))}}]),t}(),Ar=function t(){_classCallCheck(this,t)},Or=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function xr(t){throw t}function Nr(t,e,n){return e.parse("/")}function Dr(t,e){return Object(s.a)(null)}var Pr=function(){function t(e,n,i,o,a,s,u,c){var f=this;_classCallCheck(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=i,this.location=o,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new l.a,this.errorHandler=xr,this.malformedUriErrorHandler=Nr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Dr,afterPreactivation:Dr},this.urlHandlingStrategy=new Or,this.routeReuseStrategy=new Sr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=a.get(r.v),this.console=a.get(r.bb);var d=a.get(r.x);this.isNgZoneEnabled=d instanceof r.x,this.resetConfig(c),this.currentUrlTree=new Je(new Xe([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ir(s,u,(function(t){return f.triggerEvent(new Ie(t))}),(function(t){return f.triggerEvent(new Ae(t))})),this.routerState=kn(this.currentUrlTree,this.rootComponentType),this.transitions=new h({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(O((function(t){return 0!==t.id})),Object(S.a)((function(t){return Object.assign({},t,{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})})),Object(nt.a)((function(t){var r,i,o,a=!1,l=!1;return Object(s.a)(t).pipe(Object(j.a)((function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign({},e.lastSuccessfulNavigation,{previousNavigation:null}):null}})),Object(nt.a)((function(t){var r,i,o,a,u=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||u)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(s.a)(t).pipe(Object(nt.a)((function(t){var r=e.transitions.getValue();return n.next(new me(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?k.a:[t]})),Object(nt.a)((function(t){return Promise.resolve(t)})),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,a=e.config,function(t){return t.pipe(Object(nt.a)((function(t){return function(t,e,n,r,i){return new Zn(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe(Object(S.a)((function(e){return Object.assign({},t,{urlAfterRedirects:e})})))})))}),Object(j.a)((function(t){e.currentNavigation=Object.assign({},e.currentNavigation,{finalUrl:t.urlAfterRedirects})})),function(t,n,r,i,o){return function(r){return r.pipe(Object($.a)((function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new pr(t,e,n,r,i,o).recognize()}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe(Object(S.a)((function(t){return Object.assign({},r,{targetSnapshot:t})})));var a})))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Object(j.a)((function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),Object(j.a)((function(t){var r=new Ce(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)})));if(u&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var l=t.id,c=t.extractedUrl,h=t.source,f=t.restoredState,d=t.extras,p=new me(l,e.serializeUrl(c),h,f);n.next(p);var v=kn(c,e.rootComponentType).snapshot;return Object(s.a)(Object.assign({},t,{targetSnapshot:v,urlAfterRedirects:c,extras:Object.assign({},d,{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),k.a})),kr((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(j.a)((function(t){var n=new ke(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),Object(S.a)((function(t){return Object.assign({},t,{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,o=n._root,function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=wn(n);return e.children.forEach((function(e){!function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,s=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!$e(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$e(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nn(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Nn(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new rr(i)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,n,a.component?u?u.children:null:r,i,o),l&&o.canDeactivateChecks.push(new ir(u&&u.outlet&&u.outlet.component||null,s))}else s&&ar(n,u,o),o.canActivateChecks.push(new rr(i)),t(e,null,a.component?u?u.children:null:r,i,o)}(e,a[e.value.outlet],r,i.concat([e.value]),o),delete a[e.value.outlet]})),Ke(a,(function(t,e){return ar(t,r.getContext(e),o)})),o}(o,r?r._root:null,i,[o.value]))});var n,r,i,o})),function(t,e){return function(n){return n.pipe(Object($.a)((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,l=o.canDeactivateChecks;return 0===l.length&&0===a.length?Object(s.a)(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return Object(u.a)(t).pipe(Object($.a)((function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(s.a)(!0);var a=o.map((function(o){var a,s=or(o,e,i);if(function(t){return t&&Wn(t.canDeactivate)}(s))a=Qe(s.canDeactivate(t,e,n,r));else{if(!Wn(s))throw new Error("Invalid CanDeactivate guard");a=Qe(s(t,e,n,r))}return a.pipe(Z())}));return Object(s.a)(a).pipe(ur())}(t.component,t.route,n,e,r)})),Z((function(t){return!0!==t}),!0))}(l,r,i,t).pipe(Object($.a)((function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object(u.a)(e).pipe(ot((function(e){return Object(u.a)([cr(e.route.parent,r),lr(e.route,r),fr(t,e.path,n),hr(t,e.route,n)]).pipe(I(),Z((function(t){return!0!==t}),!0))})),Z((function(t){return!0!==t}),!0))}(r,a,t,e):Object(s.a)(n)})),Object(S.a)((function(t){return Object.assign({},n,{guardsResult:t})})))})))}}(e.ngModule.injector,(function(t){return e.triggerEvent(t)})),Object(j.a)((function(t){if(Gn(t.guardsResult)){var n=je('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}})),Object(j.a)((function(t){var n=new Ee(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)})),O((function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new be(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0})),kr((function(t){if(t.guards.canActivateChecks.length)return Object(s.a)(t).pipe(Object(j.a)((function(t){var n=new Se(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),(n=e.paramsInheritanceStrategy,r=e.ngModule.injector,function(t){return t.pipe(Object($.a)((function(t){var e=t.targetSnapshot,i=t.guards.canActivateChecks;return i.length?Object(u.a)(i).pipe(ot((function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(s.a)({});if(1===i.length){var o=i[0];return Cr(t[o],e,n,r).pipe(Object(S.a)((function(t){return _defineProperty({},o,t)})))}var a={};return Object(u.a)(i).pipe(Object($.a)((function(i){return Cr(t[i],e,n,r).pipe(Object(S.a)((function(t){return a[i]=t,t})))}))).pipe(z(),Object(S.a)((function(){return a})))}(t._resolve,t,e,r).pipe(Object(S.a)((function(e){return t._resolvedData=e,t.data=Object.assign({},t.data,Sn(t,n).resolve),null})))}(t.route,e,n,r)})),function(t,e){return arguments.length>=2?function(n){return Object(at.a)(Object(it.a)(t,e),R(1),V(e))(n)}:function(e){return Object(at.a)(Object(it.a)((function(e,n,r){return t(e,n,r+1)})),R(1))(e)}}((function(t,e){return t})),Object(S.a)((function(e){return t}))):Object(s.a)(t)})))}),Object(j.a)((function(t){var n=new Te(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})));var n,r})),kr((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(S.a)((function(t){var n=function(t,e,n){var r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var o=function(e,n,r){return n.children.map((function(n){var i,o=_createForOfIteratorHelper(r.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(e.shouldReuseRoute(a.value.snapshot,n.value))return t(e,n,a)}}catch(s){o.e(s)}finally{o.f()}return t(e,n)}))}(e,n,r);return new bn(i,o)}var a=e.retrieve(n.value);if(a){var s=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var u,l=new En(new h((u=n.value).url),new h(u.params),new h(u.queryParams),new h(u.fragment),new h(u.data),u.outlet,u.component,u),c=n.children.map((function(n){return t(e,n)}));return new bn(l,c)}(t,e._root,n?n._root:void 0);return new Cn(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:n})})),Object(j.a)((function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),(r=e.rootContexts,i=e.routeReuseStrategy,o=function(t){return e.triggerEvent(t)},Object(S.a)((function(t){return new Hn(i,t.targetRouterState,t.currentRouterState,o).activate(r),t}))),Object(j.a)({next:function(){a=!0},complete:function(){a=!0}}),ut((function(){if(!a&&!l){e.resetUrlToCurrentUrlTree();var r=new be(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null})),G((function(r){if(l=!0,(s=r)&&s.ngNavigationCancelingError){var i=Gn(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new be(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),t.resolve(!1),i&&e.navigateByUrl(r.url)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new we(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(u){t.reject(u)}}var s;return k.a})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign({},this.getTransition(),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout((function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){Ve(t),this.config=t.map(He),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,i=e.queryParams,o=e.fragment,a=e.preserveQueryParams,s=e.queryParamsHandling,u=e.preserveFragment;Object(r.W)()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=n||this.routerState.root,c=u?this.currentUrlTree.fragment:o,h=null;if(s)switch(s){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=a?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Pn(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Rn(!0,0,t);var e=0,n=!1,r=t.reduce((function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return Ke(r.outlets,(function(t,e){o[e]="string"==typeof t?t.split("/"):t})),[].concat(_toConsumableArray(t),[{outlets:o}])}if(r.segmentPath)return[].concat(_toConsumableArray(t),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(t),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))})),t):[].concat(_toConsumableArray(t),[r])}),[]);return new Rn(n,e,r)}(n);if(o.toRoot())return Pn(e.root,new Xe([],{}),e,r,i);var a=function(t,e,n){if(t.isAbsolute)return new Mn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Mn(n.snapshot._urlSegment,!0,0);var r=Dn(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Mn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),s=a.processChildren?Fn(a.segmentGroup,a.index,o.commands):jn(a.segmentGroup,a.index,o.commands);return Pn(a.segmentGroup,s,e,r,i)}(l,this.currentUrlTree,t,h,c)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Object(r.W)()&&this.isNgZoneEnabled&&!r.x.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Gn(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(Gn(t))return Ye(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Ye(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&(e[n]=r),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new _e(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,r){var i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise((function(t,e){o=t,a=e})),u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),t}(),Rr=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.router=e,this.route=n,this.commands=[],null==r&&i.setAttribute(o.nativeElement,"tabindex","0")}return _createClass(t,[{key:"onClick",value:function(){var t={skipLocationChange:Lr(this.skipLocationChange),replaceUrl:Lr(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(r.W)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Lr(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Lr(this.preserveFragment)})}}]),t}(),Mr=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=e.events.subscribe((function(t){t instanceof _e&&i.updateTargetUrlAndHref()}))}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:Lr(this.skipLocationChange),replaceUrl:Lr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(r.W)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Lr(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Lr(this.preserveFragment)})}}]),t}();function Lr(t){return""===t||!!t}var jr=function(){function t(e,n,r,i,o){var a=this;_classCallCheck(this,t),this.router=e,this.element=n,this.renderer=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe((function(t){t instanceof _e&&a.update()}))}return _createClass(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.links.changes.subscribe((function(e){return t.update()})),this.linksWithHrefs.changes.subscribe((function(e){return t.update()})),this.update()}},{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"update",value:function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.classes.forEach((function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}},{key:"routerLinkActive",set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter((function(t){return!!t}))}}]),t}(),Fr=function t(){_classCallCheck(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new Ur,this.attachRef=null},Ur=function(){function t(){_classCallCheck(this,t),this.contexts=new Map}return _createClass(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new Fr,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),Vr=function(){function t(e,n,i,o,a){_classCallCheck(this,t),this.parentContexts=e,this.location=n,this.resolver=i,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.m,this.deactivateEvents=new r.m,this.name=o||"primary",e.onChildOutletCreated(this.name,this)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new qr(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),t}(),qr=function(){function t(e,n,r){_classCallCheck(this,t),this.route=e,this.childContexts=n,this.parent=r}return _createClass(t,[{key:"get",value:function(t,e){return t===En?this.route:t===Ur?this.childContexts:this.parent.get(t,e)}}]),t}(),Br=function t(){_classCallCheck(this,t)},Hr=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return e().pipe(G((function(){return Object(s.a)(null)})))}}]),t}(),zr=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return Object(s.a)(null)}}]),t}(),Wr=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new Ir(n,r,(function(t){return e.triggerEvent(new Ie(t))}),(function(t){return e.triggerEvent(new Ae(t))}))}return _createClass(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(O((function(t){return t instanceof _e})),ot((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(r.v);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;r.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(t,o)):o.children&&r.push(this.processRoutes(t,o.children))}}catch(s){i.e(s)}finally{i.f()}return Object(u.a)(r).pipe(Object(T.a)(),Object(S.a)((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(Object($.a)((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}(),Gr=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof me?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof _e&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Pe&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Pe(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}(),Kr=new r.o("ROUTER_CONFIGURATION"),Qr=new r.o("ROUTER_FORROOT_GUARD"),Yr=[a.f,{provide:en,useClass:nn},{provide:Pr,useFactory:ni,deps:[r.g,en,Ur,a.f,r.p,r.u,r.i,Tr,Kr,[Ar,new r.y],[Er,new r.y]]},Ur,{provide:En,useFactory:ri,deps:[Pr]},{provide:r.u,useClass:r.I},Wr,zr,Hr,{provide:Kr,useValue:{enableTracing:!1}}];function Jr(){return new r.w("Router",Pr)}var Xr=function(){function t(e,n){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[Yr,ei(e),{provide:Qr,useFactory:ti,deps:[[Pr,new r.y,new r.H]]},{provide:Kr,useValue:n||{}},{provide:a.g,useFactory:$r,deps:[a.q,[new r.n(a.a),new r.y],Kr]},{provide:Gr,useFactory:Zr,deps:[Pr,a.r,Kr]},{provide:Br,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:zr},{provide:r.w,multi:!0,useFactory:Jr},[ii,{provide:r.d,multi:!0,useFactory:oi,deps:[ii]},{provide:si,useFactory:ai,deps:[ii]},{provide:r.b,multi:!0,useExisting:si}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[ei(e)]}}}]),t}();function Zr(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Gr(t,e,n)}function $r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new a.d(t,e):new a.p(t,e)}function ti(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ei(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Tr,multi:!0,useValue:t}]}function ni(t,e,n,r,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},l=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,h=new Pr(null,e,n,r,i,o,a,We(s));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=ft();h.events.subscribe((function(t){f.logGroup("Router Event: ".concat(t.constructor.name)),f.log(t.toString()),f.log(t),f.logGroupEnd()}))}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function ri(t){return t.routerState.root}var ii=function(){function t(e){_classCallCheck(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new l.a}return _createClass(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(a.e,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),r=t.injector.get(Pr),i=t.injector.get(Kr);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return t.initNavigation?Object(s.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(Kr),n=this.injector.get(Wr),i=this.injector.get(Gr),o=this.injector.get(Pr),a=this.injector.get(r.g);t===a.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}},{key:"isLegacyDisabled",value:function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}]),t}();function oi(t){return t.appInitializer.bind(t)}function ai(t){return t.bootstrapListener.bind(t)}var si=new r.o("Router Initializer"),ui=r.qb({encapsulation:2,styles:[],data:{}});function li(t){return r.Jb(0,[(t()(),r.sb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.rb(1,212992,null,0,Vr,[Ur,r.O,r.j,[8,null],r.h],null,null)],(function(t,e){t(e,1,0)}),null)}var ci=r.ob("ng-component",Re,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"ng-component",[],null,null,null,li,ui)),r.rb(1,49152,null,0,Re,[],null,null)],null,null)}),{},{},[]);function hi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(y.a)(e[0])&&(e=e[0]),0===e.length?k.a:r?hi(e).pipe(Object(S.a)((function(t){return r.apply(void 0,_toConsumableArray(t))}))):new f.a((function(t){return new fi(t,e)}))}var fi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;_classCallCheck(this,n),(i=e.call(this,t)).sources=r,i.completed=0,i.haveValues=0;var o=r.length;i.values=new Array(o);for(var a=0;a<o;a++){var s=r[a],u=Object(m.a)(_assertThisInitialized(i),s,null,a);u&&i.add(u)}return i}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)}},{key:"notifyComplete",value:function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()}}]),n}(g.a),di=new r.o("NgValueAccessor"),pi=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),vi=new r.o("CompositionEventMode"),yi=function(){function t(e,n,r){var i;_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=ft()?ft().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}(),gi=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),t}(),mi=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(gi);function _i(){throw new Error("unimplemented")}var bi=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return _createClass(n,[{key:"validator",get:function(){return _i()}},{key:"asyncValidator",get:function(){return _i()}}]),n}(gi),wi=function(){function t(e){_classCallCheck(this,t),this._cd=e}return _createClass(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}(),Ci=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return n}(wi),ki=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return n}(wi);function Ei(t){return null==t||0===t.length}var Si=new r.o("NgValidators"),Ti=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ii=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"min",value:function(t){return function(e){if(Ei(e.value)||Ei(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(Ei(e.value)||Ei(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return Ei(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return Ei(t.value)?null:Ti.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){if(Ei(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}},{key:"maxLength",value:function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(Ei(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(Ai);return 0==e.length?null:function(t){return xi(function(t,e){return e.map((function(e){return e(t)}))}(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(Ai);return 0==e.length?null:function(t){return hi(function(t,e){return e.map((function(e){return e(t)}))}(t,e).map(Oi)).pipe(Object(S.a)(xi))}}}]),t}();function Ai(t){return null!=t}function Oi(t){var e=Object(r.yb)(t)?Object(u.a)(t):t;if(!Object(r.xb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function xi(t){var e=t.reduce((function(t,e){return null!=e?Object.assign({},t,e):t}),{});return 0===Object.keys(e).length?null:e}function Ni(t){return t.validate?function(e){return t.validate(e)}:t}function Di(t){return t.validate?function(e){return t.validate(e)}:t}var Pi=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),Ri=function(){function t(){_classCallCheck(this,t),this._accessors=[]}return _createClass(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}(),Mi='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Li='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',ji='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Fi=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(Mi))}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(Li,"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ").concat(ji))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ".concat(Mi))}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(Li))}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(t){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(t,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===t?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),t}();function Ui(t,e){return[].concat(_toConsumableArray(e.path),[t])}function Vi(t,e){t||zi(e,"Cannot find control with"),e.valueAccessor||zi(e,"No value accessor for form control with"),t.validator=Ii.compose([t.validator,e.validator]),t.asyncValidator=Ii.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange((function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&qi(t,e)}))}(t,e),function(t,e){t.registerOnChange((function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}))}(t,e),function(t,e){e.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&qi(t,e),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange((function(t){e.valueAccessor.setDisabledState(t)})),e._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),e._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))}))}function qi(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Bi(t,e){null==t&&zi(e,"Cannot find control with"),t.validator=Ii.compose([t.validator,e.validator]),t.asyncValidator=Ii.composeAsync([t.asyncValidator,e.asyncValidator])}function Hi(t){return zi(t,"There is no FormControl instance attached to form control element with")}function zi(t,e){var n;throw n=t.path.length>1?"path: '".concat(t.path.join(" -> "),"'"):t.path[0]?"name: '".concat(t.path,"'"):"unspecified name attribute",new Error("".concat(e," ").concat(n))}function Wi(t){return null!=t?Ii.compose(t.map(Ni)):null}function Gi(t){return null!=t?Ii.composeAsync(t.map(Di)):null}function Ki(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object(r.zb)(e,n.currentValue)}var Qi=[pi,function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),Pi,function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r.zb}return _createClass(t,[{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?"".concat(e):(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(t)));this._compareWith=t}}]),t}(),function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r.zb}return _createClass(t,[{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map((function(t){return n._getOptionId(t)}));e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(var u=n.options,l=0;l<u.length;l++){var c=u.item(l);if(c.selected){var h=e._getOptionValue(c.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(t)));this._compareWith=t}}]),t}(),function(){function t(e,n,r,i){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(bi),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),t}()];function Yi(t,e){t._syncPendingControls(),e.forEach((function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}))}function Ji(t,e){if(!e)return null;Array.isArray(e)||zi(t,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return e.forEach((function(e){var o;e.constructor===yi?n=e:(o=e,Qi.some((function(t){return o.constructor===t}))?(r&&zi(t,"More than one built-in value accessor matches form control with"),r=e):(i&&zi(t,"More than one custom value accessor matches form control with"),i=e))})),i||r||n||(zi(t,"No valid value accessor for form control with"),null)}function Xi(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function Zi(t,e,n,i){Object(r.W)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(Fi.ngModelWarning(t),e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}function $i(t){var e=eo(t)?t.validators:t;return Array.isArray(e)?Wi(e):e||null}function to(t,e){var n=eo(e)?e.asyncValidators:t;return Array.isArray(n)?Gi(n):n||null}function eo(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var no,ro=function(){function t(e,n){_classCallCheck(this,t),this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(t,[{key:"setValidators",value:function(t){this.validator=$i(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=to(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign({},t,{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign({},t,{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=Oi(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((function(t,e){return t instanceof oo?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof ao&&t.at(e)||null}),t))}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new r.m,this.statusChanges=new r.m}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){eo(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),t}(),io=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(t=e.call(this,$i(i),to(o,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return _createClass(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(ro),oo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,$i(r),to(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return _createClass(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof io?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){var e=this,n=!1;return this._forEachChild((function(r,i){n=n||e.contains(i)&&t(r)})),n}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,r){n=e(n,t,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(ro),ao=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,$i(r),to(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return _createClass(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof io?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index ".concat(t))}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t,e=_createForOfIteratorHelper(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),n}(ro),so=Promise.resolve(null),uo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this)).submitted=!1,o._directives=[],o.ngSubmit=new r.m,o.form=new oo({},Wi(t),Gi(i)),o}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(t){var e=this;so.then((function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Vi(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)}))}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){var e=this;so.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),Xi(e._directives,t)}))}},{key:"addFormGroup",value:function(t){var e=this;so.then((function(){var n=e._findContainer(t.path),r=new oo({});Bi(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(t){var e=this;so.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)}))}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){var n=this;so.then((function(){n.form.get(t.path).setValue(e)}))}},{key:"setValue",value:function(t){this.control.setValue(t)}},{key:"onSubmit",value:function(t){return this.submitted=!0,Yi(this.form,this._directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(t){return t.pop(),t.length?this.form.get(t):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),n}(mi),lo=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(Mi,'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(Li,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(ji))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(Li,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(ji))}},{key:"ngFormWarning",value:function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}]),t}(),co=new r.o("NgFormSelectorWarning"),ho=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return Ui(this.name,this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Wi(this._validators)}},{key:"asyncValidator",get:function(){return Gi(this._asyncValidators)}}]),n}(mi),fo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._parent=t,o._validators=r,o._asyncValidators=i,o}return _createClass(n,[{key:"_checkParentType",value:function(){this._parent instanceof n||this._parent instanceof uo||lo.modelGroupParentException()}}]),n}(ho),po=Promise.resolve(null),vo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a){var s;return _classCallCheck(this,n),(s=e.call(this)).control=new io,s._registered=!1,s.update=new r.m,s._parent=t,s._rawValidators=i||[],s._rawAsyncValidators=o||[],s.valueAccessor=Ji(_assertThisInitialized(s),a),s}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Ki(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){Vi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof fo)&&this._parent instanceof ho?lo.formGroupNameException():this._parent instanceof fo||this._parent instanceof uo||lo.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||lo.missingNameException()}},{key:"_updateValue",value:function(t){var e=this;po.then((function(){e.control.setValue(t,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;po.then((function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()}))}},{key:"path",get:function(){return this._parent?Ui(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Wi(this._rawValidators)}},{key:"asyncValidator",get:function(){return Gi(this._rawAsyncValidators)}}]),n}(bi),yo=function t(){_classCallCheck(this,t)},go=new r.o("NgModelWithFormControlWarning"),mo=((no=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a){var s;return _classCallCheck(this,n),(s=e.call(this))._ngModelWarningConfig=a,s.update=new r.m,s._ngModelWarningSent=!1,s._rawValidators=t||[],s._rawAsyncValidators=i||[],s.valueAccessor=Ji(_assertThisInitialized(s),o),s}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._isControlChanged(t)&&(Vi(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Ki(t,this.viewModel)&&(Zi("formControl",n,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_isControlChanged",value:function(t){return t.hasOwnProperty("form")}},{key:"isDisabled",set:function(t){Fi.disabledAttrWarning()}},{key:"path",get:function(){return[]}},{key:"validator",get:function(){return Wi(this._rawValidators)}},{key:"asyncValidator",get:function(){return Gi(this._rawAsyncValidators)}},{key:"control",get:function(){return this.form}}]),n}(bi))._ngModelWarningSentOnce=!1,no),_o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this))._validators=t,o._asyncValidators=i,o.submitted=!1,o.directives=[],o.form=null,o.ngSubmit=new r.m,o}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(t){var e=this.form.get(t.path);return Vi(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){Xi(this.directives,t)}},{key:"addFormGroup",value:function(t){var e=this.form.get(t.path);Bi(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(t){}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"addFormArray",value:function(t){var e=this.form.get(t.path);Bi(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(t){}},{key:"getFormArray",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){this.form.get(t.path).setValue(e)}},{key:"onSubmit",value:function(t){return this.submitted=!0,Yi(this.form,this.directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_updateDomValue",value:function(){var t=this;this.directives.forEach((function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange((function(){return Hi(e)})),e.valueAccessor.registerOnTouched((function(){return Hi(e)})),e._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),e._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),t&&t._clearChangeFns()}(e.control,e),n&&Vi(n,e),e.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var t=this;this.form._registerOnCollectionChange((function(){return t._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var t=Wi(this._validators);this.form.validator=Ii.compose([this.form.validator,t]);var e=Gi(this._asyncValidators);this.form.asyncValidator=Ii.composeAsync([this.form.asyncValidator,e])}},{key:"_checkFormPresent",value:function(){this.form||Fi.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),n}(mi),bo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._parent=t,o._validators=r,o._asyncValidators=i,o}return _createClass(n,[{key:"_checkParentType",value:function(){Co(this._parent)&&Fi.groupParentException()}}]),n}(ho),wo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._parent=t,o._validators=r,o._asyncValidators=i,o}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormArray(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormArray(this)}},{key:"_checkParentType",value:function(){Co(this._parent)&&Fi.arrayParentException()}},{key:"control",get:function(){return this.formDirective.getFormArray(this)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"path",get:function(){return Ui(this.name,this._parent)}},{key:"validator",get:function(){return Wi(this._validators)}},{key:"asyncValidator",get:function(){return Gi(this._asyncValidators)}}]),n}(mi);function Co(t){return!(t instanceof bo||t instanceof _o||t instanceof wo)}var ko,Eo,So,To=((ko=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a,s){var u;return _classCallCheck(this,n),(u=e.call(this))._ngModelWarningConfig=s,u._added=!1,u.update=new r.m,u._ngModelWarningSent=!1,u._parent=t,u._rawValidators=i||[],u._rawAsyncValidators=o||[],u.valueAccessor=Ji(_assertThisInitialized(u),a),u}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._added||this._setUpControl(),Ki(t,this.viewModel)&&(Zi("formControlName",n,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_checkParentType",value:function(){!(this._parent instanceof bo)&&this._parent instanceof ho?Fi.ngModelGroupException():this._parent instanceof bo||this._parent instanceof _o||this._parent instanceof wo||Fi.controlParentException()}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}},{key:"isDisabled",set:function(t){Fi.disabledAttrWarning()}},{key:"path",get:function(){return Ui(this.name,this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Wi(this._rawValidators)}},{key:"asyncValidator",get:function(){return Gi(this._rawAsyncValidators)}}]),n}(bi))._ngModelWarningSentOnce=!1,ko),Io=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"validate",value:function(t){return this.required?Ii.required(t):null}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"required",get:function(){return this._required},set:function(t){this._required=null!=t&&!1!==t&&"false"!=="".concat(t),this._onChange&&this._onChange()}}]),t}(),Ao=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"validate",value:function(t){return this.required?Ii.requiredTrue(t):null}}]),n}(Io),Oo=function t(){_classCallCheck(this,t)},xo=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"group",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(t),r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new oo(n,{asyncValidators:i,updateOn:o,validators:r})}},{key:"control",value:function(t,e,n){return new io(t,e,n)}},{key:"array",value:function(t,e,n){var r=this,i=t.map((function(t){return r._createControl(t)}));return new ao(i,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=e._createControl(t[r])})),n}},{key:"_createControl",value:function(t){return t instanceof io||t instanceof oo||t instanceof ao?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}(),No=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:co,useValue:e.warnOnDeprecatedNgFormSelector}]}}}]),t}(),Do=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:go,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}(),Po=function(){function t(e,n){_classCallCheck(this,t),this.product=e,this.router=n}return _createClass(t,[{key:"filterList",value:function(t){return this.fullList.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())||-1!==e.direccion.toLowerCase().indexOf(t.toLowerCase())}))}},{key:"ngOnInit",value:function(){var t=this;this.product.getAll().snapshotChanges().subscribe((function(e){t.fullList=[],e.forEach((function(e){var n=e.payload.toJSON();n.$key=e.key,void 0===n.name||t.fullList.push(n)}))}))}},{key:"viewCarta",value:function(t){this.router.navigate(["view/",t])}},{key:"searchTerm",get:function(){return console.log(this._searchTerm),this._searchTerm},set:function(t){""===t?this.show=!1:""!==t&&(this.show=!0),this._searchTerm=t,this.filteredList=this.filterList(t)}}]),t}(),Ro=n("Wcq6"),Mo=n.n(Ro),Lo=n("PVcy"),jo=(n("6233"),n("1XSQ")),Fo=n("yA/v"),Uo=function t(e,n,r,i){var o=this;_classCallCheck(this,t);var a=Object(jo.d)(new jo.c(i),r);this.auth=i.runOutsideAngular((function(){return Object(Fo.e)(e,i,n).auth()})),this.authState=new f.a((function(t){return i.runOutsideAngular((function(){return o.auth.onAuthStateChanged(t)}))})).pipe(a),this.user=new f.a((function(t){return i.runOutsideAngular((function(){return o.auth.onIdTokenChanged(t)}))})).pipe(a),this.idToken=this.user.pipe(Object(nt.a)((function(t){return t?Object(u.a)(t.getIdToken()):Object(s.a)(null)}))),this.idTokenResult=this.user.pipe(Object(nt.a)((function(t){return t?Object(u.a)(t.getIdTokenResult()):Object(s.a)(null)})))},Vo=((So=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this.afAuth=e,this.router=n,this.ngZone=r,this.af=i,this.afAuth.authState.subscribe((function(t){t?(o.userData=t,localStorage.setItem("user",JSON.stringify(o.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))}))}return _createClass(t,[{key:"getAuth",value:function(){return this.afAuth.auth}},{key:"signUp",value:function(t){var e=this;return this.afAuth.auth.createUserWithEmailAndPassword(t.email,t.password).then((function(t){e.SendVerificationMail(),alert("Verifica tu email. Hemos enviado un correo con un link de activaci\xf3n al correo electronico proporcionado. Por favor verifica tu bandeja de entrada y carpeta de correo no deseado."),Object(Ro.database)().ref("users/"+t.user.uid).set({uid:t.user.uid,email:t.user.email,displayName:t.user.displayName,emailVerified:t.user.emailVerified}),e.router.navigate(["login"])})).catch((function(t){window.alert(t.message)}))}},{key:"SendVerificationMail",value:function(){return this.afAuth.auth.currentUser.sendEmailVerification()}},{key:"resetPassword",value:function(t){return this.afAuth.auth.sendPasswordResetEmail(t,{url:"http://localhost:4200/userMgmt"})}},{key:"SignIn",value:function(t,e){var n=this;return this.afAuth.auth.signInWithEmailAndPassword(t,e).then((function(t){t.user.emailVerified?(n.isLoggedIn=!0,n.ngZone.run((function(){n.userId=t.user.uid,n.userEmail=t.user.email,n.isVerified=t.user.emailVerified}))):alert("El correo electronico no est\xe1 verificado."),n.getProfile(n.userId)})).catch((function(t){window.alert(t.message)}))}},{key:"deleteProfile",value:function(t){return Ro.auth().currentUser.delete(),this.profileObj.remove()}},{key:"getProfile",value:function(t){var e=this;return this.profileObj=this.af.object("users/"+t),this.profileObj.snapshotChanges().subscribe((function(t){e.image=t.payload.val().image,e.name=t.payload.val().name,e.router.navigate(null!=e.name?["mydashboard"]:["establecimiento"])})),this.profileObj}},{key:"getProfileForMyDashboard",value:function(t){return this.profileObj=this.af.object("users/"+t),this.profileObj.snapshotChanges()}},{key:"getProfileId",value:function(t){return this.profileObj=this.af.object("users/"+t),this.profileObj}},{key:"updateProfile",value:function(t,e){var n=this;this.profileObj.update({uid:t,name:e.name,direccion:e.direccion,email:e.email,emailVerified:e.emailVerified,telefono:e.telefono,image:e.image}),this.router.navigate(["mydashboard"]).catch((function(t){n.errorMgmt(t)}))}},{key:"SignOut",value:function(){var t=this;return this.afAuth.auth.signOut().then((function(){localStorage.removeItem("user"),t.isLoggedIn=!1,t.name=null,t.direccion=null,t.router.navigate(["login"])}))}},{key:"errorMgmt",value:function(t){console.log(t)}}]),t}()).ngInjectableDef=r.Nb({factory:function(){return new So(r.Ob(Uo),r.Ob(Pr),r.Ob(r.x),r.Ob(Lo.a))},token:So,providedIn:"root"}),So),qo=((Eo=function(){function t(e,n){_classCallCheck(this,t),this.database=e,this.authService=n}return _createClass(t,[{key:"getAll",value:function(){return this.listAll=this.database.list("users/"),this.listAll}},{key:"getAllProducts",value:function(t){return this.productsAll=this.database.list("users/"+t+"/carta"),this.productsAll}},{key:"getProductsPerCategory",value:function(t){return console.log(t),this.productsPerCat=this.database.list("users/"+this.authService.userId+"/carta/"+t+"/products/"),this.productsPerCat}},{key:"getProductsPerCategoryForUser",value:function(t,e){return this.productsPerCat=this.database.list("users/"+t+"/carta/"+e+"/products/"),this.productsPerCat}},{key:"getAllCategories",value:function(t){return this.categoryAll=this.database.list("users/"+t+"/carta"),this.categoryAll}},{key:"getCat",value:function(t){return this.catRef=this.database.object("users/"+this.authService.userId+"/carta/"+t),this.catRef}},{key:"updateCat",value:function(t,e){var n=this;this.database.object("users/"+this.authService.userId+"/carta/"+t).update({category:e.category}).catch((function(t){n.errorMgmt(t)}))}},{key:"getProduct",value:function(t,e){return this.prodRef=this.database.object("users/"+this.authService.userId+"/carta/"+e+"/products/"+t),this.prodRef}},{key:"updateProduct",value:function(t,e,n){var r=this;this.database.object("users/"+this.authService.userId+"/carta/"+n+"/products/"+t).update({title:e.title,description:e.description,price:e.price,image:e.image}).catch((function(t){r.errorMgmt(t)}))}},{key:"newProduct",value:function(t,e,n){var r=Ro.database().ref().child("users/"+this.authService.userId+"/carta/"+e+"/products/").push().key,i={};return i["users/"+this.authService.userId+"/carta/"+e+"/products/"+r]={id:r,categoryId:e,category:n,title:t.title,description:t.description,price:t.price,image:t.image},Ro.database().ref().update(i)}},{key:"newCategory",value:function(t){var e=Ro.database().ref().child("users/"+this.authService.userId+"/carta").push().key,n={};return n["users/"+this.authService.userId+"/carta/"+e]={id:e,category:t.category},Ro.database().ref().update(n)}},{key:"deleteCategory",value:function(t){this.categoryRef=this.database.object("users/"+this.authService.userId+"/carta/"+t),this.categoryRef.remove().catch((function(t){console.log(t)}))}},{key:"deleteProduct",value:function(t,e){this.productRef=this.database.object("users/"+this.authService.userId+"/carta/"+t+"/products/"+e),this.productRef.remove().catch((function(t){console.log(t)}))}},{key:"errorMgmt",value:function(t){console.log(t)}}]),t}()).ngInjectableDef=r.Nb({factory:function(){return new Eo(r.Ob(Lo.a),r.Ob(Vo))},token:Eo,providedIn:"root"}),Eo),Bo=r.qb({encapsulation:0,styles:[[".full[_ngcontent-%COMP%]{min-height:100%;height:100%;min-width:100%;width:100%;background-repeat:no-repeat}.body[_ngcontent-%COMP%]{height:1000px;width:100%;text-align:center}.search[_ngcontent-%COMP%]{position:absolute;width:80%;max-width:600px;top:50%;left:10%}.box[_ngcontent-%COMP%]{width:100%}.establecimiento[_ngcontent-%COMP%]{margin-right:30px;font-size:12px;margin-top:30px;cursor:pointer}.estLi[_ngcontent-%COMP%]{list-style-type:none}.address[_ngcontent-%COMP%]{color:#778899;float:left;margin-left:5px}.profile[_ngcontent-%COMP%]{display:inline-block;width:40px;height:40px;border-radius:10%;margin-left:5px;background-repeat:no-repeat;background-position:center center;background-size:cover;float:left}.nameUser[_ngcontent-%COMP%]{margin-left:5px;float:left}.image[_ngcontent-%COMP%]{float:left}.text[_ngcontent-%COMP%]{margin-left:5px;float:left}.name[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function Ho(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,7,"li",[["class","list-group-item results"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,6,"div",[["class","name"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.viewCarta(t.context.$implicit.uid)&&r),r}),null,null)),(t()(),r.sb(2,0,null,null,5,"div",[["class","image"]],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,0,"img",[["class","profile"]],[[8,"src",4]],null,null,null,null)),(t()(),r.sb(4,0,null,null,1,"a",[["class","nameUser"]],null,null,null,null,null)),(t()(),r.Ib(5,null,["",""])),(t()(),r.sb(6,0,null,null,1,"a",[["class","address"]],null,null,null,null,null)),(t()(),r.Ib(7,null,["",""]))],null,(function(t,e){t(e,3,0,e.context.$implicit.image),t(e,5,0,e.context.$implicit.name),t(e,7,0,e.context.$implicit.direccion)}))}function zo(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,Ho)),r.rb(2,278528,null,0,a.i,[r.O,r.K,r.q],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.filteredList)}),null)}function Wo(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,18,"div",[["class","full"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,6,"li",[["class","nav-item estLi"],["routerLinkActive","active"]],null,null,null,null,null)),r.rb(2,1720320,null,2,jr,[Pr,r.k,r.C,[2,Rr],[2,Mr]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Gb(603979776,1,{links:1}),r.Gb(603979776,2,{linksWithHrefs:1}),(t()(),r.sb(5,0,null,null,2,"p",[["class","text-muted text-right establecimiento"],["routerLink","/login"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,6).onClick()&&i),i}),null,null)),r.rb(6,16384,[[1,4]],0,Rr,[Pr,En,[8,null],r.C,r.k],{routerLink:[0,"routerLink"]},null),(t()(),r.Ib(-1,null,["Soy un establecimiento"])),(t()(),r.sb(8,0,null,null,10,"div",[["class","body"]],null,null,null,null,null)),(t()(),r.sb(9,0,null,null,9,"div",[["class","search"]],null,null,null,null,null)),(t()(),r.sb(10,0,null,null,5,"input",[["class","form-control box"],["placeholder","Escribe el nombre del bar..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.Db(t,11)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,11).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,11)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,11)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.searchTerm=n)&&i),i}),null,null)),r.rb(11,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(13,671744,null,0,vo,[[8,null],[8,null],[8,null],[6,di]],{model:[0,"model"]},{update:"ngModelChange"}),r.Fb(2048,null,bi,null,[vo]),r.rb(15,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(16,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,zo)),r.rb(18,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,"active"),t(e,6,0,"/login"),t(e,13,0,n.searchTerm),t(e,18,0,n.show)}),(function(t,e){t(e,10,0,r.Db(e,15).ngClassUntouched,r.Db(e,15).ngClassTouched,r.Db(e,15).ngClassPristine,r.Db(e,15).ngClassDirty,r.Db(e,15).ngClassValid,r.Db(e,15).ngClassInvalid,r.Db(e,15).ngClassPending)}))}var Go=r.ob("app-home",Po,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-home",[],null,null,null,Wo,Bo)),r.rb(1,114688,null,0,Po,[qo,Pr],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),Ko=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.fb=e,this.authService=n,this.storage=r,this.db=i,this.router=o,this.userId="",this.imgSrc="./assets/images/logo.png",this.selectedImage=null,this.formTemplate=e.group({name:new io("",Ii.required),uid:[n.userId],email:[n.userEmail],emailVerified:[n.isVerified],direccion:new io("",Ii.required),telefono:new io("",Ii.required),image:new io("",Ii.required)})}return _createClass(t,[{key:"ngOnInit",value:function(){this.userId=this.authService.userId}},{key:"showPreview",value:function(t){var e=this;if(t.target.files&&t.target.files[0]){var n=new FileReader;n.readAsDataURL(t.target.files[0]),n.onload=function(t){e.imgSrc=t.target.result,e.uploadedPic=!0},this.selectedImage=t.target.files[0]}else this.selectedImage=null,console.log("showPreview doesnt not work")}},{key:"onSubmit",value:function(t){var e=this;if(this.isSubmitted=!0,t){var n="".concat(this.selectedImage.name.split(".").slice(0,-1).join("."),"_").concat((new Date).getTime()),r=this.storage.ref(n);console.log(r),this.storage.upload(n,this.selectedImage).snapshotChanges().pipe(ut((function(){r.getDownloadURL().subscribe((function(n){console.log(n),t.image=n,e.authService.updateProfile(e.userId,e.formTemplate.value),e.router.navigate(["/mydashboard"])}))}))).subscribe()}console.log("you subbmited",t)}},{key:"onDelete",value:function(){var t=this;confirm("Are you sure?")&&this.authService.deleteProfile(this.userId).then((function(e){t.authService.SignOut(),t.router.navigate(["/signup"])}),(function(t){console.log(t)}))}},{key:"formsControls",get:function(){return this.formTemplate.controls}}]),t}();function Qo(t){var e=function(t){return new f.a((function(e){return t.on("state_changed",(function(t){return e.next(t)}),(function(t){return e.error(t)}),(function(){return e.complete()})),function(){return t.cancel()}}))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:function(){return e},percentageChanges:function(){return e.pipe(Object(S.a)((function(t){return t.bytesTransferred/t.totalBytes*100})))}}}function Yo(t,e,n){return{getDownloadURL:function(){return Object(u.a)(t.getDownloadURL(),e.outsideAngular).pipe(n)},getMetadata:function(){return Object(u.a)(t.getMetadata()).pipe(n)},delete:function(){return Object(u.a)(t.delete())},child:function(r){return Yo(t.child(r),e,n)},updateMetatdata:function(e){return Object(u.a)(t.updateMetadata(e))},updateMetadata:function(e){return Object(u.a)(t.updateMetadata(e))},put:function(e,n){return Qo(t.put(e,n))},putString:function(e,n,r){return Qo(t.putString(e,n,r))}}}var Jo=new r.o("angularfire2.storageBucket"),Xo=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.schedulers=new jo.c(o),this.keepUnstableUntilFirst=Object(jo.d)(this.schedulers,i),this.storage=o.runOutsideAngular((function(){return Object(Fo.e)(e,o,n).storage(r||void 0)}))}return _createClass(t,[{key:"ref",value:function(t){return Yo(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}},{key:"upload",value:function(t,e,n){return Yo(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}]),t}(),Zo=r.qb({encapsulation:0,styles:[[".body[_ngcontent-%COMP%]{width:100%;height:100%}.divForm[_ngcontent-%COMP%]{width:90%;height:90%;margin-top:10%;margin-left:5%;margin-right:5%}.titulo[_ngcontent-%COMP%]{width:90%;max-width:500px}.cartel[_ngcontent-%COMP%], .crear[_ngcontent-%COMP%]{margin-top:20px}.footer[_ngcontent-%COMP%]{margin-top:20px;float:left;text-align:center;align-items:center}.signout[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;font-size:12px;text-align:center;justify-content:center}"]],data:{}});function $o(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function ta(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function ea(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function na(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function ra(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,87,"div",[["class","body"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,86,"div",[["class","divForm"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,82,"div",[],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,81,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Db(t,5).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,5).onReset()&&i),i}),null,null)),r.rb(4,16384,null,0,yo,[],null,null),r.rb(5,540672,null,0,_o,[[8,null],[8,null]],{form:[0,"form"]},null),r.Fb(2048,null,mi,null,[_o]),r.rb(7,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(8,0,null,null,41,"div",[["class","title"]],null,null,null,null,null)),(t()(),r.sb(9,0,null,null,1,"p",[["id","titleQuestion"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Antes de empezar, cuentanos un poco sobre tu establecimiento"])),(t()(),r.sb(11,0,null,null,12,"div",[["class","titulo"]],null,null,null,null,null)),(t()(),r.sb(12,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Nombre del establecimiento"])),(t()(),r.sb(14,0,null,null,7,"input",[["class","form-control titulo"],["formControlName","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,15)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,15).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,15)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,15)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(15,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(16,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(19,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(21,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,$o)),r.rb(23,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(24,0,null,null,12,"div",[["class","titulo"]],null,null,null,null,null)),(t()(),r.sb(25,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Direccion"])),(t()(),r.sb(27,0,null,null,7,"input",[["class","form-control titulo"],["formControlName","direccion"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,28)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,28).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,28)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,28)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(28,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(29,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(32,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(34,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,ta)),r.rb(36,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(37,0,null,null,12,"div",[["class","titulo"]],null,null,null,null,null)),(t()(),r.sb(38,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Telefono"])),(t()(),r.sb(40,0,null,null,7,"input",[["class","form-control titulo"],["formControlName","telefono"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,41)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,41).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,41)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,41)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(41,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(42,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(45,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(47,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,ea)),r.rb(49,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(50,0,null,null,13,"div",[["class","cartel"]],null,null,null,null,null)),(t()(),r.sb(51,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Sube una foto de tu local para que tus clientes lo reconozcan facilmente"])),(t()(),r.sb(53,0,null,null,0,"img",[["height","150px"],["margin-bottom","10px"],["width","150px"]],[[8,"src",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,54).click()&&i),i}),null,null)),(t()(),r.sb(54,0,[["fileUploader",1]],null,7,"input",[["class","form-control"],["formControlName","image"],["required",""],["type","file"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.Db(t,55)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,55).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,55)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,55)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==o.showPreview(n)&&i),i}),null,null)),r.rb(55,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(56,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(59,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(61,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,na)),r.rb(63,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(64,0,null,null,5,"input",[["id","profileId"],["type","hidden"],["value","authService.userData.uid"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,65)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,65).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,65)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,65)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(65,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(67,540672,null,0,mo,[[8,null],[8,null],[6,di],[2,go]],{form:[0,"form"]},null),r.Fb(2048,null,bi,null,[mo]),r.rb(69,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(70,0,null,null,5,"input",[["id","email"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,71)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,71).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,71)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,71)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(71,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(73,540672,null,0,mo,[[8,null],[8,null],[6,di],[2,go]],{form:[0,"form"]},null),r.Fb(2048,null,bi,null,[mo]),r.rb(75,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(76,0,null,null,5,"input",[["id","emailVerified"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,77)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,77).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,77)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,77)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(77,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(79,540672,null,0,mo,[[8,null],[8,null],[6,di],[2,go]],{form:[0,"form"]},null),r.Fb(2048,null,bi,null,[mo]),r.rb(81,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(82,0,null,null,2,"div",[["class","crear"]],null,null,null,null,null)),(t()(),r.sb(83,0,null,null,1,"button",[["class","btn btn-success btn-block float-right"],["type","submit"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onSubmit(i.formTemplate.value)&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Listo!"])),(t()(),r.sb(85,0,null,null,2,"div",[["class","footer"]],null,null,null,null,null)),(t()(),r.sb(86,0,null,null,1,"p",[["class","signout"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.authService.SignOut()&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Desconectarse"]))],(function(t,e){var n=e.component;t(e,5,0,n.formTemplate),t(e,16,0,""),t(e,19,0,"name"),t(e,23,0,n.isSubmitted&&(null==n.formsControls.name.errors?null:n.formsControls.name.errors.required)),t(e,29,0,""),t(e,32,0,"direccion"),t(e,36,0,n.isSubmitted&&(null==n.formsControls.direccion.errors?null:n.formsControls.direccion.errors.required)),t(e,42,0,""),t(e,45,0,"telefono"),t(e,49,0,n.isSubmitted&&(null==n.formsControls.telefono.errors?null:n.formsControls.telefono.errors.required)),t(e,56,0,""),t(e,59,0,"image"),t(e,63,0,n.isSubmitted&&!n.uploadedPic),t(e,67,0,n.formTemplate.controls.uid),t(e,73,0,n.formTemplate.controls.email),t(e,79,0,n.formTemplate.controls.emailVerified)}),(function(t,e){var n=e.component;t(e,3,0,r.Db(e,7).ngClassUntouched,r.Db(e,7).ngClassTouched,r.Db(e,7).ngClassPristine,r.Db(e,7).ngClassDirty,r.Db(e,7).ngClassValid,r.Db(e,7).ngClassInvalid,r.Db(e,7).ngClassPending),t(e,14,0,r.Db(e,16).required?"":null,r.Db(e,21).ngClassUntouched,r.Db(e,21).ngClassTouched,r.Db(e,21).ngClassPristine,r.Db(e,21).ngClassDirty,r.Db(e,21).ngClassValid,r.Db(e,21).ngClassInvalid,r.Db(e,21).ngClassPending),t(e,27,0,r.Db(e,29).required?"":null,r.Db(e,34).ngClassUntouched,r.Db(e,34).ngClassTouched,r.Db(e,34).ngClassPristine,r.Db(e,34).ngClassDirty,r.Db(e,34).ngClassValid,r.Db(e,34).ngClassInvalid,r.Db(e,34).ngClassPending),t(e,40,0,r.Db(e,42).required?"":null,r.Db(e,47).ngClassUntouched,r.Db(e,47).ngClassTouched,r.Db(e,47).ngClassPristine,r.Db(e,47).ngClassDirty,r.Db(e,47).ngClassValid,r.Db(e,47).ngClassInvalid,r.Db(e,47).ngClassPending),t(e,53,0,n.imgSrc),t(e,54,0,r.Db(e,56).required?"":null,r.Db(e,61).ngClassUntouched,r.Db(e,61).ngClassTouched,r.Db(e,61).ngClassPristine,r.Db(e,61).ngClassDirty,r.Db(e,61).ngClassValid,r.Db(e,61).ngClassInvalid,r.Db(e,61).ngClassPending),t(e,64,0,r.Db(e,69).ngClassUntouched,r.Db(e,69).ngClassTouched,r.Db(e,69).ngClassPristine,r.Db(e,69).ngClassDirty,r.Db(e,69).ngClassValid,r.Db(e,69).ngClassInvalid,r.Db(e,69).ngClassPending),t(e,70,0,r.Db(e,75).ngClassUntouched,r.Db(e,75).ngClassTouched,r.Db(e,75).ngClassPristine,r.Db(e,75).ngClassDirty,r.Db(e,75).ngClassValid,r.Db(e,75).ngClassInvalid,r.Db(e,75).ngClassPending),t(e,76,0,r.Db(e,81).ngClassUntouched,r.Db(e,81).ngClassTouched,r.Db(e,81).ngClassPristine,r.Db(e,81).ngClassDirty,r.Db(e,81).ngClassValid,r.Db(e,81).ngClassInvalid,r.Db(e,81).ngClassPending)}))}var ia=r.ob("app-establecimiento",Ko,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-establecimiento",[],null,null,null,ra,Zo)),r.rb(1,114688,null,0,Ko,[xo,Vo,Xo,Lo.a,Pr],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),oa=function(){function t(e){var n=this;_classCallCheck(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))}))}:this.headers=new Map}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var o=this.headers.get(e);if(!o)return;0===(o=o.filter((function(t){return-1===i.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),aa=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"encodeKey",value:function(t){return sa(t)}},{key:"encodeValue",value:function(t){return sa(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function sa(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var ua=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,t),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new aa,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){var n=new Map;return t.length>0&&t.split("&").forEach((function(t){var r=t.indexOf("="),i=_slicedToArray(-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],2),o=i[0],a=i[1],s=n.get(o)||[];s.push(a),n.set(o,s)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(t){var r=n.fromObject[t];e.map.set(t,Array.isArray(r)?r:[r])}))):this.map=null}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),t}();function la(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function ca(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ha(t){return"undefined"!=typeof FormData&&t instanceof FormData}var fa=function(){function t(e,n,r,i){var o;if(_classCallCheck(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new oa),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new ua,this.urlWithParams=n}return _createClass(t,[{key:"serializeBody",value:function(){return null===this.body?null:la(this.body)||ca(this.body)||ha(this.body)||"string"==typeof this.body?this.body:this.body instanceof ua?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body?null:ha(this.body)?null:ca(this.body)?this.body.type||null:la(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ua?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),l)),new t(n,r,o,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),t}(),da=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}(),pa=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(t=e.call(this,r)).type=da.Response,t.body=void 0!==r.body?r.body:null,t}return _createClass(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(function(){return function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,t),this.headers=e.headers||new oa,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}());function va(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var ya=function(){function t(e){_classCallCheck(this,t),this.handler=e}return _createClass(t,[{key:"request",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof fa)n=t;else{var o=void 0;o=i.headers instanceof oa?i.headers:new oa(i.headers);var a=void 0;i.params&&(a=i.params instanceof ua?i.params:new ua({fromObject:i.params})),n=new fa(t,e,void 0!==i.body?i.body:null,{headers:o,params:a,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var u=Object(s.a)(n).pipe(ot((function(t){return r.handler.handle(t)})));if(t instanceof fa||"events"===i.observe)return u;var l=u.pipe(O((function(t){return t instanceof pa})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return l.pipe(Object(S.a)((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return l.pipe(Object(S.a)((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return l.pipe(Object(S.a)((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return l.pipe(Object(S.a)((function(t){return t.body})))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new ua).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,va(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,va(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,va(n,e))}}]),t}(),ga=n("z6cu"),ma=n("w1tV"),_a=new r.N("8.2.3");try{"undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Ff){!1}var ba=n("D0XW"),wa=new r.N("8.2.3"),Ca=new r.o("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),ka=function(){function t(e,n){_classCallCheck(this,t),this._sanityChecksEnabled=e,this._hammerLoader=n,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _createClass(t,[{key:"_areChecksEnabled",value:function(){return this._sanityChecksEnabled&&Object(r.W)()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var t=this._window;return t&&(t.__karma__||t.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._document&&this._document.body&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}}},{key:"_checkCdkVersionMatch",value:function(){wa.full!==_a.full&&console.warn("The Angular Material version ("+wa.full+") does not match the Angular CDK version ("+_a.full+").\nPlease ensure the versions of these two packages exactly match.")}},{key:"_checkHammerIsAvailable",value:function(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}]),t}();try{"undefined"!=typeof Intl}catch(Ff){!1}function Ea(t){return Error('Unable to find icon with the name "'.concat(t,'"'))}function Sa(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+"via Angular's DomSanitizer. Attempted URL was \"".concat(t,'".'))}function Ta(t){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+"Angular's DomSanitizer. Attempted literal was \"".concat(t,'".'))}var Ia,Aa=function t(e,n){_classCallCheck(this,t),this.options=n,e.nodeName?this.svgElement=e:this.url=e},Oa=((Ia=function(){function t(e,n,r,i){_classCallCheck(this,t),this._httpClient=e,this._sanitizer=n,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=r}return _createClass(t,[{key:"addSvgIcon",value:function(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}},{key:"addSvgIconLiteral",value:function(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}},{key:"addSvgIconInNamespace",value:function(t,e,n,r){return this._addSvgIconConfig(t,e,new Aa(n,r))}},{key:"addSvgIconLiteralInNamespace",value:function(t,e,n,i){var o=this._sanitizer.sanitize(r.G.HTML,n);if(!o)throw Ta(n);var a=this._createSvgElementForSingleIcon(o,i);return this._addSvgIconConfig(t,e,new Aa(a,i))}},{key:"addSvgIconSet",value:function(t,e){return this.addSvgIconSetInNamespace("",t,e)}},{key:"addSvgIconSetLiteral",value:function(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}},{key:"addSvgIconSetInNamespace",value:function(t,e,n){return this._addSvgIconSetConfig(t,new Aa(e,n))}},{key:"addSvgIconSetLiteralInNamespace",value:function(t,e,n){var i=this._sanitizer.sanitize(r.G.HTML,e);if(!i)throw Ta(e);var o=this._svgElementFromString(i);return this._addSvgIconSetConfig(t,new Aa(o,n))}},{key:"registerFontClassAlias",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._fontCssClassesByAlias.set(t,e),this}},{key:"classNameForFontAlias",value:function(t){return this._fontCssClassesByAlias.get(t)||t}},{key:"setDefaultFontSetClass",value:function(t){return this._defaultFontSetClass=t,this}},{key:"getDefaultFontSetClass",value:function(){return this._defaultFontSetClass}},{key:"getSvgIconFromUrl",value:function(t){var e=this,n=this._sanitizer.sanitize(r.G.RESOURCE_URL,t);if(!n)throw Sa(t);var i=this._cachedIconsByUrl.get(n);return i?Object(s.a)(xa(i)):this._loadSvgIconFromConfig(new Aa(t)).pipe(Object(j.a)((function(t){return e._cachedIconsByUrl.set(n,t)})),Object(S.a)((function(t){return xa(t)})))}},{key:"getNamedSvgIcon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Na(e,t),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);var i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):Object(ga.a)(Ea(n))}},{key:"ngOnDestroy",value:function(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}},{key:"_getSvgFromConfig",value:function(t){return t.svgElement?Object(s.a)(xa(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(Object(j.a)((function(e){return t.svgElement=e})),Object(S.a)((function(t){return xa(t)})))}},{key:"_getSvgFromIconSetConfigs",value:function(t,e){var n=this,i=this._extractIconWithNameFromAnySet(t,e);return i?Object(s.a)(i):hi(e.filter((function(t){return!t.svgElement})).map((function(t){return n._loadSvgIconSetFromConfig(t).pipe(G((function(e){var i="Loading icon set URL: ".concat(n._sanitizer.sanitize(r.G.RESOURCE_URL,t.url)," failed: ").concat(e.message);return n._errorHandler?n._errorHandler.handleError(new Error(i)):console.error(i),Object(s.a)(null)})))}))).pipe(Object(S.a)((function(){var r=n._extractIconWithNameFromAnySet(t,e);if(!r)throw Ea(t);return r})))}},{key:"_extractIconWithNameFromAnySet",value:function(t,e){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.svgElement){var i=this._extractSvgIconFromSet(r.svgElement,t,r.options);if(i)return i}}return null}},{key:"_loadSvgIconFromConfig",value:function(t){var e=this;return this._fetchUrl(t.url).pipe(Object(S.a)((function(n){return e._createSvgElementForSingleIcon(n,t.options)})))}},{key:"_loadSvgIconSetFromConfig",value:function(t){var e=this;return t.svgElement?Object(s.a)(t.svgElement):this._fetchUrl(t.url).pipe(Object(S.a)((function(n){return t.svgElement||(t.svgElement=e._svgElementFromString(n)),t.svgElement})))}},{key:"_createSvgElementForSingleIcon",value:function(t,e){var n=this._svgElementFromString(t);return this._setSvgAttributes(n,e),n}},{key:"_extractSvgIconFromSet",value:function(t,e,n){var r=t.querySelector('[id="'.concat(e,'"]'));if(!r)return null;var i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);var o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}},{key:"_svgElementFromString",value:function(t){var e=this._document.createElement("DIV");e.innerHTML=t;var n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}},{key:"_toSvgElement",value:function(t){for(var e=this._svgElementFromString("<svg></svg>"),n=t.attributes,r=0;r<n.length;r++){var i=n[r],o=i.name,a=i.value;"id"!==o&&e.setAttribute(o,a)}for(var s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[s].cloneNode(!0));return e}},{key:"_setSvgAttributes",value:function(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}},{key:"_fetchUrl",value:function(t){var e=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==t)throw Error('Cannot fetch icon from URL "'.concat(t,'".'));var n=this._sanitizer.sanitize(r.G.RESOURCE_URL,t);if(!n)throw Sa(t);var i=this._inProgressUrlFetches.get(n);if(i)return i;var o=this._httpClient.get(n,{responseType:"text"}).pipe(ut((function(){return e._inProgressUrlFetches.delete(n)})),Object(ma.a)());return this._inProgressUrlFetches.set(n,o),o}},{key:"_addSvgIconConfig",value:function(t,e,n){return this._svgIconConfigs.set(Na(t,e),n),this}},{key:"_addSvgIconSetConfig",value:function(t,e){var n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}}]),t}()).ngInjectableDef=Object(r.Nb)({factory:function(){return new Ia(Object(r.Ob)(ya,8),Object(r.Ob)(oe),Object(r.Ob)(a.c,8),Object(r.Ob)(r.l,8))},token:Ia,providedIn:"root"}),Ia);function xa(t){return t.cloneNode(!0)}function Na(t,e){return t+":"+e}var Da,Pa=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).color=Da,t}return _createClass(n,[{key:"color",get:function(){return this._color},set:function(t){var e=t||Da;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),e&&this._elementRef.nativeElement.classList.add("mat-".concat(e)),this._color=e)}}]),n}((function t(e){_classCallCheck(this,t),this._elementRef=e})),Ra=new r.o("mat-icon-location",{providedIn:"root",factory:function(){var t=Object(r.V)(a.c),e=t?t.location:null;return{getPathname:function(){return e?e.pathname+e.search:""}}}}),Ma=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],La=Ma.map((function(t){return"[".concat(t,"]")})).join(", "),ja=/^url\(['"]?#(.*?)['"]?\)$/,Fa=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t))._iconRegistry=r,s._location=o,s._errorHandler=a,s._inline=!1,i||t.nativeElement.setAttribute("aria-hidden","true"),s}return _createClass(n,[{key:"_splitIconName",value:function(t){if(!t)return["",""];var e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error('Invalid icon name: "'.concat(t,'"'))}}},{key:"ngOnChanges",value:function(t){var e=this,n=t.svgIcon;if(n)if(this.svgIcon){var r=_slicedToArray(this._splitIconName(this.svgIcon),2),i=r[0],o=r[1];this._iconRegistry.getNamedSvgIcon(o,i).pipe(Y(1)).subscribe((function(t){return e._setSvgElement(t)}),(function(t){var n="Error retrieving icon ".concat(i,":").concat(o,"! ").concat(t.message);e._errorHandler?e._errorHandler.handleError(new Error(n)):console.error(n)}))}else n.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngOnInit",value:function(){this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngAfterViewChecked",value:function(){var t=this._elementsWithExternalReferences;if(t&&this._location&&t.size){var e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}},{key:"ngOnDestroy",value:function(){this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}},{key:"_usingFontIcon",value:function(){return!this.svgIcon}},{key:"_setSvgElement",value:function(t){this._clearSvgElement();for(var e=t.querySelectorAll("style"),n=0;n<e.length;n++)e[n].textContent+=" ";if(this._location){var r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r)}this._elementRef.nativeElement.appendChild(t)}},{key:"_clearSvgElement",value:function(){var t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){var n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}},{key:"_updateFontIconClasses",value:function(){if(this._usingFontIcon()){var t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}}},{key:"_cleanupFontValue",value:function(t){return"string"==typeof t?t.trim().split(" ")[0]:t}},{key:"_prependPathToReferences",value:function(t){var e=this._elementsWithExternalReferences;e&&e.forEach((function(e,n){e.forEach((function(e){n.setAttribute(e.name,"url('".concat(t,"#").concat(e.value,"')"))}))}))}},{key:"_cacheChildrenWithExternalReferences",value:function(t){for(var e=t.querySelectorAll(La),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map,r=function(t){Ma.forEach((function(r){var i=e[t],o=i.getAttribute(r),a=o?o.match(ja):null;if(a){var s=n.get(i);s||(s=[],n.set(i,s)),s.push({name:r,value:a[1]})}}))},i=0;i<e.length;i++)r(i)}},{key:"inline",get:function(){return this._inline},set:function(t){var e;this._inline=null!=(e=t)&&"false"!=="".concat(e)}},{key:"fontSet",get:function(){return this._fontSet},set:function(t){this._fontSet=this._cleanupFontValue(t)}},{key:"fontIcon",get:function(){return this._fontIcon},set:function(t){this._fontIcon=this._cleanupFontValue(t)}}]),n}(Pa),Ua=function t(){_classCallCheck(this,t)},Va=function t(){_classCallCheck(this,t)},qa=r.qb({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function Ba(t){return r.Jb(2,[r.Cb(null,0)],null,null)}var Ha=function(){function t(e){_classCallCheck(this,t),this.authService=e}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),za=r.qb({encapsulation:0,styles:[[".maindiv[_ngcontent-%COMP%]{margin-left:0;margin-top:0;width:100%;height:100%;float:left;text-align:center}.left-side[_ngcontent-%COMP%]{width:80%;left:10%;right:10%;height:95%;padding:0;float:left;background-repeat:no-repeat;background-position:center;background-size:cover;position:relative;z-index:1}.title[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center;text-align:center;padding-top:5%;float:left}.wrap-login[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center;width:100%;height:60%;float:left}.email[_ngcontent-%COMP%]{display:inline-block;margin-top:30px;width:100%;text-align:center;float:left}.password[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:20px;display:inline-block;width:100%;text-align:center;float:left}.button[_ngcontent-%COMP%]{width:100%;float:left;display:inline-block;text-align:center;margin-bottom:20px}.title-text[_ngcontent-%COMP%]{font-size:20px;font:Arial}.forgot[_ngcontent-%COMP%]{width:100%;margin-top:30px;text-align:center;justify-content:center;align-content:center;float:left}.nav-link[_ngcontent-%COMP%]{width:200px;text-align:center;display:inline}.nuevaCuenta[_ngcontent-%COMP%]{margin-top:15%}.back[_ngcontent-%COMP%]{position:absolute;float:left;width:50px;height:50px;margin-left:0;margin-top:10px}.backHome[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function Wa(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,33,"div",[["class","maindiv"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,4,"div",[["class","back"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,3,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","backHome mat-icon notranslate"],["role","img"],["routerLink","/"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,3).onClick()&&i),i}),Ba,qa)),r.rb(3,16384,null,0,Rr,[Pr,En,[8,null],r.C,r.k],{routerLink:[0,"routerLink"]},null),r.rb(4,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["arrow_back"])),(t()(),r.sb(6,0,null,null,2,"div",[["class","nuevaCuenta"]],null,null,null,null,null)),(t()(),r.sb(7,0,null,null,1,"input",[["class","btn btn-light"],["routerLink","/signup"],["type","button"],["value","Quiero crear una cuenta"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,8).onClick()&&i),i}),null,null)),r.rb(8,16384,null,0,Rr,[Pr,En,[8,null],r.C,r.k],{routerLink:[0,"routerLink"]},null),(t()(),r.sb(9,0,null,null,23,"div",[["class","left-side"]],null,null,null,null,null)),(t()(),r.sb(10,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(t()(),r.sb(11,0,null,null,1,"p",[["class","body-text"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Inicia sesi\xf3n si ya tienes una cuenta"])),(t()(),r.sb(13,0,null,null,19,"div",[["class","wrap-login"]],null,null,null,null,null)),(t()(),r.sb(14,0,null,null,18,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Db(t,16).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,16).onReset()&&i),i}),null,null)),r.rb(15,16384,null,0,yo,[],null,null),r.rb(16,4210688,null,0,uo,[[8,null],[8,null]],null,null),r.Fb(2048,null,mi,null,[uo]),r.rb(18,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(19,0,null,null,3,"div",[["class","email"]],null,null,null,null,null)),(t()(),r.sb(20,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Correo electronico"])),(t()(),r.sb(22,0,[["email",1]],null,0,"input",[["aria-describedby","emailHelp"],["id","exampleInputEmail1"],["type","email"]],null,null,null,null,null)),(t()(),r.sb(23,0,null,null,3,"div",[["class","password"]],null,null,null,null,null)),(t()(),r.sb(24,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Contrase\xf1a"])),(t()(),r.sb(26,0,[["password",1]],null,0,"input",[["id","exampleInputPassword1"],["type","password"]],null,null,null,null,null)),(t()(),r.sb(27,0,null,null,1,"div",[["class","button"]],null,null,null,null,null)),(t()(),r.sb(28,0,null,null,0,"input",[["class","btn btn-success"],["type","button"],["value","Iniciar sesi\xf3n"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.authService.SignIn(r.Db(t,22).value,r.Db(t,26).value)&&i),i}),null,null)),(t()(),r.sb(29,0,null,null,3,"div",[["class","forgot"]],null,null,null,null,null)),(t()(),r.sb(30,0,null,null,2,"a",[["class","nav-link"],["routerLink","/forgot"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,31).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i}),null,null)),r.rb(31,671744,null,0,Mr,[Pr,En,a.g],{routerLink:[0,"routerLink"]},null),(t()(),r.Ib(-1,null,["He olvidado mi contrase\xf1a"])),(t()(),r.sb(33,0,null,null,0,"div",[["class","right-side"]],null,null,null,null,null))],(function(t,e){t(e,3,0,"/"),t(e,4,0),t(e,8,0,"/signup"),t(e,31,0,"/forgot")}),(function(t,e){t(e,2,0,r.Db(e,4).inline,"primary"!==r.Db(e,4).color&&"accent"!==r.Db(e,4).color&&"warn"!==r.Db(e,4).color),t(e,14,0,r.Db(e,18).ngClassUntouched,r.Db(e,18).ngClassTouched,r.Db(e,18).ngClassPristine,r.Db(e,18).ngClassDirty,r.Db(e,18).ngClassValid,r.Db(e,18).ngClassInvalid,r.Db(e,18).ngClassPending),t(e,30,0,r.Db(e,31).target,r.Db(e,31).href)}))}var Ga=r.ob("app-login",Ha,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-login",[],null,null,null,Wa,za)),r.rb(1,114688,null,0,Ha,[Vo],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),Ka=function(){function t(e){_classCallCheck(this,t),this.authService=e,this.userSignUp=new oo({email:new io("",Ii.required),password:new io("",Ii.required),cb:new io("",Ii.required)})}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(t){this.isSubmitted=!0,this.userSignUp.valid&&this.authService.signUp(this.userSignUp.value)}},{key:"openDialog",value:function(){}},{key:"formsControls",get:function(){return this.userSignUp.controls}}]),t}(),Qa=r.qb({encapsulation:0,styles:[[".limiter[_ngcontent-%COMP%]{margin-left:0;margin-top:0;width:100%;height:100%;float:left;text-align:center}.container-login[_ngcontent-%COMP%]{width:80%;left:10%;right:10%;height:60%;top:20%;bottom:20%;padding:0;float:left;background-repeat:no-repeat;background-position:center;background-size:cover;position:relative;z-index:1;justify-content:center}.title[_ngcontent-%COMP%]{display:inline-block;width:100%;justify-content:center;align-items:center;text-align:center;margin-top:15%;padding-top:5%;float:left}.wrap-login[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center;width:100%;height:60%;float:left}.form[_ngcontent-%COMP%]{width:100%}.email[_ngcontent-%COMP%]{margin-top:30px;display:inline-block;width:200px;text-align:center}.password[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:10px;display:inline-block;width:200px;text-align:center}.submit[_ngcontent-%COMP%]{margin-top:20px;display:inline-block;width:100%;text-align:center}#terminos[_ngcontent-%COMP%]{font-size:12px;text-decoration:underline}.back[_ngcontent-%COMP%]{position:absolute;float:left;width:50px;height:50px;margin-left:0;margin-top:10px}.backHome[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function Ya(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function Ja(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function Xa(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Es necesario que acepte los Terminos y Condiciones"]))],null,null)}function Za(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,61,"body",[],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,60,"div",[["class","limiter"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,4,"div",[["class","back"]],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,3,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","backHome mat-icon notranslate"],["role","img"],["routerLink","/login"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,4).onClick()&&i),i}),Ba,qa)),r.rb(4,16384,null,0,Rr,[Pr,En,[8,null],r.C,r.k],{routerLink:[0,"routerLink"]},null),r.rb(5,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["arrow_back"])),(t()(),r.sb(7,0,null,null,53,"div",[["class","container-login"]],null,null,null,null,null)),(t()(),r.sb(8,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(t()(),r.sb(9,0,null,null,1,"p",[["class","body-text"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Crea tu cuenta"])),(t()(),r.sb(11,0,null,null,49,"div",[["class","wrap-login"]],null,null,null,null,null)),(t()(),r.sb(12,0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Db(t,14).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,14).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSubmit(o.userSignUp.value)&&i),i}),null,null)),r.rb(13,16384,null,0,yo,[],null,null),r.rb(14,540672,null,0,_o,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Fb(2048,null,mi,null,[_o]),r.rb(16,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(17,0,null,null,13,"div",[["class","form"]],null,null,null,null,null)),(t()(),r.sb(18,0,null,null,12,"div",[["class","email"]],null,null,null,null,null)),(t()(),r.sb(19,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Correo electronico"])),(t()(),r.sb(21,0,null,null,7,"input",[["class","form-control"],["formControlName","email"],["id","email"],["label","email"],["required",""],["type","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,22)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,22).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,22)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,22)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(22,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(23,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(26,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(28,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,Ya)),r.rb(30,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(31,0,null,null,13,"div",[["class","form"]],null,null,null,null,null)),(t()(),r.sb(32,0,null,null,12,"div",[["class","password"]],null,null,null,null,null)),(t()(),r.sb(33,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Contrase\xf1a"])),(t()(),r.sb(35,0,null,null,7,"input",[["formControlName","password"],["id","password"],["label","password"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,36)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,36).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,36)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,36)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(36,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(37,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(40,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(42,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,Ja)),r.rb(44,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(45,0,null,null,12,"div",[["class","terms"]],null,null,null,null,null)),(t()(),r.sb(46,0,null,null,7,"input",[["formControlName","cb"],["id","cb"],["required",""],["type","checkbox"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(t,e,n){var i=!0;return"change"===e&&(i=!1!==r.Db(t,47).onChange(n.target.checked)&&i),"blur"===e&&(i=!1!==r.Db(t,47).onTouched()&&i),i}),null,null)),r.rb(47,16384,null,0,pi,[r.C,r.k],null,null),r.rb(48,16384,null,0,Ao,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Ao]),r.Fb(1024,null,di,(function(t){return[t]}),[pi]),r.rb(51,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(53,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(54,0,null,null,1,"a",[["id","terminos"],["mat-raised-button",""]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openDialog()&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Acepto los terminos y las condiciones"])),(t()(),r.hb(16777216,null,null,1,null,Xa)),r.rb(57,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(58,0,null,null,2,"div",[["class","submit"]],null,null,null,null,null)),(t()(),r.sb(59,0,null,null,1,"button",[["class","btn btn-success"],["type","submit"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Registrarme"])),(t()(),r.sb(61,0,null,null,0,"div",[["class","container-pic"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,4,0,"/login"),t(e,5,0),t(e,14,0,n.userSignUp),t(e,23,0,""),t(e,26,0,"email"),t(e,30,0,n.isSubmitted&&(null==n.formsControls.email.errors?null:n.formsControls.email.errors.required)),t(e,37,0,""),t(e,40,0,"password"),t(e,44,0,n.isSubmitted&&(null==n.formsControls.email.errors?null:n.formsControls.email.errors.required)),t(e,48,0,""),t(e,51,0,"cb"),t(e,57,0,n.isSubmitted&&(null==n.formsControls.email.errors?null:n.formsControls.email.errors.required))}),(function(t,e){t(e,3,0,r.Db(e,5).inline,"primary"!==r.Db(e,5).color&&"accent"!==r.Db(e,5).color&&"warn"!==r.Db(e,5).color),t(e,12,0,r.Db(e,16).ngClassUntouched,r.Db(e,16).ngClassTouched,r.Db(e,16).ngClassPristine,r.Db(e,16).ngClassDirty,r.Db(e,16).ngClassValid,r.Db(e,16).ngClassInvalid,r.Db(e,16).ngClassPending),t(e,21,0,r.Db(e,23).required?"":null,r.Db(e,28).ngClassUntouched,r.Db(e,28).ngClassTouched,r.Db(e,28).ngClassPristine,r.Db(e,28).ngClassDirty,r.Db(e,28).ngClassValid,r.Db(e,28).ngClassInvalid,r.Db(e,28).ngClassPending),t(e,35,0,r.Db(e,37).required?"":null,r.Db(e,42).ngClassUntouched,r.Db(e,42).ngClassTouched,r.Db(e,42).ngClassPristine,r.Db(e,42).ngClassDirty,r.Db(e,42).ngClassValid,r.Db(e,42).ngClassInvalid,r.Db(e,42).ngClassPending),t(e,46,0,r.Db(e,48).required?"":null,r.Db(e,53).ngClassUntouched,r.Db(e,53).ngClassTouched,r.Db(e,53).ngClassPristine,r.Db(e,53).ngClassDirty,r.Db(e,53).ngClassValid,r.Db(e,53).ngClassInvalid,r.Db(e,53).ngClassPending)}))}var $a=r.ob("app-signup",Ka,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-signup",[],null,null,null,Za,Qa)),r.rb(1,114688,null,0,Ka,[Vo],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),ts=function(){function t(e,n){_classCallCheck(this,t),this.authService=e,this.activatedRoutes=n,this.userEmail=new oo({email:new io("")})}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(t){t||alert("Type in your email first"),this.authService.resetPassword(t).then((function(){return alert("A password reset link has been sent to your email address")}),(function(t){return alert(t)})).catch((function(t){return alert("An error occurred while attempting to reset your password")}))}}]),t}(),es=r.qb({encapsulation:0,styles:[[".maindiv[_ngcontent-%COMP%]{margin-left:0;margin-top:0;width:100%;height:100%;float:left;text-align:center}.left-side[_ngcontent-%COMP%]{width:80%;left:10%;right:10%;height:60%;margin-top:20%;margin-bottom:20%;padding:0;float:left;background-repeat:no-repeat;background-position:center;background-size:cover;position:relative;z-index:1}.title[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center;text-align:center;float:left}.wrap-login[_ngcontent-%COMP%]{justify-content:center;align-items:center;text-align:center;width:100%;height:60%;float:left}.email[_ngcontent-%COMP%]{display:inline-block;margin-top:30px;width:100%;text-align:center;float:left;margin-bottom:20px}.button[_ngcontent-%COMP%]{width:100%;float:left;display:inline-block;text-align:center;margin-bottom:20px}.forgot[_ngcontent-%COMP%]{margin-top:30px}.back[_ngcontent-%COMP%]{position:absolute;float:left;width:50px;height:50px;margin-left:0;margin-top:10px}.backHome[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function ns(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,22,"div",[["class","maindiv"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,4,"div",[["class","back"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,3,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","backHome mat-icon notranslate"],["role","img"],["routerLink","/login"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,3).onClick()&&i),i}),Ba,qa)),r.rb(3,16384,null,0,Rr,[Pr,En,[8,null],r.C,r.k],{routerLink:[0,"routerLink"]},null),r.rb(4,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["arrow_back"])),(t()(),r.sb(6,0,null,null,15,"div",[["class","left-side"]],null,null,null,null,null)),(t()(),r.sb(7,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(t()(),r.sb(8,0,null,null,1,"p",[["class","body-text"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Recupera tu Contrase\xf1a"])),(t()(),r.sb(10,0,null,null,11,"div",[["class","wrap-login"]],null,null,null,null,null)),(t()(),r.sb(11,0,null,null,10,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Db(t,13).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,13).onReset()&&i),i}),null,null)),r.rb(12,16384,null,0,yo,[],null,null),r.rb(13,540672,null,0,_o,[[8,null],[8,null]],null,null),r.Fb(2048,null,mi,null,[_o]),r.rb(15,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(16,0,null,null,3,"div",[["class","email"]],null,null,null,null,null)),(t()(),r.sb(17,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Correo electronico"])),(t()(),r.sb(19,0,[["email",1]],null,0,"input",[["aria-describedby","emailHelp"],["id","email"],["type","email"]],null,null,null,null,null)),(t()(),r.sb(20,0,null,null,1,"div",[["class","button"]],null,null,null,null,null)),(t()(),r.sb(21,0,null,null,0,"input",[["class","btn btn-primary"],["type","button"],["value","Cambiar contrase\xf1a"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onSubmit(r.Db(t,19).value)&&i),i}),null,null)),(t()(),r.sb(22,0,null,null,0,"div",[["class","right-side"]],null,null,null,null,null))],(function(t,e){t(e,3,0,"/login"),t(e,4,0)}),(function(t,e){t(e,2,0,r.Db(e,4).inline,"primary"!==r.Db(e,4).color&&"accent"!==r.Db(e,4).color&&"warn"!==r.Db(e,4).color),t(e,11,0,r.Db(e,15).ngClassUntouched,r.Db(e,15).ngClassTouched,r.Db(e,15).ngClassPristine,r.Db(e,15).ngClassDirty,r.Db(e,15).ngClassValid,r.Db(e,15).ngClassInvalid,r.Db(e,15).ngClassPending)}))}var rs=r.ob("app-forgot-password",ts,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-forgot-password",[],null,null,null,ns,es)),r.rb(1,114688,null,0,ts,[Vo,En],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),is=function(){function t(e,n,r,i){_classCallCheck(this,t),this.afAuth=e,this.fb=n,this.router=r,this.activatedRoute=i,this.frmSetNewPassword=this.fb.group({password:[null],confirmPassword:[null]})}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var t=this,e=this.frmSetNewPassword.controls.password.value;e===this.frmSetNewPassword.controls.confirmPassword.value&&this.afAuth.auth.confirmPasswordReset(this.activatedRoute.snapshot.queryParams.oobCode,e).then((function(){return t.router.navigate(["login"])})).catch((function(t){console.log(t)}))}}]),t}(),os=r.qb({encapsulation:0,styles:[[""]],data:{}});function as(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,35,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.Db(t,2).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,2).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSubmit()&&i),i}),null,null)),r.rb(1,16384,null,0,yo,[],null,null),r.rb(2,540672,null,0,_o,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Fb(2048,null,mi,null,[_o]),r.rb(4,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(5,0,null,null,1,"h3",[["class","title is-5 has-text-black"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,[" Set a new password "])),(t()(),r.sb(7,0,null,null,1,"h4",[["class","subtitle is-6 has-text-grey"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Please enter and confirm your new password"])),(t()(),r.sb(9,0,null,null,9,"div",[["class","field"]],null,null,null,null,null)),(t()(),r.sb(10,0,null,null,1,"label",[["class","label"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Password: "])),(t()(),r.sb(12,0,null,null,6,"div",[["class","control"]],null,null,null,null,null)),(t()(),r.sb(13,0,null,null,5,"input",[["class","input "],["formControlName","password"],["name","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,14)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,14).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,14)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,14)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(14,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(16,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(18,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(19,0,null,null,11,"div",[["class","field"]],null,null,null,null,null)),(t()(),r.sb(20,0,null,null,1,"label",[["class","label"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Confirm Password: "])),(t()(),r.sb(22,0,null,null,8,"div",[["class","control"]],null,null,null,null,null)),(t()(),r.sb(23,0,null,null,5,"input",[["class","input "],["formControlName","confirmPassword"],["name","confirmPassword"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,24)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,24).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,24)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,24)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(24,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(26,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(28,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(29,0,null,null,1,"div",[["class","has-text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,[" Confirm password is required! "])),(t()(),r.sb(31,0,null,null,4,"div",[["class","field"]],null,null,null,null,null)),(t()(),r.sb(32,0,null,null,3,"div",[["class","control"]],null,null,null,null,null)),(t()(),r.sb(33,0,null,null,2,"button",[["class","button is-fullwidth is-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r.sb(34,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Reset"]))],(function(t,e){t(e,2,0,e.component.frmSetNewPassword),t(e,16,0,"password"),t(e,26,0,"confirmPassword")}),(function(t,e){var n=e.component;t(e,0,0,r.Db(e,4).ngClassUntouched,r.Db(e,4).ngClassTouched,r.Db(e,4).ngClassPristine,r.Db(e,4).ngClassDirty,r.Db(e,4).ngClassValid,r.Db(e,4).ngClassInvalid,r.Db(e,4).ngClassPending),t(e,13,0,r.Db(e,18).ngClassUntouched,r.Db(e,18).ngClassTouched,r.Db(e,18).ngClassPristine,r.Db(e,18).ngClassDirty,r.Db(e,18).ngClassValid,r.Db(e,18).ngClassInvalid,r.Db(e,18).ngClassPending),t(e,23,0,r.Db(e,28).ngClassUntouched,r.Db(e,28).ngClassTouched,r.Db(e,28).ngClassPristine,r.Db(e,28).ngClassDirty,r.Db(e,28).ngClassValid,r.Db(e,28).ngClassInvalid,r.Db(e,28).ngClassPending),t(e,33,0,!n.frmSetNewPassword.valid)}))}var ss=r.ob("app-user-management",is,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-user-management",[],null,null,null,as,os)),r.rb(1,114688,null,0,is,[Uo,xo,Pr,En],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),us=function(){function t(e,n){_classCallCheck(this,t),this.afAuth=e,this.activatedRoute=n}return _createClass(t,[{key:"ngOnInit",value:function(){this.afAuth.auth.applyActionCode(this.activatedRoute.snapshot.queryParams.oobCode).then((function(){})).catch((function(t){}))}}]),t}(),ls=r.qb({encapsulation:0,styles:[[""]],data:{}});function cs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Su correo electronico ha sido validado."]))],null,null)}var hs=function(){function t(e){_classCallCheck(this,t),this.activatedActivated=e,this.mode=this.activatedActivated.snapshot.queryParams.mode}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),fs=r.qb({encapsulation:0,styles:[[""]],data:{}});function ds(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.sb(1,0,null,null,1,"app-user-management",[],null,null,null,as,os)),r.rb(2,114688,null,0,is,[Uo,xo,Pr,En],null,null)],(function(t,e){t(e,2,0)}),null)}function ps(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.sb(1,0,null,null,1,"app-confirm-email",[],null,null,null,cs,ls)),r.rb(2,114688,null,0,us,[Uo,En],null,null)],(function(t,e){t(e,2,0)}),null)}function vs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.sb(1,0,null,null,1,"a",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Nada"]))],null,null)}function ys(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,7,null,null,null,null,null,null,null)),r.rb(1,16384,null,0,a.m,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.hb(16777216,null,null,1,null,ds)),r.rb(3,278528,null,0,a.n,[r.O,r.K,a.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.hb(16777216,null,null,1,null,ps)),r.rb(5,278528,null,0,a.n,[r.O,r.K,a.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.hb(16777216,null,null,1,null,vs)),r.rb(7,16384,null,0,a.o,[r.O,r.K,a.m],null,null)],(function(t,e){t(e,1,0,e.component.mode),t(e,3,0,"resetPassword"),t(e,5,0,"verifyEmail")}),null)}var gs=r.ob("app-management",hs,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-management",[],null,null,null,ys,fs)),r.rb(1,114688,null,0,hs,[En],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),ms=function(){function t(e,n,r,i){_classCallCheck(this,t),this.authService=e,this.product=n,this.router=r,this.storage=i,this.selectedImage=null,this.editingCat=!1,this.editingProd=!1,this.formProduct=new oo({id:new io(""),category:new io(""),title:new io("",Ii.required),description:new io(""),price:new io("",Ii.required),image:new io("")}),this.formCat=new oo({category:new io("",Ii.required)}),this.popUpOpen=!1,this.popUpOpenProduct=!1}return _createClass(t,[{key:"openPopUp",value:function(){this.popUpOpen=!0}},{key:"cancelOption",value:function(){this.popUpOpen=!1,this.editingCat=!1,this.formCat.reset(),this.formProduct.reset()}},{key:"openPopUpProduct",value:function(t){this.popUpOpenProduct=!0}},{key:"cancelOptionProduct",value:function(){this.popUpOpenProduct=!1}},{key:"ngOnInit",value:function(){var t=this;this.userId=this.authService.userId,this.getData(this.authService.userId),this.product.getAllCategories(this.authService.userId),this.product.getAllCategories(this.authService.userId).valueChanges().subscribe((function(e){t.categoryList=[],t.productListPerCat=[],e.forEach((function(e){t.categoryList.push(e),console.log(e.id),t.product.getProductsPerCategory(e.id).valueChanges().subscribe((function(e){e.forEach((function(e){var n=e;console.log(n.id),t.productListPerCat.push(n)}))}))}))}))}},{key:"clickNuevaCat",value:function(){this.nuevaCat=!0}},{key:"getData",value:function(t){var e=this;this.authService.getProfileForMyDashboard(t).subscribe((function(t){e.name=t.payload.val().name,e.image=t.payload.val().image,e.direccion=t.payload.val().direccion,console.log(e.name)}))}},{key:"showPreview",value:function(t){var e=this;if(t.target.files&&t.target.files[0]){var n=new FileReader;n.readAsDataURL(t.target.files[0]),n.onload=function(t){e.imgSrc=t.target.result,e.uploadedPic=!0},this.selectedImage=t.target.files[0]}else this.imgSrc=null,this.selectedImage=null,console.log("showPreview doesnt not work")}},{key:"removePic",value:function(){this.imgSrc=null,this.uploadedPic=!1,this.selectedImage=null}},{key:"onSubmit",value:function(t,e,n){var r=this;if(this.isSubmitted=!0,this.formProduct.valid)if(!0===this.uploadedPic){var i="".concat(this.selectedImage.name.split(".").slice(0,-1).join("."),"_").concat((new Date).getTime()),o=this.storage.ref(i);this.storage.upload(i,this.selectedImage).snapshotChanges().pipe(ut((function(){o.getDownloadURL().subscribe((function(i){t.image=i,r.product.newProduct(t,e,n),r.formProduct.reset(),r.isSubmitted=!1,r.imgSrc=null,r.uploadedPic=!1,r.selectedImage=null}))}))).subscribe()}else this.product.newProduct(t,e,n),this.formProduct.reset(),this.isSubmitted=!1;else console.log("error")}},{key:"onSubmitCat",value:function(t){this.formCat?(this.product.newCategory(t),this.popUpOpen=!1,this.formCat.reset()):console.log("error")}},{key:"onDeleteCat",value:function(t){this.product.deleteCategory(t)}},{key:"onEditCat",value:function(t){var e=this;this.popUpOpen=!0,this.editingCat=!0,this.selectedCat=t,this.product.getCat(t).valueChanges().subscribe((function(n){e.formCat.patchValue({$key:t,category:n.category})}))}},{key:"onSubmitEditCat",value:function(t){this.product.updateCat(this.selectedCat,t),this.cancelOption(),this.formCat.reset()}},{key:"onEditProduct",value:function(t,e,n){var r=this;this.openPopUpAddProduct(n),this.editingProd=!0,this.selectedProd=t,this.product.getProduct(t,e).valueChanges().subscribe((function(t){null!=t.image?(r.uploadedPic=!0,r.imgSrc=t.image,r.oldImage=t.image,r.formProduct.patchValue({title:t.title,description:t.description,price:t.price})):r.formProduct.patchValue({title:t.title,description:t.description,price:t.price})}))}},{key:"onSubmitEditProduct",value:function(t,e){var n=this;if(null===this.imgSrc)this.product.updateProduct(this.selectedProd,t,e),this.cancelOptionProduct();else if(this.oldImage===this.imgSrc)t.image=this.imgSrc,this.product.updateProduct(this.selectedProd,t,e),this.formProduct.reset(),this.isSubmitted=!1,this.cancelOptionProduct(),this.uploadedPic=!1,this.imgSrc=null;else{console.log(this.oldImage),console.log(this.imgSrc);var r="".concat(this.selectedImage.name.split(".").slice(0,-1).join("."),"_").concat((new Date).getTime()),i=this.storage.ref(r);this.storage.upload(r,this.selectedImage).snapshotChanges().pipe(ut((function(){i.getDownloadURL().subscribe((function(r){t.image=r,n.product.updateProduct(n.selectedProd,t,e),n.formProduct.reset(),n.isSubmitted=!1,n.imgSrc=null,n.uploadedPic=!1,n.selectedImage=null}))}))).subscribe()}}},{key:"onDeleteProduct",value:function(t,e){console.log(t,e),confirm("\xbfEstas seguro de borrar el producto?")&&this.product.deleteProduct(t,e)}},{key:"onSignOut",value:function(){this.authService.SignOut()}},{key:"selectViewMore",value:function(t,e){this.viewMoreCat=t.category}},{key:"unselectViewMore",value:function(t){this.viewMoreCat=null}},{key:"makeViewMore",value:function(t){return this.viewMoreCat===t.category}},{key:"openPopUpAddProduct",value:function(t){this.viewProductCat=t}},{key:"unselectProductMore",value:function(t){this.viewProductCat=[],this.imgSrc=null,this.uploadedPic=!1,this.selectedImage=null}},{key:"makeProductMore",value:function(t){return this.viewProductCat===t}},{key:"editButtonClick",value:function(t){this.router.navigate(["editar/",t])}},{key:"formsControls",get:function(){return this.formProduct.controls}},{key:"formsControlsCat",get:function(){return this.formCat.controls}}]),t}(),_s=r.qb({encapsulation:0,styles:[[".profile[_ngcontent-%COMP%]{display:block;width:130px;height:130px;border-radius:10%;margin-left:5px;margin-top:5px;background-repeat:no-repeat;background-position:center center;background-size:cover;float:left}.name[_ngcontent-%COMP%]{display:table}.nameUser[_ngcontent-%COMP%]{float:left;margin-left:5px;display:block;line-height:5px;position:relative}.user[_ngcontent-%COMP%]{display:block;min-width:200px;max-width:500px;width:100%;margin-top:50px;margin-left:5px}.iconDotsProfile[_ngcontent-%COMP%]{float:left}.dir[_ngcontent-%COMP%]{display:block;min-width:200px;max-width:500px;width:100%;margin-left:5px}.address[_ngcontent-%COMP%]{display:block;color:#778899;float:left;margin-left:5px;line-height:5px;position:relative}.icons[_ngcontent-%COMP%]{float:left}.addIconProduct[_ngcontent-%COMP%]{margin-top:10px;text-align:center;vertical-align:middle}.iconProduct[_ngcontent-%COMP%]{display:inline-table;vertical-align:middle;color:#46c646}.textIconProduct[_ngcontent-%COMP%]{display:inline-table;vertical-align:middle;color:#778899}.pic[_ngcontent-%COMP%]{display:inline}.header[_ngcontent-%COMP%]{min-width:330px;width:100%;float:left}.create[_ngcontent-%COMP%]{width:100%;float:left;text-align:center;margin-top:15px}.add[_ngcontent-%COMP%]{color:#46c646;font-size:30px;display:inline-table;vertical-align:middle}.crearButton[_ngcontent-%COMP%], .textNueva[_ngcontent-%COMP%]{color:#000;font-size:15px;display:inline-table;vertical-align:middle}.categoryContainer[_ngcontent-%COMP%]{vertical-align:middle}.divCategory[_ngcontent-%COMP%]{width:100%;height:40px;vertical-align:middle;display:inline-table}.categoryTitleDiv[_ngcontent-%COMP%]{height:38px;display:inline-table;vertical-align:middle}.categoryTitle[_ngcontent-%COMP%]{margin-top:7px;display:inline-block;vertical-align:middle}.icondotsCategory[_ngcontent-%COMP%]{display:inline-table;height:38px;width:10%;float:left;margin:auto;padding:0}.dotsCategory[_ngcontent-%COMP%]{display:inline-table;margin-left:5px;float:left}.expand[_ngcontent-%COMP%]{height:38px;color:#778899;display:inline-table;float:right;margin-right:5px;padding-top:7px}.createCat[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;padding:.35em 1.2em;border-bottom:none;border-top:none;border-right:none;border-left:none;margin:0 .3em .3em 0;border-radius:0;text-decoration:none;font-family:Roboto,sans-serif;font-weight:300;text-align:center;transition:all .2s;height:45px}.categoriesAll[_ngcontent-%COMP%]{max-width:600px;width:90%;display:inline-block}.middle[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center}.collapsed[_ngcontent-%COMP%]{height:0;overflow:hidden}.collapsedP[_ngcontent-%COMP%]{height:0;width:0%;overflow:hidden}.expandedP[_ngcontent-%COMP%]{min-width:300px;min-height:100px;background-color:rgba(0,0,0,.5);opacity:.3;width:100%;height:100%;z-index:1;position:fixed;padding:0;margin:0;top:0;left:0}.fieldProducts[_ngcontent-%COMP%]{padding:0;border-bottom-color:#fff}.divProducts[_ngcontent-%COMP%]{width:100%;margin:0;text-align:left;float:left}.textPro[_ngcontent-%COMP%]{margin-top:5px;padding-left:10px;width:80%;float:left}.icondots[_ngcontent-%COMP%]{padding-top:0;width:50px;float:right;text-align:right}.textProducts[_ngcontent-%COMP%]{font-size:15px;line-height:0;vertical-align:middle}.textProductsPrice[_ngcontent-%COMP%]{font-size:15px;line-height:0}.textDescription[_ngcontent-%COMP%]{font-size:13px;line-height:0;vertical-align:middle;display:inline-block}.dots[_ngcontent-%COMP%]{float:right}.dotsProfileIcon[_ngcontent-%COMP%]{display:inline-block;margin-left:5px;font-size:30px}.popUpBody[_ngcontent-%COMP%]{min-width:300px;min-height:100px;background-color:rgba(0,0,0,.5);width:100%;height:100%;z-index:2;position:absolute}.shadow[_ngcontent-%COMP%]{min-width:300px;min-height:100px;width:100%;height:100%;z-index:1;position:absolute}.popUpBodyProduct[_ngcontent-%COMP%]{min-width:300px;min-height:100px;background-color:rgba(0,0,0,.5);opacity:.3;width:100%;height:100%;z-index:1;position:fixed;padding:0;margin:0;top:0;left:0}.shadowProduct[_ngcontent-%COMP%]{min-width:300px;min-height:100px;width:100%;height:100%;z-index:1;position:fixed;padding:0;margin:0;top:0;left:0}.box[_ngcontent-%COMP%]{min-width:300px;min-height:100px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:50%;background-color:#fff;z-index:1;margin:auto;text-align:center;justify-content:center;vertical-align:middle}.boxProduct[_ngcontent-%COMP%]{border-radius:1%;min-width:300px;min-height:100px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:50%;background-color:#fff;z-index:4;margin:auto;text-align:center;justify-content:center;vertical-align:middle}.salir[_ngcontent-%COMP%]{color:#778899;float:right}.newCategory[_ngcontent-%COMP%]{vertical-align:middle;justify-content:center;text-align:center;margin-left:5%;margin-right:5%;width:90%;height:90%}.formPopUp[_ngcontent-%COMP%]{margin-top:30px;display:inline-block}.buttonPopUp[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px}header[_ngcontent-%COMP%]{position:absolute;display:inline-block;left:0;right:0;top:-.65em}footer[_ngcontent-%COMP%]{padding-top:2ch}.optionsDiv[_ngcontent-%COMP%]{position:absolute;z-index:1;overflow:hidden}.option[_ngcontent-%COMP%]{display:block}.steps[_ngcontent-%COMP%]{color:#2fb82e}.principioHeader[_ngcontent-%COMP%]{margin-top:15px}.collapsedPopUp[_ngcontent-%COMP%]{width:0;height:0}.iconAnadir[_ngcontent-%COMP%], .textNuevoProducto[_ngcontent-%COMP%]{cursor:pointer}.buttonUploadPicture[_ngcontent-%COMP%]{margin-top:5px;cursor:pointer}.divPicProduct[_ngcontent-%COMP%]{margin-top:5px;width:100%;float:left}.picProduct[_ngcontent-%COMP%]{float:left}.removePic[_ngcontent-%COMP%]{float:left;size:30px;cursor:pointer}"]],data:{}});function bs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"img",[["class","profile"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.image)}))}function ws(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"input",[["class","btn btn-success buttonPopUp"],["type","button"],["value","Guardar"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onSubmitCat(i.formCat.value)&&r),r}),null,null))],null,(function(t,e){t(e,0,0,!e.component.formCat.valid)}))}function Cs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"input",[["class","btn btn-success buttonPopUp"],["type","button"],["value","Guardar1"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onSubmitEditCat(i.formCat.value)&&r),r}),null,null))],null,(function(t,e){t(e,0,0,!e.component.formCat.valid)}))}function ks(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,18,"div",[["class","popUpBody"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,0,"div",[["class","shadow"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.cancelOption()&&r),r}),null,null)),(t()(),r.sb(2,0,null,null,16,"div",[["class","box"]],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","salir mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.cancelOption()&&r),r}),Ba,qa)),r.rb(4,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["clear"])),(t()(),r.sb(6,0,null,null,12,"div",[["class","newCategory"]],null,null,null,null,null)),(t()(),r.sb(7,0,null,null,7,"input",[["class","form-control formPopUp"],["formControlName","category"],["placeholder","Nueva categor\xeda (*)"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,8)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,8).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,8)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,8)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(8,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(9,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(12,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(14,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,ws)),r.rb(16,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Cs)),r.rb(18,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0),t(e,9,0,""),t(e,12,0,"category"),t(e,16,0,!n.editingCat),t(e,18,0,n.editingCat)}),(function(t,e){t(e,3,0,r.Db(e,4).inline,"primary"!==r.Db(e,4).color&&"accent"!==r.Db(e,4).color&&"warn"!==r.Db(e,4).color),t(e,7,0,r.Db(e,9).required?"":null,r.Db(e,14).ngClassUntouched,r.Db(e,14).ngClassTouched,r.Db(e,14).ngClassPristine,r.Db(e,14).ngClassDirty,r.Db(e,14).ngClassValid,r.Db(e,14).ngClassInvalid,r.Db(e,14).ngClassPending)}))}function Es(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","expand mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.selectViewMore(t.parent.context.$implicit,t.parent.context.$implicit.id)&&r),r}),Ba,qa)),r.rb(1,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["expand_more"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,r.Db(e,1).inline,"primary"!==r.Db(e,1).color&&"accent"!==r.Db(e,1).color&&"warn"!==r.Db(e,1).color)}))}function Ss(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","expand mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.unselectViewMore(t.parent.context.$implicit)&&r),r}),Ba,qa)),r.rb(1,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["expand_less"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,r.Db(e,1).inline,"primary"!==r.Db(e,1).color&&"accent"!==r.Db(e,1).color&&"warn"!==r.Db(e,1).color)}))}function Ts(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"div",[["class","collapsed"]],null,null,null,null,null))],null,null)}function Is(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,23,null,null,null,null,null,null,null)),(t()(),r.sb(1,0,null,null,22,"li",[["class","list-group-item fieldProducts"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,21,"div",[["class","divProducts"]],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,9,"div",[["class","textPro"]],null,null,null,null,null)),(t()(),r.sb(4,0,null,null,1,"a",[["class","textProducts"]],null,null,null,null,null)),(t()(),r.Ib(5,null,["",""])),(t()(),r.sb(6,0,null,null,1,"a",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["\xa0"])),(t()(),r.sb(8,0,null,null,1,"a",[["class","textProductsPrice"]],null,null,null,null,null)),(t()(),r.Ib(9,null,["","\u20ac"])),(t()(),r.sb(10,0,null,null,2,"div",[["class","textDescDiv"]],null,null,null,null,null)),(t()(),r.sb(11,0,null,null,1,"p",[["class","textDescription"]],null,null,null,null,null)),(t()(),r.Ib(12,null,["",""])),(t()(),r.sb(13,0,null,null,10,"div",[["class","icondots"]],null,null,null,null,null)),(t()(),r.sb(14,0,null,null,9,"div",[["class","d-inline-block"],["ngbDropdown",""]],null,null,null,null,null)),(t()(),r.sb(15,0,null,null,3,"button",[["aria-expanded","false"],["aria-haspopup","true"],["class","btn"],["data-toggle","dropdown"],["id","dropdownMenuButton"],["type","button"]],null,null,null,null,null)),(t()(),r.sb(16,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","dots mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(17,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["more_vert"])),(t()(),r.sb(19,0,null,null,4,"div",[["aria-labelledby","dropdownMenuButton"],["class","dropdown-menu optionsDiv"]],null,null,null,null,null)),(t()(),r.sb(20,0,null,null,1,"a",[["class","dropdown-item"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onEditProduct(t.parent.context.$implicit.id,t.parent.parent.parent.context.$implicit.id,t.parent.parent.parent.context.$implicit)&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Editar"])),(t()(),r.sb(22,0,null,null,1,"a",[["class","dropdown-item"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteProduct(t.parent.parent.parent.context.$implicit.id,t.parent.context.$implicit.id)&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Eliminar"]))],(function(t,e){t(e,17,0)}),(function(t,e){t(e,5,0,e.parent.context.$implicit.title),t(e,9,0,e.parent.context.$implicit.price),t(e,12,0,e.parent.context.$implicit.description),t(e,16,0,r.Db(e,17).inline,"primary"!==r.Db(e,17).color&&"accent"!==r.Db(e,17).color&&"warn"!==r.Db(e,17).color)}))}function As(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,Is)),r.rb(2,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(0,null,null,0))],(function(t,e){t(e,2,0,e.context.$implicit.categoryId===e.parent.parent.context.$implicit.id)}),null)}function Os(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function xs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Este campo es obligatorio"]))],null,null)}function Ns(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"img",[["class","picProduct"],["height","50px"],["margin-bottom","10px"],["width","50px"]],[[8,"hidden",0],[8,"src",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t.parent,65).click()&&i),i}),null,null))],null,(function(t,e){var n=e.component;t(e,0,0,!n.uploadedPic,n.imgSrc)}))}function Ds(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"input",[["class","btn btn-success buttonPopUp"],["type","button"],["value","Guardar"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onSubmit(i.formProduct.value,t.parent.parent.context.$implicit.id,t.parent.parent.context.$implicit.category)&&r),r}),null,null))],null,null)}function Ps(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"input",[["class","btn btn-success buttonPopUp"],["type","button"],["value","Guardar1"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onSubmitEditProduct(i.formProduct.value,t.parent.parent.context.$implicit.id)&&r),r}),null,null))],null,null)}function Rs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,77,"div",[["class","expanded"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,As)),r.rb(2,278528,null,0,a.i,[r.O,r.K,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r.sb(3,0,null,null,5,"div",[["class","addIconProduct"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openPopUpAddProduct(t.parent.context.$implicit)&&r),r}),null,null)),(t()(),r.sb(4,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconProduct iconAnadir mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(5,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["add_circle_outline"])),(t()(),r.sb(7,0,null,null,1,"a",[["class","textNuevoProducto"]],null,null,null,null,null)),(t()(),r.Ib(8,null,["A\xf1ade ",""])),(t()(),r.sb(9,0,null,null,3,"div",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.unselectProductMore(t.parent.context.$implicit)&&r),r}),null,null)),r.Fb(512,null,a.u,a.v,[r.q,r.r,r.k,r.C]),r.rb(11,278528,null,0,a.h,[a.u],{ngClass:[0,"ngClass"]},null),r.Eb(12,{collapsedP:0,expandedP:1}),(t()(),r.sb(13,0,null,null,64,"div",[],null,null,null,null,null)),r.Fb(512,null,a.u,a.v,[r.q,r.r,r.k,r.C]),r.rb(15,278528,null,0,a.h,[a.u],{ngClass:[0,"ngClass"]},null),r.Eb(16,{collapsedP:0,boxProduct:1}),(t()(),r.sb(17,0,null,null,60,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Db(t,19).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,19).onReset()&&i),i}),null,null)),r.rb(18,16384,null,0,yo,[],null,null),r.rb(19,540672,null,0,_o,[[8,null],[8,null]],{form:[0,"form"]},null),r.Fb(2048,null,mi,null,[_o]),r.rb(21,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(22,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","salir mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.unselectProductMore(t.parent.context.$implicit)&&r),r}),Ba,qa)),r.rb(23,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["clear"])),(t()(),r.sb(25,0,null,null,52,"div",[["class","newCategory"]],null,null,null,null,null)),(t()(),r.sb(26,0,null,null,5,"input",[["formControlName","category"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,27)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,27).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,27)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,27)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(27,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(29,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(31,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(32,0,null,null,7,"input",[["class","form-control formPopUp"],["formControlName","title"],["id","title"],["placeholder","Nombre (*)"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,33)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,33).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,33)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,33)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(33,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(34,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(37,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(39,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,Os)),r.rb(41,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(42,0,null,null,5,"input",[["class","form-control formPopUp"],["formControlName","description"],["placeholder","Descripci\xf3n (opcional)"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,43)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,43).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,43)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,43)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(43,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(45,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(47,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(48,0,null,null,8,"input",[["class","form-control formPopUp"],["formControlName","price"],["placeholder","Precio (*)"],["required",""],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,49)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,49).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,49)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,49)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r.Db(t,50).onChange(n.target.value)&&i),"input"===e&&(i=!1!==r.Db(t,50).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,50).onTouched()&&i),i}),null,null)),r.rb(49,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(50,16384,null,0,Pi,[r.C,r.k],null,null),r.rb(51,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t,e){return[t,e]}),[yi,Pi]),r.rb(54,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(56,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.hb(16777216,null,null,1,null,xs)),r.rb(58,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(59,0,null,null,14,"div",[["class","divPicProduct"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,Ns)),r.rb(61,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(62,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","removePic mat-icon notranslate"],["role","img"]],[[8,"hidden",0],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.removePic()&&r),r}),Ba,qa)),r.rb(63,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["clear"])),(t()(),r.sb(65,0,[["fileUploader",1]],null,5,"input",[["aria-describedby","inputGroupFileAddon01"],["class","custom-file-input"],["formControlName","image"],["type","file"]],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.Db(t,66)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,66).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,66)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,66)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==o.showPreview(n)&&i),i}),null,null)),r.rb(66,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(68,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(70,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(71,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(t()(),r.sb(72,0,null,null,1,"span",[["class","input-group-text buttonUploadPicture"],["id","inputGroupFileAddon01"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,65).click()&&i),i}),null,null)),(t()(),r.Ib(-1,null,["A\xf1adir foto (opcional)"])),(t()(),r.hb(16777216,null,null,1,null,Ds)),r.rb(75,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Ps)),r.rb(77,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.productListPerCat),t(e,5,0);var r=t(e,12,0,!n.makeProductMore(e.parent.context.$implicit),n.makeProductMore(e.parent.context.$implicit));t(e,11,0,r);var i=t(e,16,0,!n.makeProductMore(e.parent.context.$implicit),n.makeProductMore(e.parent.context.$implicit));t(e,15,0,i),t(e,19,0,n.formProduct),t(e,23,0),t(e,29,0,"category"),t(e,34,0,""),t(e,37,0,"title"),t(e,41,0,n.isSubmitted&&(null==n.formsControls.title.errors?null:n.formsControls.title.errors.required)),t(e,45,0,"description"),t(e,51,0,""),t(e,54,0,"price"),t(e,58,0,n.isSubmitted&&(null==n.formsControls.price.errors?null:n.formsControls.price.errors.required)),t(e,61,0,n.imgSrc),t(e,63,0),t(e,68,0,"image"),t(e,75,0,!n.editingProd),t(e,77,0,n.editingProd)}),(function(t,e){var n=e.component;t(e,4,0,r.Db(e,5).inline,"primary"!==r.Db(e,5).color&&"accent"!==r.Db(e,5).color&&"warn"!==r.Db(e,5).color),t(e,8,0,e.parent.context.$implicit.category),t(e,17,0,r.Db(e,21).ngClassUntouched,r.Db(e,21).ngClassTouched,r.Db(e,21).ngClassPristine,r.Db(e,21).ngClassDirty,r.Db(e,21).ngClassValid,r.Db(e,21).ngClassInvalid,r.Db(e,21).ngClassPending),t(e,22,0,r.Db(e,23).inline,"primary"!==r.Db(e,23).color&&"accent"!==r.Db(e,23).color&&"warn"!==r.Db(e,23).color),t(e,26,0,r.Db(e,31).ngClassUntouched,r.Db(e,31).ngClassTouched,r.Db(e,31).ngClassPristine,r.Db(e,31).ngClassDirty,r.Db(e,31).ngClassValid,r.Db(e,31).ngClassInvalid,r.Db(e,31).ngClassPending),t(e,32,0,r.Db(e,34).required?"":null,r.Db(e,39).ngClassUntouched,r.Db(e,39).ngClassTouched,r.Db(e,39).ngClassPristine,r.Db(e,39).ngClassDirty,r.Db(e,39).ngClassValid,r.Db(e,39).ngClassInvalid,r.Db(e,39).ngClassPending),t(e,42,0,r.Db(e,47).ngClassUntouched,r.Db(e,47).ngClassTouched,r.Db(e,47).ngClassPristine,r.Db(e,47).ngClassDirty,r.Db(e,47).ngClassValid,r.Db(e,47).ngClassInvalid,r.Db(e,47).ngClassPending),t(e,48,0,r.Db(e,51).required?"":null,r.Db(e,56).ngClassUntouched,r.Db(e,56).ngClassTouched,r.Db(e,56).ngClassPristine,r.Db(e,56).ngClassDirty,r.Db(e,56).ngClassValid,r.Db(e,56).ngClassInvalid,r.Db(e,56).ngClassPending),t(e,62,0,!n.uploadedPic,r.Db(e,63).inline,"primary"!==r.Db(e,63).color&&"accent"!==r.Db(e,63).color&&"warn"!==r.Db(e,63).color),t(e,65,0,!0,r.Db(e,70).ngClassUntouched,r.Db(e,70).ngClassTouched,r.Db(e,70).ngClassPristine,r.Db(e,70).ngClassDirty,r.Db(e,70).ngClassValid,r.Db(e,70).ngClassInvalid,r.Db(e,70).ngClassPending)}))}function Ms(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,23,"li",[["class","list-group-item categoryContainer"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,18,"div",[["class","divCategory"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,10,"div",[["class","icondotsCategory"]],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,9,"div",[["class","d-inline-block"],["ngbDropdown",""]],null,null,null,null,null)),(t()(),r.sb(4,0,null,null,3,"button",[["aria-expanded","false"],["aria-haspopup","true"],["class","btn"],["data-toggle","dropdown"],["id","dropdownMenuButton"],["type","button"]],null,null,null,null,null)),(t()(),r.sb(5,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","dotsCategory mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(6,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["more_vert"])),(t()(),r.sb(8,0,null,null,4,"div",[["aria-labelledby","dropdownMenuButton"],["class","dropdown-menu optionsDiv"]],null,null,null,null,null)),(t()(),r.sb(9,0,null,null,1,"a",[["class","dropdown-item"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onEditCat(t.context.$implicit.id)&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Editar"])),(t()(),r.sb(11,0,null,null,1,"a",[["class","dropdown-item"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteCat(t.context.$implicit.id)&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Eliminar"])),(t()(),r.sb(13,0,null,null,2,"div",[["class","categoryTitleDiv"]],null,null,null,null,null)),(t()(),r.sb(14,0,null,null,1,"a",[["class","categoryTitle"]],null,null,null,null,null)),(t()(),r.Ib(15,null,["",""])),(t()(),r.hb(16777216,null,null,1,null,Es)),r.rb(17,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Ss)),r.rb(19,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Ts)),r.rb(21,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Rs)),r.rb(23,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,6,0),t(e,17,0,!n.makeViewMore(e.context.$implicit)),t(e,19,0,n.makeViewMore(e.context.$implicit)),t(e,21,0,!n.makeViewMore(e.context.$implicit)),t(e,23,0,n.makeViewMore(e.context.$implicit))}),(function(t,e){t(e,5,0,r.Db(e,6).inline,"primary"!==r.Db(e,6).color&&"accent"!==r.Db(e,6).color&&"warn"!==r.Db(e,6).color),t(e,15,0,e.context.$implicit.category)}))}function Ls(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,24,"div",[["class","textPrincipio"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,2,"div",[["class","principioHeader"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["\xbfList@ para empezar? en 2 min tendr\xe1s tu carta en la nube"])),(t()(),r.sb(4,0,null,null,17,"div",[["class","pasosPrincipio"]],null,null,null,null,null)),(t()(),r.sb(5,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Pasos: "])),(t()(),r.sb(7,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconProduct steps mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(8,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["looks_one"])),(t()(),r.sb(10,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,['Haz click arriba en "+ Nueva Categoria" para crear las categor\xedas, por ejemplo: Bebidas, Entrantes, Postres o cualquier otra'])),(t()(),r.sb(12,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconProduct steps mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(13,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["looks_two"])),(t()(),r.sb(15,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Crea productos dentro de las categor\xedas creadas."])),(t()(),r.sb(17,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconProduct steps mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(18,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["looks_3"])),(t()(),r.sb(20,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Tu carta online est\xe1 lista!"])),(t()(),r.sb(22,0,null,null,2,"div",[["class","principioFooter"]],null,null,null,null,null)),(t()(),r.sb(23,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Ten en cuenta que el cliente ver\xe1 el menu de la misma forma que t\xfa lo ves y en el mismo orden. "]))],(function(t,e){t(e,8,0),t(e,13,0),t(e,18,0)}),(function(t,e){t(e,7,0,r.Db(e,8).inline,"primary"!==r.Db(e,8).color&&"accent"!==r.Db(e,8).color&&"warn"!==r.Db(e,8).color),t(e,12,0,r.Db(e,13).inline,"primary"!==r.Db(e,13).color&&"accent"!==r.Db(e,13).color&&"warn"!==r.Db(e,13).color),t(e,17,0,r.Db(e,18).inline,"primary"!==r.Db(e,18).color&&"accent"!==r.Db(e,18).color&&"warn"!==r.Db(e,18).color)}))}function js(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,44,"div",[["class","body"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,23,"div",[["class","header"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,2,"div",[["class","pic"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,bs)),r.rb(4,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(5,0,null,null,19,"div",[["class","name"]],null,null,null,null,null)),(t()(),r.sb(6,0,null,null,2,"div",[["class","user"]],null,null,null,null,null)),(t()(),r.sb(7,0,null,null,1,"p",[["class","nameUser"]],null,null,null,null,null)),(t()(),r.Ib(8,null,["",""])),(t()(),r.sb(9,0,null,null,2,"div",[["class","dir"]],null,null,null,null,null)),(t()(),r.sb(10,0,null,null,1,"p",[["class","address"]],null,null,null,null,null)),(t()(),r.Ib(11,null,["",""])),(t()(),r.sb(12,0,null,null,12,"div",[["class","icons"]],null,null,null,null,null)),(t()(),r.sb(13,0,null,null,11,"div",[["class","dotsProfile"]],null,null,null,null,null)),(t()(),r.sb(14,0,null,null,10,"div",[["class","iconDotsProfile"]],null,null,null,null,null)),(t()(),r.sb(15,0,null,null,9,"div",[["class","d-inline-block"],["ngbDropdown",""]],null,null,null,null,null)),(t()(),r.sb(16,0,null,null,3,"button",[["aria-expanded","false"],["aria-haspopup","true"],["class","btn"],["data-toggle","dropdown"],["id","dropdownMenuButton"],["type","button"]],null,null,null,null,null)),(t()(),r.sb(17,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","dotsProfileIcon mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(18,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["more_vert"])),(t()(),r.sb(20,0,null,null,4,"div",[["aria-labelledby","dropdownMenuButton"],["class","dropdown-menu optionsDiv"]],null,null,null,null,null)),(t()(),r.sb(21,0,null,null,1,"a",[["class","dropdown-item option"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.editButtonClick(i.authService.userId)&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Editar mi cuenta"])),(t()(),r.sb(23,0,null,null,1,"a",[["class","dropdown-item option"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSignOut()&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Desconectarme"])),(t()(),r.sb(25,0,null,null,13,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Db(t,27).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,27).onReset()&&i),i}),null,null)),r.rb(26,16384,null,0,yo,[],null,null),r.rb(27,540672,null,0,_o,[[8,null],[8,null]],{form:[0,"form"]},null),r.Fb(2048,null,mi,null,[_o]),r.rb(29,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(30,0,null,null,6,"div",[["class","create"]],null,null,null,null,null)),(t()(),r.sb(31,0,null,null,5,"button",[["class","btn btn-light createCat"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openPopUp()&&r),r}),null,null)),(t()(),r.sb(32,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","add mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(33,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["add_circle"])),(t()(),r.sb(35,0,null,null,1,"a",[["class","textNueva"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Nueva categor\xeda"])),(t()(),r.hb(16777216,null,null,1,null,ks)),r.rb(38,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(39,0,null,null,5,"div",[["class","middle"]],null,null,null,null,null)),(t()(),r.sb(40,0,null,null,4,"div",[["class","categoriesAll"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,Ms)),r.rb(42,278528,null,0,a.i,[r.O,r.K,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r.hb(16777216,null,null,1,null,Ls)),r.rb(44,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n.image),t(e,18,0),t(e,27,0,n.formCat),t(e,33,0),t(e,38,0,n.popUpOpen),t(e,42,0,n.categoryList),t(e,44,0,!n.categoryList||0===n.categoryList.length)}),(function(t,e){var n=e.component;t(e,8,0,n.name),t(e,11,0,n.direccion),t(e,17,0,r.Db(e,18).inline,"primary"!==r.Db(e,18).color&&"accent"!==r.Db(e,18).color&&"warn"!==r.Db(e,18).color),t(e,25,0,r.Db(e,29).ngClassUntouched,r.Db(e,29).ngClassTouched,r.Db(e,29).ngClassPristine,r.Db(e,29).ngClassDirty,r.Db(e,29).ngClassValid,r.Db(e,29).ngClassInvalid,r.Db(e,29).ngClassPending),t(e,32,0,r.Db(e,33).inline,"primary"!==r.Db(e,33).color&&"accent"!==r.Db(e,33).color&&"warn"!==r.Db(e,33).color)}))}var Fs=r.ob("app-my-dashboard",ms,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-my-dashboard",[],null,null,null,js,_s)),r.rb(1,114688,null,0,ms,[Vo,qo,Pr,Xo],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),Us=function(){function t(e,n,r,i,o,a){_classCallCheck(this,t),this.fb=e,this.authService=n,this.storage=r,this.db=i,this.router=o,this.activatedRoute=a,this.userId="",this.selectedImage=null,this.formTemplate=e.group({name:new io(""),uid:[n.userId],email:[n.userEmail],emailVerified:[n.isVerified],direccion:new io(""),telefono:new io(""),image:new io("")})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.activatedRoute.paramMap.subscribe((function(e){t.userId=e.get("id"),t.userId&&t.getData(t.userId)}))}},{key:"getData",value:function(t){var e=this;this.authService.getProfileId(t).valueChanges().subscribe((function(t){e.editProfile(t)}),(function(t){console.log(t)}))}},{key:"editProfile",value:function(t){this.imgSrc=t.image,this.image2=t.image.toString(),this.formTemplate.patchValue({name:t.name,direccion:t.direccion,telefono:t.telefono})}},{key:"showPreview",value:function(t){var e=this;if(t.target.files&&t.target.files[0]){var n=new FileReader;n.readAsDataURL(t.target.files[0]),n.onload=function(t){e.imgSrc=t.target.result,e.uploadedPic=!0},this.selectedImage=t.target.files[0]}else this.selectedImage=null,console.log("showPreview doesnt not work")}},{key:"onSubmit",value:function(t){var e=this;if(t){this.isSubmitted=!0;var n="".concat(this.selectedImage.name.split(".").slice(0,-1).join("."),"_").concat((new Date).getTime()),r=this.storage.ref(n);console.log(r),this.storage.upload(n,this.selectedImage).snapshotChanges().pipe(ut((function(){r.getDownloadURL().subscribe((function(n){console.log(n),t.image=n,e.authService.updateProfile(e.userId,e.formTemplate.value)}))}))).subscribe()}console.log("you subbmited",t)}},{key:"onSubmitEdit",value:function(t){var e=this;if(confirm("\xbfEstas seguro de hacer los cambios?"))if(console.log(this.selectedImage),null==this.selectedImage)t.image=this.authService.image,this.authService.updateProfile(this.userId,this.formTemplate.value);else if(null!==this.selectedImage){var n="".concat(this.selectedImage.name.split(".").slice(0,-1).join("."),"_").concat((new Date).getTime()),r=this.storage.ref(n);console.log(r),this.storage.upload(n,this.selectedImage).snapshotChanges().pipe(ut((function(){r.getDownloadURL().subscribe((function(n){console.log(n),t.image=n,e.authService.updateProfile(e.userId,e.formTemplate.value)}))}))).subscribe()}}},{key:"navigateBack",value:function(){this.router.navigate(["/mydashboard"])}},{key:"onDelete",value:function(){var t=this;confirm("Are you sure?")&&this.authService.deleteProfile(this.userId).then((function(e){t.authService.SignOut(),t.router.navigate(["/signup"])}),(function(t){console.log(t)}))}},{key:"formsControls",get:function(){return this.formTemplate.controls}}]),t}(),Vs=r.qb({encapsulation:0,styles:[[".body[_ngcontent-%COMP%]{width:100%;height:100%}.divForm[_ngcontent-%COMP%]{width:90%;height:90%;margin-top:5%;margin-left:5%;margin-right:5%}.titulo[_ngcontent-%COMP%]{width:90%;max-width:500px}.guardarButton[_ngcontent-%COMP%]{max-width:500px}.cartel[_ngcontent-%COMP%], .crear[_ngcontent-%COMP%]{margin-top:20px}.footer[_ngcontent-%COMP%]{margin-top:20px;float:left;text-align:center;align-items:center}.signout[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;font-size:12px;text-align:center;justify-content:center}.buttonCambiar[_ngcontent-%COMP%], .fotoEstablecimiento[_ngcontent-%COMP%]{cursor:pointer}.salir[_ngcontent-%COMP%]{font-size:30px;margin-top:0;margin-right:10px}.volver[_ngcontent-%COMP%]{width:60px}#titleQuestion[_ngcontent-%COMP%]{margin-top:10px}"]],data:{}});function qs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"img",[["class","fotoEstablecimiento"],["height","150px"],["margin-bottom","10px"],["width","150px"]],[[8,"src",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t.parent,51).click()&&i),i}),null,null))],null,(function(t,e){t(e,0,0,e.component.imgSrc)}))}function Bs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,80,"div",[["class","body"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,79,"div",[["class","divForm"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,78,"div",[],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,77,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Db(t,5).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Db(t,5).onReset()&&i),i}),null,null)),r.rb(4,16384,null,0,yo,[],null,null),r.rb(5,540672,null,0,_o,[[8,null],[8,null]],{form:[0,"form"]},null),r.Fb(2048,null,mi,null,[_o]),r.rb(7,16384,null,0,ki,[[4,mi]],null,null),(t()(),r.sb(8,0,null,null,37,"div",[["class","title"]],null,null,null,null,null)),(t()(),r.sb(9,0,null,null,1,"button",[["class","btn btn-info"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.navigateBack()&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Volver"])),(t()(),r.sb(11,0,null,null,1,"p",[["id","titleQuestion"]],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Mi establecimiento"])),(t()(),r.sb(13,0,null,null,10,"div",[["class","titulo"]],null,null,null,null,null)),(t()(),r.sb(14,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Nombre del establecimiento"])),(t()(),r.sb(16,0,null,null,7,"input",[["class","titulo"],["formControlName","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,17)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,17).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,17)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,17)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(17,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(18,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(21,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(23,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(24,0,null,null,10,"div",[["class","titulo"]],null,null,null,null,null)),(t()(),r.sb(25,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Direccion"])),(t()(),r.sb(27,0,null,null,7,"input",[["class","titulo"],["formControlName","direccion"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,28)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,28).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,28)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,28)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(28,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(29,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(32,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(34,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(35,0,null,null,10,"div",[["class","titulo"]],null,null,null,null,null)),(t()(),r.sb(36,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Telefono"])),(t()(),r.sb(38,0,null,null,7,"input",[["class","titulo"],["formControlName","telefono"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,39)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,39).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,39)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,39)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(39,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.rb(40,16384,null,0,Io,[],{required:[0,"required"]},null),r.Fb(1024,null,Si,(function(t){return[t]}),[Io]),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(43,671744,null,0,To,[[3,mi],[6,Si],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(45,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(46,0,null,null,13,"div",[["class","cartel"]],null,null,null,null,null)),(t()(),r.sb(47,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Foto del establecimiento"])),(t()(),r.hb(16777216,null,null,1,null,qs)),r.rb(50,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(51,0,[["fileUploader",1]],null,5,"input",[["aria-describedby","inputGroupFileAddon01"],["class","custom-file-input"],["formControlName","image"],["type","file"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.Db(t,52)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,52).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,52)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,52)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==o.showPreview(n)&&i),i}),null,null)),r.rb(52,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(54,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(56,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(57,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(t()(),r.sb(58,0,null,null,1,"span",[["class","input-group-text buttonCambiar"],["id","inputGroupFileAddon01"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,51).click()&&i),i}),null,null)),(t()(),r.Ib(-1,null,["Cambiar foto"])),(t()(),r.sb(60,0,null,null,5,"input",[["formControlName","uid"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,61)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,61).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,61)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,61)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(61,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(63,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(65,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(66,0,null,null,5,"input",[["formControlName","email"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,67)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,67).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,67)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,67)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(67,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(69,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(71,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(72,0,null,null,5,"input",[["formControlName","emailVerified"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Db(t,73)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Db(t,73).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Db(t,73)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Db(t,73)._compositionEnd(n.target.value)&&i),i}),null,null)),r.rb(73,16384,null,0,yi,[r.C,r.k,[2,vi]],null,null),r.Fb(1024,null,di,(function(t){return[t]}),[yi]),r.rb(75,671744,null,0,To,[[3,mi],[8,null],[8,null],[6,di],[2,go]],{name:[0,"name"]},null),r.Fb(2048,null,bi,null,[To]),r.rb(77,16384,null,0,Ci,[[4,bi]],null,null),(t()(),r.sb(78,0,null,null,2,"div",[["class","crear"]],null,null,null,null,null)),(t()(),r.sb(79,0,null,null,1,"button",[["class","btn btn-success btn-block guardarButton"],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onSubmitEdit(i.formTemplate.value)&&r),r}),null,null)),(t()(),r.Ib(-1,null,["Guardar Cambios"]))],(function(t,e){var n=e.component;t(e,5,0,n.formTemplate),t(e,18,0,""),t(e,21,0,"name"),t(e,29,0,""),t(e,32,0,"direccion"),t(e,40,0,""),t(e,43,0,"telefono"),t(e,50,0,n.imgSrc),t(e,54,0,"image"),t(e,63,0,"uid"),t(e,69,0,"email"),t(e,75,0,"emailVerified")}),(function(t,e){var n=e.component;t(e,3,0,r.Db(e,7).ngClassUntouched,r.Db(e,7).ngClassTouched,r.Db(e,7).ngClassPristine,r.Db(e,7).ngClassDirty,r.Db(e,7).ngClassValid,r.Db(e,7).ngClassInvalid,r.Db(e,7).ngClassPending),t(e,16,0,r.Db(e,18).required?"":null,r.Db(e,23).ngClassUntouched,r.Db(e,23).ngClassTouched,r.Db(e,23).ngClassPristine,r.Db(e,23).ngClassDirty,r.Db(e,23).ngClassValid,r.Db(e,23).ngClassInvalid,r.Db(e,23).ngClassPending),t(e,27,0,r.Db(e,29).required?"":null,r.Db(e,34).ngClassUntouched,r.Db(e,34).ngClassTouched,r.Db(e,34).ngClassPristine,r.Db(e,34).ngClassDirty,r.Db(e,34).ngClassValid,r.Db(e,34).ngClassInvalid,r.Db(e,34).ngClassPending),t(e,38,0,r.Db(e,40).required?"":null,r.Db(e,45).ngClassUntouched,r.Db(e,45).ngClassTouched,r.Db(e,45).ngClassPristine,r.Db(e,45).ngClassDirty,r.Db(e,45).ngClassValid,r.Db(e,45).ngClassInvalid,r.Db(e,45).ngClassPending),t(e,51,0,r.Db(e,56).ngClassUntouched,r.Db(e,56).ngClassTouched,r.Db(e,56).ngClassPristine,r.Db(e,56).ngClassDirty,r.Db(e,56).ngClassValid,r.Db(e,56).ngClassInvalid,r.Db(e,56).ngClassPending),t(e,60,0,r.Db(e,65).ngClassUntouched,r.Db(e,65).ngClassTouched,r.Db(e,65).ngClassPristine,r.Db(e,65).ngClassDirty,r.Db(e,65).ngClassValid,r.Db(e,65).ngClassInvalid,r.Db(e,65).ngClassPending),t(e,66,0,r.Db(e,71).ngClassUntouched,r.Db(e,71).ngClassTouched,r.Db(e,71).ngClassPristine,r.Db(e,71).ngClassDirty,r.Db(e,71).ngClassValid,r.Db(e,71).ngClassInvalid,r.Db(e,71).ngClassPending),t(e,72,0,r.Db(e,77).ngClassUntouched,r.Db(e,77).ngClassTouched,r.Db(e,77).ngClassPristine,r.Db(e,77).ngClassDirty,r.Db(e,77).ngClassValid,r.Db(e,77).ngClassInvalid,r.Db(e,77).ngClassPending),t(e,79,0,!n.formTemplate.valid)}))}var Hs=r.ob("app-edit-profile",Us,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-edit-profile",[],null,null,null,Bs,Vs)),r.rb(1,114688,null,0,Us,[xo,Vo,Xo,Lo.a,Pr,En],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),zs=function(){function t(e,n,r){_classCallCheck(this,t),this.activatedRoute=e,this.product=n,this.authService=r}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.activatedRoute.paramMap.subscribe((function(e){t.barId=e.get("id"),t.barId&&(t.getData(t.barId),t.product.getAllCategories(t.barId),t.product.getAllCategories(t.barId).valueChanges().subscribe((function(e){t.categoryList=[],t.productListPerCat=[],e.forEach((function(e){t.categoryList.push(e),t.product.getProductsPerCategoryForUser(t.barId,e.id).valueChanges().subscribe((function(e){e.forEach((function(e){t.productListPerCat.push(e)}))}))}))})))}))}},{key:"getData",value:function(t){var e=this;this.authService.getProfileForMyDashboard(t).subscribe((function(t){e.name=t.payload.val().name,e.image=t.payload.val().image,e.direccion=t.payload.val().direccion,console.log(e.name)}))}},{key:"selectViewMore",value:function(t,e){this.viewMoreCat=t.category}},{key:"unselectViewMore",value:function(t){this.viewMoreCat=null}},{key:"makeViewMore",value:function(t){return this.viewMoreCat===t.category}},{key:"openPicture",value:function(t){this.pictureSelected=t,this.isPictureOpen=!0}},{key:"closePicture",value:function(){this.isPictureOpen=!1,this.pictureSelected=null}}]),t}(),Ws=r.qb({encapsulation:0,styles:[[".profile[_ngcontent-%COMP%]{display:block;width:130px;height:130px;border-radius:10%;margin-left:5px;margin-top:5px;background-repeat:no-repeat;background-position:center center;background-size:cover;float:left}.name[_ngcontent-%COMP%]{display:table;min-height:130px}.nameUser[_ngcontent-%COMP%]{float:left;margin-left:5px;display:block;line-height:5px;position:relative}.user[_ngcontent-%COMP%]{display:block;min-width:200px;max-width:500px;width:100%;margin-top:50px;margin-left:5px}.dir[_ngcontent-%COMP%]{display:block;min-width:200px;max-width:500px;width:100%;margin-left:5px}.address[_ngcontent-%COMP%]{display:block;color:#778899;float:left;margin-left:5px;line-height:5px;position:relative}.iconProduct[_ngcontent-%COMP%]{display:inline-table;vertical-align:middle;color:#46c646}.textIconProduct[_ngcontent-%COMP%]{display:inline-table;vertical-align:middle;color:#778899}.pic[_ngcontent-%COMP%]{display:inline}.header[_ngcontent-%COMP%]{min-width:330px;width:100%;float:left}.categoryContainer[_ngcontent-%COMP%]{vertical-align:middle}.divCategory[_ngcontent-%COMP%]{width:100%;height:40px;vertical-align:middle;display:inline-table}.categoryTitleDiv[_ngcontent-%COMP%]{height:38px;display:inline-table;vertical-align:middle}.categoryTitle[_ngcontent-%COMP%]{margin-top:7px;display:inline-block;vertical-align:middle}.icondotsCategory[_ngcontent-%COMP%]{display:inline-table;height:38px;width:10%;float:left;margin:auto;padding:0}.dotsCategory[_ngcontent-%COMP%]{display:inline-table;margin-left:5px;float:left}.expand[_ngcontent-%COMP%]{height:38px;color:#778899;display:inline-table;float:right;margin-right:5px;padding-top:7px}.createCat[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;padding:.35em 1.2em;border-bottom:none;border-top:none;border-right:none;border-left:none;margin:0 .3em .3em 0;border-radius:0;text-decoration:none;font-family:Roboto,sans-serif;font-weight:300;text-align:center;transition:all .2s;height:45px}.categoriesAll[_ngcontent-%COMP%]{max-width:600px;width:90%;display:inline-block}.middle[_ngcontent-%COMP%]{margin-top:25px;width:100%;height:100%;text-align:center}.collapsed[_ngcontent-%COMP%]{height:0;overflow:hidden}.collapsedP[_ngcontent-%COMP%]{height:0;width:0%;overflow:hidden}.expandedP[_ngcontent-%COMP%]{min-width:300px;min-height:100px;background-color:rgba(0,0,0,.5);opacity:.3;width:100%;height:100%;z-index:1;position:fixed;padding:0;margin:0;top:0;left:0}.divProducts[_ngcontent-%COMP%]{width:100%;min-height:40px;margin:0;text-align:left}.textPro[_ngcontent-%COMP%]{margin-top:5px;padding-left:10px;width:80%;float:left}.imageDiv[_ngcontent-%COMP%]{display:inline-table;margin-top:5px;padding-left:5px}.divPrice[_ngcontent-%COMP%]{margin-top:5px;width:10%;float:right}.textProducts[_ngcontent-%COMP%]{font-size:15px;line-height:0;vertical-align:middle}.textProductsPrice[_ngcontent-%COMP%]{font-size:15px;line-height:0;vertical-align:middle;text-align:right;align-self:right}.textDescription[_ngcontent-%COMP%]{font-size:13px;line-height:0;vertical-align:middle;display:inline-block}.steps[_ngcontent-%COMP%]{color:#2fb82e}.principioHeader[_ngcontent-%COMP%]{margin-top:15px}.iconPic[_ngcontent-%COMP%]{font-size:18px;color:#1ecd1c;cursor:pointer}.icons[_ngcontent-%COMP%]{padding-left:15px;width:100%;display:block;float:left}.dotsProfileIcon[_ngcontent-%COMP%]{cursor:pointer;margin-left:5px;font-size:24px;color:#1ca7cd}.shadow[_ngcontent-%COMP%]{min-width:300px;min-height:100px;background-color:rgba(0,0,0,.5);opacity:.3;width:100%;height:100%;z-index:1;position:fixed;padding:0;margin:0;top:0;left:0}.image[_ngcontent-%COMP%]{min-width:320px;max-width:600px;min-height:100px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;background-color:#fff;z-index:4;margin:auto;text-align:center;justify-content:center;vertical-align:middle}.clearPic[_ngcontent-%COMP%]{float:right;margin-top:15px;margin-right:15px;color:beige;z-index:4;position:fixed;top:5px;right:5px;cursor:pointer}"]],data:{}});function Gs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"img",[["class","profile"]],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.image)}))}function Ks(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","expand mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.selectViewMore(t.parent.context.$implicit,t.parent.context.$implicit.id)&&r),r}),Ba,qa)),r.rb(1,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["expand_more"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,r.Db(e,1).inline,"primary"!==r.Db(e,1).color&&"accent"!==r.Db(e,1).color&&"warn"!==r.Db(e,1).color)}))}function Qs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","expand mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.unselectViewMore(t.parent.context.$implicit)&&r),r}),Ba,qa)),r.rb(1,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["expand_less"]))],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,r.Db(e,1).inline,"primary"!==r.Db(e,1).color&&"accent"!==r.Db(e,1).color&&"warn"!==r.Db(e,1).color)}))}function Ys(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"div",[["class","collapsed"]],null,null,null,null,null))],null,null)}function Js(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,3,"div",[["class","imageDiv"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconPic mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openPicture(t.parent.parent.context.$implicit)&&r),r}),Ba,qa)),r.rb(2,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["photo"]))],(function(t,e){t(e,2,0)}),(function(t,e){t(e,1,0,r.Db(e,2).inline,"primary"!==r.Db(e,2).color&&"accent"!==r.Db(e,2).color&&"warn"!==r.Db(e,2).color)}))}function Xs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,6,"div",[["class","popUpImage"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,0,"div",[["class","shadow"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closePicture()&&r),r}),null,null)),(t()(),r.sb(2,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","clearPic mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closePicture()&&r),r}),Ba,qa)),r.rb(3,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["clear"])),(t()(),r.sb(5,0,null,null,1,"div",[["class","imageDiv"]],null,null,null,null,null)),(t()(),r.sb(6,0,null,null,0,"img",[["class","image"]],[[8,"src",4]],null,null,null,null))],(function(t,e){t(e,3,0)}),(function(t,e){var n=e.component;t(e,2,0,r.Db(e,3).inline,"primary"!==r.Db(e,3).color&&"accent"!==r.Db(e,3).color&&"warn"!==r.Db(e,3).color),t(e,6,0,n.pictureSelected.image)}))}function Zs(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,15,null,null,null,null,null,null,null)),(t()(),r.sb(1,0,null,null,14,"li",[["class","list-group-item"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,13,"div",[["class","divProducts"]],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,9,"div",[["class","textPro"]],null,null,null,null,null)),(t()(),r.sb(4,0,null,null,1,"a",[["class","textProducts"]],null,null,null,null,null)),(t()(),r.Ib(5,null,["",""])),(t()(),r.hb(16777216,null,null,1,null,Js)),r.rb(7,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Xs)),r.rb(9,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(10,0,null,null,2,"div",[["class","textDescDiv"]],null,null,null,null,null)),(t()(),r.sb(11,0,null,null,1,"p",[["class","textDescription"]],null,null,null,null,null)),(t()(),r.Ib(12,null,["",""])),(t()(),r.sb(13,0,null,null,2,"div",[["class","divPrice"]],null,null,null,null,null)),(t()(),r.sb(14,0,null,null,1,"a",[["class","textProductsPrice"]],null,null,null,null,null)),(t()(),r.Ib(15,null,["","\u20ac"]))],(function(t,e){var n=e.component;t(e,7,0,e.parent.context.$implicit.image),t(e,9,0,n.isPictureOpen)}),(function(t,e){t(e,5,0,e.parent.context.$implicit.title),t(e,12,0,e.parent.context.$implicit.description),t(e,15,0,e.parent.context.$implicit.price)}))}function $s(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,Zs)),r.rb(2,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(0,null,null,0))],(function(t,e){t(e,2,0,e.context.$implicit.categoryId===e.parent.parent.context.$implicit.id)}),null)}function tu(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,2,"div",[["class","expanded"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,$s)),r.rb(2,278528,null,0,a.i,[r.O,r.K,r.q],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.productListPerCat)}),null)}function eu(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,12,"li",[["class","list-group-item categoryContainer"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,7,"div",[["class","divCategory"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,2,"div",[["class","categoryTitleDiv"]],null,null,null,null,null)),(t()(),r.sb(3,0,null,null,1,"a",[["class","categoryTitle"]],null,null,null,null,null)),(t()(),r.Ib(4,null,["",""])),(t()(),r.hb(16777216,null,null,1,null,Ks)),r.rb(6,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Qs)),r.rb(8,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,Ys)),r.rb(10,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.hb(16777216,null,null,1,null,tu)),r.rb(12,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,6,0,!n.makeViewMore(e.context.$implicit)),t(e,8,0,n.makeViewMore(e.context.$implicit)),t(e,10,0,!n.makeViewMore(e.context.$implicit)),t(e,12,0,n.makeViewMore(e.context.$implicit))}),(function(t,e){t(e,4,0,e.context.$implicit.category)}))}function nu(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,24,"div",[["class","textPrincipio"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,2,"div",[["class","principioHeader"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["\xbfList@ para empezar? en 2 min tendr\xe1s tu carta en la nube"])),(t()(),r.sb(4,0,null,null,17,"div",[["class","pasosPrincipio"]],null,null,null,null,null)),(t()(),r.sb(5,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Pasos: "])),(t()(),r.sb(7,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconProduct steps mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(8,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["looks_one"])),(t()(),r.sb(10,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,['Haz click arriba en "+ Nueva Categoria" para crear las categor\xedas, por ejemplo: Bebidas, Entrantes, Postres o cualquier otra'])),(t()(),r.sb(12,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconProduct steps mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(13,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["looks_two"])),(t()(),r.sb(15,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Crea productos dentro de las categor\xedas creadas."])),(t()(),r.sb(17,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","iconProduct steps mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Ba,qa)),r.rb(18,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["looks_3"])),(t()(),r.sb(20,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Tu carta online est\xe1 lista!"])),(t()(),r.sb(22,0,null,null,2,"div",[["class","principioFooter"]],null,null,null,null,null)),(t()(),r.sb(23,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(-1,null,["Ten en cuenta que el cliente ver\xe1 el menu de la misma forma que t\xfa lo ves y en el mismo orden. "]))],(function(t,e){t(e,8,0),t(e,13,0),t(e,18,0)}),(function(t,e){t(e,7,0,r.Db(e,8).inline,"primary"!==r.Db(e,8).color&&"accent"!==r.Db(e,8).color&&"warn"!==r.Db(e,8).color),t(e,12,0,r.Db(e,13).inline,"primary"!==r.Db(e,13).color&&"accent"!==r.Db(e,13).color&&"warn"!==r.Db(e,13).color),t(e,17,0,r.Db(e,18).inline,"primary"!==r.Db(e,18).color&&"accent"!==r.Db(e,18).color&&"warn"!==r.Db(e,18).color)}))}function ru(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,24,"div",[["class","body"]],null,null,null,null,null)),(t()(),r.sb(1,0,null,null,23,"div",[["class","header"]],null,null,null,null,null)),(t()(),r.sb(2,0,null,null,2,"div",[["class","pic"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,Gs)),r.rb(4,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null),(t()(),r.sb(5,0,null,null,13,"div",[["class","name"]],null,null,null,null,null)),(t()(),r.sb(6,0,null,null,2,"div",[["class","user"]],null,null,null,null,null)),(t()(),r.sb(7,0,null,null,1,"p",[["class","nameUser"]],null,null,null,null,null)),(t()(),r.Ib(8,null,["",""])),(t()(),r.sb(9,0,null,null,2,"div",[["class","dir"]],null,null,null,null,null)),(t()(),r.sb(10,0,null,null,1,"p",[["class","address"]],null,null,null,null,null)),(t()(),r.Ib(11,null,["",""])),(t()(),r.sb(12,0,null,null,6,"div",[["class","icons"]],null,null,null,null,null)),(t()(),r.sb(13,0,null,null,5,"div",[["class","dotsProfile"]],null,null,null,null,null)),(t()(),r.sb(14,0,null,null,4,"div",[["class","iconDotsProfile"]],null,null,null,null,null)),(t()(),r.sb(15,0,null,null,3,"mat-icon",[["aria-hidden","false"],["aria-label","Example home icon"],["class","dotsProfileIcon mat-icon notranslate"],["role","img"],["routerLink","/home"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Db(t,16).onClick()&&i),i}),Ba,qa)),r.rb(16,16384,null,0,Rr,[Pr,En,[8,null],r.C,r.k],{routerLink:[0,"routerLink"]},null),r.rb(17,9158656,null,0,Fa,[r.k,Oa,[8,"false"],[2,Ra],[2,r.l]],null,null),(t()(),r.Ib(-1,0,["arrow_back_ios"])),(t()(),r.sb(19,0,null,null,5,"div",[["class","middle"]],null,null,null,null,null)),(t()(),r.sb(20,0,null,null,4,"div",[["class","categoriesAll"]],null,null,null,null,null)),(t()(),r.hb(16777216,null,null,1,null,eu)),r.rb(22,278528,null,0,a.i,[r.O,r.K,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r.hb(16777216,null,null,1,null,nu)),r.rb(24,16384,null,0,a.j,[r.O,r.K],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n.image),t(e,16,0,"/home"),t(e,17,0),t(e,22,0,n.categoryList),t(e,24,0,!n.categoryList||0===n.categoryList.length)}),(function(t,e){var n=e.component;t(e,8,0,n.name),t(e,11,0,n.direccion),t(e,15,0,r.Db(e,17).inline,"primary"!==r.Db(e,17).color&&"accent"!==r.Db(e,17).color&&"warn"!==r.Db(e,17).color)}))}var iu=r.ob("app-view-carta",zs,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-view-carta",[],null,null,null,ru,Ws)),r.rb(1,114688,null,0,zs,[En,qo,Vo],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),ou=function(){function t(e){_classCallCheck(this,t),this.router=e,this.logo="/assets/img/logo.png"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onSignOut",value:function(){}}]),t}(),au=r.qb({encapsulation:0,styles:[[""]],data:{}});function su(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}var uu=r.qb({encapsulation:0,styles:[[""]],data:{}});function lu(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-header",[],null,null,null,su,au)),r.rb(1,114688,null,0,ou,[Pr],null,null),(t()(),r.sb(2,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.rb(3,212992,null,0,Vr,[Ur,r.O,r.j,[8,null],r.h],null,null)],(function(t,e){t(e,1,0),t(e,3,0)}),null)}var cu=r.ob("app-root",o,(function(t){return r.Jb(0,[(t()(),r.sb(0,0,null,null,1,"app-root",[],null,null,null,lu,uu)),r.rb(1,49152,null,0,o,[],null,null)],null,null)}),{},{},[]),hu=function t(){_classCallCheck(this,t)};function fu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:t,options:e}}function du(t){return{type:6,styles:t,offset:null}}function pu(t){Promise.resolve(null).then(t)}var vu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var t=this;pu((function(){return t._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(t){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}(),yu=function(){function t(e){var n=this;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var r=0,i=0,o=0,a=this.players.length;0==a?pu((function(){return n._onFinish()})):this.players.forEach((function(t){t.onDone((function(){++r==a&&n._onFinish()})),t.onDestroy((function(){++i==a&&n._onDestroy()})),t.onStart((function(){++o==a&&n._onStart()}))})),this.totalTime=this.players.reduce((function(t,e){return Math.max(t,e.totalTime)}),0)}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(t){return t.init()}))}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[])}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(t){return t.play()}))}},{key:"pause",value:function(){this.players.forEach((function(t){return t.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(t){return t.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(t){return t.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(t){return t.destroy()})),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(t){return t.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(t){var e=t*this.totalTime;this.players.forEach((function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)}))}},{key:"getPosition",value:function(){var t=0;return this.players.forEach((function(e){var n=e.getPosition();t=Math.min(n,t)})),t}},{key:"beforeDestroy",value:function(){this.players.forEach((function(t){t.beforeDestroy&&t.beforeDestroy()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}();function gu(){return"undefined"!=typeof process}function mu(t){switch(t.length){case 0:return new vu;case 1:return t[0];default:return new yu(t)}}function _u(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=[],s=[],u=-1,l=null;if(r.forEach((function(t){var n=t.offset,r=n==u,c=r&&l||{};Object.keys(t).forEach((function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case"!":s=i[n];break;case"*":s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}c[r]=s})),r||s.push(c),l=c,u=n})),a.length){var c="\n - ";throw new Error("Unable to animate due to the following errors:".concat(c).concat(a.join(c)))}return s}function bu(t,e,n,r){switch(e){case"start":t.onStart((function(){return r(n&&wu(n,"start",t))}));break;case"done":t.onDone((function(){return r(n&&wu(n,"done",t))}));break;case"destroy":t.onDestroy((function(){return r(n&&wu(n,"destroy",t))}))}}function wu(t,e,n){var r=n.totalTime,i=Cu(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Cu(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function ku(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function Eu(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var Su=function(t,e){return!1},Tu=function(t,e){return!1},Iu=function(t,e,n){return[]},Au=gu();(Au||"undefined"!=typeof Element)&&(Su=function(t,e){return t.contains(e)},Tu=function(){if(Au||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?function(t,n){return e.apply(t,[n])}:Tu}(),Iu=function(t,e,n){var r=[];if(n)r.push.apply(r,_toConsumableArray(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r});var Ou=null,xu=!1;function Nu(t){Ou||(Ou=("undefined"!=typeof document?document.body:null)||{},xu=!!Ou.style&&"WebkitAppearance"in Ou.style);var e=!0;return Ou.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in Ou.style)&&xu)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Ou.style),e}var Du=Tu,Pu=Su,Ru=Iu;function Mu(t){var e={};return Object.keys(t).forEach((function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]})),e}var Lu=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return Nu(t)}},{key:"matchesElement",value:function(t,e){return Du(t,e)}},{key:"containsElement",value:function(t,e){return Pu(t,e)}},{key:"query",value:function(t,e,n){return Ru(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return n||""}},{key:"animate",value:function(t,e,n,r,i){arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6];return new vu(n,r)}}]),t}(),ju=function(){var t=function t(){_classCallCheck(this,t)};return t.NOOP=new Lu,t}();function Fu(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Uu(parseFloat(e[1]),e[2])}function Uu(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Vu(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'.concat(t,'" is invalid.')),{duration:0,delay:0,easing:""};r=Uu(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=Uu(parseFloat(s),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var l=!1,c=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&e.splice(c,0,'The provided timing value "'.concat(t,'" is invalid.'))}return{duration:r,delay:i,easing:o}}(t,e,n)}function qu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function Bu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r in t)n[r]=t[r];else qu(t,n);return n}function Hu(t,e,n){return n?e+":"+n+";":""}function zu(t){for(var e="",n=0;n<t.style.length;n++){var r=t.style.item(n);e+=Hu(0,r,t.style.getPropertyValue(r))}for(var i in t.style)t.style.hasOwnProperty(i)&&!i.startsWith("_")&&(e+=Hu(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[i]));t.setAttribute("style",e)}function Wu(t,e,n){t.style&&(Object.keys(e).forEach((function(r){var i=$u(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]})),gu()&&zu(t))}function Gu(t,e){t.style&&(Object.keys(e).forEach((function(e){var n=$u(e);t.style[n]=""})),gu()&&zu(t))}function Ku(t){return Array.isArray(t)?1==t.length?t[0]:fu(t):t}var Qu=new RegExp("{{\\s*(.+?)\\s*}}","g");function Yu(t){var e=[];if("string"==typeof t){for(var n,r=t.toString();n=Qu.exec(r);)e.push(n[1]);Qu.lastIndex=0}return e}function Ju(t,e,n){var r=t.toString(),i=r.replace(Qu,(function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()}));return i==r?t:i}function Xu(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Zu=/-+([a-z0-9])/g;function $u(t){return t.replace(Zu,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1].toUpperCase()}))}function tl(t,e){return 0===t||0===e}function el(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach((function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]})),o.length)for(var a=function(){var n=e[s];o.forEach((function(e){n[e]=rl(t,e)}))},s=1;s<e.length;s++)a()}return e}function nl(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #".concat(e.type))}}function rl(t,e){return window.getComputedStyle(t)[e]}var il=new Set(["true","1"]),ol=new Set(["false","0"]);function al(t,e){var n=il.has(t)||ol.has(t),r=il.has(e)||ol.has(e);return function(i,o){var a="*"==t||t==i,s="*"==e||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?il.has(t):ol.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?il.has(e):ol.has(e)),a&&s}}var sl=new RegExp("s*:selfs*,?","g");function ul(t,e,n){return new ll(t).build(e,n)}var ll=function(){function t(e){_classCallCheck(this,t),this._driver=e}return _createClass(t,[{key:"build",value:function(t,e){var n=new cl(e);return this._resetContextStyleTimingState(n),nl(this,Ku(t),n)}},{key:"_resetContextStyleTimingState",value:function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}},{key:"visitTrigger",value:function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach((function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.toString().split(/\s*,\s*/).forEach((function(t){s.name=t,o.push(n.visitState(s,e))})),s.name=u}else if(1==t.type){var l=n.visitTransition(t,e);r+=l.queryCount,i+=l.depCount,a.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach((function(t){if(hl(t)){var e=t;Object.keys(e).forEach((function(t){Yu(e[t]).forEach((function(t){o.hasOwnProperty(t)||i.add(t)}))}))}})),i.size){var a=Xu(i.values());e.errors.push('state("'.concat(t.name,'", ...) must define default values for all the following style substitutions: ').concat(a.join(", ")))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=nl(this,Ku(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'.concat(t,'" is not supported')),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(t,'" is not supported')),e;var o=i[1],a=i[2],s=i[3];e.push(al(o,s)),"<"!=a[0]||"*"==o&&"*"==s||e.push(al(s,o))}(t,i,r)})):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:fl(t.options)}}},{key:"visitSequence",value:function(t,e){var n=this;return{type:2,steps:t.steps.map((function(t){return nl(n,t,e)})),options:fl(t.options)}}},{key:"visitGroup",value:function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map((function(t){e.currentTime=r;var o=nl(n,t,e);return i=Math.max(i,e.currentTime),o}));return e.currentTime=i,{type:3,steps:o,options:fl(t.options)}}},{key:"visitAnimate",value:function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return dl(Vu(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some((function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)}))){var i=dl(0,0,"");return i.dynamic=!0,i.strValue=r,i}return dl((n=n||Vu(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:du({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=du(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}},{key:"_makeStyleAst",value:function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach((function(t){"string"==typeof t?"*"==t?n.push(t):e.errors.push("The provided style string value ".concat(t," is not allowed.")):n.push(t)})):n.push(t.styles);var r=!1,i=null;return n.forEach((function(t){if(hl(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}})),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach((function(t){"string"!=typeof t&&Object.keys(t).forEach((function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,l,c,h=e.collectedStyles[e.currentQuerySelector],f=h[r],d=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(e.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(i,'ms"')),d=!1),o=f.startTime),d&&(h[r]={startTime:o,endTime:i}),e.options&&(a=t[r],s=e.options,u=e.errors,l=s.params||{},(c=Yu(a)).length&&c.forEach((function(t){l.hasOwnProperty(t)||u.push("Unable to resolve the local animation param ".concat(t," in the given list of values"))})))}else e.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,l=t.steps.map((function(t){var r=n._makeStyleAst(t,e),l=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach((function(t){if(hl(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}}));else if(hl(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),c=0;return null!=l&&(i++,c=r.offset=l),s=s||c<0||c>1,a=a||c<u,u=c,o.push(c),r}));s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,h=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));var f=c-1,d=e.currentTime,p=e.currentAnimateTimings,v=p.duration;return l.forEach((function(t,i){var a=h>0?i==f?1:h*i:o[i],s=a*v;e.currentTime=d+p.delay+s,p.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)})),r}},{key:"visitReference",value:function(t,e){return{type:8,animation:nl(this,Ku(t.animation),e),options:fl(t.options)}}},{key:"visitAnimateChild",value:function(t,e){return e.depCount++,{type:9,options:fl(t.options)}}},{key:"visitAnimateRef",value:function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:fl(t.options)}}},{key:"visitQuery",value:function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=_slicedToArray(function(t){var e=!!t.split(/\s*,\s*/).find((function(t){return":self"==t}));return e&&(t=t.replace(sl,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(t){return".ng-trigger-"+t.substr(1)})).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),o=i[0],a=i[1];e.currentQuerySelector=n.length?n+" "+o:o,ku(e.collectedStyles,e.currentQuerySelector,{});var s=nl(this,Ku(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:fl(t.options)}}},{key:"visitStagger",value:function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Vu(t.timings,e.errors,!0);return{type:12,animation:nl(this,Ku(t.animation),e),timings:n,options:null}}}]),t}(),cl=function t(e){_classCallCheck(this,t),this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function hl(t){return!Array.isArray(t)&&"object"==typeof t}function fl(t){var e;return t?(t=qu(t)).params&&(t.params=(e=t.params)?qu(e):null):t={},t}function dl(t,e,n){return{duration:t,delay:e,easing:n}}function pl(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var vl=function(){function t(){_classCallCheck(this,t),this._map=new Map}return _createClass(t,[{key:"consume",value:function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e}},{key:"append",value:function(t,e){var n,r=this._map.get(t);r||this._map.set(t,r=[]),(n=r).push.apply(n,_toConsumableArray(e))}},{key:"has",value:function(t){return this._map.has(t)}},{key:"clear",value:function(){this._map.clear()}}]),t}(),yl=new RegExp(":enter","g"),gl=new RegExp(":leave","g");function ml(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new _l).buildKeyframes(t,e,n,r,i,o,a,s,u,l)}var _l=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"buildKeyframes",value:function(t,e,n,r,i,o,a,s,u){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new vl;var c=new wl(t,e,u,r,i,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),nl(this,n,c);var h=c.timelines.filter((function(t){return t.containsAnimation()}));if(h.length&&Object.keys(a).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,c.errors,s)}return h.length?h.map((function(t){return t.buildKeyframes()})):[pl(e,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(t,e){}},{key:"visitState",value:function(t,e){}},{key:"visitTransition",value:function(t,e){}},{key:"visitAnimateChild",value:function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}},{key:"visitAnimateRef",value:function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}},{key:"_visitSubInstructions",value:function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?Fu(n.duration):null,o=null!=n.delay?Fu(n.delay):null;return 0!==i&&t.forEach((function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)})),r}},{key:"visitReference",value:function(t,e){e.updateOptions(t.options,!0),nl(this,t.animation,e),e.previousNode=t}},{key:"visitSequence",value:function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=bl);var a=Fu(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach((function(t){return nl(n,t,i)})),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}},{key:"visitGroup",value:function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Fu(t.options.delay):0;t.steps.forEach((function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),nl(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)})),r.forEach((function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)})),e.transformIntoNewTimeline(i),e.previousNode=t}},{key:"_visitTiming",value:function(t,e){if(t.dynamic){var n=t.strValue;return Vu(e.params?Ju(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}},{key:"visitAnimate",value:function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}},{key:"visitStyle",value:function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}},{key:"visitKeyframes",value:function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach((function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()})),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}},{key:"visitQuery",value:function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Fu(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=bl);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach((function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),nl(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)})),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}},{key:"visitStagger",value:function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;nl(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}]),t}(),bl={},wl=function(){function t(e,n,r,i,o,a,s,u){_classCallCheck(this,t),this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Cl(this._driver,n,0),s.push(this.currentTimeline)}return _createClass(t,[{key:"updateOptions",value:function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=Fu(r.duration)),null!=r.delay&&(i.delay=Fu(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach((function(t){e&&a.hasOwnProperty(t)||(a[t]=Ju(o[t],a,n.errors))}))}}}},{key:"_copyOptions",value:function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach((function(t){n[t]=e[t]}))}}return t}},{key:"createSubContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(t){return this.previousNode=bl,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new kl(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}},{key:"delayNextStep",value:function(t){t>0&&this.currentTimeline.delayNextStep(t)}},{key:"invokeQuery",value:function(t,e,n,r,i,o){var a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(yl,"."+this._enterClassName)).replace(gl,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,_toConsumableArray(s))}return i||0!=a.length||o.push('`query("'.concat(e,'")` returned zero elements. (Use `query("').concat(e,'", { optional: true })` if you wish to allow this.)')),a}},{key:"params",get:function(){return this.options.params}}]),t}(),Cl=function(){function t(e,n,r,i){_classCallCheck(this,t),this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(t,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"delayNextStep",value:function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}},{key:"fork",value:function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}},{key:"_updateStyle",value:function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach((function(t){e._backFill[t]=e._globalTimelineStyles[t]||"*",e._currentKeyframe[t]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach((function(t){"*"===t?(n=n||Object.keys(e)).forEach((function(t){r[t]="*"})):Bu(t,!1,r)})),r}(t,this._globalTimelineStyles);Object.keys(a).forEach((function(t){var e=Ju(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:"*"),i._updateStyle(t,e)}))}},{key:"applyStylesToKeyframe",value:function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){t._currentKeyframe[n]=e[n]})),Object.keys(this._localTimelineStyles).forEach((function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])})))}},{key:"snapshotCurrentStyles",value:function(){var t=this;Object.keys(this._localTimelineStyles).forEach((function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"mergeTimelineCollectedStyles",value:function(t){var e=this;Object.keys(t._styleSummary).forEach((function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)}))}},{key:"buildKeyframes",value:function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach((function(o,a){var s=Bu(o,!0);Object.keys(s).forEach((function(t){var r=s[t];"!"==r?e.add(t):"*"==r&&n.add(t)})),r||(s.offset=a/t.duration),i.push(s)}));var o=e.size?Xu(e.values()):[],a=n.size?Xu(n.values()):[];if(r){var s=i[0],u=qu(s);s.offset=0,u.offset=1,i=[s,u]}return pl(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"properties",get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t}}]),t}(),kl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a,s){var u,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck(this,n),(u=e.call(this,t,r,s.delay)).element=r,u.keyframes=i,u.preStyleProps=o,u.postStyleProps=a,u._stretchStartingKeyframe=l,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return _createClass(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=Bu(t[0],!1);u.offset=0,o.push(u);var l=Bu(t[0],!1);l.offset=El(s),o.push(l);for(var c=t.length-1,h=1;h<=c;h++){var f=Bu(t[h],!1);f.offset=El((n+f.offset*r)/a),o.push(f)}r=a,n=0,i="",t=o}return pl(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(Cl);function El(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e-1);return Math.round(t*n)/n}var Sl=function t(){_classCallCheck(this,t)},Tl=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"normalizePropertyName",value:function(t,e){return $u(t)}},{key:"normalizeStyleValue",value:function(t,e,n,r){var i="",o=n.toString().trim();if(Il[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for ".concat(t,":").concat(n))}return o+i}}]),n}(Sl),Il=function(t){var e={};return t.forEach((function(t){return e[t]=!0})),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function Al(t,e,n,r,i,o,a,s,u,l,c,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:f}}var Ol={},xl=function(){function t(e,n,r){_classCallCheck(this,t),this._triggerName=e,this.ast=n,this._stateStyles=r}return _createClass(t,[{key:"match",value:function(t,e,n,r){return function(t,e,n,r,i){return t.some((function(t){return t(e,n,r,i)}))}(this.ast.matchers,t,e,n,r)}},{key:"buildStyles",value:function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}},{key:"build",value:function(t,e,n,r,i,o,a,s,u,l){var c=[],h=this.ast.options&&this.ast.options.params||Ol,f=this.buildStyles(n,a&&a.params||Ol,c),d=s&&s.params||Ol,p=this.buildStyles(r,d,c),v=new Set,y=new Map,g=new Map,m="void"===r,_={params:Object.assign({},h,d)},b=l?[]:ml(t,e,this.ast.animation,i,o,f,p,_,u,c),w=0;if(b.forEach((function(t){w=Math.max(t.duration+t.delay,w)})),c.length)return Al(e,this._triggerName,n,r,m,f,p,[],[],y,g,w,c);b.forEach((function(t){var n=t.element,r=ku(y,n,{});t.preStyleProps.forEach((function(t){return r[t]=!0}));var i=ku(g,n,{});t.postStyleProps.forEach((function(t){return i[t]=!0})),n!==e&&v.add(n)}));var C=Xu(v.values());return Al(e,this._triggerName,n,r,m,f,p,b,C,y,g,w)}}]),t}(),Nl=function(){function t(e,n){_classCallCheck(this,t),this.styles=e,this.defaultParams=n}return _createClass(t,[{key:"buildStyles",value:function(t,e){var n={},r=qu(this.defaultParams);return Object.keys(t).forEach((function(e){var n=t[e];null!=n&&(r[e]=n)})),this.styles.styles.forEach((function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach((function(t){var o=i[t];o.length>1&&(o=Ju(o,r,e)),n[t]=o}))}})),n}}]),t}(),Dl=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(t){r.states[t.name]=new Nl(t.style,t.options&&t.options.params||{})})),Pl(this.states,"true","1"),Pl(this.states,"false","0"),n.transitions.forEach((function(t){r.transitionFactories.push(new xl(e,t,r.states))})),this.fallbackTransition=new xl(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(t,[{key:"matchTransition",value:function(t,e,n,r){return this.transitionFactories.find((function(i){return i.match(t,e,n,r)}))||null}},{key:"matchStyles",value:function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}},{key:"containsQueries",get:function(){return this.ast.queryCount>0}}]),t}();function Pl(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var Rl=new vl,Ml=function(){function t(e,n,r){_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _createClass(t,[{key:"register",value:function(t,e){var n=[],r=ul(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[t]=r}},{key:"_buildPlayer",value:function(t,e,n){var r=t.element,i=_u(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}},{key:"create",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],a=this._animations[t],s=new Map;if(a?(n=ml(this._driver,e,a,"ng-enter","ng-leave",{},{},i,Rl,o)).forEach((function(t){var e=ku(s,t.element,{});t.postStyleProps.forEach((function(t){return e[t]=null}))})):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: ".concat(o.join("\n")));s.forEach((function(t,e){Object.keys(t).forEach((function(n){t[n]=r._driver.computeStyle(e,n,"*")}))}));var u=mu(n.map((function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)})));return this._playersById[t]=u,u.onDestroy((function(){return r.destroy(t)})),this.players.push(u),u}},{key:"destroy",value:function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by ".concat(t));return e}},{key:"listen",value:function(t,e,n,r){var i=Cu(e,"","","");return bu(this._getPlayer(t),n,i,r),function(){}}},{key:"command",value:function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])}}]),t}(),Ll=[],jl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Fl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ul=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,t),this.namespaceId=n;var r,i=e&&e.hasOwnProperty("value");if(this.value=null!=(r=i?e.value:e)?r:null,i){var o=qu(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return _createClass(t,[{key:"absorbOptions",value:function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach((function(t){null==n[t]&&(n[t]=e[t])}))}}},{key:"params",get:function(){return this.options.params}}]),t}(),Vl=new Ul("void"),ql=function(){function t(e,n,r){_classCallCheck(this,t),this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ql(n,this._hostClassName)}return _createClass(t,[{key:"listen",value:function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(e,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(e,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(e,'" is not supported!'));var a=ku(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=ku(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Ql(t,"ng-trigger"),Ql(t,"ng-trigger-"+e),u[e]=Vl),function(){o._engine.afterFlush((function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]}))}}},{key:"register",value:function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}},{key:"_getTrigger",value:function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'.concat(t,'" has not been registered!'));return e}},{key:"trigger",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(e),a=new Hl(this.id,e,t),s=this._engine.statesByElement.get(t);s||(Ql(t,"ng-trigger"),Ql(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],l=new Ul(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[e]=l,u||(u=Vl),"void"===l.value||u.value!==l.value){var c=ku(this._engine.playersByElement,t,[]);c.forEach((function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()}));var h=o.matchTransition(u.value,l.value,t,l.params),f=!1;if(!h){if(!i)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:l,player:a,isFallbackTransition:f}),f||(Ql(t,"ng-animate-queued"),a.onStart((function(){Yl(t,"ng-animate-queued")}))),a.onDone((function(){var e=r.players.indexOf(a);e>=0&&r.players.splice(e,1);var n=r._engine.playersByElement.get(t);if(n){var i=n.indexOf(a);i>=0&&n.splice(i,1)}})),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,l.params)){var d=[],p=o.matchStyles(u.value,u.params,d),v=o.matchStyles(l.value,l.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush((function(){Gu(t,p),Wu(t,v)}))}}},{key:"deregister",value:function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach((function(e,n){delete e[t]})),this._elementListeners.forEach((function(n,r){e._elementListeners.set(r,n.filter((function(e){return e.name!=t})))}))}},{key:"clearElementCache",value:function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach((function(t){return t.destroy()})),this._engine.playersByElement.delete(t))}},{key:"_signalRemovalForInnerTriggers",value:function(t,e){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._engine.driver.query(t,".ng-trigger",!0).forEach((function(t){if(!t.__ng_removed){var r=n._engine.fetchNamespacesByElement(t);r.size?r.forEach((function(n){return n.triggerLeaveAnimation(t,e,!1,!0)})):n.clearElementCache(t)}}))}},{key:"triggerLeaveAnimation",value:function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach((function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}})),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&mu(a).onDone((function(){return i._engine.processLeaveNode(t)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach((function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,a=e._engine.statesByElement.get(t)[i]||Vl,s=new Ul("void"),u=new Hl(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(t),i?r.markElementAsRemoved(this.id,t,!1,e):(r.afterFlush((function(){return n.clearElementCache(t)})),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}},{key:"insertNode",value:function(t,e){Ql(t,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(t){var e=this,n=[];return this._queue.forEach((function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach((function(e){if(e.name==r.triggerName){var n=Cu(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,bu(r.player,e.phase,n,e.callback)}})),i.markedForDestroy?e._engine.afterFlush((function(){i.destroy()})):n.push(r)}})),this._queue=[],n.sort((function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1}))}},{key:"destroy",value:function(t){this.players.forEach((function(t){return t.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,t)}},{key:"elementContainsData",value:function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find((function(e){return e.element===t}))||e}}]),t}(),Bl=function(){function t(e,n,r){_classCallCheck(this,t),this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return _createClass(t,[{key:"_onRemovalComplete",value:function(t,e){this.onRemovalComplete(t,e)}},{key:"createNamespace",value:function(t,e){var n=new ql(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}},{key:"_balanceNamespaceList",value:function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}},{key:"register",value:function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}},{key:"registerTrigger",value:function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}},{key:"destroy",value:function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush((function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)})),this.afterFlushAnimationsDone((function(){return r.destroy(e)}))}}},{key:"_fetchNamespace",value:function(t){return this._namespaceLookup[t]}},{key:"fetchNamespacesByElement",value:function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e}},{key:"trigger",value:function(t,e,n,r){if(zl(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}},{key:"insertNode",value:function(t,e,n,r){if(zl(e)){var i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}}},{key:"collectEnterElement",value:function(t){this.collectedEnterElements.push(t)}},{key:"markElementAsDisabled",value:function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ql(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Yl(t,"ng-animate-disabled"))}},{key:"removeNode",value:function(t,e,n,r){if(zl(e)){var i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){var o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}},{key:"markElementAsRemoved",value:function(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(t,e,n,r,i){return zl(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}}},{key:"_buildInstruction",value:function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}},{key:"destroyInnerAnimations",value:function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach((function(t){return e.destroyActiveAnimationsForElement(t)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach((function(t){return e.finishActiveQueriedAnimationOnElement(t)}))}},{key:"destroyActiveAnimationsForElement",value:function(t){var e=this.playersByElement.get(t);e&&e.forEach((function(t){t.queued?t.markedForDestroy=!0:t.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach((function(t){return t.finish()}))}},{key:"whenRenderingDone",value:function(){var t=this;return new Promise((function(e){if(t.players.length)return mu(t.players).onDone((function(){return e()}));e()}))}},{key:"processLeaveNode",value:function(t){var e=this,n=t.__ng_removed;if(n&&n.setForRemoval){if(t.__ng_removed=jl,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach((function(t){e.markElementAsDisabled(t,!1)}))}},{key:"flush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(e,n){return t._balanceNamespaceList(e,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Ql(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,e)}finally{for(var o=0;o<i.length;o++)i[o]()}}else for(var a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(t){return t()})),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?mu(n).onDone((function(){s.forEach((function(t){return t()}))})):s.forEach((function(t){return t()}))}}},{key:"reportError",value:function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(t.join("\n")))}},{key:"_flushAnimations",value:function(t,e){var n=this,r=new vl,i=[],o=new Map,a=[],s=new Map,u=new Map,l=new Map,c=new Set;this.disabledNodes.forEach((function(t){c.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)c.add(e[r])}));var h=this.bodyNode,f=Array.from(this.statesByElement.keys()),d=Kl(f,this.collectedEnterElements),p=new Map,v=0;d.forEach((function(t,e){var n="ng-enter"+v++;p.set(e,n),t.forEach((function(t){return Ql(t,n)}))}));for(var y=[],g=new Set,m=new Set,_=0;_<this.collectedLeaveElements.length;_++){var b=this.collectedLeaveElements[_],w=b.__ng_removed;w&&w.setForRemoval&&(y.push(b),g.add(b),w.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach((function(t){return g.add(t)})):m.add(b))}var C=new Map,k=Kl(f,Array.from(g));k.forEach((function(t,e){var n="ng-leave"+v++;C.set(e,n),t.forEach((function(t){return Ql(t,n)}))})),t.push((function(){d.forEach((function(t,e){var n=p.get(e);t.forEach((function(t){return Yl(t,n)}))})),k.forEach((function(t,e){var n=C.get(e);t.forEach((function(t){return Yl(t,n)}))})),y.forEach((function(t){n.processLeaveNode(t)}))}));for(var E=[],S=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach((function(t){var e=t.player,o=t.element;if(E.push(e),n.collectedEnterElements.length){var c=o.__ng_removed;if(c&&c.setForMove)return void e.destroy()}var f=!h||!n.driver.containsElement(h,o),d=C.get(o),v=p.get(o),y=n._buildInstruction(t,r,v,d,f);if(!y.errors||!y.errors.length)return f?(e.onStart((function(){return Gu(o,y.fromStyles)})),e.onDestroy((function(){return Wu(o,y.toStyles)})),void i.push(e)):t.isFallbackTransition?(e.onStart((function(){return Gu(o,y.fromStyles)})),e.onDestroy((function(){return Wu(o,y.toStyles)})),void i.push(e)):(y.timelines.forEach((function(t){return t.stretchStartingKeyframe=!0})),r.append(o,y.timelines),a.push({instruction:y,player:e,element:o}),y.queriedElements.forEach((function(t){return ku(s,t,[]).push(e)})),y.preStyleProps.forEach((function(t,e){var n=Object.keys(t);if(n.length){var r=u.get(e);r||u.set(e,r=new Set),n.forEach((function(t){return r.add(t)}))}})),void y.postStyleProps.forEach((function(t,e){var n=Object.keys(t),r=l.get(e);r||l.set(e,r=new Set),n.forEach((function(t){return r.add(t)}))})));S.push(y)}));if(S.length){var I=[];S.forEach((function(t){I.push("@".concat(t.triggerName," has failed due to:\n")),t.errors.forEach((function(t){return I.push("- ".concat(t,"\n"))}))})),E.forEach((function(t){return t.destroy()})),this.reportError(I)}var A=new Map,O=new Map;a.forEach((function(t){var e=t.element;r.has(e)&&(O.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,A))})),i.forEach((function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach((function(t){ku(A,e,[]).push(t),t.destroy()}))}));var x=y.filter((function(t){return Xl(t,u,l)})),N=new Map;Gl(N,this.driver,m,l,"*").forEach((function(t){Xl(t,u,l)&&x.push(t)}));var D=new Map;d.forEach((function(t,e){Gl(D,n.driver,new Set(t),u,"!")})),x.forEach((function(t){var e=N.get(t),n=D.get(t);N.set(t,Object.assign({},e,n))}));var P=[],R=[],M={};a.forEach((function(t){var e=t.element,a=t.player,s=t.instruction;if(r.has(e)){if(c.has(e))return a.onDestroy((function(){return Wu(e,s.toStyles)})),a.disabled=!0,a.overrideTotalTime(s.totalTime),void i.push(a);var u=M;if(O.size>1){for(var l=e,h=[];l=l.parentNode;){var f=O.get(l);if(f){u=f;break}h.push(l)}h.forEach((function(t){return O.set(t,u)}))}var d=n._buildAnimation(a.namespaceId,s,A,o,D,N);if(a.setRealPlayer(d),u===M)P.push(a);else{var p=n.playersByElement.get(u);p&&p.length&&(a.parentPlayer=mu(p)),i.push(a)}}else Gu(e,s.fromStyles),a.onDestroy((function(){return Wu(e,s.toStyles)})),R.push(a),c.has(e)&&i.push(a)})),R.forEach((function(t){var e=o.get(t.element);if(e&&e.length){var n=mu(e);t.setRealPlayer(n)}})),i.forEach((function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()}));for(var L=0;L<y.length;L++){var j=y[L],F=j.__ng_removed;if(Yl(j,"ng-leave"),!F||!F.hasAnimation){var U=[];if(s.size){var V=s.get(j);V&&V.length&&U.push.apply(U,_toConsumableArray(V));for(var q=this.driver.query(j,".ng-animating",!0),B=0;B<q.length;B++){var H=s.get(q[B]);H&&H.length&&U.push.apply(U,_toConsumableArray(H))}}var z=U.filter((function(t){return!t.destroyed}));z.length?Jl(this,j,z):this.processLeaveNode(j)}}return y.length=0,P.forEach((function(t){n.players.push(t),t.onDone((function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)})),t.play()})),P}},{key:"elementContainsData",value:function(t,e){var n=!1,r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}},{key:"afterFlush",value:function(t){this._flushFns.push(t)}},{key:"afterFlushAnimationsDone",value:function(t){this._whenQuietFns.push(t)}},{key:"_getPreviousPlayers",value:function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach((function(t){t.queued||(u||t.triggerName==r)&&o.push(t)}))}}return(n||r)&&(o=o.filter((function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)}))),o}},{key:"_beforeAnimationBuild",value:function(t,e,n){var r,i=this,o=e.element,a=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName,u=_createForOfIteratorHelper(e.timelines);try{var l=function(){var t=r.value.element,u=t!==o,l=ku(n,t,[]);i._getPreviousPlayers(t,u,a,s,e.toState).forEach((function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)}))};for(u.s();!(r=u.n()).done;)l()}catch(c){u.e(c)}finally{u.f()}Gu(o,e.fromStyles)}},{key:"_buildAnimation",value:function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,l=[],c=new Set,h=new Set,f=e.timelines.map((function(e){var f=e.element;c.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new vu(e.duration,e.delay);var p,v,y=f!==u,g=(p=(n.get(f)||Ll).map((function(t){return t.getRealPlayer()})),v=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof yu?t(i.players,n):n.push(i)}}(p,v),v).filter((function(t){return!!t.element&&t.element===f})),m=i.get(f),_=o.get(f),b=_u(0,a._normalizer,0,e.keyframes,m,_),w=a._buildPlayer(e,b,g);if(e.subTimeline&&r&&h.add(f),y){var C=new Hl(t,s,f);C.setRealPlayer(w),l.push(C)}return w}));l.forEach((function(t){ku(a.playersByQueriedElement,t.element,[]).push(t),t.onDone((function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete t[e]}return r}(a.playersByQueriedElement,t.element,t)}))})),c.forEach((function(t){return Ql(t,"ng-animating")}));var d=mu(f);return d.onDestroy((function(){c.forEach((function(t){return Yl(t,"ng-animating")})),Wu(u,e.toStyles)})),h.forEach((function(t){ku(r,t,[]).push(d)})),d}},{key:"_buildPlayer",value:function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new vu(t.duration,t.delay)}},{key:"queuedPlayers",get:function(){var t=[];return this._namespaceList.forEach((function(e){e.players.forEach((function(e){e.queued&&t.push(e)}))})),t}}]),t}(),Hl=function(){function t(e,n,r){_classCallCheck(this,t),this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new vu,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(t,[{key:"setRealPlayer",value:function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach((function(n){e._queuedCallbacks[n].forEach((function(e){return bu(t,n,void 0,e)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(t){this.totalTime=t}},{key:"syncPlayerEvents",value:function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart((function(){return n.triggerCallback("start")})),t.onDone((function(){return e.finish()})),t.onDestroy((function(){return e.destroy()}))}},{key:"_queueEvent",value:function(t,e){ku(this._queuedCallbacks,t,[]).push(e)}},{key:"onDone",value:function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}},{key:"onStart",value:function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}},{key:"onDestroy",value:function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(t){this.queued||this._player.setPosition(t)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)}}]),t}();function zl(t){return t&&1===t.nodeType}function Wl(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Gl(t,e,n,r,i){var o=[];n.forEach((function(t){return o.push(Wl(t))}));var a=[];r.forEach((function(n,r){var o={};n.forEach((function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Fl,a.push(r))})),t.set(r,o)}));var s=0;return n.forEach((function(t){return Wl(t,o[s++])})),a}function Kl(t,e){var n=new Map;if(t.forEach((function(t){return n.set(t,[])})),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach((function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:r.has(a)?1:t(a),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)})),n}function Ql(t,e){if(t.classList)t.classList.add(e);else{var n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Yl(t,e){if(t.classList)t.classList.remove(e);else{var n=t.$$classes;n&&delete n[e]}}function Jl(t,e,n){mu(n).onDone((function(){return t.processLeaveNode(e)}))}function Xl(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach((function(t){return i.add(t)})):e.set(t,r),n.delete(t),!0}var Zl=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Bl(e,n,r),this._timelineEngine=new Ml(e,n,r),this._transitionEngine.onRemovalComplete=function(t,e){return i.onRemovalComplete(t,e)}}return _createClass(t,[{key:"registerTrigger",value:function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=ul(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));a=function(t,e){return new Dl(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}},{key:"register",value:function(t,e){this._transitionEngine.register(t,e)}},{key:"destroy",value:function(t,e){this._transitionEngine.destroy(t,e)}},{key:"onInsert",value:function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}},{key:"onRemove",value:function(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}},{key:"disableAnimations",value:function(t,e){this._transitionEngine.markElementAsDisabled(t,e)}},{key:"process",value:function(t,e,n,r){if("@"==n.charAt(0)){var i=_slicedToArray(Eu(n),2),o=i[0],a=i[1];this._timelineEngine.command(o,e,a,r)}else this._transitionEngine.trigger(t,e,n,r)}},{key:"listen",value:function(t,e,n,r,i){if("@"==n.charAt(0)){var o=_slicedToArray(Eu(n),2),a=o[0],s=o[1];return this._timelineEngine.listen(a,e,s,i)}return this._transitionEngine.listen(t,e,n,r,i)}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(t)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}}]),t}();function $l(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=ec(e[0]),e.length>1&&(r=ec(e[e.length-1]))):e&&(n=ec(e)),n||r?new tc(t,n,r):null}var tc=function(){var t=function(){function t(e,n,r){_classCallCheck(this,t),this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;var i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}return _createClass(t,[{key:"start",value:function(){this._state<1&&(this._startStyles&&Wu(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(Wu(this._element,this._initialStyles),this._endStyles&&(Wu(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Gu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gu(this._element,this._endStyles),this._endStyles=null),Wu(this._element,this._initialStyles),this._state=3)}}]),t}();return t.initialStylesByElement=new WeakMap,t}();function ec(t){for(var e=null,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];nc(i)&&((e=e||{})[i]=t[i])}return e}function nc(t){return"display"===t||"position"===t}var rc=function(){function t(e,n,r,i,o,a,s){var u=this;_classCallCheck(this,t),this._element=e,this._name=n,this._duration=r,this._delay=i,this._easing=o,this._fillMode=a,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return u._handleCallback(t)}}return _createClass(t,[{key:"apply",value:function(){var t,e,n;t=this._element,e="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=lc(t,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)t.charAt(n)}(n),e="".concat(n,", ").concat(e)),uc(t,"",e),sc(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){ic(this._element,this._name,"paused")}},{key:"resume",value:function(){ic(this._element,this._name,"running")}},{key:"setPosition",value:function(t){var e=oc(this._element,this._name);this._position=t*this._duration,uc(this._element,"Delay","-".concat(this._position,"ms"),e)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),sc(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){var n=lc(t,"").split(","),r=ac(n,e);r>=0&&(n.splice(r,1),uc(t,"",n.join(",")))}(this._element,this._name))}}]),t}();function ic(t,e,n){uc(t,"PlayState",n,oc(t,e))}function oc(t,e){var n=lc(t,"");return n.indexOf(",")>0?ac(n.split(","),e):ac([n],e)}function ac(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function sc(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function uc(t,e,n,r){var i="animation"+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function lc(t,e){return t.style["animation"+e]}var cc=function(){function t(e,n,r,i,o,a,s,u){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=i+o,this._buildStyler()}return _createClass(t,[{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(t){this._styler.setPosition(t)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var t=this;this._styler=new rc(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return t.finish()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}},{key:"beforeDestroy",value:function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:rl(t.element,r))}))}this.currentSnapshot=e}}]),t}(),hc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).element=t,i._startingStyles={},i.__initialized=!1,i._styles=Mu(r),i}return _createClass(n,[{key:"init",value:function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(e){t._startingStyles[e]=t.element.style[e]})),_get(_getPrototypeOf(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(e){return t.element.style.setProperty(e,t._styles[e])})),_get(_getPrototypeOf(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)})),this._startingStyles=null,_get(_getPrototypeOf(n.prototype),"destroy",this).call(this))}}]),n}(vu),fc=function(){function t(){_classCallCheck(this,t),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return Nu(t)}},{key:"matchesElement",value:function(t,e){return Du(t,e)}},{key:"containsElement",value:function(t,e){return Pu(t,e)}},{key:"query",value:function(t,e,n){return Ru(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"buildKeyframeElement",value:function(t,e,n){n=n.map((function(t){return Mu(t)}));var r="@keyframes ".concat(e," {\n"),i="";n.forEach((function(t){i=" ";var e=parseFloat(t.offset);r+="".concat(i).concat(100*e,"% {\n"),i+=" ",Object.keys(t).forEach((function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(e,": ").concat(n,";\n"))}})),r+="".concat(i,"}\n")})),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;a&&this._notifyFaultyScrubber();var s=o.filter((function(t){return t instanceof cc})),u={};tl(n,r)&&s.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return u[t]=e[t]}))}));var l=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach((function(t){Object.keys(t).forEach((function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])}))})),e}(e=el(t,e,u));if(0==n)return new hc(t,l);var c="gen_css_kf_".concat(this._count++),h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);var f=$l(t,e),d=new cc(t,e,c,n,r,i,l,f);return d.onDestroy((function(){var t;(t=h).parentNode.removeChild(t)})),d}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),t}(),dc=function(){function t(e,n,r,i){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return t._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(t,e,n){return t.animate(e,n)}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(t){this.domPlayer.currentTime=t*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"beforeDestroy",value:function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:rl(t.element,n))})),this.currentSnapshot=e}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}},{key:"totalTime",get:function(){return this._delay+this._duration}}]),t}(),pc=function(){function t(){_classCallCheck(this,t),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(vc().toString()),this._cssKeyframesDriver=new fc}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return Nu(t)}},{key:"matchesElement",value:function(t,e){return Du(t,e)}},{key:"containsElement",value:function(t,e){return Pu(t,e)}},{key:"query",value:function(t,e,n){return Ru(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"overrideWebAnimationsSupport",value:function(t){this._isNativeImpl=t}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},l=o.filter((function(t){return t instanceof dc}));tl(n,r)&&l.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return u[t]=e[t]}))}));var c=$l(t,e=el(t,e=e.map((function(t){return Bu(t,!1)})),u));return new dc(t,e,s,c)}}]),t}();function vc(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var yc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this))._nextAnimationId=0,o._renderer=t.createRenderer(i.body,{id:"0",encapsulation:r.P.None,styles:[],data:{animation:[]}}),o}return _createClass(n,[{key:"build",value:function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?fu(t):t;return _c(this._renderer,null,e,"register",[n]),new gc(e,this._renderer)}}]),n}(hu),gc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._id=t,i._renderer=r,i}return _createClass(n,[{key:"create",value:function(t,e){return new mc(this._id,t,e||{},this._renderer)}}]),n}(function(){return function t(){_classCallCheck(this,t)}}()),mc=function(){function t(e,n,r,i){_classCallCheck(this,t),this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _createClass(t,[{key:"_listen",value:function(t,e){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(t),e)}},{key:"_command",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _c(this._renderer,this.element,this.id,t,n)}},{key:"onDone",value:function(t){this._listen("done",t)}},{key:"onStart",value:function(t){this._listen("start",t)}},{key:"onDestroy",value:function(t){this._listen("destroy",t)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(t){this._command("setPosition",t)}},{key:"getPosition",value:function(){return 0}}]),t}();function _c(t,e,n,r,i){return t.setProperty(e,"@@".concat(n,":").concat(r),i)}var bc=function(){function t(e,n,r){_classCallCheck(this,t),this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return _createClass(t,[{key:"createRenderer",value:function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new wc("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach((function(e){return n.engine.registerTrigger(o,a,t,e.name,e)})),new Cc(this,a,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var t=this;this.promise.then((function(){t._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run((function(){return e(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){r._zone.run((function(){r._animationCallbacksBuffer.forEach((function(t){var e=_slicedToArray(t,2);(0,e[0])(e[1])})),r._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([e,n]))}},{key:"end",value:function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),t}(),wc=function(){function t(e,n,r){_classCallCheck(this,t),this.namespaceId=e,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(t){return n.destroyNode(t)}:null}return _createClass(t,[{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(t,e){return this.delegate.createElement(t,e)}},{key:"createComment",value:function(t){return this.delegate.createComment(t)}},{key:"createText",value:function(t){return this.delegate.createText(t)}},{key:"appendChild",value:function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}},{key:"insertBefore",value:function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}},{key:"removeChild",value:function(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}},{key:"selectRootElement",value:function(t,e){return this.delegate.selectRootElement(t,e)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setAttribute",value:function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}},{key:"setValue",value:function(t,e){this.delegate.setValue(t,e)}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"disableAnimations",value:function(t,e){this.engine.disableAnimations(t,e)}},{key:"data",get:function(){return this.delegate.data}}]),t}(),Cc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,r,i,o)).factory=t,a.namespaceId=r,a}return _createClass(n,[{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){var r,i,o=this;if("@"==e.charAt(0)){var a,s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),u=e.substr(1),l="";return"@"!=u.charAt(0)&&(i=(r=u).indexOf("."),u=(a=_slicedToArray([r.substring(0,i),r.substr(i+1)],2))[0],l=a[1]),this.engine.listen(this.namespaceId,s,u,l,(function(t){o.factory.scheduleListenerCallback(t._data||-1,n,t)}))}return this.delegate.listen(t,e,n)}}]),n}(wc),kc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){return _classCallCheck(this,n),e.call(this,t.body,r,i)}return n}(Zl);function Ec(){return"function"==typeof vc()?new pc:new fc}function Sc(){return new Tl}function Tc(t,e,n){return new bc(t,e,n)}var Ic=new r.o("AnimationModuleType"),Ac=function t(){_classCallCheck(this,t)},Oc=n("wj3C"),xc=n.n(Oc);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Oa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Oa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Oa(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function l(){}function c(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=c(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==c(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function p(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function C(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function k(t,e,n){this.code=T+t,this.message=e||I[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new k(e.substring(T.length),t.message,t.serverResponse):null}C(k,Error),k.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.v()};var S,T="auth/",I={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in A)if(A[e].id===t)return{firebaseEndpoint:(t=A[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function N(t){if(Error.captureStackTrace)Error.captureStackTrace(this,N);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");N.call(this,n+t[r])}function P(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function R(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}S=O("__EID__")?"__EID__":void 0,C(N,Error),N.prototype.name="CustomError",C(D,N),D.prototype.name="AssertionError",R.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new R((function(){return new U}),(function(t){t.reset()}));function F(){var t=ve,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function U(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function W(t,e){return 0<=V(t,e)}function G(t,e){var n;return(n=0<=(e=V(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Z=/&/g,$=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var st=a.navigator;if(st){var ut=st.userAgent;if(ut){J=ut;break t}}J=""}function lt(t){return ot(J,t)}function ct(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ht(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===_t&&e||"",this.b=mt}function gt(t){return t instanceof yt&&t.constructor===yt&&t.b===mt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.ra=!0,yt.prototype.qa=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var mt={},_t={},bt=new yt(_t,"");function wt(t,e){this.a=t===It&&e||"",this.b=Tt}function Ct(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+c(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=gt(t);if(!St.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Et,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?gt(t):encodeURIComponent(String(t))})),new wt(It,t)}wt.prototype.ra=!0,wt.prototype.qa=function(){return this.a.toString()},wt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Et=/%{(\w+)}/g,St=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Tt={},It={};function At(t,e){this.a=t===Pt&&e||"",this.b=Dt}function Ot(t){return t instanceof At&&t.constructor===At&&t.b===Dt?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+c(t)),"type_error:SafeUrl")}At.prototype.ra=!0,At.prototype.qa=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Nt(t){return t instanceof At?t:(t="object"==typeof t&&t.ra?t.qa():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new At(Pt,t))}var Dt={},Pt={};function Rt(){this.a="",this.b=Lt}function Mt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Lt?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+c(t)),"type_error:SafeHtml")}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Lt={};function jt(t){var e=new Rt;return e.a=t,e}jt("<!DOCTYPE html>");var Ft=jt("");function Ut(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Z,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace($,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function qt(t){return qt[" "](t),t}jt("<br>"),qt[" "]=l;var Bt,Ht,zt=lt("Opera"),Wt=lt("Trident")||lt("MSIE"),Gt=lt("Edge"),Kt=Gt||Wt,Qt=lt("Gecko")&&!(ot(J.toLowerCase(),"webkit")&&!lt("Edge"))&&!(lt("Trident")||lt("MSIE"))&&!lt("Edge"),Yt=ot(J.toLowerCase(),"webkit")&&!lt("Edge");function Jt(){var t=a.document;return t?t.documentMode:void 0}t:{var Xt="",Zt=(Ht=J,Qt?/rv:([^\);]+)(\)|;)/.exec(Ht):Gt?/Edge\/([\d\.]+)/.exec(Ht):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ht):Yt?/WebKit\/(\S+)/.exec(Ht):zt?/(?:Version)[ \/]?(\S+)/.exec(Ht):void 0);if(Zt&&(Xt=Zt?Zt[1]:""),Wt){var $t=Jt();if(null!=$t&&$t>parseFloat(Xt)){Bt=String($t);break t}}Bt=Xt}var te,ee={};function ne(t){return function(t,e){var n=ee;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=X(String(Bt)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=at(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||at(0==a[2].length,0==s[2].length)||at(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}te=a.document&&Wt?Jt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Ht){}var re=!Wt||9<=Number(te);function ie(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function oe(t,e){ct(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ue.hasOwnProperty(n)?t.setAttribute(ue[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ae,se,ue={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function le(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!h(o)||d(o)&&0<o.nodeType?r(o):q(he(o)?Y(o):o,r)}}function ce(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function he(t){if(t&&"number"==typeof t.length){if(d(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1}function fe(t){a.setTimeout((function(){throw t}),0)}function de(t,e){se||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);se=function(){t.then(ye)}}else se=function(){var t=ye;!f(a.setImmediate)||a.Window&&a.Window.prototype&&!lt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(ae||(ae=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!lt("Presto")&&(t=function(){var t=ce(document,"IFRAME");t.style.display="none",function(t){var e=new wt(It,gt(bt));vt(t,"HTMLIFrameElement"),t.src=Ct(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Mt(Ft)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!lt("Trident")&&!lt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),ae(t)):a.setImmediate(t)}}(),pe||(se(),pe=!0),ve.add(t,e)}var pe=!1,ve=new L;function ye(){for(var t;t=F();){try{t.a.call(t.b)}catch(e){fe(e)}M(j,t)}pe=!1}function ge(t,e){if(this.a=me,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){xe(n,_e,t)}),(function(t){if(!(t instanceof je))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}xe(n,be,t)}))}catch(r){xe(this,be,r)}}var me=0,_e=2,be=3;function we(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}we.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new R((function(){return new we}),(function(t){t.reset()}));function ke(t,e,n){var r=Ce.get();return r.g=t,r.b=e,r.f=n,r}function Ee(t){if(t instanceof ge)return t;var e=new ge(l);return xe(e,_e,t),e}function Se(t){return new ge((function(e,n){n(t)}))}function Te(t,e,n){Ne(t,e,n,null)||de(b(e,t))}function Ie(t){return new ge((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Te(t[o],b(i,o,!0),b(i,o,!1));else e(r)}))}function Ae(t,e){t.b||t.a!=_e&&t.a!=be||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function Oe(t,e,n,r){var i=ke(null,null,null);return i.a=new ge((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof je?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,Ae(t,i),i.a}function xe(t,e,n){t.a==me&&(t===n&&(e=be,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ne(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=be||n instanceof je||function(t,e){t.g=!0,de((function(){t.g&&Le.call(null,e)}))}(t,n)))}function Ne(t,e,n,r){if(t instanceof ge)return Ae(t,ke(e||l,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(f(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function De(t){t.h||(t.h=!0,de(t.ec,t))}function Pe(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Re(t,e,n,r){if(n==be&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Me(e,n,r);else try{e.c?e.g.call(e.f):Me(e,n,r)}catch(i){Le.call(null,i)}M(Ce,e)}function Me(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ge.prototype.then=function(t,e,n){return Oe(this,f(t)?t:null,f(e)?e:null,n)},ge.prototype.$goog_Thenable=!0,(t=ge.prototype).ma=function(t,e){return(t=ke(t,t,e)).c=!0,Ae(this,t),this},t.o=function(t,e){return Oe(this,null,t,e)},t.cancel=function(t){if(this.a==me){var e=new je(t);de((function(){!function t(e,n){if(e.a==me)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==me&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Pe(r),Re(r,o,be,n)))}e.c=null}else xe(e,be,n)}(this,e)}),this)}},t.Yc=function(t){this.a=me,xe(this,_e,t)},t.Zc=function(t){this.a=me,xe(this,be,t)},t.ec=function(){for(var t;t=Pe(this);)Re(this,t,this.a,this.i);this.h=!1};var Le=fe;function je(t){N.call(this,t)}function Fe(){0!=Ue&&(Ve[p(this)]=this),this.wa=this.wa,this.na=this.na}C(je,N),je.prototype.name="cancel";var Ue=0,Ve={};function qe(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=Ue)){var e=p(t);if(0!=Ue&&t.na&&0<t.na.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ve[e]}}Fe.prototype.wa=!1,Fe.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Be=Object.freeze||function(t){return t},He=!Wt||9<=Number(te),ze=Wt&&!ne("9"),We=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(n){}return t}();function Ge(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ke(t,e){if(Ge.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{qt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ge.prototype.preventDefault=function(){this.defaultPrevented=!0},C(Ke,Ge);var Qe=Be({2:"touch",3:"pen",4:"mouse"});Ke.prototype.preventDefault=function(){Ke.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ke.prototype.f=function(){return this.a};var Ye="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Xe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Je,this.ua=this.Na=!1}function Ze(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function $e(t){this.src=t,this.a={},this.b=0}function tn(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(Ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function en(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}$e.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=en(t,e,r,i);return-1<a?(e=t[a],n||(e.Na=!1)):((e=new Xe(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var nn="closure_lm_"+(1e6*Math.random()|0),rn={};function on(t,e,n,r,i){if(r&&r.once)sn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else n=yn(n),t&&t[Ye]?mn(t,e,n,d(r)?!!r.capture:!!r,i):an(t,e,n,!1,r,i)}function an(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=pn(t);if(s||(t[nn]=s=new $e(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=dn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)We||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(cn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function sn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);else n=yn(n),t&&t[Ye]?_n(t,e,n,d(r)?!!r.capture:!!r,i):an(t,e,n,!0,r,i)}function un(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=yn(n),t&&t[Ye]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=en(o=t.a[e],n,r,i))&&(Ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=pn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=en(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Ye])tn(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=pn(e))?(tn(n,t),0==n.b&&(n.src=null,e[nn]=null)):Ze(t)}}}function cn(t){return t in rn?rn[t]:rn[t]="on"+t}function hn(t,e,n,r){var i=!0;if((t=pn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=fn(o,r),i=i&&!1!==o)}return i}function fn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&ln(t),n.call(r,e)}function dn(t,e){if(t.ua)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ke(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=hn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=hn(r[i],t,!1,e),n=n&&o}return n}return fn(t,new Ke(e,this))}function pn(t){return(t=t[nn])instanceof $e?t:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(t){return f(t)?t:(t[vn]||(t[vn]=function(e){return t.handleEvent(e)}),t[vn])}function gn(){Fe.call(this),this.u=new $e(this),this.Yb=this,this.eb=null}function mn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function _n(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function bn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ua&&a.capture==n){var s=a.listener,u=a.Ta||a.src;a.Na&&tn(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function wn(t,e,n){if(f(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Cn(t){var e=null;return new ge((function(n,r){-1==(e=wn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function kn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function En(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Sn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Sn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];In(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)In(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}C(gn,Fe),gn.prototype[Ye]=!0,gn.prototype.addEventListener=function(t,e,n,r){on(this,t,e,n,r)},gn.prototype.removeEventListener=function(t,e,n,r){un(this,t,e,n,r)},gn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new Ge(t,n);else if(t instanceof Ge)t.target=t.target||n;else{var i=t;pt(t=new Ge(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=bn(a,r,!0,t)&&i}if(i=bn(a=t.b=n,r,!0,t)&&i,i=bn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=bn(a=t.b=e[o],r,!1,t)&&i;return i},gn.prototype.Ba=function(){if(gn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ze(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=Sn.prototype).V=function(){Tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Tn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return In(this.b,t)?this.b[t]:e},t.set=function(t,e){In(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var An=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function On(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof On?(this.h=void 0!==e?e:t.h,xn(this,t.f),this.i=t.i,this.b=t.b,Nn(this,t.l),this.c=t.c,Dn(this,Xn(t.a)),this.g=t.g):t&&(n=String(t).match(An))?(this.h=!!e,xn(this,n[1]||"",!0),this.i=jn(n[2]||""),this.b=jn(n[3]||"",!0),Nn(this,n[4]),this.c=jn(n[5]||"",!0),Dn(this,n[6]||"",!0),this.g=jn(n[7]||"")):(this.h=!!e,this.a=new Wn(null,this.h))}function xn(t,e,n){t.f=n?jn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Nn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Dn(t,e,n){e instanceof Wn?(t.a=e,function(t,e){e&&!t.f&&(Gn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qn(this,e),Jn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Fn(e,Hn)),t.a=new Wn(e,t.h))}function Pn(t,e,n){t.a.set(e,n)}function Rn(t,e){return t.a.get(e)}function Mn(t){return t instanceof On?new On(t):new On(t,void 0)}function Ln(t,e){var n=new On(null,void 0);return xn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Un),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Un(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}On.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fn(e,Vn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(Fn(e,Vn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fn(n,"/"==n.charAt(0)?Bn:qn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Fn(n,zn)),t.join("")},On.prototype.resolve=function(t){var e=new On(this),n=!!t.f;n?xn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)Nn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?Dn(e,Xn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Vn=/[#\/\?@]/g,qn=/[#\?:]/g,Bn=/[#\?]/g,Hn=/[#\?@]/g,zn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Gn(t){t.a||(t.a=new Sn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Kn(t){var e=En(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function Qn(t,e){Gn(t),e=Zn(t,e),In(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,In((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Tn(t)))}function Yn(t,e){return Gn(t),e=Zn(t,e),In(t.a.b,e)}function Jn(t,e,n){Qn(t,e),0<n.length&&(t.c=null,t.a.set(Zn(t,e),Y(n)),t.b+=n.length)}function Xn(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new Sn(t.a),e.b=t.b),e}function Zn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function $n(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),rr(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":rr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new tr,t,e),e.join("")}function tr(){}(t=Wn.prototype).add=function(t,e){Gn(this),this.c=null,t=Zn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Gn(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){Gn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Gn(this);var e=[];if("string"==typeof t)Yn(this,t)&&(e=Q(e,this.a.get(Zn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Gn(this),this.c=null,Yn(this,t=Zn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var er={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},nr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function rr(t,e){e.push('"',t.replace(nr,(function(t){var e=er[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),er[t]=e),e})),'"')}function ir(){var t=Cr();return Wt&&!!te&&11==te||/Edge\/\d+/.test(t)}function or(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function ar(t,e){e=e||a.window;var n="about:blank";t&&(n=Ot(Nt(t))),e.location.href=n}function sr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ur(t){t=t||a.window;try{t.close()}catch(e){}}function lr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),_r(Cr())==mr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof At?n:Nt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((lt("iPhone")&&!lt("iPod")&&!lt("iPad")||lt("iPad")||lt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(a=ce(document,"A"),"HTMLAnchorElement"),e instanceof At||e instanceof At||(e="object"==typeof e&&e.ra?e.qa():String(e),xt.test(e)||(e="about:invalid#zClosurez"),e=new At(Pt,e)),a.href=Ot(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Ot(e),a&&(Kt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=jt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">'),r=a.document)&&(r.write(Mt(t)),r.close())):(a=r.open(Ot(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var cr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hr=/^[^@]+@[^@]+$/;function fr(){var t=null;return new ge((function(e){"complete"==a.document.readyState?e():(t=function(){e()},sn(window,"load",t))})).o((function(e){throw un(window,"load",t),e}))}function dr(t){return t=t||Cr(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function pr(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function vr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function yr(){return xc.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":xc.a.INTERNAL.hasOwnProperty("node")?"Node":vr()?"Worker":"Browser"}function gr(){var t=yr();return"ReactNative"===t||"Node"===t}var mr="Firefox";function _r(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?mr:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var br={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function wr(t,e){e=e||[];var n,r=[],i={};for(n in br)i[br[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=yr())?r=_r(i=Cr()):"Worker"===r&&(r=_r(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function kr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Er(){try{var t=a.localStorage,e=Dr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ir()||!!a.indexedDB}catch(n){return vr()&&!!a.indexedDB}return!1}function Sr(){return(Tr()||"chrome-extension:"===Ir()||dr())&&!gr()&&Er()&&!vr()}function Tr(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return a.location&&a.location.protocol||null}function Ar(t){return!sr(t=t||Cr())&&_r(t)!=mr}function Or(t){return void 0===t?null:$n(t)}function xr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Dr(t){return t||Math.floor(1e9*Math.random()).toString()}function Pr(t){return"Safari"!=_r(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Rr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Mr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=yr(),this.b=sr(t)||"ReactNative"===e}function Lr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function jr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Fr(){return!(!kr("fireauth.oauthhelper",a)&&!kr("fireauth.iframe",a))}Mr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Tr()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ur,Vr={};function qr(t){Vr[t]||(Vr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Br={};Object.defineProperty(Br,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Br,"abcd",{configurable:!0,enumerable:!0,value:2}),Ur=2==Br.abcd}catch(Ht){Ur=!1}function Hr(t,e,n){Ur?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Hr(t,n,e[n])}function Wr(t){var e={};return zr(e,t),e}function Gr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Hr(e,n,Gr(t[n]));return e}function Kr(t){var e=t&&(t[Zr]?"phone":null);if(!(e&&t&&t[Xr]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Hr(this,"uid",t[Xr]),Hr(this,"displayName",t[Yr]||null);var n=null;t[Jr]&&(n=new Date(t[Jr]).toUTCString()),Hr(this,"enrollmentTime",n),Hr(this,"factorId",e)}function Qr(t){try{var e=new $r(t)}catch(n){e=null}return e}Kr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Yr="displayName",Jr="enrolledAt",Xr="mfaEnrollmentId",Zr="phoneInfo";function $r(t){Kr.call(this,t),Hr(this,"phoneNumber",t[Zr])}function ti(t){var e={},n=t[ii],r=t[ai],i=t[si];if(t=Qr(t[oi]),!i||i!=ni&&i!=ri&&!n||i==ri&&!r||i==ei&&!t)throw Error("Invalid checkActionCode response!");i==ri?(e[li]=n||null,e[hi]=n||null,e[ui]=r):(e[li]=r||null,e[hi]=r||null,e[ui]=n||null),e[ci]=t||null,Hr(this,di,i),Hr(this,fi,Gr(e))}C($r,Kr),$r.prototype.v=function(){var t=$r.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var ei="REVERT_SECOND_FACTOR_ADDITION",ni="EMAIL_SIGNIN",ri="VERIFY_AND_CHANGE_EMAIL",ii="email",oi="mfaInfo",ai="newEmail",si="requestType",ui="email",li="fromEmail",ci="multiFactorInfo",hi="previousEmail",fi="data",di="operation";function pi(t){var e=Rn(t=Mn(t),vi)||null,n=Rn(t,yi)||null,r=Rn(t,_i)||null;if(r=r&&wi[r]||null,!e||!n||!r)throw new k("argument-error",vi+", "+yi+"and "+_i+" are required in a valid action code URL.");zr(this,{apiKey:e,operation:r,code:n,continueUrl:Rn(t,gi)||null,languageCode:Rn(t,mi)||null,tenantId:Rn(t,bi)||null})}var vi="apiKey",yi="oobCode",gi="continueUrl",mi="languageCode",_i="mode",bi="tenantId",wi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ei,signIn:ni,verifyAndChangeEmail:ri,verifyEmail:"VERIFY_EMAIL"};function Ci(t){try{return new pi(t)}catch(e){return null}}function ki(t){var e=t[Ai];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ei];if(n&&"object"==typeof n){e=n[Ni];var r=n[Oi];if(n=n[xi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",Oi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",xi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",Ni+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Ei+" property must be a non null object when specified.");if(this.f=null,(e=t[Ii])&&"object"==typeof e){if("string"==typeof(e=e[Di])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",Di+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",Ii+" property must be a non null object when specified.");if(void 0!==(e=t[Ti])&&"boolean"!=typeof e)throw new k("argument-error",Ti+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Si])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",Si+" property must be a non empty string when specified.");this.i=t||null}var Ei="android",Si="dynamicLinkDomain",Ti="handleCodeInApp",Ii="iOS",Ai="url",Oi="installApp",xi="minimumVersion",Ni="packageName",Di="bundleId";function Pi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ri=null;function Mi(t){var e=ji(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,w(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Li(t){try{return new Mi(t)}catch(e){return null}}function ji(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ri[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ri){Ri={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ri[o]&&(Ri[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(r){}return null}Mi.prototype.S=function(){return this.f},Mi.prototype.i=function(){return this.b},Mi.prototype.toString=function(){return this.g};var Fi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ui=["client_id","response_type","scope","redirect_uri","state"],Vi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Ui},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Ui},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Ui},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Fi},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function qi(t){for(var e in Vi)if(Vi[e].ea==t)return Vi[e];return null}function Bi(t){var e={};e["facebook.com"]=Ki,e["google.com"]=Yi,e["github.com"]=Qi,e["twitter.com"]=Ji;var n=t&&t[zi];try{if(n)return e[n]?new e[n](t):new Gi(t);if(void 0!==t[Hi])return new Wi(t)}catch(r){}return null}var Hi="idToken",zi="providerId";function Wi(t){var e=t[zi];if(!e&&t[Hi]){var n=Li(t[Hi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Hr(this,"providerId",e),Hr(this,"isNewUser",n)}function Gi(t){Wi.call(this,t),Hr(this,"profile",Gr((t=Nr(t.rawUserInfo||"{}"))||{}))}function Ki(t){if(Gi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qi(t){if(Gi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Hr(this,"username",this.profile&&this.profile.login||null)}function Yi(t){if(Gi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ji(t){if(Gi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Hr(this,"username",t.screenName||null)}function Xi(t){var e=Mn(t),n=Rn(e,"link"),r=Rn(Mn(n),"link");return e=Rn(e,"deep_link_id"),Rn(Mn(e),"link")||e||r||n||t}function Zi(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?$i:to}C(Gi,Wi),C(Ki,Gi),C(Qi,Gi),C(Yi,Gi),C(Ji,Gi);var $i="enroll",to="signin";function eo(){}function no(t,e){return t.then((function(t){if(t[Ba]){var n=Li(t[Ba]);if(!n||e!=n.h)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==T+"user-not-found"?new k("user-mismatch"):t}))}function ro(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Hr(this,"providerId",t),Hr(this,"signInMethod",t)}function io(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function oo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ro(t.providerId,t.pendingToken)}catch(e){}return null}function ao(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Hr(this,"idToken",e.idToken),e.accessToken&&Hr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Hr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Hr(this,"accessToken",e.oauthToken),Hr(this,"secret",e.oauthTokenSecret)}Hr(this,"providerId",t),Hr(this,"signInMethod",n)}function so(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Kn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function uo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ao(t.providerId,e,t.signInMethod)}catch(n){}}return null}function lo(t,e){this.Oc=e||[],zr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(qi(t)||{}).Ha||null,this.kb=null}function co(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');lo.call(this,t,[])}function ho(t){lo.call(this,t,Ui),this.a=[]}function fo(){ho.call(this,"facebook.com")}function po(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){ho.call(this,"github.com")}function yo(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new vo).credential({accessToken:e})}function go(){ho.call(this,"google.com"),this.Aa("profile")}function mo(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new go).credential({idToken:n,accessToken:e})}function _o(){lo.call(this,"twitter.com",Fi)}function bo(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ao("twitter.com",n,"twitter.com")}function wo(t,e,n){this.a=t,this.f=e,Hr(this,"providerId","password"),Hr(this,"signInMethod",n===ko.EMAIL_LINK_SIGN_IN_METHOD?ko.EMAIL_LINK_SIGN_IN_METHOD:ko.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new wo(t.email,t.password,t.signInMethod):null}function ko(){zr(this,{providerId:"password",isOAuthProvider:!1})}function Eo(t,e){if(!(e=So(e)))throw new k("argument-error","Invalid email link!");return new wo(t,e.code,ko.EMAIL_LINK_SIGN_IN_METHOD)}function So(t){return(t=Ci(t=Xi(t)))&&t.operation===ni?t:null}function To(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new k("internal-error");this.a=t,Hr(this,"providerId","phone"),this.ea="phone",Hr(this,"signInMethod","phone")}function Io(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new To(e)}return null}function Ao(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Oo(t){try{this.a=t||xc.a.auth()}catch(e){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}zr(this,{providerId:"phone",isOAuthProvider:!1})}function xo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new To({bb:t,ab:e})}function No(t){if(t.temporaryProof&&t.phoneNumber)return new To({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return mo(o,n);case"facebook.com":return po(n);case"github.com":return yo(n);case"twitter.com":return bo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new ro(e,a):new ao(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ho(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Do(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Po(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Ro(t){return(t=t||{}).type?new Po(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Mo(){this.b=null,this.a=[]}Zi.prototype.Fa=function(){return Ee(this.a?this.a:this.b)},Zi.prototype.v=function(){return this.type==$i?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},eo.prototype.ia=function(){},eo.prototype.b=function(){},eo.prototype.c=function(){},eo.prototype.v=function(){},ro.prototype.ia=function(t){return ss(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,us(t,n)},ro.prototype.c=function(t,e){return no(ls(t,io(this)),e)},ro.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ao.prototype.ia=function(t){return ss(t,so(this))},ao.prototype.b=function(t,e){var n=so(this);return n.idToken=e,us(t,n)},ao.prototype.c=function(t,e){return no(ls(t,so(this)),e)},ao.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},lo.prototype.Ia=function(t){return this.Fb=ft(t),this},C(co,lo),C(ho,lo),ho.prototype.Aa=function(t){return W(this.a,t)||this.a.push(t),this},ho.prototype.Nb=function(){return Y(this.a)},ho.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new ao(this.providerId,n,this.providerId)},C(fo,ho),Hr(fo,"PROVIDER_ID","facebook.com"),Hr(fo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(vo,ho),Hr(vo,"PROVIDER_ID","github.com"),Hr(vo,"GITHUB_SIGN_IN_METHOD","github.com"),C(go,ho),Hr(go,"PROVIDER_ID","google.com"),Hr(go,"GOOGLE_SIGN_IN_METHOD","google.com"),C(_o,lo),Hr(_o,"PROVIDER_ID","twitter.com"),Hr(_o,"TWITTER_SIGN_IN_METHOD","twitter.com"),wo.prototype.ia=function(t){return this.signInMethod==ko.EMAIL_LINK_SIGN_IN_METHOD?zs(t,gs,{email:this.a,oobCode:this.f}):zs(t,Us,{email:this.a,password:this.f})},wo.prototype.b=function(t,e){return this.signInMethod==ko.EMAIL_LINK_SIGN_IN_METHOD?zs(t,ms,{idToken:e,email:this.a,oobCode:this.f}):zs(t,Ns,{idToken:e,email:this.a,password:this.f})},wo.prototype.c=function(t,e){return no(this.ia(t),e)},wo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},zr(ko,{PROVIDER_ID:"password"}),zr(ko,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),zr(ko,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),To.prototype.ia=function(t){return t.cb(Ao(this))},To.prototype.b=function(t,e){var n=Ao(this);return n.idToken=e,zs(t,qs,n)},To.prototype.c=function(t,e){var n=Ao(this);return n.operation="REAUTH",no(t=zs(t,Bs,n),e)},To.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Oo.prototype.cb=function(t,e){var n=this.a.b;return Ee(e.verify()).then((function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==$i?i.Fa().then((function(t){return function(t,e){return zs(t,Ps,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==to?i.Fa().then((function(e){return function(t,e){return zs(t,Rs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return zs(t,Os,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},zr(Oo,{PROVIDER_ID:"phone"}),zr(Oo,{PHONE_SIGN_IN_METHOD:"phone"}),Po.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Po.prototype.S=function(){return this.h},Po.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Lo,jo=null;function Fo(t){var e="unauthorized-domain",n=void 0,r=Mn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Uo(t,e,n){k.call(this,t,n),(t=e||{}).Gb&&Hr(this,"email",t.Gb),t.da&&Hr(this,"phoneNumber",t.da),t.credential&&Hr(this,"credential",t.credential),t.Wb&&Hr(this,"tenantId",t.Wb)}function Vo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:No(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Uo(e,n,t.message)}return null}function qo(){}function Bo(){}function Ho(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function zo(){}function Wo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.oc,this),this.a.onerror=_(this.Pb,this),this.a.onprogress=_(this.pc,this),this.a.ontimeout=_(this.tc,this)}function Go(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ko(t,e,n){this.reset(t,e,n,void 0,void 0)}function Qo(t){this.f=t,this.b=this.c=this.a=null}function Yo(t,e){this.name=t,this.value=e}C(Fo,k),C(Uo,k),Uo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&pt(t,e),t},Uo.prototype.toJSON=function(){return this.v()},qo.prototype.c=null,C(Bo,qo),Bo.prototype.a=function(){var t=Ho(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bo.prototype.b=function(){var t={};return Ho(this)&&(t[0]=!0,t[1]=!0),t},Lo=new Bo,C(zo,qo),zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Wo;throw Error("Unsupported browser")},zo.prototype.b=function(){return{}},(t=Wo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Go(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Go(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Go(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ko.prototype.a=null,Ko.prototype.reset=function(t,e,n,r,i){r||w(),delete this.a},Yo.prototype.toString=function(){return this.name};var Jo=new Yo("SEVERE",1e3),Xo=new Yo("WARNING",900),Zo=new Yo("CONFIG",700),$o=new Yo("FINE",500);Qo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(P("Root logger has no level set."),null)}(this).value)for(f(e)&&(e=e()),t=new Ko(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ta={},ea=null;function na(t){var e;if(ea||(ea=new Qo(""),ta[""]=ea,ea.c=Zo),!(e=ta[t])){e=new Qo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=na(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ta[t]=e}return e}function ra(t,e){t&&t.log($o,e,void 0)}function ia(t){this.f=t}function oa(t){gn.call(this),this.s=t,this.readyState=aa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=na("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(ia,qo),ia.prototype.a=function(){return new oa(this.f)},ia.prototype.b=function(t){return function(){return t}}({}),C(oa,gn);var aa=0;function sa(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function ua(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,la(t)}function la(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ca(t){gn.call(this),this.headers=new Sn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ha,this.w=this.R=!1}(t=oa.prototype).open=function(t,e){if(this.readyState!=aa)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,la(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ua(this,!1)),this.readyState=aa},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,la(this)),this.a&&(this.readyState=3,la(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,sa(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ua(this,!0):la(this),3==this.readyState&&sa(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,ua(this,!0))},t.qc=function(t){this.a&&(this.response=t,ua(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Xo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ua(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},C(ca,gn);var ha="";ca.prototype.b=na("goog.net.XhrIo");var fa=/^https?$/i,da=["POST","PUT"];function pa(t){return"content-type"==t.toLowerCase()}function va(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ya(t),ma(t)}function ya(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ga(t){if(t.c&&void 0!==o)if(t.B[1]&&4==ba(t)&&2==wa(t))ra(t.b,Ca(t,"Local request error detected and ignored"));else if(t.i&&4==ba(t))wn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==ba(t)){ra(t.b,Ca(t,"Request complete")),t.c=!1;try{var e,n=wa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(An)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!fa.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var l=2<ba(t)?t.a.statusText:""}catch(c){ra(t.b,"Can not get status: "+c.message),l=""}t.h=l+" ["+wa(t)+"]",ya(t)}}finally{ma(t)}}}function ma(t,e){if(t.a){_a(t);var n=t.a,r=t.B[0]?l:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Jo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function _a(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function ba(t){return t.a?t.a.readyState:0}function wa(t){try{return 2<ba(t)?t.a.status:-1}catch(e){return-1}}function Ca(t,e){return e+" ["+t.P+" "+t.l+" "+wa(t)+"]"}function ka(t){var e=Ra;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ea(t,e,n){t.a=!0,t.c=n,t.f=!e,Aa(t)}function Sa(t){if(t.a){if(!t.u)throw new Oa(t);t.u=!1}}function Ta(t,e,n,r){t.g.push([e,n,r]),t.a&&Aa(t)}function Ia(t){return z(t.g,(function(t){return f(t[1])}))}function Aa(t){if(t.h&&t.a&&Ia(t)){var e=t.h,n=Da[e];n&&(a.clearTimeout(n.a),delete Da[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(l){e=l,t.f=!0,Ia(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof ka?(Ta(e,u,r),e.B=!0):e.then(u,r)),n&&(e=new Na(e),Da[e.a]=e,t.h=e.a)}function Oa(){N.call(this)}function xa(){N.call(this)}function Na(t){this.a=a.setTimeout(_(this.c,this),0),this.b=t}(t=ca.prototype).Ka=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ra(this.b,Ca(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ra(this.b,Ca(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ma(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ma(this,!0)),ca.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ga(this):this.Hc())},t.Hc=function(){ga(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ha:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Jo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ra(this.b,"Can not get response: "+e.message),null}},ka.prototype.cancel=function(t){if(this.a)this.c instanceof ka&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new xa(this),Sa(this),Ea(this,!1,t))}},ka.prototype.m=function(t,e){this.i=!1,Ea(this,t,e)},ka.prototype.then=function(t,e,n){var r,i,o=new ge((function(t,e){r=t,i=e}));return Ta(this,r,(function(t){t instanceof xa?o.cancel():i(t)})),o.then(t,e,n)},ka.prototype.$goog_Thenable=!0,C(Oa,N),Oa.prototype.message="Deferred has already fired",Oa.prototype.name="AlreadyCalledError",C(xa,N),xa.prototype.message="Deferred was canceled",xa.prototype.name="CanceledError",Na.prototype.c=function(){throw delete Da[this.a],this.b};var Da={};function Pa(t){var e={},n=e.document||document,r=Ct(t).toString(),i=ce(document,"SCRIPT"),o={Tb:i,Ka:void 0},l=new ka(o),c=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(c=window.setTimeout((function(){Ma(i,!0);var t=new Fa(ja,"Timeout reached for loading script "+r);Sa(l),Ea(l,!1,t)}),h),o.Ka=c),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ma(i,e.ud||!1,c),Sa(l),Ea(l,!0,null))},i.onerror=function(){Ma(i,!0,c);var t=new Fa(La,"Error while loading script "+r);Sa(l),Ea(l,!1,t)},pt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),oe(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Ct(e),null===u&&(u=(e=(e=a.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&s.test(e)?e:""),(e=u)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),l}function Ra(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Ma(t,!0,this.Ka)}}function Ma(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var La=0,ja=1;function Fa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),N.call(this,n),this.code=t}function Ua(t){this.f=t}function Va(t,e,n){if(this.c=t,this.u=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ha,this.g=ft(t.secureTokenHeaders||za),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Wa,this.a=ft(t.firebaseHeaders||Ga),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==yr(),!(n=a.XMLHttpRequest||n&&xc.a.INTERNAL.node&&xc.a.INTERNAL.node.XMLHttpRequest)&&!vr())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=vr()?new ia(self):gr()?new Ua(n):new zo,this.b=null}C(Fa,N),C(Ua,qo),Ua.prototype.a=function(){return new this.f},Ua.prototype.b=function(){return{}};var qa,Ba="idToken",Ha=new Mr(3e4,6e4),za={"Content-Type":"application/x-www-form-urlencoded"},Wa=new Mr(3e4,6e4),Ga={"Content-Type":"application/json"};function Ka(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Qa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ya(t,e,n,r,i,o,s){(function(){var t=Cr();return!((t="Chrome"!=_r(t)?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Wt&&te&&!(9<te))})()||vr()?t=_(t.w,t):(qa||(qa=new ge((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[Xa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ta(t,null,e,void 0)}(Pa(kt(Ja,{onload:Xa})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,s)}Va.prototype.S=function(){return this.b},Va.prototype.w=function(t,e,n,r,i,o){if(vr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ca(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}mn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ra(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),_n(s,"ready",(function(){u&&clearTimeout(u),qe(this)})),_n(s,"timeout",(function(){u&&clearTimeout(u),qe(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Lo.a(),t.B=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Lo),t.a.onreadystatechange=_(t.Sb,t);try{ra(t.b,Ca(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return ra(t.b,Ca(t,"Error opening Xhr: "+s.message)),void va(t,s)}e=r||"";var o=new Sn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)q(t,e,void 0);else for(var n=En(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=pa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.X()),r=a.FormData&&e instanceof a.FormData,!W(da,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{_a(t),0<t.g&&(t.w=function(t){return Wt&&ne(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ra(t.b,Ca(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ka,t)):t.s=wn(t.Ka,t.g,t)),ra(t.b,Ca(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){ra(t.b,Ca(t,"Send error: "+s.message)),va(t,s)}}(s,t,n,r,i)};var Ja=new yt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),Xa="__fcb"+Math.floor(1e6*Math.random()).toString();function Za(t){if("string"!=typeof(t=t.email)||!hr.test(t))throw new k("invalid-email")}function $a(t){"email"in t&&Za(t)}function ts(t){if(!t[Ba]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,ft(t));throw new k("internal-error")}}function es(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Va.prototype.s=function(t,e,n,r,i){var o=this;qa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Va.prototype.vb=function(){return zs(this,Ds,{})},Va.prototype.xb=function(t,e){return zs(this,xs,{idToken:t,email:e})},Va.prototype.yb=function(t,e){return zs(this,Ns,{idToken:t,password:e})};var ns={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function rs(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function is(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function os(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Yn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function as(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Vo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Vo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Vo(t)):t.errorMessage&&(e=Ws(t.errorMessage)),e)throw e;ts(t)}function ss(t,e){return e.returnIdpCredential=!0,zs(t,Ms,e)}function us(t,e){return e.returnIdpCredential=!0,zs(t,js,e)}function ls(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,zs(t,Ls,e)}function cs(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=Va.prototype).zb=function(t,e){var n={idToken:t},r=[];return ct(ns,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),zs(this,xs,n)},t.rb=function(t,e){return pt(t={requestType:"PASSWORD_RESET",email:t},e),zs(this,Ss,t)},t.sb=function(t,e){return pt(t={requestType:"EMAIL_SIGNIN",email:t},e),zs(this,Cs,t)},t.qb=function(t,e){return pt(t={requestType:"VERIFY_EMAIL",idToken:t},e),zs(this,ks,t)},t.Ab=function(t,e,n){return pt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),zs(this,Es,t)},t.cb=function(t){return zs(this,Vs,t)},t.jb=function(t,e){return zs(this,As,{oobCode:t,newPassword:e})},t.Pa=function(t){return zs(this,fs,{oobCode:t})},t.fb=function(t){return zs(this,hs,{oobCode:t})};var hs={endpoint:"setAccountInfo",A:cs,Y:"email",C:!0},fs={endpoint:"resetPassword",A:cs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},C:!0},ds={endpoint:"signupNewUser",A:function(t){if(Za(t),!t.password)throw new k("weak-password")},G:ts,U:!0,C:!0},ps={endpoint:"createAuthUri",C:!0},vs={endpoint:"deleteAccount",M:["idToken"]},ys={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=c(t.deleteProvider))throw new k("internal-error")}},gs={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Za,G:ts,U:!0,C:!0},ms={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Za,G:ts,U:!0},_s={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:rs,G:ts,C:!0,La:!0},bs={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:rs,G:ts,C:!0,La:!0},ws={endpoint:"getAccountInfo"},Cs={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");Za(t)},Y:"email",C:!0},ks={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Y:"email",C:!0},Es={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Y:"email",C:!0},Ss={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");Za(t)},Y:"email",C:!0},Ts={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Is={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},As={endpoint:"resetPassword",A:cs,Y:"email",C:!0},Os={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},xs={endpoint:"setAccountInfo",M:["idToken"],A:$a,U:!0},Ns={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if($a(t),!t.password)throw new k("weak-password")},G:ts,U:!0},Ds={endpoint:"signupNewUser",G:ts,U:!0,C:!0},Ps={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},C:!0,La:!0},Rs={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},C:!0,La:!0},Ms={endpoint:"verifyAssertion",A:is,Wa:os,G:as,U:!0,C:!0},Ls={endpoint:"verifyAssertion",A:is,Wa:os,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw Ws(t.errorMessage);ts(t)},U:!0,C:!0},js={endpoint:"verifyAssertion",A:function(t){if(is(t),!t.idToken)throw new k("internal-error")},Wa:os,G:as,U:!0},Fs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:ts,U:!0,C:!0},Us={endpoint:"verifyPassword",A:function(t){if(Za(t),!t.password)throw new k("wrong-password")},G:ts,U:!0,C:!0},Vs={endpoint:"verifyPhoneNumber",A:es,G:ts,C:!0},qs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");es(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Vo(t);ts(t)}},Bs={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:es,G:ts,C:!0},Hs={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ba]^!!t.refreshToken)throw new k("internal-error")},C:!0,La:!0};function zs(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Se(new k("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Ee(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=Mn(e+n);Pn(s,"key",t.c),a&&Pn(s,"cb",w().toString());var u="GET"==r;if(u)for(var l in i)i.hasOwnProperty(l)&&Pn(s,l,i[l]);return new ge((function(e,n){Ya(t,s.toString(),(function(t){t?t.error?n(Gs(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:$n(xr(i)),t.a,t.i.get())}))}(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return r=t,e.Wa?e.Wa(n,r):r})).then(e.G).then((function(){if(!e.Y)return r;if(!(e.Y in r))throw new k("internal-error");return r[e.Y]}))}function Ws(t){return Gs({error:{errors:[{message:t}],code:400,message:t}})}function Gs(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",pt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=Or(t)),new k("internal-error",e)}function Ks(t){this.b=t,this.a=null,this.nb=function(t){return(Xs||(Xs=new ge((function(t,e){function n(){Rr(),kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Rr(),e(Error("Network Error"))},timeout:Ys.get()})}if(kr("gapi.iframes.Iframe"))t();else if(kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){kr("gapi.load")?n():e(Error("Network Error"))},Ee(Pa(r=kt(Qs,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw Xs=null,t})))).then((function(){return new ge((function(e,n){kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Js.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Qs=new yt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),Ys=new Mr(3e4,6e4),Js=new Mr(5e3,15e3),Xs=null;function Zs(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Ln(this.i,"/__/auth/iframe"),Pn(this.a,"apiKey",this.g),Pn(this.a,"appName",this.h),this.b=null,this.c=[]}function $s(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function tu(t){try{return xc.a.app(t).auth().Ea()}catch(e){return[]}}function eu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function nu(t){var e=or();return function(t){return zs(t,Ts,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Mn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Mn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:cr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Fo(or())}))}function ru(t){return t.l?t.l:(t.l=fr().then((function(){if(!t.s){var e=t.c,n=t.h,r=tu(t.b),i=new Zs(t.u,t.f,t.b);i.f=e,i.b=n,i.c=Y(r||[]),t.s=i.toString()}t.i=new Ks(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then((function(){t.a.register("authEvent",e,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ro(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ee(n)}return n.status="ERROR",Ee(n)}))}(t)})),t.l)}function iu(t){return t.m||(t.w=t.c?wr(t.c,tu(t.b)):null,t.m=new Va(t.f,O(t.h),t.w)),t.m}function ou(t,e,n,r,i,o,a,s,u,l,c){return(t=new $s(t,e,n,r,i)).l=o,t.g=a,t.i=s,t.b=ft(u||null),t.f=l,t.ub(c).toString()}function au(t){if(this.a=t||xc.a.INTERNAL.reactNative&&xc.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function su(t){this.b=t,this.a={},this.f=_(this.c,this)}Zs.prototype.toString=function(){return this.f?Pn(this.a,"v",this.f):Qn(this.a.a,"v"),this.b?Pn(this.a,"eid",this.b):Qn(this.a.a,"eid"),this.c.length?Pn(this.a,"fw",this.c.join(",")):Qn(this.a.a,"fw"),this.a.toString()},$s.prototype.ub=function(t){return this.h=t,this},$s.prototype.toString=function(){var t=Ln(this.s,"/__/auth/handler");if(Pn(t,"apiKey",this.m),Pn(t,"appName",this.c),Pn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=xc.a.app(this.c).auth().ja()}catch(s){n=null}for(var r in e.kb=n,Pn(t,"providerId",this.a.providerId),n=xr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ft(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ht(n)||Pn(t,"customParameters",Or(n))}if("function"==typeof this.a.Nb&&(e=this.a.Nb()).length&&Pn(t,"scopes",e.join(",")),this.l?Pn(t,"redirectUrl",this.l):Qn(t.a,"redirectUrl"),this.g?Pn(t,"eventId",this.g):Qn(t.a,"eventId"),this.i?Pn(t,"v",this.i):Qn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Rn(t,a)&&Pn(t,a,this.b[a]);return this.h?Pn(t,"tid",this.h):Qn(t.a,"tid"),this.f?Pn(t,"eid",this.f):Qn(t.a,"eid"),(a=tu(this.c)).length&&Pn(t,"fw",a.join(",")),t.toString()},(t=eu.prototype).Lb=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ka().then((function(){(function(t){var e={type:"webStorageSupport"};return ru(t).then((function(){return function(t,e){return t.nb.then((function(){return new ge((function(n){t.a.send(e.type,e,n,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&ur(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new ge((function(e){return function n(){Cn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Cn(n).then((function(){e(r)}))}))},t.Ub=function(){var t=Cr();return!Ar(t)&&!Pr(t)},t.Qb=function(){return!1},t.Jb=function(t,e,n,r,i,o,a,s){if(!t)return Se(new k("popup-blocked"));if(a&&!Ar())return this.ka().o((function(e){ur(t),i(e)})),r(),Ee();this.a||(this.a=nu(iu(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw ur(t),i(e),e}));return r(),e})).then((function(){Do(n),a||ar(ou(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Kb=function(t,e,n,r){this.a||(this.a=nu(iu(this)));var i=this;return this.a.then((function(){Do(e),ar(ou(i.u,i.f,i.b,t,e,or(),n,i.c,void 0,i.h,r))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ka=function(){var t=this;return ru(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(t){K(this.g,(function(e){return e==t}))},(t=au.prototype).get=function(t){return Ee(this.a.getItem(t)).then((function(t){return t&&Nr(t)}))},t.set=function(t,e){return Ee(this.a.setItem(t,Or(e)))},t.T=function(t){return Ee(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var uu,lu=[];function cu(t,e,n){ht(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function hu(t){this.a=t}function fu(t){this.c=t,this.b=!1,this.a=[]}function du(t,e,n,r){var i,o,a,s,u=n||{},l=null;if(t.b)return Se(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ge((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),c),t.a.push(l={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return pu(t,l),e})).o((function(e){throw pu(t,l),e}))}function pu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),K(t.a,(function(t){return t==e}))}}function vu(){if(!gu())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=a.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;vr()&&self?(this.l=function(){var t=vr()?self:null;if(q(lu,(function(n){n.b==t&&(e=n)})),!e){var e=new su(t);lu.push(e)}return e}(),cu(this.l,"keyChanged",(function(e,n){return Cu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:W(e,n.key)}}))})),cu(this.l,"ping",(function(){return Ee(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Ee().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ee(null)}().then((function(e){(t.h=e)&&(t.g=new fu(new hu(e)),du(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&W(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function yu(t){return t.m||(t.m=function t(e){return new ge((function(n,r){var i=e.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new ge((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).o((function(t){r(t)}))}}))}(t)),t.m}function gu(){try{return!!a.indexedDB}catch(Ht){return!1}}function mu(t){return t.objectStore("firebaseLocalStorage")}function _u(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function bu(t){return new ge((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function wu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?du(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ee()}function Cu(t){return yu(t).then((function(t){var e=mu(_u(t,!1));return e.getAll?bu(e.getAll()):new ge((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function ku(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Eu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ee().then((function(){if(gu()){var t=Dr(),r="__sak"+t;return uu||(uu=new vu),(n=uu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){q(e.a,(function(e){e(t)}))})),t}))}function Su(){this.a={},this.type="inMemory"}function Tu(){if(!function(){var t="Node"==yr();if(!(t=Iu()||t&&xc.a.INTERNAL.node&&xc.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==yr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Iu()||xc.a.INTERNAL.node.localStorage,this.type="localStorage"}function Iu(){try{var t=a.localStorage,e=Dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Au(){this.type="nullStorage"}function Ou(){if(!function(){var t="Node"==yr();if(!(t=xu()||t&&xc.a.INTERNAL.node&&xc.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==yr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=xu()||xc.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function xu(){try{var t=a.sessionStorage,e=Dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Nu(){var t={};t.Browser=Ru,t.Node=Mu,t.ReactNative=Lu,t.Worker=ju,this.a=t[yr()]}su.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(Ee().then((function(){return e(t.origin,t.data.data)})))})),Ie(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},hu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},fu.prototype.close=function(){for(;0<this.a.length;)pu(this,this.a[0]);this.b=!0},(t=vu.prototype).set=function(t,e){var n,r=!1,i=this;return yu(this).then((function(e){return bu((e=mu(_u(n=e,!0))).get(t))})).then((function(o){var a=mu(_u(n,!0));return o?(o.value=e,bu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,bu(a.add(o)))})).then((function(){return i.c[t]=e,wu(i,t)})).ma((function(){r&&i.b--}))},t.get=function(t){return yu(this).then((function(e){return bu(mu(_u(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return yu(this).then((function(r){return e=!0,n.b++,bu(mu(_u(r,!0)).delete(t))})).then((function(){return delete n.c[t],wu(n,t)})).ma((function(){e&&n.b--}))},t.ba=function(t){0==this.a.length&&function(t){ku(t),function e(){t.f=setTimeout((function(){t.i=Cu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ha=function(t){K(this.a,(function(e){return e==t})),0==this.a.length&&ku(this)},(t=Eu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ba=function(t){this.a.push(t)},t.ha=function(t){K(this.a,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return Ee(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ee()},t.T=function(t){return delete this.a[t],Ee()},t.ba=function(){},t.ha=function(){},(t=Tu.prototype).get=function(t){var e=this;return Ee().then((function(){return Nr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ee().then((function(){var r=Or(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ee().then((function(){e.a.removeItem(t)}))},t.ba=function(t){a.window&&on(a.window,"storage",t)},t.ha=function(t){a.window&&un(a.window,"storage",t)},(t=Au.prototype).get=function(){return Ee(null)},t.set=function(){return Ee()},t.T=function(){return Ee()},t.ba=function(){},t.ha=function(){},(t=Ou.prototype).get=function(t){var e=this;return Ee().then((function(){return Nr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ee().then((function(){var r=Or(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ee().then((function(){e.a.removeItem(t)}))},t.ba=function(){},t.ha=function(){};var Du,Pu,Ru={F:Tu,$a:Ou},Mu={F:Tu,$a:Ou},Lu={F:au,$a:Au},ju={F:Tu,$a:Au},Fu={od:"local",NONE:"none",qd:"session"};function Uu(){var t=!(Pr(Cr())||!pr()),e=Ar(),n=Er();this.m=t,this.h=e,this.l=n,this.a={},Du||(Du=new Nu),t=Du;try{this.g=!ir()&&Fr()||!a.indexedDB?new t.a.F:new Eu(vr()?new Su:new t.a.F)}catch(r){this.g=new Su,this.h=!0}try{this.i=new t.a.$a}catch(r){this.i=new Su}this.u=new Su,this.f=_(this.Vb,this),this.b={}}function Vu(){return Pu||(Pu=new Uu),Pu}function qu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Bu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Hu(t,e,n){return n=Bu(e,n),"local"==e.F&&(t.b[n]=null),qu(t,e.F).T(n)}function zu(t){t.c&&(clearInterval(t.c),t.c=null)}function Wu(t){this.a=t,this.b=Vu()}(t=Uu.prototype).get=function(t,e){return qu(this,t.F).get(Bu(t,e))},t.set=function(t,e,n){var r=Bu(t,n),i=this,o=qu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Bu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ht(this.a)&&(qu(this,"local").ba(this.f),this.h||(ir()||!Fr())&&a.indexedDB||!this.l||function(t){zu(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ke({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Vb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Bu(t,e),this.a[t]&&(K(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ht(this.a)&&(qu(this,"local").ha(this.f),zu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?qu(this,"local").ha(this.f):zu(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.ib(e))},Wt&&te&&10==te&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,_(this.ib,this))},t.ib=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var Gu,Ku={name:"authEvent",F:"local"};function Qu(){this.a=Vu()}function Yu(t,e){this.b=Ju,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===Gu&&(Gu=a.Int32Array?new Int32Array(rl):rl),this.reset()}C(Yu,(function(){this.b=-1}));for(var Ju=64,Xu=Ju-1,Zu=[],$u=0;$u<Xu;$u++)Zu[$u]=0;var tl=Q(128,Zu);function el(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],l=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|Gu[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function nl(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(el(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(el(t),i=0)}}t.c=i,t.g+=n}Yu.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var rl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function il(){Yu.call(this,8,ol)}C(il,Yu);var ol=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function al(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new Qu,this.g=new Wu(this.h),this.f=null,this.b=[],this.a=this.c=null}function sl(t){return new k("invalid-cordova-configuration",t)}function ul(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function ll(t){return t.f||(t.f=t.ka().then((function(){return new ge((function(e){t.Ca((function n(r){return e(r),t.Qa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),cl(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Xi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Nr(Rn(o=Mn(i),"firebaseError")||null))?E(o):null)?new Po(r.c,r.b,null,null,o,null,r.S()):new Po(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}ul(t,i)}))}var n=new Po("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Cn(500).then((function(){return cl(t).then((function(){r||ul(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(kr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},jo||(jo=new Mo),function(t){var e=jo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=kr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function cl(t){var e=null;return function(t){return t.b.get(Ku,t.a).then((function(t){return Ro(t)}))}(t.g).then((function(n){return e=n,Hu((n=t.g).b,Ku,n.a)})).then((function(){return e}))}function hl(t){this.a=t,this.b=Vu()}(t=al.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(dr(void 0)?fr().then((function(){return new ge((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Se(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof kr("universalLinks.subscribe",a))throw sl("cordova-universal-links-plugin-fix is not installed");if(void 0===kr("BuildInfo.packageName",a))throw sl("cordova-plugin-buildinfo is not installed");if("function"!=typeof kr("cordova.plugins.browsertab.openUrl",a))throw sl("cordova-plugin-browsertab is not installed");if("function"!=typeof kr("cordova.InAppBrowser.open",a))throw sl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Lb=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Ee()},t.Jb=function(){return Se(new k("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Se(new k("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,l=null,c=null;return this.c=Ee().then((function(){return Do(e),ll(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Po(e,r,null,o,new k("no-auth-event"),null,i),u=kr("BuildInfo.packageName",a);if("string"!=typeof u)throw new k("invalid-cordova-configuration");var l=kr("BuildInfo.displayName",a),c={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return Se(new k("operation-not-supported-in-this-environment"));c.apn=u}l&&(c.appDisplayName=l),o=function(t){var e=new il;nl(e,t),t=[];var n=8*e.g;nl(e,tl,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(el(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),c.sessionId=o;var h=ou(t.u,t.i,t.l,e,n,null,r,t.m,c,t.s,i);return t.ka().then((function(){var e=t.h;return t.w.a.set(Ku,s.v(),e)})).then((function(){var e=kr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=kr("cordova.plugins.browsertab.openUrl",a)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=kr("cordova.InAppBrowser.open",a)))throw new k("invalid-cordova-configuration");e=Cr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new ge((function(t,e){u=function(){var e=kr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(u),c=function(){Lr()&&l()},o.addEventListener("resume",l=function(){s||(s=Cn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(t){return cl(i).then((function(){throw t}))}))})).ma((function(){l&&o.removeEventListener("resume",l,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),u&&i.Qa(u),i.c=null}))},t.Ca=function(t){this.b.push(t),ll(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Po("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Qa=function(t){K(this.b,(function(e){return e==t}))};var fl={name:"pendingRedirect",F:"session"};function dl(t){return Hu(t.b,fl,t.a)}function pl(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Al,this.B=new Pl,this.g=new hl(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=vl(this.D,this.u,this.m,S)}function vl(t,e,n,r){var i=xc.a.SDK_VERSION||null;return dr()?new al(t,e,n,i,r):new eu(t,e,n,i,r)}function yl(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function gl(t){t.a.Ub()&&yl(t).o((function(e){var n=new Po("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));kl(e)&&t.s(n)})),t.a.Qb()||Ol(t.b)}function ml(t,e){W(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(fl,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?dl(t.g).then((function(){yl(t).o((function(e){var n=new Po("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));kl(e)&&t.s(n)}))})):gl(t)})).o((function(){gl(t)}))}function _l(t,e){K(t.h,(function(t){return t==e}))}pl.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=vl(this.D,this.u,this.m),this.i={}},pl.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=w()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=w())),e=!0;break}}return Ol(this.b),e};var bl=new Mr(2e3,1e4),wl=new Mr(3e4,6e4);function Cl(t,e,n,r,i,o,a){return t.a.Jb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),i,o,a)}function kl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function El(t,e,n,r,i){var o;return function(t){return t.b.set(fl,"pending",t.a)}(t.g).then((function(){return t.a.Kb(e,n,r,i).o((function(e){if(kl(e))throw new k("operation-not-supported-in-this-environment");return o=e,dl(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new ge((function(){})):dl(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Sl(t,e,n,r,i){return t.a.Lb(r,(function(t){e.la(n,null,t,i)}),bl.get())}pl.prototype.pa=function(){return this.b.pa()};var Tl={};function Il(t,e,n){var r=e+":"+n;return Tl[r]||(Tl[r]=new pl(t,e,n)),Tl[r]}function Al(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ol(t){t.g||(t.g=!0,Dl(t,!1,null,null))}function xl(t){t.g&&!t.i&&Dl(t,!1,null,null)}function Nl(t,e){if(t.b=function(){return Ee(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Dl(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Se(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Nl(t,n):Nl(t,{user:null}),t.f=[],t.c=[]}function Pl(){}function Rl(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Ml(t,e){this.a=e,Hr(this,"verificationId",t)}function Ll(t,e,n,r){return new Oo(t).cb(e,n).then((function(t){return new Ml(t,r)}))}function jl(t){var e=ji(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");zr(this,{token:t,expirationTime:jr(1e3*e.exp),authTime:jr(1e3*e.auth_time),issuedAtTime:jr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Fl(t,e,n){var r=e&&e[Vl];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new Zi(null,r),this.b=[];var i=this;q(e[Ul]||[],(function(t){(t=Qr(t))&&i.b.push(t)})),Hr(this,"auth",this.a),Hr(this,"session",this.c),Hr(this,"hints",this.b)}Al.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Al.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Dl(this,!0,null,t.a),Ee()):e.Da(n,r)?function(t,e,n){n=n.Da(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.S(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Dl(t,s,e,null)})).o((function(e){Dl(t,s,null,e)}))}(this,t,e):Se(new k("invalid-auth-event")):(Dl(this,!1,null,null),Ee())}else Se(new k("invalid-auth-event"))},Al.prototype.pa=function(){var t=this;return new ge((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Cn(wl.get()).then((function(){t.b||(t.g=!0,Dl(t,!0,null,e))}))}(t))}))},Pl.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),Ee()):e.Da(n,r)?function(t,e){var n=t.b,r=t.c;e.Da(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(r,t,null,n)})).o((function(t){e.la(r,null,t,n)}))}(t,e):Se(new k("invalid-auth-event"))}else Se(new k("invalid-auth-event"))},Ml.prototype.confirm=function(t){return t=xo(this.verificationId,t),this.a(t)};var Ul="mfaInfo",Vl="mfaPendingCredential";function ql(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new Fl(t,e,n),Hr(this,"resolver",this.b)}function Bl(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ql(e,t.serverResponse,n,t.message)}catch(r){}return null}function Hl(){}function zl(t){Hr(this,"factorId",t.ea),this.a=t}function Wl(t){if(zl.call(this,t),this.a.ea!=Oo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Gl(t,e){for(var n in Ge.call(this,t),e)this[n]=e[n]}function Kl(t,e){this.a=t,this.b=[],this.c=_(this.wc,this),on(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Xr]=t.uid),t.displayName&&(r[Yr]=t.displayName),t.enrollmentTime&&(r[Jr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Zr]=t.phoneNumber);try{e=new $r(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),Ql(this,n)}function Ql(t,e){t.b=e,Hr(t,"enrolledFactors",e)}function Yl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Jl(t){this.c=t,this.b=this.a=null}function Xl(t){return t.b&&1e3*t.b.c||0}function Zl(t,e){var n=e.refreshToken;t.b=Li(e[Ba]||""),t.a=n}function $l(t,e){this.a=t||null,this.b=e||null,zr(this,{lastSignInTime:jr(e||null),creationTime:jr(t||null)})}function tc(t,e,n,r,i,o){zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ec(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=xc.a.SDK_VERSION?wr(xc.a.SDK_VERSION):null,this.a=new Va(this.l,O(S),t),this.b=new Jl(this.a),uc(this,e[Ba]),Zl(this.b,e),Hr(this,"refreshToken",this.b.a),hc(this,n||{}),gn.call(this),this.P=!1,this.s&&Sr()&&(this.i=Il(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(t){return new Yl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=Xl(t.b)-w()-3e5;return 0<e?e:0}))}(this),this.Z=_(this.Ma,this);var r=this;this.oa=null,this.za=function(t){r.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){rc(r,t.c)},this.$=null,this.O=new Kl(this,n),Hr(this,"multiFactor",this.O)}function nc(t,e){t.aa&&un(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&on(e,"languageCodeChanged",t.za)}function rc(t,e){t.W=e,Qa(t.a,xc.a.SDK_VERSION?wr(xc.a.SDK_VERSION,t.W):null)}function ic(t,e){t.$&&un(t.$,"frameworkChanged",t.ya),(t.$=e)&&on(e,"frameworkChanged",t.ya)}function oc(t){try{return xc.a.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function ac(t){t.D||t.B.b||(t.B.start(),un(t,"tokenChanged",t.Z),on(t,"tokenChanged",t.Z))}function sc(t){un(t,"tokenChanged",t.Z),t.B.stop()}function uc(t,e){t.xa=e,Hr(t,"_lat",e)}function lc(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ie(e).then((function(){return t}))}function cc(t){t.i&&!t.P&&(t.P=!0,ml(t.i,t))}function hc(t,e){zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new $l(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function fc(){}function dc(t){return Ee().then((function(){if(t.D)throw new k("app-deleted")}))}function pc(t){return H(t.providerData,(function(t){return t.providerId}))}function vc(t,e){e&&(yc(t,e.providerId),t.providerData.push(e))}function yc(t,e){K(t.providerData,(function(t){return t.providerId==e}))}function gc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Hr(t,e,n)}function mc(t,e){t!=e&&(zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Hr(t,"metadata",e.metadata?function(t){return new $l(t.a,t.b)}(e.metadata):new $l),q(e.providerData,(function(e){vc(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Hr(t,"refreshToken",t.b.a),Ql(t.O,e.O.b))}function _c(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return zs(t.a,ws,{idToken:e}).then(_(t.Ic,t))}(t,e).then((function(){return n||gc(t,"isAnonymous",!1),e}))}))}function bc(t,e){e[Ba]&&t.xa!=e[Ba]&&(Zl(t.b,e),t.dispatchEvent(new Gl("tokenChanged")),uc(t,e[Ba]),gc(t,"refreshToken",t.b.a))}function wc(t,e){return _c(t).then((function(){if(W(pc(t),e))return lc(t).then((function(){throw new k("provider-already-linked")}))}))}function Cc(t,e,n){return Wr({user:t,credential:No(e),additionalUserInfo:e=Bi(e),operationType:n})}function kc(t,e){return bc(t,e),t.reload().then((function(){return t}))}function Ec(t,e,n,r,i){if(!Sr())return Se(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return Se(t.h);var o=qi(n.providerId),a=Dr(t.uid+":::"),s=null;(!Ar()||pr())&&t.s&&n.isOAuthProvider&&(s=ou(t.s,t.l,t.m,e,n,null,a,xc.a.SDK_VERSION||null,null,null,t.tenantId));var u=lr(s,o&&o.ta,o&&o.sa);return r=r().then((function(){if(Tc(t),!i)return t.I().then((function(){}))})).then((function(){return Cl(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new ge((function(n,r){t.la(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=a,t.c=Sl(t.i,t,e,u,a)}))})).then((function(t){return u&&ur(u),t?Wr(t):null})).o((function(t){throw u&&ur(u),t})),Ic(t,r,i)}function Sc(t,e,n,r,i){if(!Sr())return Se(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return Se(t.h);var o=null,a=Dr(t.uid+":::");return r=r().then((function(){if(Tc(t),!i)return t.I().then((function(){}))})).then((function(){return t.fa=a,lc(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(Nc,t.v(),e.a)),e})).then((function(){return El(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ga)return Dc(t.ga);throw o})).then((function(){if(o)throw o})),Ic(t,r,i)}function Tc(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Ic(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Se(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Gl("userInvalidated")),t.h=e),e}))}(t,e,n);return t.N.push(r),r.ma((function(){G(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Bl(e.v(),oc(t),_(t.hc,t))),n||e}))}function Ac(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ba]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new ec(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&vc(r,Wr(t))})),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Oc(t){this.a=t,this.b=Vu()}Fl.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=ft(e.f);return delete n[Ul],delete n[Vl],pt(n,t),e.g(n)}))},C(ql,k),Hl.prototype.ob=function(t,e,n){return e.type==$i?function(t,e,n,r){return n.Fa().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),pt(n,{phoneVerificationInfo:Ao(t.a)}),zs(e,_s,n)}))}(this,t,e,n):function(t,e,n){return n.Fa().then((function(n){return pt(n={mfaPendingCredential:n},{phoneVerificationInfo:Ao(t.a)}),zs(e,bs,n)}))}(this,t,e)},C(zl,Hl),C(Wl,zl),C(Gl,Ge),(t=Kl.prototype).wc=function(t){Ql(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=Qr(t))&&e.push(t)})),e}(t.ed))},t.Ob=function(){return this.a.I().then((function(t){return new Zi(t,null)}))},t.dc=function(t,e){var n=this,r=this.a.a;return this.Ob().then((function(n){return t.ob(r,n,e)})).then((function(t){return bc(n.a,t),n.a.reload()}))},t.$c=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return zs(r,Hs,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return Ql(e,r),bc(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.v=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(t){return t.v()}))}}},Yl.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=a.document,e=null;return Lr()||!t?Ee():new ge((function(n){e=function(){Lr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Yl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Jl.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Xl(this)}},Jl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Se(new k("user-token-expired")):t||!this.b||w()>Xl(this)-3e4?this.a?function(t,e){return function(t,e){return new ge((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ya(t,t.u+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Gs(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Kn(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.c,e).then((function(e){return t.b=Li(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ee(null):Ee({accessToken:this.b.toString(),refreshToken:this.a})},$l.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(ec,gn),ec.prototype.va=function(t){this.oa=t,Ka(this.a,t)},ec.prototype.ja=function(){return this.oa},ec.prototype.Ea=function(){return Y(this.W)},ec.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Hr(ec.prototype,"providerId","firebase"),(t=ec.prototype).reload=function(){var t=this;return Ic(this,dc(this).then((function(){return _c(t).then((function(){return lc(t)})).then(fc)})))},t.mc=function(t){return this.I(t).then((function(t){return new jl(t)}))},t.I=function(t){var e=this;return Ic(this,dc(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.xa&&(uc(e,t.accessToken),e.dispatchEvent(new Gl("tokenChanged"))),gc(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");hc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,(function(t){return new tc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)vc(this,e[n]);gc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Gl("userReloaded",{ed:t}))},t.Jc=function(t){return qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Ic(this,t.c(this.a,this.uid).then((function(t){return bc(e,t),n=Cc(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Ac=function(t){return qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(t){var e=this,n=null;return Ic(this,wc(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Cc(e,t,"link"),kc(e,t)})).then((function(){return n})))},t.Bc=function(t,e){var n=this;return Ic(this,wc(this,"phone").then((function(){return Ll(oc(n),t,e,_(n.mb,n))})))},t.Kc=function(t,e){var n=this;return Ic(this,Ee().then((function(){return Ll(oc(n),t,e,_(n.pb,n))})),!0)},t.xb=function(t){var e=this;return Ic(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return bc(e,t),e.reload()})))},t.cd=function(t){var e=this;return Ic(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return bc(e,t),e.reload()})))},t.yb=function(t){var e=this;return Ic(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return bc(e,t),e.reload()})))},t.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return dc(this);var e=this;return Ic(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return bc(e,t),gc(e,"displayName",t.displayName||null),gc(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Hr(t,"displayName",e.displayName),Hr(t,"photoURL",e.photoURL))})),lc(e)})).then(fc))},t.ad=function(t){var e=this;return Ic(this,_c(this).then((function(n){return W(pc(e),t)?function(t,e,n){return zs(t,ys,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(pc(e),(function(t){n[t]||yc(e,t)})),n[Oo.PROVIDER_ID]||Hr(e,"phoneNumber",null),lc(e)})):lc(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return Ic(this,this.I().then((function(e){return zs(t.a,vs,{idToken:e})})).then((function(){t.dispatchEvent(new Gl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");nc(t,null),ic(t,null),t.N=[],t.D=!0,sc(t),Hr(t,"refreshToken",null),t.i&&_l(t.i,t)}))},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?_(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?_(this.Ib,this):null},t.Cc=function(t){var e=this;return Ec(this,"linkViaPopup",t,(function(){return wc(e,t.providerId).then((function(){return lc(e)}))}),!1)},t.Lc=function(t){return Ec(this,"reauthViaPopup",t,(function(){return Ee()}),!0)},t.Dc=function(t){var e=this;return Sc(this,"linkViaRedirect",t,(function(){return wc(e,t.providerId)}),!1)},t.Mc=function(t){return Sc(this,"reauthViaRedirect",t,(function(){return Ee()}),!0)},t.Hb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ic(this,this.I().then((function(n){return us(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Cc(i,t,"link"),kc(i,t)})).then((function(){return o})))},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ic(this,Ee().then((function(){return no(ls(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Cc(i,t,"reauthenticate"),bc(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.qb=function(t){var e=this,n=null;return Ic(this,this.I().then((function(e){return n=e,void 0===t||ht(t)?{}:Pi(new ki(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Ab=function(t,e){var n=this,r=null;return Ic(this,this.I().then((function(t){return r=t,void 0===e||ht(e)?{}:Pi(new ki(e))})).then((function(e){return n.a.Ab(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.hc=function(t){var e=null,n=this;return Ic(this,t=no(Ee(t),n.uid).then((function(t){return e=Cc(n,t,"reauthenticate"),bc(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.v()},t.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&pt(t,this.metadata.v()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),pt(t,this.O.v()),t};var Nc={name:"redirectUser",F:"session"};function Dc(t){return Hu(t.b,Nc,t.a)}function Pc(t){this.a=t,this.b=Vu(),this.c=null,this.f=function(t){var e=Lc("local"),n=Lc("session"),r=Lc("none");return function(t,e,n){var r=Bu(e,n),i=qu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Nr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Mc,t.a).then((function(t){return t?Lc(t):e}))}))}))})).then((function(e){return t.c=e,Rc(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Lc("local"),this.a,_(this.g,this))}function Rc(t,e){var n,r=[];for(n in Fu)Fu[n]!==e&&r.push(Hu(t.b,Lc(Fu[n]),t.a));return r.push(Hu(t.b,Mc,t.a)),function(t){return new ge((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Te(t[s],b(o,s),a);else e(i)}))}(r)}Pc.prototype.g=function(){var t=this,e=Lc("local");Vc(this,(function(){return Ee().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Rc(t,"local").then((function(){t.c=e}))}))}))};var Mc={name:"persistence",F:"session"};function Lc(t){return{name:"authUser",F:t}}function jc(t,e){return Vc(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Fc(t){return Vc(t,(function(){return Hu(t.b,t.c,t.a)}))}function Uc(t,e){return Vc(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ac(t||{})}))}))}function Vc(t,e){return t.f=t.f.then(e,e),t.f}function qc(t){if(this.l=!1,Hr(this,"settings",new Rl),Hr(this,"app",t),!Qc(this).options||!Qc(this).options.apiKey)throw new k("invalid-api-key");t=xc.a.SDK_VERSION?wr(xc.a.SDK_VERSION):null,this.b=new Va(Qc(this).options&&Qc(this).options.apiKey,O(S),t),this.P=[],this.m=[],this.O=[],this.$b=xc.a.INTERNAL.createSubscribe(_(this.xc,this)),this.W=void 0,this.ac=xc.a.INTERNAL.createSubscribe(_(this.yc,this)),Gc(this,null),this.i=new Pc(Qc(this).options.apiKey+":"+Qc(this).name),this.B=new Oc(Qc(this).options.apiKey+":"+Qc(this).name),this.Z=Zc(this,function(t){var e=Qc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Nc,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ac(t||{})}))}(t.B,Qc(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),Dc(t.B)}));return Zc(t,e)}(t).then((function(){return Uc(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return jc(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Fc(t.i)}))):null})).then((function(e){Gc(t,e||null)}));return Zc(t,n)}(this)),this.h=Zc(this,function(t){return t.Z.then((function(){return Wc(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener(Lc("local"),e.a,t.oa)}}))}(this)),this.aa=!1,this.oa=_(this.Xc,this),this.Ma=_(this.ca,this),this.xa=_(this.jc,this),this.ya=_(this.uc,this),this.za=_(this.vc,this),this.a=null,function(t){var e=Qc(t).options.authDomain,n=Qc(t).options.apiKey;e&&Sr()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Il(e,n,Qc(t).name),ml(t.a,t),Yc(t)&&cc(Yc(t)),t.D){cc(t.D);var r=t.D;r.va(t.ja()),nc(r,t),rc(r=t.D,t.N),ic(r,t),t.D=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Ec,this),this.s=0,gn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function Bc(t){Ge.call(this,"languageCodeChanged"),this.g=t}function Hc(t){Ge.call(this,"frameworkChanged"),this.c=t}function zc(t){return t.Zb||Se(new k("auth-domain-config-required"))}function Wc(t){if(!Sr())return Se(new k("operation-not-supported-in-this-environment"));var e=zc(t).then((function(){return t.a.pa()})).then((function(t){return t?Wr(t):null}));return Zc(t,e)}function Gc(t,e){Yc(t)&&(function(t,e){K(t.R,(function(t){return t==e}))}(Yc(t),t.Ma),un(Yc(t),"tokenChanged",t.xa),un(Yc(t),"userDeleted",t.ya),un(Yc(t),"userInvalidated",t.za),sc(Yc(t))),e&&(e.R.push(t.Ma),on(e,"tokenChanged",t.xa),on(e,"userDeleted",t.ya),on(e,"userInvalidated",t.za),0<t.s&&ac(e)),Hr(t,"currentUser",e),e&&(e.va(t.ja()),nc(e,t),rc(e,t.N),ic(e,t))}function Kc(t,e){var n=null,r=null;return Zc(t,e.then((function(e){return n=No(e),r=Bi(e),function(t,e){var n={};return n.apiKey=Qc(t).options.apiKey,n.authDomain=Qc(t).options.authDomain,n.appName=Qc(t).name,t.Z.then((function(){return function(t,e,n,r){var i=new ec(t,e);return n&&(i.ga=n),r&&rc(i,r),i.reload().then((function(){return i}))}(n,e,t.B,t.Ea())})).then((function(e){return Yc(t)&&e.uid==Yc(t).uid?(mc(Yc(t),e),t.ca(e)):(Gc(t,e),cc(e),t.ca(e))})).then((function(){Xc(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Bl(e.v(),t,_(t.ic,t))),n||e})).then((function(){return Wr({user:Yc(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Qc(t){return t.app}function Yc(t){return t.currentUser}function Jc(t){return Yc(t)&&Yc(t)._lat||null}function Xc(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Jc(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](Jc(t))}}function Zc(t,e){return t.P.push(e),e.ma((function(){G(t.P,e)})),e}function $c(){}function th(){this.a={},this.b=1e12}Pc.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in Fu)if(Fu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(yr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!gu()&&"none"!==t)throw n;break;default:if(!Er()&&"none"!==t)throw n}}(t),Vc(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Rc(n,t)})).then((function(){if(n.c=Lc(t),e)return n.b.set(n.c,e,n.a)})):Ee()}))},C(qc,gn),C(Bc,Ge),C(Hc,Ge),(t=qc.prototype).tb=function(t){return Zc(this,t=this.i.tb(t))},t.va=function(t){this.$===t||this.l||(this.$=t,Ka(this.b,this.$),this.dispatchEvent(new Bc(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=a.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Qa(this.b,xc.a.SDK_VERSION?wr(xc.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Hc(this.N))},t.Ea=function(){return Y(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:Qc(this).options.apiKey,authDomain:Qc(this).options.authDomain,appName:Qc(this).name,currentUser:Yc(this)&&Yc(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return Kc(i,ss(i.b,o))}))},t.Vc=function(t){if(!Sr())return Se(new k("operation-not-supported-in-this-environment"));var e=this,n=qi(t.providerId),r=Dr(),i=null;(!Ar()||pr())&&Qc(this).options.authDomain&&t.isOAuthProvider&&(i=ou(Qc(this).options.authDomain,Qc(this).options.apiKey,Qc(this).name,"signInViaPopup",t,null,r,xc.a.SDK_VERSION||null,null,null,this.S()));var o=lr(i,n&&n.ta,n&&n.sa);return Zc(this,n=zc(this).then((function(n){return Cl(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new ge((function(t,n){e.la("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=r,e.c=Sl(e.a,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&ur(o),t?Wr(t):null})).o((function(t){throw o&&ur(o),t})))},t.Wc=function(t){if(!Sr())return Se(new k("operation-not-supported-in-this-environment"));var e=this;return Zc(this,zc(this).then((function(){return function(t){return Vc(t,(function(){return t.b.set(Mc,t.c.F,t.a)}))}(e.i)})).then((function(){return El(e.a,"signInViaRedirect",t,void 0,e.S())})))},t.pa=function(){var t=this;return Wc(this).then((function(e){return t.a&&xl(t.a.b),e})).o((function(e){throw t.a&&xl(t.a.b),e}))},t.bd=function(t){if(!t)return Se(new k("null-user"));if(this.R!=t.tenantId)return Se(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=Qc(this).options.apiKey,n.authDomain=Qc(this).options.authDomain,n.appName=Qc(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ba]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new ec(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),r&&rc(e,r),mc(e,t),e}(t,n,e.B,e.Ea());return Zc(this,this.h.then((function(){if(Qc(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Yc(e)&&t.uid==Yc(e).uid?(mc(Yc(e),t),e.ca(t)):(Gc(e,r),cc(r),e.ca(r))})).then((function(){Xc(e)})))},t.wb=function(){var t=this;return Zc(this,this.h.then((function(){return t.a&&xl(t.a.b),Yc(t)?(Gc(t,null),Fc(t.i).then((function(){Xc(t)}))):Ee()})))},t.Xc=function(){var t=this;return Uc(this.i,Qc(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Yc(t)&&e){n=Yc(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return mc(Yc(t),e),Yc(t).I();(Yc(t)||e)&&(Gc(t,e),e&&(cc(e),e.ga=t.B),t.a&&ml(t.a,t),Xc(t))}}))},t.ca=function(t){return jc(this.i,t)},t.jc=function(){Xc(this),this.ca(Yc(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then((function(){return Kc(e,Ee(t))}))},t.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Yc(e))}))},t.yc=function(t){var e=this;!function(t,e){t.O.push(e),Zc(t,t.h.then((function(){!t.l&&W(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Jc(t)))})))}(this,(function(){t.next(Yc(e))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){f(t)?t(Yc(r)):f(t.next)&&t.next(Yc(r))})),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),f(t)?t(Yc(r)):f(t.next)&&t.next(Yc(r))})),this.ac(t,e,n)},t.kc=function(t){var e=this;return Zc(this,this.h.then((function(){return Yc(e)?Yc(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Rc=function(t){var e=this;return this.h.then((function(){return Kc(e,zs(e.b,Fs,{token:t}))})).then((function(t){var n=t.user;return gc(n,"isAnonymous",!1),e.ca(n),t}))},t.Sc=function(t,e){var n=this;return this.h.then((function(){return Kc(n,zs(n.b,Us,{email:t,password:e}))}))},t.cc=function(t,e){var n=this;return this.h.then((function(){return Kc(n,zs(n.b,ds,{email:t,password:e}))}))},t.Ya=function(t){var e=this;return this.h.then((function(){return Kc(e,t.ia(e.b))}))},t.Qc=function(t){return qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var t=this;return this.h.then((function(){var e=Yc(t);if(e&&e.isAnonymous){var n=Wr({providerId:null,isNewUser:!1});return Wr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Kc(t,t.b.vb()).then((function(e){var n=e.user;return gc(n,"isAnonymous",!0),t.ca(n),e}))}))},t.getUid=function(){return Yc(this)&&Yc(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&Yc(this)&&ac(Yc(this))},t.Nc=function(t){var e=this;q(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&Yc(this)&&sc(Yc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Zc(this,this.h.then((function(){e.l||W(e.m,t)&&t(Jc(e))})))},t.removeAuthTokenListener=function(t){K(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Lc("local"),t.a,this.oa),this.a&&(_l(this.a,this),xl(this.a.b)),Promise.resolve()},t.fc=function(t){return Zc(this,function(t,e){return zs(t,ps,{identifier:e,continueUri:Tr()?or():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.zc=function(t){return!!So(t)},t.sb=function(t,e){var n=this;return Zc(this,Ee().then((function(){var t=new ki(e);if(!t.c)throw new k("argument-error",Ti+" must be true when sending sign in link to email");return Pi(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},t.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},t.jb=function(t,e){return Zc(this,this.b.jb(t,e).then((function(){})))},t.Pa=function(t){return Zc(this,this.b.Pa(t).then((function(t){return new ti(t)})))},t.fb=function(t){return Zc(this,this.b.fb(t).then((function(){})))},t.rb=function(t,e){var n=this;return Zc(this,Ee().then((function(){return void 0===e||ht(e)?{}:Pi(new ki(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},t.Uc=function(t,e){return Zc(this,Ll(this,t,e,_(this.Ya,this)))},t.Tc=function(t,e){var n=this;return Zc(this,Ee().then((function(){var r=e||or(),i=Eo(t,r);if(!(r=So(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new k("tenant-id-mismatch");return n.Ya(i)})))},$c.prototype.render=function(){},$c.prototype.reset=function(){},$c.prototype.getResponse=function(){},$c.prototype.execute=function(){};var eh=null;function nh(t,e){return(e=rh(e))&&t.a[e]||null}function rh(t){return(t=void 0===t?1e12:t)?t.toString():null}function ih(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ie(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():on(this.f,"click",this.i)}function oh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ah(){}function sh(){}th.prototype.render=function(t,e){return this.a[this.b.toString()]=new ih(t,e),this.b++},th.prototype.reset=function(t){var e=nh(this,t);t=rh(t),e&&t&&(e.delete(),delete this.a[t])},th.prototype.getResponse=function(t){return(t=nh(this,t))?t.getResponse():null},th.prototype.execute=function(t){(t=nh(this,t))&&t.execute()},ih.prototype.getResponse=function(){return oh(this),this.b},ih.prototype.execute=function(){oh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},ih.prototype.delete=function(){oh(this),this.g=!0,clearTimeout(this.a),this.a=null,un(this.f,"click",this.i)},Hr(ah,"FACTOR_ID","phone"),sh.prototype.g=function(){return eh||(eh=new th),Ee(eh)},sh.prototype.c=function(){};var uh=null;function lh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ch=new yt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),hh=new Mr(3e4,6e4);lh.prototype.g=function(t){var e=this;return new ge((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),hh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete a[e.a]},Ee(Pa(kt(ch,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},lh.prototype.c=function(){this.b--};var fh=null;function dh(t,e,n,r,i,o,s){if(Hr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s?(uh||(uh=new sh),s=uh):(fh||(fh=new lh),s=fh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[yh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[gh],!a.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ie(e)||!this.i&&ie(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Va(t,o||null,i||null),this.w=r||function(){return null};var u=this;this.l=[];var l=this.a[ph];this.a[ph]=function(t){if(mh(u,t),"function"==typeof l)l(t);else if("string"==typeof l){var e=kr(l,a);"function"==typeof e&&e(t)}};var c=this.a[vh];this.a[vh]=function(){if(mh(u,null),"function"==typeof c)c();else if("string"==typeof c){var t=kr(c,a);"function"==typeof t&&t()}}}var ph="callback",vh="expired-callback",yh="sitekey",gh="size";function mh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function _h(t,e){return t.h.push(e),e.ma((function(){G(t.h,e)})),e}function bh(t){if(t.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function wh(t,e,n){var r=!1;try{this.b=n||xc.a.app()}catch(a){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=xc.a.SDK_VERSION?wr(xc.a.SDK_VERSION,o):null,dh.call(this,n,t,e,(function(){try{var t=i.b.auth().ja()}catch(e){t=null}return t}),o,O(S),r)}function Ch(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=kh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=kh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=dh.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=_h(this,Ee().then((function(){if(Tr()&&!vr())return fr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,zs(t.s,Is,{})})).then((function(e){t.a[yh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){bh(this);var t=this;return _h(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=ie(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!re&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Vt(a.name),'"'),a.type){o.push(' type="',Vt(a.type),'"');var s={};pt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ce(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):oe(o,a)),2<r.length&&le(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){bh(this);var t=this;return _h(this,this.render().then((function(e){return new ge((function(n){var r=t.g.getResponse(e);if(r)n(r);else{t.l.push((function e(r){r&&(function(t,e){K(t.l,(function(t){return t==e}))}(t,e),n(r))})),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){bh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){bh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ie(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},C(wh,dh);var kh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Eh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Sh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Th(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:d}}function Ih(t,e){return{name:t||"",J:"a function",optional:!!e,K:f}}function Ah(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Oh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){return!!e&&!(!e.ia||t&&e.providerId!==t)}}}function xh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&f(t.Fa)}function Nh(t){return d(t)&&"string"==typeof t.uid}function Dh(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!f(t.verify))}}}function Ph(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Rh(t,e){for(var n in e){var r=e[n].name;t[r]=jh(r,t[n],e[n].j)}}function Mh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b((function(t){return this[t]}),n),set:b((function(t,e,n,r){Ch(t,[n],[r],!0),this[e]=r}),r,n,e[n].gb),enumerable:!0})}}function Lh(t,e,n,r){t[e]=jh(e,n,r)}function jh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ch(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Rh(qc.prototype,{fb:{name:"applyActionCode",j:[Eh("code")]},Pa:{name:"checkActionCode",j:[Eh("code")]},jb:{name:"confirmPasswordReset",j:[Eh("code"),Eh("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Eh("email"),Eh("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Eh("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Eh("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Ph(Th(),Ih(),"nextOrObserver"),Ih("opt_error",!0),Ih("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Ph(Th(),Ih(),"nextOrObserver"),Ih("opt_error",!0),Ih("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Eh("email"),Ph(Th("opt_actionCodeSettings",!0),Ah(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Eh("email"),Th("actionCodeSettings")]},tb:{name:"setPersistence",j:[Eh("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Oh()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Oh()]},Rc:{name:"signInWithCustomToken",j:[Eh("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Eh("email"),Eh("password")]},Tc:{name:"signInWithEmailLink",j:[Eh("email"),Eh("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Eh("phoneNumber"),Dh()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Ph({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ec)}},Ah(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Eh(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Eh("code")]}}),Mh(qc.prototype,{lc:{name:"languageCode",gb:Ph(Eh(),Ah(),"languageCode")},ti:{name:"tenantId",gb:Ph(Eh(),Ah(),"tenantId")}}),(qc.Persistence=Fu).LOCAL="local",qc.Persistence.SESSION="session",qc.Persistence.NONE="none",Rh(ec.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Sh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Sh("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Oh()]},mb:{name:"linkWithCredential",j:[Oh()]},Bc:{name:"linkWithPhoneNumber",j:[Eh("phoneNumber"),Dh()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Oh()]},pb:{name:"reauthenticateWithCredential",j:[Oh()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Eh("phoneNumber"),Dh()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Ph(Th("opt_actionCodeSettings",!0),Ah(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Eh(null,!0)]},ad:{name:"unlink",j:[Eh("provider")]},xb:{name:"updateEmail",j:[Eh("email")]},yb:{name:"updatePassword",j:[Eh("password")]},cd:{name:"updatePhoneNumber",j:[Oh("phone")]},zb:{name:"updateProfile",j:[Th("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Eh("email"),Ph(Th("opt_actionCodeSettings",!0),Ah(null,!0),"opt_actionCodeSettings",!0)]}}),Rh(th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Rh($c.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Rh(ge.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Mh(Rl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Sh("appVerificationDisabledForTesting")}}),Rh(Ml.prototype,{confirm:{name:"confirm",j:[Eh("verificationCode")]}}),Lh(eo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[uo,Co,Io,oo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Ph(Eh(),Th(),"json")]),Lh(ko,"credential",(function(t,e){return new wo(t,e)}),[Eh("email"),Eh("password")]),Rh(wo.prototype,{v:{name:"toJSON",j:[Eh(null,!0)]}}),Rh(fo.prototype,{Aa:{name:"addScope",j:[Eh("scope")]},Ia:{name:"setCustomParameters",j:[Th("customOAuthParameters")]}}),Lh(fo,"credential",po,[Ph(Eh(),Th(),"token")]),Lh(ko,"credentialWithLink",Eo,[Eh("email"),Eh("emailLink")]),Rh(vo.prototype,{Aa:{name:"addScope",j:[Eh("scope")]},Ia:{name:"setCustomParameters",j:[Th("customOAuthParameters")]}}),Lh(vo,"credential",yo,[Ph(Eh(),Th(),"token")]),Rh(go.prototype,{Aa:{name:"addScope",j:[Eh("scope")]},Ia:{name:"setCustomParameters",j:[Th("customOAuthParameters")]}}),Lh(go,"credential",mo,[Ph(Eh(),Ph(Th(),Ah()),"idToken"),Ph(Eh(),Ah(),"accessToken",!0)]),Rh(_o.prototype,{Ia:{name:"setCustomParameters",j:[Th("customOAuthParameters")]}}),Lh(_o,"credential",bo,[Ph(Eh(),Th(),"token"),Eh("secret",!0)]),Rh(ho.prototype,{Aa:{name:"addScope",j:[Eh("scope")]},credential:{name:"credential",j:[Ph(Eh(),Ph(Th(),Ah()),"optionsOrIdToken"),Ph(Eh(),Ah(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Th("customOAuthParameters")]}}),Rh(ao.prototype,{v:{name:"toJSON",j:[Eh(null,!0)]}}),Rh(ro.prototype,{v:{name:"toJSON",j:[Eh(null,!0)]}}),Lh(Oo,"credential",xo,[Eh("verificationId"),Eh("verificationCode")]),Rh(Oo.prototype,{cb:{name:"verifyPhoneNumber",j:[Ph(Eh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?xh(t.session,$i)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?xh(t.session,to)&&Nh(t.multiFactorHint):t.session&&t.multiFactorUid?xh(t.session,to)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Dh()]}}),Rh(To.prototype,{v:{name:"toJSON",j:[Eh(null,!0)]}}),Rh(k.prototype,{toJSON:{name:"toJSON",j:[Eh(null,!0)]}}),Rh(Uo.prototype,{toJSON:{name:"toJSON",j:[Eh(null,!0)]}}),Rh(Fo.prototype,{toJSON:{name:"toJSON",j:[Eh(null,!0)]}}),Rh(ql.prototype,{toJSON:{name:"toJSON",j:[Eh(null,!0)]}}),Rh(Fl.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),Rh(Kl.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},Eh("displayName",!0)]},$c:{name:"unenroll",j:[Ph({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Nh},Eh(),"multiFactorInfoIdentifier")]}}),Rh(wh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Lh(pi,"parseLink",Ci,[Eh("link")]),Lh(ah,"assertion",(function(t){return new Wl(t)}),[Oh("phone")]),function(){if(void 0===xc.a||!xc.a.INTERNAL||!xc.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ni,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ei,VERIFY_AND_CHANGE_EMAIL:ri,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:qc,AuthCredential:eo,Error:k};Lh(t,"EmailAuthProvider",ko,[]),Lh(t,"FacebookAuthProvider",fo,[]),Lh(t,"GithubAuthProvider",vo,[]),Lh(t,"GoogleAuthProvider",go,[]),Lh(t,"TwitterAuthProvider",_o,[]),Lh(t,"OAuthProvider",ho,[Eh("providerId")]),Lh(t,"SAMLAuthProvider",co,[Eh("providerId")]),Lh(t,"PhoneAuthProvider",Oo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof qc)}}]),Lh(t,"RecaptchaVerifier",wh,[Ph(Eh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Th("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof xc.a.app.App)}}]),Lh(t,"ActionCodeURL",pi,[]),Lh(t,"PhoneMultiFactorGenerator",ah,[]),xc.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new qc(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),xc.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.kc,t),addAuthTokenListener:_(t.bc,t),removeAuthTokenListener:_(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),xc.a.registerVersion("@firebase/auth","0.14.4"),xc.a.INTERNAL.extendNamespace({User:ec})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Nc=function t(){_classCallCheck(this,t)};function Dc(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ba.a;return new f.a((function(n){var r;return null!=e?e.schedule((function(){r=t.onSnapshot(n)})):r=t.onSnapshot(n),function(){null!=r&&r()}}))}(t,e)}function Pc(t,e){return Dc(t,e).pipe(Object(S.a)((function(t){return{payload:t,type:"query"}})))}var Rc=n("pxpQ");function Mc(t,e){return Pc(t,e).pipe(Object(S.a)((function(t){return t.payload.docChanges().map((function(t){return{type:t.type,payload:t}}))})))}function Lc(t,e,n){return Pc(t,n).pipe(Object(S.a)((function(t){return t.payload.docChanges()})),Object(it.a)((function(t,n){return function(t,e,n){return e.forEach((function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))})),t}(t,n,e)}),[]),Object(S.a)((function(t){return t.map((function(t){return{type:t.type,payload:t}}))})))}function jc(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}var Fc=function(){function t(e,n,r){_classCallCheck(this,t),this.ref=e,this.query=n,this.afs=r}return _createClass(t,[{key:"stateChanges",value:function(t){return t&&0!==t.length?Mc(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(S.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),O((function(t){return t.length>0}))):Mc(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(Object(it.a)((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=jc(t);return Lc(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pc(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(S.a)((function(e){return e.payload.docs.map((function(e){return t.idField?Object.assign({},e.data(),_defineProperty({},t.idField,e.id)):e.data()}))})))}},{key:"get",value:function(t){return Object(u.a)(this.query.get(t)).pipe(Object(Rc.a)(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new Uc(this.ref.doc(t),this.afs)}}]),t}(),Uc=function(){function t(e,n){_classCallCheck(this,t),this.ref=e,this.afs=n}return _createClass(t,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=Gc(this.ref.collection(t),e),r=n.ref,i=n.query;return new Fc(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return Dc(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(S.a)((function(t){return{payload:t,type:"value"}}))).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return this.snapshotChanges().pipe(Object(S.a)((function(t){return t.payload.data()})))}},{key:"get",value:function(t){return Object(u.a)(this.ref.get(t)).pipe(Object(Rc.a)(this.afs.schedulers.insideAngular))}}]),t}(),Vc=function(){function t(e,n){_classCallCheck(this,t),this.query=e,this.afs=n}return _createClass(t,[{key:"stateChanges",value:function(t){return t&&0!==t.length?Mc(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(S.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),O((function(t){return t.length>0}))):Mc(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(Object(it.a)((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=jc(t);return Lc(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return Pc(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,Object(S.a)((function(t){return t.payload.docs.map((function(t){return t.data()}))})))}},{key:"get",value:function(t){return Object(u.a)(this.query.get(t)).pipe(Object(Rc.a)(this.afs.schedulers.insideAngular))}}]),t}(),qc=new r.o("angularfire2.enableFirestorePersistence"),Bc=new r.o("angularfire2.firestore.persistenceSettings"),Hc=new r.o("angularfire2.firestore.settings"),zc=parseInt(Mo.a.SDK_VERSION.split(".")[0]),Wc=zc<5||5==zc&&parseInt(Mo.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function Gc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var Kc,Qc=function(){function t(e,n,r,i,o,l,c){var h=this;_classCallCheck(this,t),this.schedulers=new jo.c(l),this.keepUnstableUntilFirst=Object(jo.d)(this.schedulers,o),this.firestore=l.runOutsideAngular((function(){var t=Object(Fo.e)(e,l,n).firestore();return t.settings(i||Wc),t})),this.persistenceEnabled$=r&&!Object(a.t)(o)?l.runOutsideAngular((function(){try{return Object(u.a)(h.firestore.enablePersistence(c||void 0).then((function(){return!0}),(function(){return!1})))}catch(t){return Object(s.a)(!1)}})):Object(s.a)(!1)}return _createClass(t,[{key:"collection",value:function(t,e){var n=Gc("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query;return new Fc(r,i,this)}},{key:"collectionGroup",value:function(t,e){if(zc<6)throw"collection group queries require Firebase JS SDK >= 6.0";var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new Vc(n(r),this)}},{key:"doc",value:function(t){var e;return e="string"==typeof t?this.firestore.doc(t):t,new Uc(e,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}();n("6Joi");var Yc=Kc=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"enablePersistence",value:function(t){return{ngModule:Kc,providers:[{provide:qc,useValue:!0},{provide:Bc,useValue:t}]}}}]),t}(),Jc=n("z5t0"),Xc=n("mrSG"),Zc=n("S+S0"),$c=function(){function t(t,e){this.code_=th(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return th(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}();function th(t){return"storage/"+t}function eh(){return new $c("unknown","An unknown error occurred, please check the error payload for server response.")}function nh(){return new $c("canceled","User canceled the upload/download.")}function rh(){return new $c("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ih(){return new $c("no-download-url","The given file does not have any download URLs.")}function oh(t,e,n){return new $c("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function ah(){return new $c("app-deleted","The Firebase app was deleted.")}function sh(t,e){return new $c("invalid-format","String does not match format '"+t+"': "+e)}function uh(t){throw new $c("internal-error","Internal error: "+t)}var lh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function ch(t){switch(t){case lh.RAW:case lh.BASE64:case lh.BASE64URL:case lh.DATA_URL:return;default:throw"Expected one of the event types: ["+lh.RAW+", "+lh.BASE64+", "+lh.BASE64URL+", "+lh.DATA_URL+"]."}}var hh=function(t,e){this.data=t,this.contentType=e||null};function fh(t,e){switch(t){case lh.RAW:return new hh(dh(e));case lh.BASE64:case lh.BASE64URL:return new hh(ph(t,e));case lh.DATA_URL:return new hh((n=new vh(e)).base64?ph(lh.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw sh(lh.DATA_URL,"Malformed data URL.")}return dh(e)}(n.rest),new vh(e).contentType)}var n;throw eh()}function dh(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ph(t,e){switch(t){case lh.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw sh(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case lh.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw sh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(l){throw sh(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var vh=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw sh(lh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},yh={STATE_CHANGED:"state_changed"},gh={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mh(t){switch(t){case"running":case"pausing":case"canceling":return gh.RUNNING;case"paused":return gh.PAUSED;case"success":return gh.SUCCESS;case"canceled":return gh.CANCELED;case"error":default:return gh.ERROR}}function _h(t){return null!=t}function bh(t){return void 0!==t}function wh(t){return"function"==typeof t}function Ch(t){return"object"==typeof t}function kh(t){return Ch(t)&&null!==t}function Eh(t){return"string"==typeof t||t instanceof String}function Sh(t){return Th(t)&&Number.isInteger(t)}function Th(t){return"number"==typeof t||t instanceof Number}function Ih(t){return Ah()&&t instanceof Blob}function Ah(){return"undefined"!=typeof Blob}var Oh=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),xh=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Oh.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Oh.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Oh.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw uh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),_h(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return _h(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw uh("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw uh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw uh("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){_h(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){_h(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Nh=function(){function t(){}return t.prototype.createXhrIo=function(){return new xh},t}();function Dh(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ph(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Dh();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Ah())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var Rh=function(){function t(t,e){var n=0,r="";Ih(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Ih(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ah()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Ph.apply(null,r))}var i=e.map((function(t){return Eh(t)?fh(lh.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Mh=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new $c("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],s=0;s<a.length;s++){var u=a[s],l=u.regex.exec(e);if(l){var c=l[u.indices.path];c||(c=""),n=new t(l[u.indices.bucket],c),u.postModify(n);break}}if(null==n)throw function(t){return new $c("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Lh(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return Ch(n=e)&&!Array.isArray(n)?e:null}function jh(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function Fh(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Uh(t){return"https://firebasestorage.googleapis.com/v0"+t}function Vh(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function qh(t,e){return e}var Bh=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||qh},Hh=null;function zh(t,e,n){var r=Lh(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Mh(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Wh(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Gh(t){if(!Ch(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!Ch(n))throw"Expected object for 'customMetadata' mapping."}else if(kh(n))throw"Mapping for '"+e+"' cannot be an object."}}function Kh(t){if(!Ch(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!Sh(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!Eh(t.pageToken))throw"Expected pageToken to be string."}}var Qh=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Yh(t){if(!t)throw eh()}function Jh(t,e){return function(n,r){var i=zh(t,r,e);return Yh(null!==i),i}}function Xh(t){return function(e,n){var r;return(r=401===e.getStatus()?new $c("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new $c("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new $c("unauthorized","User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function Zh(t){var e=Xh(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new $c("object-not-found","Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function $h(t,e,n){var r=Uh(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Qh(r,"GET",Jh(t,n),i);return o.errorHandler=Zh(e),o}function tf(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Uh(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime(),u=new Qh(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Lh(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t.makeStorageReference(new Mh(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,l=n.items;u<l.length;u++)s=t.makeStorageReference(new Mh(e,l[u].name)),r.items.push(s);return r}(t,e,r)}(t,e,r);return Yh(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=Xh(e),u}function ef(t,e,n){var r=Uh(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Qh(r,"GET",function(t,e){return function(n,r){var i=zh(t,r,e);return Yh(null!==i),function(t,e){var n=Lh(e);if(null===n)return null;if(!Eh(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return Uh("/b/"+i(t.bucket)+"/o/"+i(n))+Vh({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=Zh(e),o}function nf(t,e,n,r){var i=Uh(e.fullServerUrl()),o=Wh(n,r),a=t.maxOperationRetryTime(),s=new Qh(i,"PATCH",Jh(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Zh(e),s}function rf(t,e){var n=Uh(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new Qh(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Zh(e),i}function of(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var af=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function sf(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){Yh(!1)}return Yh(!!n&&-1!==(e||["active"]).indexOf(n)),n}var uf=function(t,e,n){if(wh(t)||_h(e)||_h(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},lf=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function cf(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a,s,u,l;if(!(r<=n.length&&n.length<=i))throw(a=r)===(s=i)?(u=a,l=1===a?"argument":"arguments"):(u="between "+a+" and "+s,l="arguments"),new $c("invalid-argument-count","Invalid argument count in `"+t+"`: Expected "+u+" "+l+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(c){throw c instanceof Error?oh(o,t,c.message):oh(o,t,c)}}var hf=function(t,e){var n=this;this.validator=function(e){n.optional&&!bh(e)||t(e)},this.optional=!!e};function ff(t,e){function n(t){if(!Eh(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new hf(r,e)}function df(){return new hf((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Ah()&&t instanceof Blob))throw"Expected Blob or File."}))}function pf(t){return new hf(Gh,t)}function vf(t){return new hf(Kh,t)}function yf(){return new hf((function(t){if(!(Th(t)&&t>=0))throw"Expected a number 0 or greater."}))}function gf(t,e){return new hf((function(e){if(!(null===e||_h(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function mf(t){return new hf((function(t){if(null!==t&&!wh(t))throw"Expected a Function."}),t)}function _f(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var bf=function(){function t(t,e,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals("canceled")?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_("error"))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals("canceled")?a.completeTransitions_():(a.error_=t,a.transition_("error"))},this.promise_=new Promise((function(t,e){a.resolve_=t,a.reject_=e,a.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case"running":t(n);break;case"canceling":e.transition_("canceled");break;case"pausing":e.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=of(e,r,i),s={name:a.fullPath},u=Uh(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=Wh(a,n),h=t.maxUploadRetryTime(),f=new Qh(u,"POST",(function(t){var e;sf(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){Yh(!1)}return Yh(Eh(e)),e}),h);return f.urlParams=s,f.headers=l,f.body=c,f.errorHandler=Xh(e),f}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new Qh(n,"POST",(function(t){var e=sf(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Yh(!1)}n||Yh(!1);var i=Number(n);return Yh(!isNaN(i)),new af(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Xh(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new af(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new af(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new $c("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var h=u.current,f={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+c);if(null===d)throw rh();var p=e.maxUploadRetryTime(),v=new Qh(n,"POST",(function(t,n){var i,a=sf(t,["active","final"]),s=u.current+c,l=r.size();return i="final"===a?Jh(e,o)(t,n):null,new af(s,l,"final"===a,i)}),p);return v.headers=f,v.body=d.uploadData(),v.progressCallback=s||null,v.errorHandler=Xh(t),v}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(s){return t.error_=s,void t.transition_("error")}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=$h(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_("success")}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=of(e,r,i),l=Wh(u,n),c=Rh.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===c)throw rh();var h={name:u.fullPath},f=Uh(o),d=t.maxUploadRetryTime(),p=new Qh(f,"POST",Jh(t,n),d);return p.urlParams=h,p.headers=a,p.body=c.uploadData(),p.errorHandler=Xh(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_("success")}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case"canceling":case"pausing":this.state_=t,null!==this.request_&&this.request_.cancel();break;case"running":var e="paused"===this.state_;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=t,this.notifyObservers_();break;case"canceled":this.error_=nh(),this.state_=t,this.notifyObservers_();break;case"error":case"success":this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=mh(this.state_);return new lf(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==yh.STATE_CHANGED)throw"Expected one of the event types: ["+yh.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=mf(!0).validator,s=gf(null,!0).validator;function u(t){try{return void a(t)}catch(e){}try{if(s(t),!(bh(t.next)||bh(t.error)||bh(t.complete)))throw"";return}catch(e){throw o}}var l=[ff(i),gf(u,!0),mf(!0),mf(!0)];cf("on",l,arguments);var c=this;function h(t){return function(e,n,i){null!==t&&cf("on",t,arguments);var o=new uf(e,n,r);return c.addObserver_(o),function(){c.removeObserver_(o)}}}function f(t){if(null===t)throw o;u(t)}var d=[gf(f),mf(!0),mf(!0)],p=!(bh(e)||bh(n)||bh(r));return p?h(d):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(mh(this.state_)){case gh.SUCCESS:_f(this.resolve_.bind(null,this.snapshot))();break;case gh.CANCELED:case gh.ERROR:_f(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(mh(this.state_)){case gh.RUNNING:case gh.PAUSED:t.next&&_f(t.next.bind(t,this.snapshot))();break;case gh.SUCCESS:t.complete&&_f(t.complete.bind(t))();break;case gh.CANCELED:case gh.ERROR:t.error&&_f(t.error.bind(t,this.error_))();break;default:t.error&&_f(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){cf("resume",[],arguments);var t="paused"===this.state_||"pausing"===this.state_;return t&&this.transition_("running"),t},t.prototype.pause=function(){cf("pause",[],arguments);var t="running"===this.state_;return t&&this.transition_("pausing"),t},t.prototype.cancel=function(){cf("cancel",[],arguments);var t="running"===this.state_||"pausing"===this.state_;return t&&this.transition_("canceling"),t},t}(),wf=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof Mh?e:Mh.makeFromUrl(e)}return t.prototype.toString=function(){return cf("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(Hh)return Hh;var t=[];t.push(new Bh("bucket")),t.push(new Bh("generation")),t.push(new Bh("metageneration")),t.push(new Bh("name","fullPath",!0));var e=new Bh("name");e.xform=function(t,e){return function(t){return!Eh(t)||t.length<2?t:Fh(t)}(e)},t.push(e);var n=new Bh("size");return n.xform=function(t,e){return _h(e)?Number(e):e},t.push(n),t.push(new Bh("timeCreated")),t.push(new Bh("updated")),t.push(new Bh("md5Hash",null,!0)),t.push(new Bh("cacheControl",null,!0)),t.push(new Bh("contentDisposition",null,!0)),t.push(new Bh("contentEncoding",null,!0)),t.push(new Bh("contentLanguage",null,!0)),t.push(new Bh("contentType",null,!0)),t.push(new Bh("metadata","customMetadata",!0)),Hh=t}()},t.prototype.child=function(t){cf("child",[ff()],arguments);var e=jh(this.location.path,t),n=new Mh(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Mh(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Mh(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Fh(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),cf("put",[df(),pf(!0)],arguments),this.throwIfRoot_("put"),new bf(this,this.authWrapper,this.location,this.mappings(),new Rh(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=lh.RAW),cf("putString",[ff(),ff(ch,!0),pf(!0)],arguments),this.throwIfRoot_("putString");var r=fh(e,t),i=Object.assign({},n);return!_h(i.contentType)&&_h(r.contentType)&&(i.contentType=r.contentType),new bf(this,this.authWrapper,this.location,this.mappings(),new Rh(r.data,!0),i)},t.prototype.delete=function(){var t=this;return cf("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=rf(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){cf("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(Xc.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(Xc.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){cf("list",[vf(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=tf(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return cf("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=$h(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return cf("updateMetadata",[pf()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=nf(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return cf("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=ef(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw ih();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new $c("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Cf=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),kf=function(){function t(){this.map=new Map,this.id=-9007199254740991}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},t.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},t}(),Ef=function(){function t(e,n,r,i,o,a){var s;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var u=this.app_.options;_h(u)&&(this.bucket_=t.extractBucket_(u),this.appId_=null!==(s=u.appId)&&void 0!==s?s:null)}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=a,this.service_=o,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new kf}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:Mh.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw ah();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Cf(ah());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),Sf=function(){function t(t,e,n,r,i,o,a,s,u,l,c){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());bh(s)?i(s):i()}catch(u){o(u)}else null!==a?((r=eh()).setServerResponseProp(a.getResponseText()),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?ah():nh():new $c("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Tf(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var l=!1;function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l||(l=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Tf(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Oh.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Tf(a,n))}else{var s=n.getErrorCode()===Oh.ABORT;e(!1,new Tf(!1,null,s))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!l)if(t)c.call.apply(c,Object(Xc.__spreadArrays)([null,t],e));else{var r,o=u()||a;o?c.call.apply(c,Object(Xc.__spreadArrays)([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,l||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Tf=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function If(t,e,n,r){var i=Vh(t.urlParams),o=t.url+i,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==xc.a?xc.a.SDK_VERSION:"AppManager")}(a),new Sf(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var Af,Of,xf=function(){function t(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new Ef(t,e,(function(t,e){return new wf(t,e)}),If,this,n),this.app_=t,null!=r)this.bucket_=Mh.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new Mh(i,""))}this.internals_=new Nf(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(cf("ref",[ff(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new wf(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Mh.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return cf("refFromURL",[ff(e,!1)],arguments),new wf(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){cf("setMaxUploadRetryTime",[yf()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){cf("setMaxOperationRetryTime",[yf()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Nf=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}();Of={TaskState:gh,TaskEvent:yh,StringFormat:lh,Storage:xf,Reference:wf},(Af=xc.a).INTERNAL.registerComponent(new Zc.Component("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new xf(n,r,new Nh,e)}),"PUBLIC").setServiceProps(Of).setMultipleInstances(!0)),Af.registerVersion("@firebase/storage","0.3.32");var Df,Pf=function t(){_classCallCheck(this,t)},Rf=((Df=function(){function t(e){_classCallCheck(this,t),this.router=e}return _createClass(t,[{key:"canActivate",value:function(){return!!Object(Ro.auth)().currentUser}}]),t}()).ngInjectableDef=r.Nb({factory:function(){return new Df(r.Ob(Pr))},token:Df,providedIn:"root"}),Df),Mf=function t(){_classCallCheck(this,t)},Lf=function t(){_classCallCheck(this,t)},jf=r.pb(i,[o],(function(t){return r.Ab([r.Bb(512,r.j,r.ab,[[8,[ci,Go,ia,Ga,$a,rs,gs,ss,Fs,Hs,iu,cu]],[3,r.j],r.v]),r.Bb(5120,r.s,r.mb,[[3,r.s]]),r.Bb(4608,a.l,a.k,[r.s,[2,a.x]]),r.Bb(5120,r.ib,r.nb,[r.x]),r.Bb(5120,r.c,r.jb,[]),r.Bb(5120,r.q,r.kb,[]),r.Bb(5120,r.r,r.lb,[]),r.Bb(4608,oe,ae,[a.c]),r.Bb(6144,r.F,null,[oe]),r.Bb(4608,Zt,te,[]),r.Bb(5120,It,(function(t,e,n,r,i,o,a,s){return[new Jt(t,e,n),new ie(r),new ee(i,o,a,s)]}),[a.c,r.x,r.z,a.c,a.c,Zt,r.bb,[2,$t]]),r.Bb(4608,At,At,[It,r.x]),r.Bb(135680,Nt,Nt,[a.c]),r.Bb(4608,Lt,Lt,[At,Nt,r.c]),r.Bb(5120,ju,Ec,[]),r.Bb(5120,Sl,Sc,[]),r.Bb(4608,Zl,kc,[a.c,ju,Sl]),r.Bb(5120,r.D,Tc,[Lt,Zl,r.x]),r.Bb(6144,xt,null,[Nt]),r.Bb(4608,r.L,r.L,[r.x]),r.Bb(5120,En,ri,[Pr]),r.Bb(4608,zr,zr,[]),r.Bb(6144,Br,null,[zr]),r.Bb(135680,Wr,Wr,[Pr,r.u,r.i,r.p,Br]),r.Bb(4608,Hr,Hr,[]),r.Bb(5120,Gr,Zr,[Pr,a.r,Kr]),r.Bb(5120,si,ai,[ii]),r.Bb(5120,r.b,(function(t){return[t]}),[si]),r.Bb(5120,Fo.b,Fo.e,[Fo.d,r.x,[2,Fo.c]]),r.Bb(4608,Uo,Uo,[Fo.d,[2,Fo.c],r.z,r.x]),r.Bb(4608,hu,yc,[r.D,a.c]),r.Bb(4608,Ri,Ri,[]),r.Bb(4608,xo,xo,[]),r.Bb(4608,Qc,Qc,[Fo.d,[2,Fo.c],[2,qc],[2,Hc],r.z,r.x,[2,Bc]]),r.Bb(4608,Lo.a,Lo.a,[Fo.d,[2,Fo.c],[2,jo.b],r.z,r.x]),r.Bb(4608,Xo,Xo,[Fo.d,[2,Fo.c],[2,Jo],r.z,r.x]),r.Bb(4608,Rf,Rf,[Pr]),r.Bb(4608,Vo,Vo,[Uo,Pr,r.x,Lo.a]),r.Bb(1073742336,a.b,a.b,[]),r.Bb(1024,r.l,ve,[]),r.Bb(1024,r.w,(function(){return[Jr()]}),[]),r.Bb(512,ii,ii,[r.p]),r.Bb(1024,r.d,(function(t,e){return[(n=t,Et("probe",Tt),Et("coreTokens",Object.assign({},St,(n||[]).reduce((function(t,e){return t[e.name]=e.token,t}),{}))),function(){return Tt}),oi(e)];var n}),[[2,r.w],ii]),r.Bb(512,r.e,r.e,[[2,r.d]]),r.Bb(131584,r.g,r.g,[r.x,r.bb,r.p,r.l,r.j,r.e]),r.Bb(1073742336,r.f,r.f,[r.g]),r.Bb(1073742336,ye,ye,[[3,ye]]),r.Bb(1024,Qr,ti,[[3,Pr]]),r.Bb(512,en,nn,[]),r.Bb(512,Ur,Ur,[]),r.Bb(256,Kr,{},[]),r.Bb(1024,a.g,$r,[a.q,[2,a.a],Kr]),r.Bb(512,a.f,a.f,[a.g,a.q]),r.Bb(512,r.i,r.i,[]),r.Bb(512,r.u,r.I,[r.i,[2,r.J]]),r.Bb(1024,Tr,(function(){return[[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Po},{path:"establecimiento",component:Ko,canActivate:[Rf]},{path:"login",component:Ha},{path:"signup",component:Ka},{path:"forgot",component:ts},{path:"manage",component:hs},{path:"userMgmt",component:is},{path:"mydashboard",component:ms,canActivate:[Rf]},{path:"editar/:id",component:Us,canActivate:[Rf]},{path:"view/:id",component:zs}]]}),[]),r.Bb(1024,Pr,ni,[r.g,en,Ur,a.f,r.p,r.u,r.i,Tr,Kr,[2,Ar],[2,Er]]),r.Bb(1073742336,Xr,Xr,[[2,Qr],[2,Pr]]),r.Bb(1073742336,Mf,Mf,[]),r.Bb(1073742336,Fo.a,Fo.a,[r.z]),r.Bb(1073742336,Nc,Nc,[]),r.Bb(1073742336,Ac,Ac,[]),r.Bb(1073742336,Va,Va,[]),r.Bb(1073742336,ka,ka,[[2,Ca],[2,$t]]),r.Bb(1073742336,Ua,Ua,[]),r.Bb(1073742336,Oo,Oo,[]),r.Bb(1073742336,No,No,[]),r.Bb(1073742336,Do,Do,[]),r.Bb(1073742336,Yc,Yc,[]),r.Bb(1073742336,Jc.a,Jc.a,[]),r.Bb(1073742336,Pf,Pf,[]),r.Bb(1073742336,Lf,Lf,[]),r.Bb(1073742336,i,i,[]),r.Bb(256,r.Z,!0,[]),r.Bb(256,Fo.d,{apiKey:"AIzaSyBrh2la_UWVSepIO-UCK21sILR27LP2LXk",authDomain:"cartasbar-ad70c.firebaseapp.com",databaseURL:"https://cartasbar-ad70c.firebaseio.com",projectId:"cartasbar-ad70c",storageBucket:"cartasbar-ad70c.appspot.com",messagingSenderId:"954510398095",appId:"1:954510398095:web:72650a996fdd376d38d6fa",measurementId:"G-W0WQTT3YS1"},[]),r.Bb(256,Fo.c,void 0,[]),r.Bb(256,Ic,"BrowserAnimations",[])])}));Object(r.S)(),pe().bootstrapModuleFactory(jf).catch((function(t){return console.error(t)}))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=(15&s)<<2|l>>6,h=63&l;u||(h=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,p.prototype.create),i}return r.__extends(e,t),e}(Error),p=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?v(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new d(i,s),l=0,c=Object.keys(r);l<c.length;l++){var h=c[l];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function v(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function g(t){return JSON.parse(t)}var m=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(l(o[0])||""),n=g(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},_=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^s&(u^l),o=1518500249):(i=s^u^l,o=1859775393):r<60?(i=s&u|l&(s|u),o=2400959708):(i=s^u^l,o=3395469782);var h=(a<<5|a>>>27)+i+c+o+n[r]&4294967295;c=l,l=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),b=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function w(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=p,e.FirebaseError=d,e.Sha1=_,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=l,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new b(t,e);return n.subscribe.bind(n)},e.decode=m,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=C,e.getUA=f,e.isAdmin=function(t){var e=m(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=m(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=m(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=m(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=g,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);